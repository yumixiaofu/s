(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["ModulePlugin~f71cff67"],{"62b6":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-row",[a("el-col",{attrs:{span:24}},[a("el-table",{attrs:{data:t.tableData}},[a("div",{attrs:{slot:"empty"},slot:"empty"},[!t.tableData.length&&t.tableLoading?a("span",[a("i",{staticClass:"el-icon-loading"}),t._v(" 正在加载 ... ")]):t._e(),t.tableData.length||t.tableLoading?t._e():a("span",[t._v("暂无数据")])]),a("el-table-column",{attrs:{prop:"id",label:"ID",width:"70",sortable:"",align:"center"}}),a("el-table-column",{attrs:{prop:"title",label:"插件名称",sortable:""}}),a("el-table-column",{attrs:{prop:"name",label:"标识",sortable:""}}),a("el-table-column",{attrs:{prop:"description",label:"描述",sortable:""}}),a("el-table-column",{attrs:{prop:"author",label:"作者",sortable:""}}),a("el-table-column",{attrs:{prop:"version",label:"版本",sortable:""}}),a("el-table-column",{attrs:{prop:"status",label:"状态",sortable:"",width:"80",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t._f("statusFilter")(e.row.status)))])]}}])}),a("el-table-column",{attrs:{label:"操作",width:"135",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[3===n.status?a("el-button",{staticClass:"span-success",attrs:{size:"small",type:"text"},on:{click:function(e){return t.plInstallHandleClick(n.name)}}},[t._v("安装 ")]):t._e(),3!==n.status?a("el-button",{staticClass:"span-warning",attrs:{size:"small",type:"text"},on:{click:function(e){return t.plUnInstallHandleClick(n.id)}}},[t._v("卸载 ")]):t._e(),0===n.status?a("el-button",{staticClass:"span-primary",attrs:{size:"small",type:"text"},on:{click:function(e){return t.plToggleHandleClick(n.id,"enable")}}},[t._v("启用")]):t._e(),1===n.status?a("el-button",{staticClass:"span-danger",attrs:{size:"small",type:"text"},on:{click:function(e){return t.plToggleHandleClick(n.id,"disable")}}},[t._v("禁用")]):t._e(),3!==n.status?a("el-button",{staticClass:"span-info",attrs:{size:"small",type:"text"},on:{click:function(e){return t.plSettingHandleClick(n.id)}}},[t._v("配置 ")]):t._e()]}}])})],1)],1)],1),a("el-dialog",{attrs:{title:t.plInfo.title,visible:t.dialogVisible,width:"35%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("el-form",{ref:"configForm",attrs:{"label-width":"150px"}},t._l(t.plInfo.config,(function(e,n){return a("el-form-item",{key:n,attrs:{label:e.title,prop:""}},["text"===e.type?a("el-input",{style:{width:"100%"},attrs:{size:"small",type:"textarea",rows:1,placeholder:"请输入"+e.title,clearable:""},model:{value:e.value,callback:function(a){t.$set(e,"value",a)},expression:"item.value"}}):t._e(),"select"===e.type?a("el-select",{style:{width:"100%"},attrs:{size:"small",placeholder:"请选择"+e.title,clearable:""},model:{value:e.value,callback:function(a){t.$set(e,"value",a)},expression:"item.value"}},t._l(e.options,(function(t,e){return a("el-option",{key:e,attrs:{label:t,value:e}})})),1):t._e(),"radio"===e.type?a("el-radio",{model:{value:e.value,callback:function(a){t.$set(e,"value",a)},expression:"item.value"}},[t._v("备选项")]):t._e(),"checkbox"===e.type?a("el-checkbox",{model:{value:e.value,callback:function(a){t.$set(e,"value",a)},expression:"item.value"}},[t._v("备选项")]):t._e()],1)})),1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(e){t.dialogVisible=!1}}},[t._v("取消")]),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.saveHandleClick}},[t._v("保存更改")])],1)],1)],1)},l=[],s=(a("96cf"),a("1da1")),r=a("a27e");function i(t){return Object(r["a"])({url:"pl_index/".concat(t,"/")})}function o(t){return Object(r["a"])({url:"pl_install",method:"post",data:t})}function c(t){return Object(r["a"])({url:"pl_toggle",method:"post",data:t})}function u(t){return Object(r["a"])({url:"pl_setting/addons/".concat(t)})}function p(t){return Object(r["a"])({url:"pl_setting_post",method:"post",data:t})}function d(t){return Object(r["a"])({url:"pl_uninstall",method:"post",data:t})}var m={metaInfo:{title:"模块插件"},data:function(){return{tableLoading:!1,moduleName:"addons",tableData:[],dialogVisible:!1,plInfo:{}}},filters:{statusFilter:function(t){return 0===t?"禁用":1===t?"启用":3===t?"未安装":void 0}},methods:{getData:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var a,n,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.tableLoading=!0,e.next=3,i(t.moduleName);case 3:if(a=e.sent,n=a.data,200===n.status)for(l in t.tableData=[],n.data)t.tableData.push(n.data[l]);else t.$message.error(n.msg);t.tableLoading=!1;case 7:case"end":return e.stop()}}),e)})))()},plInstallHandleClick:function(t){var e=this;this.$confirm("确认安装?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(s["a"])(regeneratorRuntime.mark((function a(){var n,l;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,o({name:t,module:"addons"});case 2:n=a.sent,l=n.data,200===l.status?(e.getData(),e.$message.success(l.msg)):e.$message.warning(l.msg);case 5:case"end":return a.stop()}}),a)})))).catch((function(){}))},plUnInstallHandleClick:function(t){var e=this;this.$confirm("确认卸载?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(s["a"])(regeneratorRuntime.mark((function a(){var n,l;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,d({id:t});case 2:n=a.sent,l=n.data,200===l.status?(e.getData(),e.$message.success(l.msg)):e.$message.warning(l.msg);case 5:case"end":return a.stop()}}),a)})))).catch((function(){}))},plToggleHandleClick:function(t,e){var a=this,n={};n.id=t,n[e]=e,this.$confirm("确认启用/禁用?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(s["a"])(regeneratorRuntime.mark((function t(){var e,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,c(n);case 2:e=t.sent,l=e.data,200===l.status?(a.getData(),a.$message.success(l.msg)):a.$message.warning(l.msg);case 5:case"end":return t.stop()}}),t)})))).catch((function(){}))},plSettingHandleClick:function(t){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var n,l;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,u(t);case 2:n=a.sent,l=n.data,200===l.status?e.plInfo=l.data.data:e.$message.error(l.msg),e.dialogVisible=!0;case 6:case"end":return a.stop()}}),a)})))()},saveHandleClick:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var a,n,l,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:for(n in a={id:t.plInfo.id,module:"addons",config:[]},t.plInfo.config)a.config[n]=t.plInfo.config[n].value;return e.next=4,p(t.$qs.stringify(a));case 4:l=e.sent,s=l.data,200!==s.status?t.$message.error(s.msg):(t.$message.success(s.msg),t.dialogVisible=!1);case 7:case"end":return e.stop()}}),e)})))()}},created:function(){this.getData()},mounted:function(){}},f=m,g=a("2877"),b=Object(g["a"])(f,n,l,!1,null,"0e34937a",null);e["default"]=b.exports}}]);