(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["CustomerProductInnerpage~852bc656"],{"0f80":function(e,t,a){"use strict";var s=a("1770"),r=a.n(s);r.a},1770:function(e,t,a){},"8d20":function(e,t,a){},a012:function(e,t,a){"use strict";var s=a("8d20"),r=a.n(s);r.a},dda3:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"inner"},[e.dataLoading?s("div",{staticClass:"tac",staticStyle:{"font-size":"14px"}},[s("i",{staticClass:"el-icon-loading"}),e._v(" 数据加载中, 请稍后... ")]):e._e(),e.hasProduct||e.dataLoading?e._e():s("div",{staticClass:"tac"},[s("div",{staticClass:"mb-20"},[e._v(e._s(e.noProductMsg))]),s("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-plus"},on:{click:e.creatOrderHandleClick}},[e._v("添加新订单")])],1),e.hasProduct&&!e.dataLoading?s("el-form",{ref:"elForm",staticStyle:{"margin-top":"-15px"},attrs:{inline:"","label-position":"top",model:e.formData,rules:e.rules,"label-width":"120px"}},[s("el-row",{attrs:{gutter:5}},[s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{xs:24,sm:9,md:4}},[s("el-row",{staticStyle:{height:"60px!important",display:"flex","align-items":"center"}},[s("el-select",{staticClass:"ml-10",class:e.proColor,style:{width:"200px"},attrs:{size:"small",clearable:""},on:{change:e.proSelectChange},model:{value:e.hid,callback:function(t){e.hid=t},expression:"hid"}},e._l(e.hostOptions,(function(t,a){return s("el-option",{key:"host"+a,attrs:{label:"#"+t.id+"-"+t.name,value:t.id}},[s("el-row",[s("el-col",{style:{color:t.domainstatus.color||""},attrs:{span:12}},[e._v(" #"+e._s(t.id)+"-"+e._s(t.name))]),s("el-col",{staticClass:"tar second-row",attrs:{span:12}},[e._v(e._s(t.type))])],1)],1)})),1)],1)],1),"dcim"===e.productType&&"bms"!==e.product.config_option1?s("el-col",{staticClass:"reinstall",attrs:{xs:24,sm:9,md:9}},[100!==e.progress?s("div",{staticClass:"mr-10"},[e._v(e._s(e.operationName)+": ")]):e._e(),"重装系统"===e.operationName&&100!==e.progress?s("div",{staticClass:"mr-20"},[e._v(" "+e._s(e.reinstallOsName||e.reInstallOsInfo.host_data.os))]):e._e(),"救援系统"===e.operationName?s("div",{staticClass:"mr-20",staticStyle:{"max-width":"300px"}},[s("el-tooltip",{attrs:{placement:"top",effect:"light"}},[s("div",{attrs:{slot:"content"},slot:"content"},[e._v(e._s(e.operationStepInfo))]),s("span",[e._v(e._s(e.operationStepInfo))])]),100===e.progress?s("i",{staticClass:"el-icon-circle-close ml-10",staticStyle:{color:"red",cursor:"pointer"},on:{click:e.cancelTask}}):e._e()],1):e._e(),"破解密码"===e.operationName&&100!==e.progress?s("div",{staticClass:"mr-20"},[e._v(e._s(e.operationStepInfo))]):e._e(),100!==e.progress?s("div",{staticClass:"mr-20",staticStyle:{width:"200px"}},[s("el-row",{attrs:{gutter:10}},[s("el-col",{attrs:{span:20}},[s("el-progress",{attrs:{percentage:e.progress,"stroke-width":16,"show-text":!1,color:"#66c33a"}})],1),s("el-col",{attrs:{span:4}},[100!==e.progress?s("i",{staticClass:"el-icon-circle-close",staticStyle:{color:"red",cursor:"pointer"},on:{click:e.cancelHandleClick}}):e._e(),100===e.progress?s("i",{staticClass:"el-icon-success",staticStyle:{color:"#66c33a"}}):e._e()])],1)],1):e._e(),e.pageData.module_power_status&&!e.powerLoading?s("div",{staticClass:"ml-20"},["Suspended"===e.formData.domainstatus?s("img",{staticClass:"cursor-pointer",attrs:{src:a("265e"),alt:""}}):s("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:e.powerInfo.msg,placement:"top"}},["on"===e.powerStatus?s("img",{staticClass:"cursor-pointer",attrs:{src:a("a7ff"),alt:""},on:{click:e.getPowerStatus}}):"off"===e.powerStatus?s("img",{staticClass:"cursor-pointer",attrs:{src:a("5a57"),alt:""},on:{click:e.getPowerStatus}}):"error"===e.powerStatus?s("img",{staticClass:"cursor-pointer",attrs:{src:a("b948"),alt:""},on:{click:e.getPowerStatus}}):"not_support"===e.powerStatus||"timeout"===e.powerStatus||"waiting"===e.powerStatus?s("img",{staticClass:"cursor-pointer",attrs:{src:a("8802"),alt:""},on:{click:e.getPowerStatus}}):"unknow"===e.powerStatus?s("img",{staticClass:"cursor-pointer",attrs:{src:a("8e66"),alt:""},on:{click:e.getPowerStatus}}):"operation"===e.powerStatus?s("img",{staticClass:"cursor-pointer",attrs:{src:a("8802"),alt:""},on:{click:e.getPowerStatus}}):"cold_migrate"===e.powerStatus.status?s("i",{staticClass:"iconfont icon-shujuqianyi",staticStyle:{color:"#009944","font-size":"30px"},on:{click:e.getPowerStatus}}):"hot_migrate"===e.powerStatus.status?s("i",{staticClass:"iconfont icon-shujuqianyi",staticStyle:{color:"#ff6a00","font-size":"30px"},on:{click:e.getPowerStatus}}):s("img",{staticClass:"cursor-pointer",attrs:{src:a("8e66"),alt:""},on:{click:e.getPowerStatus}})])],1):e._e(),e.powerLoading?s("div",{staticClass:"ml-20"},[s("i",{staticClass:"el-icon-loading",staticStyle:{"font-size":"30px"}})]):e._e()]):s("el-col",{staticClass:"reinstall",attrs:{xs:24,sm:9,md:9}},[e.reinstallProgress?[s("el-popover",{attrs:{placement:"right",width:"400",trigger:"hover"}},[s("el-row",[[s("el-col",{attrs:{span:24}},[e._v("进度："+e._s(this.reinstallObj.progress?this.reinstallObj.progress+"%":""))]),s("el-col",{attrs:{span:24}},[e._v("操作："+e._s(this.reinstallObj.info))]),s("el-col",{attrs:{span:24}},[e._v(e._s(this.reinstallObj.reinstall_msg))]),s("el-col",{attrs:{span:24}},[e._v("当前："+e._s(this.reinstallObj.step))]),s("el-button",{staticStyle:{"margin-top":"5px"},attrs:{type:"primary",size:"mini"},on:{click:e.productCancelTask}},[e._v(" "+e._s(this.reinstallObj.cancel||"取消重装/破解")+" ")])]],2),s("span",{staticStyle:{"font-size":"12px"},attrs:{slot:"reference"},slot:"reference"},[e._v(" 显示详情 ")])],1),s("el-col",{staticClass:"mr-10",attrs:{span:10}},[s("el-progress",{attrs:{"stroke-width":16,"show-text":!1,color:"#66c33a",percentage:parseInt(e.reinstallObj.progress)}})],1)]:e._e(),e.pageData.module_power_status&&!e.powerLoading?s("div",{staticClass:"mr-10"},["Suspended"===e.formData.domainstatus?s("img",{staticClass:"cursor-pointer",attrs:{src:a("265e"),alt:""}}):s("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:e.powerInfo.des,placement:"top"}},["on"===e.powerStatus?s("img",{staticClass:"cursor-pointer",attrs:{src:a("a7ff"),alt:""},on:{click:e.getStatus}}):"off"===e.powerStatus?s("img",{staticClass:"cursor-pointer",attrs:{src:a("5a57"),alt:""},on:{click:e.getStatus}}):"error"===e.powerStatus?s("img",{staticClass:"cursor-pointer",attrs:{src:a("b948"),alt:""},on:{click:e.getStatus}}):"not_support"===e.powerStatus||"timeout"===e.powerStatus||"waiting"===e.powerStatus?s("img",{staticClass:"cursor-pointer",attrs:{src:a("8802"),alt:""},on:{click:e.getStatus}}):"unknow"===e.powerStatus?s("img",{staticClass:"cursor-pointer",attrs:{src:a("8e66"),alt:""},on:{click:e.getStatus}}):"operation"===e.powerStatus?s("img",{staticClass:"cursor-pointer",attrs:{src:a("8802"),alt:""},on:{click:e.getStatus}}):"suspend"===e.powerStatus?s("img",{staticClass:"cursor-pointer",attrs:{src:a("265e"),alt:""},on:{click:e.getStatus}}):"process"===e.powerStatus?s("i",{staticClass:"el-icon-loading",staticStyle:{"font-size":"30px"},on:{click:e.getStatus}}):"cold_migrate"===e.powerStatus?s("i",{staticClass:"iconfont icon-shujuqianyi",staticStyle:{color:"#009944","font-size":"30px"},on:{click:e.getStatus}}):"hot_migrate"===e.powerStatus?s("i",{staticClass:"iconfont icon-shujuqianyi",staticStyle:{color:"#ff6a00","font-size":"30px"},on:{click:e.getStatus}}):s("img",{staticClass:"cursor-pointer",attrs:{src:a("8e66"),alt:""},on:{click:e.getStatus}})])],1):e._e(),e.powerLoading&&(e.formData.serverid||"zjmf_api"===e.product.api_type)?s("el-tooltip",{staticClass:"mr-10",attrs:{effect:"light",content:e.powerInfo.des||"加载中",placement:"top"}},[s("i",{staticClass:"el-icon-loading",staticStyle:{"font-size":"30px"}})]):e._e()],2)],1),[s("el-col",{staticClass:"mt-10",attrs:{span:24}},[s("div",{staticClass:"wrapper__from h40 mb-20",attrs:{"data-title":"产品"}},[s("div",{staticClass:"product_btnGroup"},[s("el-button",{attrs:{size:"small"},on:{click:e.searchWork}},[e._v("工单")]),s("el-button",{attrs:{size:"small"},on:{click:function(t){e.sendMsgVisible=!0}}},[e._v("发送信息")]),s("el-button",{attrs:{size:"small"},on:{click:function(t){e.diaVisible=!0}}},[e._v("转移产品/服务")])],1),s("el-row",{staticClass:"max-1200 ml-23"},[s("el-form-item",{staticClass:"fixSelcet",attrs:{label:"订单#",prop:"orderid"}},[s("el-input",{staticClass:"w-fixed mr-5",attrs:{size:"small",disabled:""},model:{value:e.formData.orderid,callback:function(t){e.$set(e.formData,"orderid",t)},expression:"formData.orderid"}},[s("el-button",{style:{backgroundColor:"#2e53e9",color:"#fff"},attrs:{slot:"append",size:"small",type:"primary"},on:{click:e.showOrderDetail},slot:"append"},[e._v("查看订单")])],1)],1),s("el-form-item",{attrs:{label:"IP地址",prop:"dedicatedip"}},[s("el-input",{style:{width:"125px"},attrs:{size:"small",placeholder:"请输入独立IP地址"},model:{value:e.formData.dedicatedip,callback:function(t){e.$set(e.formData,"dedicatedip",t)},expression:"formData.dedicatedip"}}),s("span",{staticStyle:{margin:"0 5px"}},[e._v(":")]),s("el-input-number",{staticClass:"mr-5",staticStyle:{width:"67px"},attrs:{size:"small",controls:!1,precision:0},model:{value:e.formData.port,callback:function(t){e.$set(e.formData,"port",t)},expression:"formData.port"}}),"dcim"===e.productType&&"bms"!==e.product.config_option1&&"无"!==e.dcimId?s("el-tooltip",{attrs:{content:e.os,placement:"top",effect:"light"}},[e.osSvg?s("img",{staticStyle:{width:"36px",height:"36px",cursor:"pointer"},attrs:{src:"/upload/common/system/"+e.osSvg+".svg",alt:""}}):e._e()]):s("div",{staticStyle:{display:"flex"}},[e.formData.serverid||"zjmf_api"===e.product.api_type?s("el-tooltip",{attrs:{content:e.os,placement:"top",effect:"light"}},[e.osSvg?s("img",{staticStyle:{width:"36px",height:"36px",cursor:"pointer"},attrs:{src:"/upload/common/system/"+e.osSvg+".svg",alt:""}}):e._e()]):e._e()],1)],1),s("el-form-item",{attrs:{label:"用户名",prop:"username"}},[s("el-input",{style:{width:"200px"},attrs:{size:"small",placeholder:"请输入姓名",clearable:""},model:{value:e.formData.username,callback:function(t){e.$set(e.formData,"username",t)},expression:"formData.username"}})],1),s("el-form-item",{attrs:{label:"商品/服务",prop:"productid"}},[s("el-select",{style:{width:"200px"},attrs:{size:"small",placeholder:"请选择产品",clearable:""},model:{value:e.formData.productid,callback:function(t){e.$set(e.formData,"productid",t)},expression:"formData.productid"}},e._l(e.productidOptions,(function(t){return s("el-option-group",{key:"group"+t.id,attrs:{label:t.name}},e._l(t.product,(function(t,a){return s("el-option",{key:"pro"+a,attrs:{label:t.name,value:t.id}},[s("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[s("span",[e._v(e._s(t.name))]),s("span",{staticClass:"second-row"},[e._v(e._s(t.type))])])])})),1)})),1)],1),[e.isManual?s("el-form-item",{attrs:{label:"供应商"}},[s("el-input",{attrs:{size:"small",disabled:""},model:{value:e.manualInfo.name,callback:function(t){e.$set(e.manualInfo,"name",t)},expression:"manualInfo.name"}})],1):s("el-form-item",{attrs:{label:"接口",prop:"serverid"}},["zjmf_api"===e.product.api_type?s("el-input",{style:{width:"200px"},attrs:{size:"small",disabled:""},model:{value:e.zjmf_api.name,callback:function(t){e.$set(e.zjmf_api,"name",t)},expression:"zjmf_api.name"}}):s("el-select",{style:{width:"200px"},attrs:{size:"small",clearable:""},model:{value:e.formData.serverid,callback:function(t){e.$set(e.formData,"serverid",t)},expression:"formData.serverid"}},e._l(e.serverOptions,(function(e,t){return s("el-option",{key:"server"+t,attrs:{label:e.name,value:e.id}})})),1)],1)],s("el-form-item",{attrs:{label:"密码",prop:"password"}},[s("el-input",{style:{width:"200px"},attrs:{size:"small",placeholder:"请输入主机密码",clearable:""},model:{value:e.formData.password,callback:function(t){e.$set(e.formData,"password",t)},expression:"formData.password"}})],1),s("el-form-item",{attrs:{label:"主机名",prop:"domain"}},[s("el-input",{style:{width:"200px"},attrs:{size:"small",placeholder:"请输入主机名",clearable:""},model:{value:e.formData.domain,callback:function(t){e.$set(e.formData,"domain",t)},expression:"formData.domain"}})],1),e.isManual?[s("el-form-item",{attrs:{label:"产品ID"}},[s("el-input",{attrs:{size:"small",readonly:""},model:{value:e.manualProductId,callback:function(t){e.manualProductId=t},expression:"manualProductId"}}),s("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.openDistribution}},[e._v(" "+e._s(e.manualProductId?"管理":"分配")+" ")])],1)]:e._e(),"dcim"===e.productType&&"zjmf_api"!==e.product.api_type?[s("el-form-item",{attrs:{label:"裸金属ID"}},[s("el-input",{staticClass:"mr-10",staticStyle:{width:"68px"},attrs:{size:"small"},model:{value:e.dcimId,callback:function(t){e.dcimId=t},expression:"dcimId"}}),"无"===e.dcimId&&"bms"!==e.product.config_option1?s("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){e.dcimAssignDialog=!0}}},[e._v("分配")]):e._e(),"无"!==e.dcimId?s("div",[s("el-button",{attrs:{size:"small",type:"primary"}},[s("a",{staticClass:"dcim_a",style:{color:"#fff!important"},attrs:{href:e.dcim?e.dcim.url:"",target:"blank"}},[e._v("管理")])]),"bms"!==e.product.config_option1?s("el-button",{attrs:{size:"small"},on:{click:e.setFree}},[s("a",{staticClass:"dcim_a"},[e._v("空闲")])]):e._e()],1):e._e()],1)]:e._e(),"dcimcloud"===e.productType||"zjmf_api"===e.product.api_type?[s("el-form-item",{staticClass:"fixSelcet",attrs:{label:"zjmf_api"===e.product.api_type?"上游产品ID":"云主机ID"}},[s("el-input",{staticClass:"w-fixed mr-5",staticStyle:{width:"68px"},attrs:{size:"small"},model:{value:e.dcimId,callback:function(t){e.dcimId=t},expression:"dcimId"}},["zjmf_api"!==e.product.api_type&&"无"!==e.dcimId?s("el-button",{style:{backgroundColor:"#2e53e9"},attrs:{slot:"append",size:"small",type:"primary"},slot:"append"},[s("a",{staticClass:"dcim_a",style:{color:"#fff!important"},attrs:{href:e.dcim?e.dcim.url:"",target:"blank"}},[e._v("管理")])]):e._e()],1)],1)]:e._e(),"dcim"===e.productType&&"bms"!==e.product.config_option1?[s("el-form-item",{attrs:{label:"接口命令"}},[s("div",["on"===e.dcim.auth.create?s("el-button",{attrs:{size:"small",loading:e.createLoading},on:{click:function(t){return e.defaultHandleClick("create")}}},[e._v("开通")]):e._e(),"on"===e.dcim.auth.suspend?s("el-button",{attrs:{size:"small"},on:{click:function(t){e.pauseDialogVisible=!0}}},[e._v("暂停 ")]):e._e(),"on"===e.dcim.auth.suspend?s("el-button",{attrs:{size:"small",loading:e.unsuspendLoading},on:{click:function(t){return e.defaultHandleClick("unsuspend")}}},[e._v("解除暂停")]):e._e(),"on"===e.dcim.auth.terminate?s("el-button",{attrs:{size:"small",loading:e.terminateLoading,type:"danger"},on:{click:function(t){return e.defaultHandleClick("terminate")}}},[e._v("删除 ")]):e._e(),"on"===e.dcim.auth.on?s("el-button",{attrs:{size:"small",loading:e.onLoading},on:{click:e.onHandleClick}},[e._v(" 开机 ")]):e._e(),"on"===e.dcim.auth.off?s("el-button",{attrs:{size:"small",loading:e.offLoading},on:{click:e.offHandleClick}},[e._v(" 关机")]):e._e(),"on"===e.dcim.auth.reboot?s("el-button",{attrs:{size:"small",loading:e.rebootLoading},on:{click:e.rebootHandleClick}},[e._v("重启")]):e._e(),"on"===e.dcim.auth.bmc?s("el-button",{attrs:{size:"small",loading:e.bmcLoading},on:{click:e.bmcHandleClick}},[e._v(" 重置bmc")]):e._e(),"on"===e.dcim.auth.kvm?s("el-button",{attrs:{size:"small",loading:e.kvmLoading},on:{click:e.kvmHandleClick}},[e._v(" kvm")]):e._e(),"on"===e.dcim.auth.ikvm?s("el-button",{attrs:{size:"small",loading:e.ikvmLoading},on:{click:e.ikvmHandleClick}},[e._v("ikvm")]):e._e(),"on"===e.dcim.auth.vnc?s("el-button",{attrs:{size:"small"},on:{click:e.vncHandleClick}},[e._v("vnc")]):e._e(),"on"===e.dcim.auth.reinstall?s("el-button",{attrs:{size:"small"},on:{click:e.reinstallHandleClick}},[e._v("重装系统 ")]):e._e(),"on"===e.dcim.auth.rescue?s("el-button",{attrs:{size:"small"},on:{click:e.rescueHandleClick}},[e._v("救援系统 ")]):e._e(),"on"===e.dcim.auth.crack_pass?s("el-button",{attrs:{size:"small"},on:{click:e.crackPassHandleClick}},[e._v("破解密码 ")]):e._e()],1)])]:e._e(),"dcim"!==e.productType&&e.module_buttons.length||"dcim"===e.productType&&"bms"===e.product.config_option1?[s("el-form-item",{attrs:{label:"接口命令"}},[s("div",e._l(e.module_buttons,(function(t,a){return s("el-button",{key:a,attrs:{size:"small",loading:t.loading,type:"terminate"===t.func?"danger":""},on:{click:function(a){return e.moduleButtonClick(t)}}},[e._v(e._s(t.name))])})),1)])]:e._e(),s("el-form-item",{attrs:{label:"其他IP",prop:"assignedips"}},[s("el-input",{style:{width:e.areaWidth},attrs:{size:"small",type:"textarea",placeholder:"请用英文半角逗号分隔",autosize:{minRows:1,maxRows:4}},model:{value:e.formData.assignedips,callback:function(t){e.$set(e.formData,"assignedips",t)},expression:"formData.assignedips"}})],1),s("el-form-item",{attrs:{label:"客户备注",prop:"remark"}},[s("el-input",{style:{width:e.areaWidth},attrs:{size:"small",disabled:"",type:"textarea",autosize:{minRows:1,maxRows:4}},model:{value:e.formData.remark,callback:function(t){e.$set(e.formData,"remark",t)},expression:"formData.remark"}})],1),s("el-form-item",{attrs:{label:"管理员备注",prop:"notes"}},[s("el-input",{style:{width:e.areaWidth},attrs:{size:"small",type:"textarea",placeholder:"请输入管理员备注",autosize:{minRows:1,maxRows:4}},model:{value:e.formData.notes,callback:function(t){e.$set(e.formData,"notes",t)},expression:"formData.notes"}})],1)],2)],1)])],[s("el-col",{attrs:{span:24}},[s("div",{staticClass:"wrapper__from h40 mb-20",attrs:{"data-title":"财务"}},[s("div",{staticClass:"product_btnGroup"},[s("el-button",{attrs:{size:"small"},on:{click:e.searchFlow}},[e._v("交易流水")]),s("el-button",{attrs:{size:"small"},on:{click:e.searchBill}},[e._v("账单")])],1),s("el-row",{staticClass:"max-1200 ml-23"},[s("el-form-item",{attrs:{label:"订购时间",prop:"regdate"}},[s("el-date-picker",{style:{width:"200px"},attrs:{type:"datetime",size:"small","value-format":"timestamp",placeholder:"请选择订购时间",clearable:""},model:{value:e.regdateCus,callback:function(t){e.regdateCus=t},expression:"regdateCus"}}),"zjmf_api"===e.product.api_type&&e.product.upstream_pid>0?s("span",{staticClass:"ml-10"},[e._v(e._s(e.upstream_host.regdate?e.$moment(1e3*e.upstream_host.regdate).format("YYYY-MM-DD"):""))]):e._e()],1),s("el-form-item",{staticClass:"fixSelcet",attrs:{label:"首付金额",prop:"firstpaymentamount"}},[s("el-input-number",{style:{width:"200px"},attrs:{size:"small",controls:!1,precision:2,placeholder:"请输入首付金额",clearable:""},model:{value:e.formData.firstpaymentamount,callback:function(t){e.$set(e.formData,"firstpaymentamount",t)},expression:"formData.firstpaymentamount"}}),"zjmf_api"===e.product.api_type&&e.product.upstream_pid>0?s("span",{staticClass:"ml-10"},[e._v(e._s(e.upstream_host.firstpaymentamount_desc))]):e._e()],1),s("el-form-item",{attrs:{label:"付款方式",prop:"payment"}},[s("el-select",{style:{width:"200px"},attrs:{size:"small",placeholder:"请选择支付方式",clearable:""},model:{value:e.formData.payment,callback:function(t){e.$set(e.formData,"payment",t)},expression:"formData.payment"}},e._l(e.paymentOptions,(function(e,t){return s("el-option",{key:"payment"+t,attrs:{label:e.title,value:e.name,disabled:e.disabled}})})),1),"zjmf_api"===e.product.api_type&&e.product.upstream_pid>0?s("span",{staticClass:"ml-10"},[e._v(e._s(e.upstream_host.payment_zh))]):e._e()],1),s("el-form-item",{attrs:{label:"到期时间",prop:"nextduedate"}},["free"!==e.pageData.host_data.billingcycle&&"onetime"!==e.pageData.host_data.billingcycle?s("el-date-picker",{style:{width:"200px"},attrs:{type:"datetime",size:"small","value-format":"timestamp",placeholder:"请输入下次到期时间",clearable:""},model:{value:e.nextduedateCus,callback:function(t){e.nextduedateCus=t},expression:"nextduedateCus"}}):e._e(),"free"===e.pageData.host_data.billingcycle||"onetime"===e.pageData.host_data.billingcycle?s("span",[e._v("N/A")]):e._e(),"zjmf_api"===e.product.api_type&&e.product.upstream_pid>0?s("span",{staticClass:"ml-10"},[e._v(e._s(e.upstream_host.nextduedate?e.$moment(1e3*e.upstream_host.nextduedate).format("YYYY-MM-DD"):""))]):e._e()],1),s("el-form-item",{staticClass:"fixSelcet",attrs:{label:"续费金额",prop:"amount"}},[s("el-input-number",{style:{width:"200px"},attrs:{size:"small",controls:!1,precision:2,placeholder:"请输入续费金额",clearable:""},model:{value:e.formData.amount,callback:function(t){e.$set(e.formData,"amount",t)},expression:"formData.amount"}}),"zjmf_api"===e.product.api_type&&e.product.upstream_pid>0?s("span",{staticClass:"ml-10"},[e._v(e._s(e.upstream_host.amount_desc))]):e._e()],1),s("el-form-item",{staticClass:"fixSelcet",attrs:{label:" ",prop:"initiative_renew"}},[s("el-switch",{attrs:{"inactive-text":"余额自动续费","active-value":1,"inactive-value":0},model:{value:e.formData.initiative_renew,callback:function(t){e.$set(e.formData,"initiative_renew",t)},expression:"formData.initiative_renew"}}),s("div",{staticClass:"wrapper_div"})],1),s("el-form-item",{staticClass:"fixSelcet",attrs:{label:"付款周期",prop:"billingcycle"}},[s("el-select",{staticClass:"mr-5",style:{width:" 140px"},attrs:{size:"small",placeholder:"请选择付款周期",clearable:""},on:{change:e.cycleChange},model:{value:e.formData.billingcycle,callback:function(t){e.$set(e.formData,"billingcycle",t)},expression:"formData.billingcycle"}},e._l(e.billingcycleOptions,(function(e,t){return s("el-option",{key:"cycle"+t,attrs:{label:e.billingcycle_zh,value:e.billingcycle}})})),1),e.renewShow?s("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.renewHandleClick}},[e._v("续费")]):e._e(),"zjmf_api"===e.product.api_type&&e.product.upstream_pid>0?s("span",{staticClass:"ml-10"},[e._v(e._s(e.upstream_host.billingcycle_desc))]):e._e()],1),s("el-form-item",{attrs:{label:"状态",prop:"domainstatus"}},[s("el-select",{class:e.formData.domainstatus,style:{width:"200px"},attrs:{size:"small",placeholder:"请选择",clearable:""},model:{value:e.formData.domainstatus,callback:function(t){e.$set(e.formData,"domainstatus",t)},expression:"formData.domainstatus"}},e._l(e.domainstatusOptions,(function(e,t){return s("el-option",{key:"domainstatus"+t,style:{color:e.color},attrs:{label:e.name,value:t}})})),1),"Suspended"===e.reInstallOsInfo.host_data.domainstatus?s("span",{staticClass:"over_hidden pl-10",class:e.formData.domainstatus,staticStyle:{height:"36px","white-space":"nowrap","text-overflow":"ellipsis"}},[e._v(" "+e._s(e.reInstallOsInfo.host_data.suspendreason)+" ")]):e._e(),"zjmf_api"===e.product.api_type&&e.product.upstream_pid>0?s("span",{staticClass:"ml-10"},[e._v(e._s(e.upstream_host.domainstatus_desc))]):e._e()],1),s("el-form-item",{attrs:{label:"优惠码",prop:"promoid"}},[s("el-select",{style:{width:"200px"},attrs:{size:"small",placeholder:"请选择优惠码",clearable:""},model:{value:e.formData.promoid,callback:function(t){e.$set(e.formData,"promoid",t)},expression:"formData.promoid"}},e._l(e.promoidOptions,(function(t,a){return s("el-option-group",{key:"promoGroup"+a,attrs:{label:t.promo_codeGroupName}},e._l(t.child,(function(e,t){return s("el-option",{key:"promo"+t,attrs:{label:e.promo_desc,value:e.id}})})),1)})),1),"zjmf_api"===e.product.api_type&&e.product.upstream_pid>0?s("span",{staticClass:"ml-10"},[e._v(e._s(e.upstream_host.promo_code))]):e._e()],1)],1)],1)])],e.configArray.length?[s("el-col",{attrs:{span:24}},[s("div",{staticClass:"wrapper__from mb-10",attrs:{"data-title":"产品配置"}},[s("el-row",{staticClass:"max-1200 ml-23"},[e._l(e.configArray,(function(t,a){return[s("el-form-item",{key:"configItem"+a,attrs:{label:t.option_name}},[1===t.option_type||6===t.option_type||8===t.option_type||10===t.option_type||13===t.option_type?s("el-select",{style:{width:"200px"},attrs:{size:"small",clearable:""},on:{change:function(t){e.applyInterfaceDis=!1}},model:{value:t.option_value,callback:function(a){e.$set(t,"option_value",a)},expression:"configItem.option_value"}},e._l(t.sub,(function(e,t){return s("el-option",{key:"Dropdown"+t,attrs:{label:e.show_pricing,value:e.id}})})),1):e._e(),s("div",{directives:[{name:"show",rawName:"v-show",value:2===t.option_type,expression:"configItem.option_type === 2"}]},e._l(t.sub,(function(a,r){return s("el-radio",{key:"Radio"+r,attrs:{label:a.id},on:{change:function(t){e.applyInterfaceDis=!1}},model:{value:t.option_value,callback:function(a){e.$set(t,"option_value",a)},expression:"configItem.option_value"}},[e._v(" "+e._s(a.show_pricing)+" ")])})),1),e._l(t.sub,(function(a,r){return s("el-checkbox",{directives:[{name:"show",rawName:"v-show",value:3===t.option_type,expression:"configItem.option_type === 3"}],key:"yes/no"+r,attrs:{"true-label":a.id,"false-label":void 0},on:{change:function(t){e.applyInterfaceDis=!1}},model:{value:t.option_value,callback:function(a){e.$set(t,"option_value",a)},expression:"configItem.option_value"}},[e._v(e._s(a.show_pricing))])})),[4,7,9,11,14,15,16,17,18,19].includes(t.option_type)?s("el-slider",{staticStyle:{width:"90px"},attrs:{min:t.qty_minimum,max:t.qty_maximum,disabled:t.qty_minimum===t.qty_maximum},on:{change:function(t){e.applyInterfaceDis=!1}},model:{value:t.option_value,callback:function(a){e.$set(t,"option_value",a)},expression:"configItem.option_value"}}):e._e(),[4,7,9,11,14,15,16,17,18,19].includes(t.option_type)?s("el-input-number",{staticClass:"ml-10",style:{width:"100px"},attrs:{size:"mini",min:t.qty_minimum,max:t.qty_maximum,controls:!0,precision:0,disabled:t.qty_minimum===t.qty_maximum},on:{change:function(t){e.applyInterfaceDis=!1}},model:{value:t.option_value,callback:function(a){e.$set(t,"option_value",a)},expression:"configItem.option_value"}}):e._e(),5===t.option_type||12===t.option_type?s("el-cascader",{style:{width:"200px"},attrs:{size:"small",options:t.sub,props:{expandTrigger:"hover"}},on:{change:function(t){e.applyInterfaceDis=!1}},model:{value:t.option_value,callback:function(a){e.$set(t,"option_value",a)},expression:"configItem.option_value"}}):e._e()],2)]}))],2),"Active"===e.formData.domainstatus&&e.reInstallOsInfo.module_upgrade?s("el-row",{staticClass:"ml-23 mb-20"},[s("el-button",{attrs:{size:"small",type:"primary",loading:e.submitLoading},on:{click:e.applyToInterface}},[e._v("应用至接口 ")])],1):e._e()],1)])]:e._e(),e.customList.length?s("el-col",{attrs:{span:24}},[s("div",{staticClass:"wrapper__from mb-10",attrs:{"data-title":"自定义字段"}},[s("el-row",{staticClass:"max-1200 ml-23"},[e._l(e.customList,(function(t,a){return[s("el-form-item",{key:"customFileds"+a,attrs:{label:t.fieldname,required:1===t.required}},["text"===t.fieldtype||"link"===t.fieldtype?s("el-input",{style:{width:"200px"},attrs:{size:"small",placeholder:t.description},model:{value:e.customForm[t.id],callback:function(a){e.$set(e.customForm,t.id,a)},expression:"customForm[item.id]"}}):"password"===t.fieldtype?s("el-input",{style:{width:"200px"},attrs:{size:"small","show-password":""},model:{value:e.customForm[t.id],callback:function(a){e.$set(e.customForm,t.id,a)},expression:"customForm[item.id]"}}):"dropdown"===t.fieldtype?s("el-select",{style:{width:"200px"},attrs:{size:"small",placeholder:t.description},model:{value:e.customForm[t.id],callback:function(a){e.$set(e.customForm,t.id,a)},expression:"customForm[item.id]"}},e._l(e.getCustomOption(t.fieldoptions),(function(e,t){return s("el-option",{key:"subItem"+t,attrs:{label:e,value:e}})})),1):"tickbox"===t.fieldtype?s("el-checkbox",{attrs:{"true-label":"true","false-label":"false"},model:{value:e.customForm[t.id],callback:function(a){e.$set(e.customForm,t.id,a)},expression:"customForm[item.id]"}}):s("el-input",{style:{width:"200px"},attrs:{size:"small",placeholder:t.description,type:"textarea",autosize:{minRows:3,maxRows:6}},model:{value:e.customForm[t.id],callback:function(a){e.$set(e.customForm,t.id,a)},expression:"customForm[item.id]"}})],1)]}))],2)],1)]):e._e()],2)],1):e._e(),s("div",{staticClass:"bottomOperation"},[s("el-col",{staticStyle:{width:"max-content",marginRight:"10px"}},[s("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.submitForm}},[e._v("保存更改")]),s("el-button",{attrs:{size:"small"},on:{click:e.cancel}},[e._v("取消更改")])],1),s("el-col",{staticStyle:{width:"max-content"}},[s("el-button",{staticClass:"mr-10",attrs:{size:"small",type:"danger",loading:e.delLoading},on:{click:e.del}},[e._v("删除记录")]),"dcim"===e.productType&&"bms"!==e.product.config_option1&&"on"===e.dcim.auth.terminate?s("el-button",{attrs:{size:"small",loading:e.terminateLoading,type:"danger"},on:{click:function(t){return e.defaultHandleClick("terminate")}}},[e._v("接口删除")]):e._e(),"dcim"!==e.productType&&e.module_buttons.length?s("span",e._l(e.module_buttons,(function(t,a){return s("el-button",{directives:[{name:"show",rawName:"v-show",value:"terminate"===t.func,expression:"moduleItem.func === 'terminate'"}],key:a,attrs:{size:"small",loading:t.loading,type:"terminate"===t.func?"danger":""},on:{click:function(a){return e.moduleButtonClick(t)}}},[e._v("接口删除 ")])})),1):e._e()],1)],1),s("el-dialog",e._g(e._b({attrs:{visible:e.diaVisible,title:"转移所有权",width:"500px"},on:{"update:visible":function(t){e.diaVisible=t},open:e.getClientList,close:e.onClose}},"el-dialog",e.$attrs,!1),e.$listeners),[s("el-form",{ref:"diaForm",attrs:{model:e.diaformData,rules:e.diarules,"label-width":"100px"}},[s("el-form-item",{attrs:{label:"客户",rules:{required:!0,message:"请选择客户",trigger:"blur"}}},[s("el-autocomplete",{style:{width:"100%"},attrs:{"trigger-on-focus":!0,size:"small","fetch-suggestions":e.querySearchAsync,placeholder:"请输入用户"},on:{input:e.clearUid,select:e.handleSelect},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.item;return[s("el-row",[s("el-col",{attrs:{span:24}},[s("span",{staticStyle:{"font-size":"14px"}},[e._v(e._s(a.username))]),s("span",[e._v(e._s(a.companyname?" ("+a.companyname+")":""))]),s("span",[e._v(e._s(a.id?" - #"+a.id:""))])]),s("el-col",{staticStyle:{"margin-top":"-10px"},attrs:{span:24}},[s("span",{staticStyle:{"font-size":"12px",color:"#999"}},[e._v(e._s(a.email&&a.phonenumber?a.email+" - ":a.email))]),s("span",{staticStyle:{"font-size":"12px",color:"#999"}},[e._v(e._s(a.phonenumber?""+a.phonenumber:""))])])],1)]}}]),model:{value:e.diaformData.username,callback:function(t){e.$set(e.diaformData,"username",t)},expression:"diaformData.username"}})],1)],1),s("div",{attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{size:"small"},on:{click:e.close}},[e._v("取消")]),s("el-button",{attrs:{size:"small",type:"primary",loading:e.submitLoading},on:{click:e.transferTop}},[e._v("确定")])],1)],1),s("el-dialog",{attrs:{title:"救援系统",visible:e.rescueDialogFormVisible,width:"500px"},on:{"update:visible":function(t){e.rescueDialogFormVisible=t}}},[s("el-form",{ref:"rescueFormRef",attrs:{model:e.rescueForm,"label-width":"80px"}},[s("el-form-item",{staticClass:"fixSelcet",attrs:{label:"操作系统"}},[s("el-select",{staticStyle:{width:"100%"},attrs:{size:"small",placeholder:"请选择操作系统"},model:{value:e.rescueForm.system,callback:function(t){e.$set(e.rescueForm,"system",t)},expression:"rescueForm.system"}},[s("el-option",{attrs:{label:"Linux",value:1}}),s("el-option",{attrs:{label:"Windows",value:2}})],1)],1)],1),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{size:"small"},on:{click:function(t){e.rescueDialogFormVisible=!1}}},[e._v("取 消")]),s("el-button",{attrs:{size:"small",type:"primary",loading:e.submitLoading},on:{click:e.rescueSubmit}},[e._v("确 定")])],1)],1),s("el-dialog",{attrs:{title:"重置密码",visible:e.isCrack,width:"600px",height:"600px"},on:{"update:visible":function(t){e.isCrack=t},closed:e.crackPassFunc}},[s("el-form",{ref:"crackPassObj",staticClass:"demo-reloadSystemData",attrs:{model:e.crackPassObj,rules:e.crackRules,"label-width":"95px"}},[s("el-form-item",{attrs:{label:""}},[s("span",[e._v("系统将会默认破解Administrator/root用户的密码")])]),s("el-form-item",{attrs:{label:"密码",prop:"password"}},[s("el-input",{attrs:{size:"small",type:"text",autocomplete:"off",clearable:""},model:{value:e.crackPassObj.password,callback:function(t){e.$set(e.crackPassObj,"password",t)},expression:"crackPassObj.password"}})],1),s("el-form-item",{attrs:{label:"破解其他"}},[s("el-checkbox-group",{model:{value:e.crackRest,callback:function(t){e.crackRest=t},expression:"crackRest"}},[s("el-checkbox",{attrs:{value:"1",label:"1"}},[e._v("选择后将会破解自定义的用户的密码")])],1)],1),s("el-form-item",{directives:[{name:"show",rawName:"v-show",value:0!==e.crackRest.length,expression:"crackRest.length === 0 ? false : true"}],attrs:{label:"自定义用户"}},[s("el-input",{attrs:{size:"small",type:"text",placeholder:"",autocomplete:"off",clearable:""},model:{value:e.crackPassObj.user,callback:function(t){e.$set(e.crackPassObj,"user",t)},expression:"crackPassObj.user"}})],1)],1),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{size:"small"},on:{click:function(t){e.isCrack=!1}}},[e._v("取 消")]),s("el-button",{attrs:{size:"small",type:"primary",loading:e.submitLoading},on:{click:e.crackSubmit}},[e._v("确 定")])],1)],1),s("el-dialog",{attrs:{title:"分配服务器",visible:e.dcimAssignDialog,width:"90%"},on:{"update:visible":function(t){e.dcimAssignDialog=t},opened:e.getDcimServerList,closed:e.dcimDialogClosed}},[s("el-row",{attrs:{gutter:10}},[s("el-col",{attrs:{span:3,offset:12}},[s("el-input",{attrs:{size:"small",placeholder:"请输入IP",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getDcimServerList(t)}},model:{value:e.search.search,callback:function(t){e.$set(e.search,"search",t)},expression:"search.search"}})],1),s("el-col",{attrs:{span:3}},[s("el-select",{style:{width:"100%"},attrs:{size:"small",clearable:"",placeholder:"按状态搜索"},model:{value:e.search.status,callback:function(t){e.$set(e.search,"status",t)},expression:"search.status"}},e._l(e.statusOptions,(function(e){return s("el-option",{key:e.value,style:{color:e.color},attrs:{label:e.label,value:e.value}})})),1)],1),s("el-col",{attrs:{span:3}},[s("el-select",{style:{width:"100%"},attrs:{size:"small",clearable:"",placeholder:"按分组搜索"},model:{value:e.search.group,callback:function(t){e.$set(e.search,"group",t)},expression:"search.group"}},e._l(e.server_groupOptions,(function(e){return s("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),s("el-col",{attrs:{span:3}},[s("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-search"},on:{click:e.getDcimServerList}},[e._v("搜索")])],1)],1),s("el-table",{staticClass:"mt-10",attrs:{data:e.dcimTableData,"max-height":"500"}},[s("el-table-column",{attrs:{prop:"id",label:"ID-标签"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[s("a",{staticClass:"dcim_a",attrs:{href:a.dcim_url,target:"blank"}},[e._v(e._s(a.id)+"-"+e._s(a.wltag))])]}}])}),s("el-table-column",{attrs:{prop:"typename",label:"型号"}}),s("el-table-column",{attrs:{prop:"ip_num",label:"IP(数量)"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[s("span",{directives:[{name:"show",rawName:"v-show",value:!a.ip.length,expression:"!row.ip.length"}]}),s("el-popover",{directives:[{name:"show",rawName:"v-show",value:a.ip.length,expression:"row.ip.length"}],attrs:{trigger:"hover",placement:"right",height:"600","popper-class":"mypopper"}},[s("table",{staticStyle:{"border-spacing":"0"}},[s("thead",[s("tr",[s("th",{staticClass:"popover_table_th1"},[e._v("IP")])])]),s("tbody",e._l(a.ip,(function(t,a){return s("tr",{key:a,staticClass:"popover_table_tr"},[s("td",{staticClass:"popover_table_th1"},[e._v(e._s(t.ipaddress))])])})),0)]),s("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[s("span",[e._v(e._s(a.mainip))]),s("span",{staticStyle:{color:"#409EFF"}},[e._v(e._s(1!==a.ip_num?"("+a.ip_num+")":""))])])])]}}])}),s("el-table-column",{attrs:{prop:"in_bw",label:"带宽"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[s("span",[e._v(e._s(parseInt(a.in_bw)||"0")+" / "+e._s(a.out_bw||"0Mbps"))])]}}])}),s("el-table-column",{attrs:{prop:"remarks",label:"备注"}}),s("el-table-column",{attrs:{prop:"status",label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[s("span",{style:{color:e.statusColor[a.status]}},[e._v(e._s(e._f("dcimStatusFilter")(a.status)))]),a.self?s("a",{staticClass:"dcim_a",attrs:{href:"#"},on:{click:function(t){return e.toInnerPage(a.uid,a.hostid)}}},[e._v(e._s(a.email?"("+a.email+")":""))]):e._e()]}}])}),s("el-table-column",{attrs:{prop:"group_name",label:"分组"}}),s("el-table-column",{attrs:{label:"操作",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[s("el-button",{attrs:{size:"small",type:"text",disabled:!["1","5"].includes(a.status)},on:{click:function(t){return e.assignHandleClick(a.id)}}},[e._v("分配 ")])]}}])})],1),s("el-pagination",{staticClass:"mt-10",attrs:{"current-page":e.search.page,"page-sizes":[10,15,20,25,50,100],"page-size":e.search.limit,total:e.total,layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){return e.$set(e.search,"page",t)},"update:current-page":function(t){return e.$set(e.search,"page",t)},"update:pageSize":function(t){return e.$set(e.search,"limit",t)},"update:page-size":function(t){return e.$set(e.search,"limit",t)}}})],1),s("el-dialog",{attrs:{title:"暂停",visible:e.pauseDialogVisible,width:"500px"},on:{"update:visible":function(t){e.pauseDialogVisible=t},open:e.pausePage}},[s("el-form",{ref:"pauseFormRef",attrs:{model:e.pauseForm,"label-width":"120px"}},[s("el-form-item",{attrs:{label:"暂停原因类型"}},[s("el-select",{staticStyle:{width:"100%"},attrs:{size:"small",placeholder:"请选择暂停原因类型"},model:{value:e.pauseForm.reason_type,callback:function(t){e.$set(e.pauseForm,"reason_type",t)},expression:"pauseForm.reason_type"}},e._l(e.reasonTypeOpitons,(function(e,t){return s("el-option",{key:t,attrs:{label:e,value:t}})})),1)],1),s("el-form-item",{attrs:{label:"暂停原因"}},[s("el-input",{attrs:{size:"small"},model:{value:e.pauseForm.reason,callback:function(t){e.$set(e.pauseForm,"reason",t)},expression:"pauseForm.reason"}})],1)],1),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{size:"small"},on:{click:function(t){e.pauseDialogVisible=!1}}},[e._v("取 消")]),s("el-button",{attrs:{size:"small",type:"primary",loading:e.suspendLoading},on:{click:e.pauseSubmit}},[e._v("确 定")])],1)],1),s("el-dialog",{staticClass:"reloadSystem",attrs:{title:"重装系统",visible:e.isReloadSystem,width:"700px"},on:{"update:visible":function(t){e.isReloadSystem=t},colsed:e.onClosed,open:e.reloadSystemPopup}},[s("el-form",{ref:"reloadSystemDataRef",staticClass:"demo-reloadSystemData",attrs:{model:e.reloadSystemData,rules:e.reinstallRules,"label-width":"80px"}},[s("el-row",{attrs:{gutter:10}},[s("el-col",{attrs:{span:10}},[s("el-form-item",{staticClass:"reload-deta theme_color",attrs:{"label-width":"80px",label:"主机名称:"}},[e._v(" "+e._s(e.reInstallOsInfo.host_data?e.reInstallOsInfo.host_data.domain:""))])],1),s("el-col",{attrs:{span:7}},[s("el-form-item",{staticClass:"reload-deta theme_color",attrs:{"label-width":"60px",label:"主IP:"}},[e._v(" "+e._s(e.reInstallOsInfo.host_data?e.reInstallOsInfo.host_data.dedicatedip:""))])],1),s("el-col",{attrs:{span:7}},[s("el-form-item",{staticClass:"reload-deta theme_color",attrs:{"label-width":"60px",label:"备注:"}},[e._v(" "+e._s(e.reInstallOsInfo.host_data?e.reInstallOsInfo.host_data.remark:""))])],1)],1),s("el-form-item",{attrs:{label:"操作系统",prop:"systemVal"}},[s("el-select",{staticClass:"systemVal",style:{width:"190px"},attrs:{size:"small",placeholder:"请选择"},on:{change:e.systemChang},model:{value:e.reloadSystemData.systemVal,callback:function(t){e.$set(e.reloadSystemData,"systemVal",t)},expression:"reloadSystemData.systemVal"}},[s("template",{slot:"prefix"},[s("img",{staticStyle:{height:"20px","margin-right":"10px","margin-top":"10px"},attrs:{src:"/upload/common/system/"+e.osSelectedSvg+".svg",alt:""}})]),e._l(e.systemArray,(function(t){return s("el-option",{key:t.value,attrs:{label:t.label,value:t.value}},[s("img",{staticStyle:{height:"15px",marginRight:"10px"},attrs:{src:"/upload/common/system/"+e.getOsSvg(t.value)+".svg",alt:""}}),e._v(e._s(t.label)+" ")])}))],2),s("el-select",{staticClass:"versionsVal",style:{marginLeft:"10px",width:"calc(100% - 200px)"},attrs:{size:"small",placeholder:"请选择"},on:{change:e.versionsChang},model:{value:e.reloadSystemData.versionsVal,callback:function(t){e.$set(e.reloadSystemData,"versionsVal",t)},expression:"reloadSystemData.versionsVal"}},e._l(e.versionsArray,(function(t){return s("el-option",{key:t.id,attrs:{label:t.label,value:t.value}},[e._v(" "+e._s(t.label)+" ")])})),1)],1),s("el-form-item",{attrs:{label:"密码",prop:"rootPass"}},[s("el-input",{attrs:{size:"small",type:"password","show-password":"",autocomplete:"off",clearable:""},model:{value:e.reloadSystemData.rootPass,callback:function(t){e.$set(e.reloadSystemData,"rootPass",t)},expression:"reloadSystemData.rootPass"}})],1),s("el-form-item",{attrs:{label:"端口",prop:"port"}},[s("el-input",{attrs:{size:"small",placeholder:"端口"},model:{value:e.reloadSystemData.port,callback:function(t){e.$set(e.reloadSystemData,"port",t)},expression:"reloadSystemData.port"}},[s("template",{slot:"append"},[s("el-button",{staticStyle:{background:"#409eff",color:"#ffffff","border-radius":"0 4px 4px 0"},attrs:{size:"small",type:"primary"},on:{click:e.portRandom}},[e._v("随 机")])],1)],2)],1),s("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.showSubType,expression:"showSubType"}],attrs:{label:"分区类型",prop:"subareaType"}},[s("el-row",[s("el-col",{attrs:{span:16}},[s("el-radio-group",{on:{change:e.subTypeFunc},model:{value:e.reloadSystemData.subareaType,callback:function(t){e.$set(e.reloadSystemData,"subareaType",t)},expression:"reloadSystemData.subareaType"}},[s("el-radio",{attrs:{label:"0"}},[e._v("全盘格式化")]),s("el-radio",{attrs:{label:"1"}},[e._v("第一分区格式化")])],1)],1),s("el-col",{attrs:{span:8}},[s("el-checkbox-group",{staticClass:"advanced",on:{change:e.advancedFunc},model:{value:e.advanced,callback:function(t){e.advanced=t},expression:"advanced"}},[s("el-checkbox",{attrs:{value:"1",label:"高级"}},[e._v("高级")])],1)],1)],1)],1),s("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.showDisk,expression:"showDisk"}],attrs:{label:"磁盘"}},[s("el-select",{staticClass:"disk-w",attrs:{size:"small",placeholder:"请选择"},model:{value:e.reloadSystemData.disk,callback:function(t){e.$set(e.reloadSystemData,"disk",t)},expression:"reloadSystemData.disk"}},e._l(e.diskArray,(function(t){return s("el-option",{key:t.id,attrs:{label:t.name,value:t.id}},[e._v(" "+e._s(t.name)+" ")])})),1)],1),"1"===e.reloadSystemData.subareaType?s("p",{staticClass:"hintStr"},[e._v(" "+e._s(e.hintStr)+" ")]):e._e()],1),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{size:"small"},on:{click:function(t){e.isReloadSystem=!1}}},[e._v("取 消")]),s("el-button",{attrs:{size:"small",type:"primary",loading:e.submitLoading},on:{click:e.saveReloadSystem}},[e._v("确 定")])],1)],1),s("el-dialog",{attrs:{title:"重装系统",visible:e.reinstallDialog,width:"600px"},on:{"update:visible":function(t){e.reinstallDialog=t},close:function(t){e.osReinstallFrom.osSelected=[]}}},[s("el-form",{ref:"osReinstall",attrs:{model:e.osReinstallFrom,rules:e.osReinstallRules,"label-width":"80px"}},[s("el-form-item",{attrs:{label:"操作系统",prop:"osSelected",rules:{required:!0,message:"操作系统不能为空"}}},[s("el-cascader",{style:{width:"100%"},attrs:{options:e.osArr,props:{expandTrigger:"hover"}},on:{change:e.osChange},model:{value:e.osReinstallFrom.osSelected,callback:function(t){e.$set(e.osReinstallFrom,"osSelected",t)},expression:"osReinstallFrom.osSelected"}})],1),e.pageData.reinstall_random_port?s("el-form-item",{staticClass:"creakInput",staticStyle:{width:"60%"},attrs:{label:"端口",prop:"port"}},[s("el-input-number",{attrs:{controls:!1,precision:0},model:{value:e.osReinstallFrom.port,callback:function(t){e.$set(e.osReinstallFrom,"port",t)},expression:"osReinstallFrom.port"}}),s("img",{staticClass:"creakInputRandom",staticStyle:{width:"18px",cursor:"pointer","margin-left":"10px"},attrs:{src:a("87283"),alt:""},on:{click:e.randomPort}})],1):e._e()],1),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{size:"small"},on:{click:function(t){e.reinstallDialog=!1}}},[e._v("取 消")]),s("el-button",{attrs:{size:"small",type:"primary",loading:e.submitLoading},on:{click:e.saveReinstall}},[e._v("确 定")])],1)],1),s("el-dialog",{attrs:{title:"重置密码",visible:e.crackDialog,width:"600px"},on:{"update:visible":function(t){e.crackDialog=t},open:function(t){return e.creatCode(12)},close:function(t){e.crackFrom.password=""}}},[s("el-form",{ref:"crackPassword",attrs:{model:e.crackFrom,"label-width":"80px"}},[s("el-form-item",{attrs:{label:"密码",prop:"password",rules:{required:!0,message:"密码不能为空"}}},[s("el-input",{attrs:{"show-password":""},model:{value:e.crackFrom.password,callback:function(t){e.$set(e.crackFrom,"password",t)},expression:"crackFrom.password"}}),s("img",{staticClass:"creakInputRandom",attrs:{src:a("87283"),alt:""},on:{click:function(t){return e.creatCode(12)}}})],1),e.errorMsg?s("div",{staticClass:"el-form-item__content"},[s("div",{staticClass:"el-form-item__error",staticStyle:{left:"80px"}},[e._v(e._s(e.errorMsg))])]):e._e()],1),"on"===e.powerStatus&&("dcimcloud"===e.productType||"dcim"===e.productType&&"bms"===e.product.config_option1)?s("div",{staticClass:"force_off_tips mb-20"},[s("div",{staticClass:"mb-20"},[e._v("当前操作需要实例在关机状态下进行：")]),s("div",{staticClass:"mb-10"},[s("span",{staticClass:"red-point"}),e._v(" 为了避免数据丢失，实例将关机中断您的业务，请仔细确认。 ")]),s("div",[s("span",{staticClass:"red-point"}),e._v(" 强制关机可能会导致数据丢失或文件系统损坏，您也可以主动关机后再进行操作。 ")])]):e._e(),"on"===e.powerStatus&&("dcimcloud"===e.productType||"dcim"===e.productType&&"bms"===e.product.config_option1)?s("div",{staticClass:"force_off_item"},[s("label",{staticClass:"tar"},[s("span",{staticStyle:{color:"#f66e6e","margin-right":"5px"}},[e._v("*")]),e._v("强制关机")]),s("el-checkbox",{model:{value:e.agreeOff,callback:function(t){e.agreeOff=t},expression:"agreeOff"}},[e._v("同意强制关机")])],1):e._e(),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{size:"small"},on:{click:function(t){e.crackDialog=!1}}},[e._v("取 消")]),s("el-button",{attrs:{size:"small",type:"primary",loading:e.submitLoading,disabled:!e.agreeOff&&"on"===e.powerStatus&&("dcimcloud"===e.productType||"dcim"===e.productType&&"bms"===e.product.config_option1)},on:{click:e.saveCrack}},[e._v(" 确 定")])],1)],1),s("el-dialog",{attrs:{title:"暂停",visible:e.suspendDialog,width:"600px"},on:{"update:visible":function(t){e.suspendDialog=t},close:function(t){e.suspendFrom.reason=""}}},[s("el-form",{ref:"suspendRef",attrs:{model:e.suspendFrom,"label-width":"80px"}},[s("el-form-item",{attrs:{label:"暂停原因",prop:"reason"}},[s("el-input",{model:{value:e.suspendFrom.reason,callback:function(t){e.$set(e.suspendFrom,"reason",t)},expression:"suspendFrom.reason"}})],1)],1),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{size:"small"},on:{click:function(t){e.suspendDialog=!1}}},[e._v("取 消")]),s("el-button",{attrs:{size:"small",type:"primary",loading:e.submitLoading},on:{click:e.saveSuspend}},[e._v("确 定")])],1)],1),s("el-dialog",{attrs:{visible:e.sendMsgVisible,title:"发送信息",width:"500px","show-close":!0},on:{"update:visible":function(t){e.sendMsgVisible=t},open:e.sendDialogOpen}},[s("el-form",{ref:"sendMsgForm",attrs:{model:e.sendMsgformData,rules:e.sendMsgrules,"label-width":"auto"}},[s("el-form-item",{attrs:{label:"发送短信",prop:"msgid"}},[s("el-select",{staticStyle:{width:"90%"},attrs:{size:"small",placeholder:"请选择",filterable:"",clearable:"",disabled:!e.sendMsgformData.msgtype},on:{change:e.msgSelectChange},model:{value:e.sendMsgformData.msgid,callback:function(t){e.$set(e.sendMsgformData,"msgid",t)},expression:"sendMsgformData.msgid"}},e._l(e.msgOptions,(function(e,t){return s("el-option",{key:t,attrs:{label:e.title,value:e.id}})})),1),s("el-checkbox",{staticClass:"ml-10",attrs:{"true-label":1,"false-label":0},on:{change:e.msgCheckChange},model:{value:e.sendMsgformData.msgtype,callback:function(t){e.$set(e.sendMsgformData,"msgtype",t)},expression:"sendMsgformData.msgtype"}})],1),s("el-form-item",{attrs:{label:"发送邮件",prop:"emaid"}},[s("el-select",{staticStyle:{width:"90%"},attrs:{size:"small",placeholder:"请选择",filterable:"",clearable:"",disabled:!e.sendMsgformData.ematype},on:{change:e.emailSelectChange},model:{value:e.sendMsgformData.emaid,callback:function(t){e.$set(e.sendMsgformData,"emaid",t)},expression:"sendMsgformData.emaid"}},e._l(e.emailOptions,(function(e,t){return s("el-option",{key:t,attrs:{label:e.name,value:e.id}})})),1),s("el-checkbox",{staticClass:"ml-10",attrs:{"true-label":1,"false-label":0},on:{change:e.emailCheckChange},model:{value:e.sendMsgformData.ematype,callback:function(t){e.$set(e.sendMsgformData,"ematype",t)},expression:"sendMsgformData.ematype"}})],1)],1),s("div",{attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{size:"small"},on:{click:function(t){e.sendMsgVisible=!1}}},[e._v("取消")]),s("el-button",{attrs:{size:"small",type:"primary",loading:e.submitLoading},on:{click:e.sendMsgHandleClick}},[e._v("确定")])],1)],1),s("distributionDia",{ref:"distributionDia",attrs:{visible:e.distributionVis,title:"分配"},on:{"update:visible":function(t){e.distributionVis=t},"distribution-success":e.distributionSuccess}}),s("Reinstall",{ref:"reinstallDia",attrs:{visible:e.reinstallVis,title:"重装系统"},on:{"update:visible":function(t){e.reinstallVis=t},"reinstall-success":e.reinstallDcimSuc}}),s("Crackpass",{ref:"crackpassDia",attrs:{visible:e.crackPassVis,title:"破解密码"},on:{"update:visible":function(t){e.crackPassVis=t},"crackpass-success":e.crackpassDcimSuc}}),s("el-dialog",e._g(e._b({attrs:{visible:e.renewDialogVis,title:"创建续费账单是否使用余额",width:"450px"},on:{"update:visible":function(t){e.renewDialogVis=t}}},"el-dialog",e.$attrs,!1),e.$listeners),[s("el-radio-group",{style:{width:"100%"},model:{value:e.renewUseCredit,callback:function(t){e.renewUseCredit=t},expression:"renewUseCredit"}},[parseFloat(e.pageData.credit)>0?s("div",{staticClass:"mt-10"},[s("el-radio",{attrs:{label:1}},[e._v("余额"+e._s(e.pageData.credit)+"，应用至账单")])],1):e._e(),s("div",{staticClass:"mt-10"},[s("el-radio",{attrs:{label:2}},[e._v("标记为已支付，并入账")])],1),s("div",{staticClass:"mt-10"},[s("el-radio",{attrs:{label:3}},[e._v("不入账，仅创建账单")])],1)]),s("div",{attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{size:"small"},on:{click:function(t){e.renewDialogVis=!1}}},[e._v("取消")]),s("el-button",{attrs:{size:"small",type:"primary",loading:e.btnLoading},on:{click:e.renewSubmit}},[e._v("确定")])],1)],1),s("div",{staticClass:"refundbox"},[s("el-dialog",e._g(e._b({attrs:{visible:e.refundVis,title:"退款",width:"500px"},on:{"update:visible":function(t){e.refundVis=t}}},"el-dialog",e.$attrs,!1),e.$listeners),[s("el-form",{ref:"refundForm",attrs:{model:e.refundFormData,"label-width":"100px"}},[s("el-form-item",{attrs:{label:"管理账单"}},[s("el-table",{attrs:{data:e.refundTableData}},[s("el-table-column",{attrs:{prop:"invoice_id",label:"账单号"}}),s("el-table-column",{attrs:{prop:"amount",label:"金额"}}),s("el-table-column",{attrs:{prop:"type_zh",label:"类型"}})],1)],1),s("el-form-item",{attrs:{label:"选择退款方案"}},[s("el-radio-group",[s("el-radio",{attrs:{label:1}},[e._v("按天计算")]),s("el-radio",{attrs:{label:2}},[e._v("全额退款")]),s("el-radio",{attrs:{label:3}},[e._v("自定义")])],1)],1),s("el-form-item",{attrs:{label:"可退款金额"}},[s("span",{staticClass:"mr-10"},[e._v("￥888.00元")]),s("el-select",{attrs:{size:"mini"}},[s("el-option",{attrs:{label:"退款至余额"}}),s("el-option",{attrs:{label:"仅标记为退款"}})],1)],1)],1),s("div",{attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{size:"small"},on:{click:function(t){e.refundVis=!1}}},[e._v("取消")]),s("el-button",{attrs:{size:"small",type:"primary",loading:e.submitLoading}},[e._v("确定")])],1)],1)],1)],1)},r=[],i=(a("99af"),a("4160"),a("caad"),a("c975"),a("d81d"),a("b0c0"),a("a9e3"),a("4d63"),a("ac1f"),a("25f0"),a("2532"),a("841c"),a("1276"),a("4c53"),a("159b"),a("96cf"),a("1da1")),n=a("0aab"),o=a("bd52"),l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{},[a("el-dialog",e._g(e._b({attrs:{width:"1100px"},on:{open:e.onOpen,close:e.onClose}},"el-dialog",e.$attrs,!1),e.$listeners),[a("div",{staticClass:"selectLimit "},[a("el-input",{staticClass:"mb-10",style:{width:"230px"},attrs:{size:"small",clearable:"",placeholder:"IP搜索"},on:{clear:e.getupperTable},model:{value:e.search.in_ip,callback:function(t){e.$set(e.search,"in_ip",t)},expression:"search.in_ip"}}),a("el-select",{staticClass:"mb-10 ml-10",staticStyle:{width:"200px"},attrs:{size:"small",placeholder:"供应商",filterable:"",clearable:""},on:{clear:e.changeSupplierClear,change:e.changeSupplier},model:{value:e.supplierSelect,callback:function(t){e.supplierSelect=t},expression:"supplierSelect"}},e._l(e.supplierOptions,(function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.id}})})),1)],1),a("el-row",{attrs:{gutter:15}},[[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData}},[a("div",{attrs:{slot:"empty"},slot:"empty"},[!e.tableData.length&&e.tableLoading?a("span",[a("i",{staticClass:"el-icon-loading"}),e._v(" 正在加载 ... ")]):e._e(),e.tableData.length||e.tableLoading?e._e():a("span",[e._v("暂无数据")])]),a("el-table-column",{attrs:{prop:"power_status",label:"电源",width:"50px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.row;return[s.loading?a("span",[a("i",{staticClass:"el-icon-loading"})]):e._e(),s.loading?e._e():a("span",{staticStyle:{cursor:"pointer"},on:{click:function(t){return e.refreshStatus(s)}}},["on"===s.power_status?a("span",[a("el-tooltip",{staticClass:"item",attrs:{transition:"el-zoom-in-top",effect:"light",content:"开机",placement:"bottom"}},[a("svg",{staticClass:"icon",staticStyle:{width:"16px",height:"16px"},attrs:{"aria-hidden":"true"}},[a("use",{attrs:{"xlink:href":"#icon-kaiji"}})])])],1):"off"===s.power_status?a("span",[a("el-tooltip",{staticClass:"item",attrs:{transition:"el-zoom-in-top",effect:"light",content:"关机",placement:"bottom"}},[a("svg",{staticClass:"icon",staticStyle:{width:"16px",height:"16px"},attrs:{"aria-hidden":"true"}},[a("use",{attrs:{"xlink:href":"#icon-guanji"}})])])],1):"error"===s.power_status?a("span",[a("el-tooltip",{staticClass:"item",attrs:{transition:"el-zoom-in-top",effect:"light",content:"错误",placement:"bottom"}},[a("svg",{staticClass:"icon",staticStyle:{width:"16px",height:"16px"},attrs:{"aria-hidden":"true"}},[a("use",{attrs:{"xlink:href":"#icon-cuowu"}})])])],1):a("span",[a("el-tooltip",{staticClass:"item",attrs:{transition:"el-zoom-in-top",effect:"light",content:"未知",placement:"bottom"}},[a("svg",{staticClass:"icon",staticStyle:{width:"16px",height:"16px"},attrs:{"aria-hidden":"true"}},[a("use",{attrs:{"xlink:href":"#icon-weizhi-copy"}})])])],1)])]}}])}),a("el-table-column",{attrs:{prop:"ip",label:"IP",width:"110"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.ips?a("el-popover",{attrs:{placement:"bottom",trigger:"hover"}},[e._l(t.row.ip,(function(t,s){return a("div",{key:s,staticStyle:{display:"flex","justify-content":"center"}},[a("span",[e._v(e._s(t.ip))]),a("span",{directives:[{name:"clipboard",rawName:"v-clipboard",value:t.ip,expression:"item.ip"},{name:"clipboard",rawName:"v-clipboard:success",value:e.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:e.onError,expression:"onError",arg:"error"}],staticClass:"el-icon-copy-document copyIp"})])})),a("span",{attrs:{slot:"reference"},slot:"reference"},[a("el-link",{on:{click:function(a){return e.goIP(t.row)}}},[e._v(e._s(t.row.in_ip+"("+t.row.ipcount+")"))])],1)],2):a("span",[t.row.ipcount>1?a("span",[e._v(e._s(t.row.in_ip+"("+t.row.ipcount+")"))]):a("el-link",{on:{click:function(a){return e.goIP(t.row)}}},[e._v(e._s(""+t.row.in_ip))])],1)]}}])}),a("el-table-column",{attrs:{prop:"pz",label:"配置"}}),a("el-table-column",{attrs:{prop:"root",label:"用户名/密码",width:"140"},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.row;return[a("span",[e._v(" "+e._s(s.username)+e._s(s.username?"/"+s.password:"-")+" ")])]}}])}),a("el-table-column",{attrs:{prop:"uname",label:"上游"}}),a("el-table-column",{attrs:{prop:"ipmi",label:"IPMI"}}),a("el-table-column",{attrs:{prop:"ipmijq",label:"IPMI鉴权"}}),a("el-table-column",{attrs:{prop:"total",label:"成本",width:"80px"}}),a("el-table-column",{attrs:{prop:"names",label:"关联客户（产品）",sortable:"",width:"200px"},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.row;return[s.name?(s.cname+s.name).toString().length<14?a("el-link",{style:{color:s.domainstatus.color},on:{click:function(t){return e.goProduct(s)}}},[a("span",[e._v(" "+e._s(s.cname)+" "+e._s(s.name?"-"+s.name:"")+" ")])]):a("el-tooltip",{staticClass:"item",attrs:{transition:"el-zoom-in-center",effect:"light",placement:"right"}},[a("div",{attrs:{slot:"content"},slot:"content"},[e._v(e._s(s.cname)),a("br"),a("br"),e._v(e._s(s.name?""+s.name:""))]),a("el-link",{style:{color:s.domainstatus.color},on:{click:function(t){return e.goProduct(s)}}},[a("span",[e._v(" "+e._s((s.cname+(s.name?"-"+s.name:"")).substring(0,14))+"... ")])])],1):a("span",[e._v("-")])]}}])}),a("el-table-column",{attrs:{prop:"nextduedate",label:"到期时间",width:"90px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.paid_time?e.$moment(1e3*t.row.paid_time).format("YYYY-MM-DD"):"-"))])]}}])}),a("el-table-column",{attrs:{label:"操作",width:"70",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.row;return[s.names?a("span",[a("el-button",{staticClass:"span-danger",attrs:{size:"mini",type:"text"},on:{click:function(t){return e.makeFree(s)}}},[e._v("空闲")])],1):a("span",[a("el-button",{staticClass:"span-primary",attrs:{size:"mini",type:"text"},on:{click:function(t){return e.distribution(s)}}},[e._v("分配")])],1)]}}])})],1),a("el-pagination",{attrs:{"current-page":e.search.page,"page-sizes":[10,15,20,25,50,100],"page-size":e.search.limit,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.getupperTable,"update:currentPage":function(t){return e.$set(e.search,"page",t)},"update:current-page":function(t){return e.$set(e.search,"page",t)},"update:pageSize":function(t){return e.$set(e.search,"limit",t)},"update:page-size":function(t){return e.$set(e.search,"limit",t)}}})]],2)],1)],1)},c=[],u=a("dc57"),d=a("4e25"),m=a("8605"),p={data:function(){return{tableLoading:!1,total:0,search:{timer:null,pid:void 0,page:1,limit:Number(localStorage.getItem("limit"))||50,orderby:"id",sort:"desc",type:void 0,in_ip:""},tableData:[],supplierOptions:[],manualInfo:{id:"",name:""},supplierSelect:""}},created:function(){var e=this;this.$eventBus.$on("busManualInfo",(function(t){e.manualInfo=t,e.search.pid=t.id}))},mounted:function(){},methods:{goIP:function(e){this.$router.push({path:"/addOrEdit-resource",query:{id:e.id}})},refreshStatus:function(e){"dcim_client"===e.control_mode?this.dcimRefreshRow(e):"ipmi"===e.control_mode?this.refreshRow(e):"not_support"===e.control_mode&&this.$message.warning("不支持该资源刷新")},refreshRow:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var s,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e.loading=!0,a.next=3,Object(d["y"])(e.id);case 3:if(s=a.sent,r=s.data,200===r.status){a.next=9;break}return t.$message.error(r.msg),e.loading=!1,a.abrupt("return");case 9:e.loading=!1;case 10:case"end":return a.stop()}}),a)})))()},dcimRefreshRow:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var s,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e.loading=!0,a.next=3,Object(d["i"])(e.id);case 3:if(s=a.sent,r=s.data,200===r.status){a.next=9;break}return t.$message.error(r.msg),e.loading=!1,a.abrupt("return");case 9:e.loading=!1;case 10:case"end":return a.stop()}}),a)})))()},goProduct:function(e){var t=e.hostid;if(t===this.$route.query.hid)return this.$message.success("已在当前页面，请查看~"),void(this.$parent.distributionVis=!1);this.$router.push({path:"/customer-view/product-innerpage",query:{id:e.uid,hid:t}})},distributionCb:function(){this.$emit("distribution-success",!0)},makeFree:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var s,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Object(m["b"])(e.id);case 2:if(s=a.sent,r=s.data,200===r.status){a.next=7;break}return t.$message.error(r.msg),a.abrupt("return");case 7:t.$message.success(r.msg),t.distributionCb();case 9:case"end":return a.stop()}}),a)})))()},distribution:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var s,r,i,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return s=t.$route.query.hid,r={id:e.id,hid:s},a.next=4,Object(m["a"])(r);case 4:if(i=a.sent,n=i.data,200===n.status){a.next=9;break}return t.$message.error(n.msg),a.abrupt("return");case 9:t.$message.success(n.msg),t.distributionCb();case 11:case"end":return a.stop()}}),a)})))()},handleSizeChange:function(e){this.search.page=1,this.getupperTable()},getupperTable:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,s,r,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.tableLoading=!0,t.next=3,Object(m["d"])(e.search);case 3:if(a=t.sent,s=a.data,200===s.status){t.next=8;break}return e.$message.error(s.msg),t.abrupt("return");case 8:for(r=0;r<s.data.length;r++)i=s.data[r],i.loading=!1;e.tableLoading=!1,e.tableData=s.data,e.total=s.total,e.supplierSelect=e.search.pid;case 13:case"end":return t.stop()}}),t)})))()},getupperList:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,s,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={type:"all"},t.next=3,Object(m["c"])(a);case 3:if(s=t.sent,r=s.data,200===r.status){t.next=8;break}return e.$message.error(r.msg),t.abrupt("return");case 8:e.supplierOptions=r.data;case 9:case"end":return t.stop()}}),t)})))()},changeSupplier:function(e){this.search.pid=e,this.search.page=1,this.tableData=[],this.getupperTable()},changeSupplierClear:function(){this.search.type="all"},onOpen:function(){this.getupperList(),this.getupperTable()},onClose:function(){Object.assign(this,this.$options.data())},onCopy:Object(u["b"])((function(e){this.$message.success("复制IP成功")})),onError:Object(u["b"])((function(){this.$message.error("复制IP失败")}))},computed:{},watch:{"search.in_ip":{handler:function(){var e=this;this.search.timer&&clearTimeout(this.search.timer),this.search.timer=setTimeout((function(){e.getupperTable()}),300)}}}},f=p,g=(a("0f80"),a("2877")),h=Object(g["a"])(f,l,c,!1,null,"d6776b2e",null),b=h.exports,v=a("af9c"),_=a("6e81"),w=a("be12"),y=a("f6b0"),k=a("7ded"),x=a("6770"),D=a("6a8e"),S=a("7ce2"),C=a.n(S),O={inject:["reload"],components:{distributionDia:b,Reinstall:n["a"],Crackpass:o["a"]},data:function(){var e=function(e,t,a){var s=parseFloat(t);22===s||s>=100&&s<=65535?a():a(new Error("端口允许范围22, 100-65535"))};return{reinstallTimer:null,reinstallProgress:!1,reinstallObj:void 0,crackPassVis:!1,reinstallVis:!1,distributionVis:!1,manualProductId:"",manualInfo:{id:void 0,name:""},isManual:!1,dataLoading:!0,labelWidth:window.document.body.clientWidth>768?"120px":null,areaWidth:window.document.body.clientWidth>768?"420px":"200px",id:this.$route.query.id?Number(this.$route.query.id):"",hid:this.$route.query.hid?Number(this.$route.query.hid):"",customList:[],customForm:{},diaVisible:!1,uidOptions:[],diaformData:{username:"",transfer_uid:void 0,hostid:this.$route.query.hid?Number(this.$route.query.hid):""},diarules:{transfer_uid:[],client_id:[],hostid:[]},formData:{initiative_renew:0,regdate:null,hostid:void 0,oldproductid:void 0,productid:void 0,firstpaymentamount:void 0,oldserverid:void 0,serverid:void 0,amount:void 0,auto_recalcre_curring_price:1,oldnextduedate:null,nextduedate:void 0,termination_date:null,username:void 0,password:void 0,billingcycle:void 0,payment:void 0,promoid:void 0,dedicatedip:void 0,assignedips:void 0,domainstatus:[],overideautosuspend:0,overidesuspenduntil:null,auto_terminate_end_cycle:!1,auto_terminate_reason:void 0,notes:void 0,configoption:[],customfield:[],other:void 0,domain:"",ns1:"",ns2:"",port:void 0},regdateCus:void 0,nextduedateCus:void 0,rules:{regdate:[{required:!0,message:"请选择订购时间",trigger:"change"}],hostid:[{required:!0,message:"请输入主机ID",trigger:"blur"}],oldproductid:[{required:!0,message:"请输入产品ID",trigger:"blur"}],productid:[{required:!0,message:"请输入新产品ID",trigger:"blur"}],firstpaymentamount:[],oldserverid:[{required:!0,message:"请输入旧服务器ID",trigger:"blur"}],serverid:[],amount:[],oldnextduedate:[{required:!0,message:"请选择旧到期时间",trigger:"change"}],nextduedate:[{required:!0,message:"请输入下次到期时间",trigger:"blur"}],termination_date:[],username:[],password:[],billingcycle:[{required:!0,message:"请选择付款周期",trigger:"change"}],payment:[{required:!0,message:"请选择支付方式",trigger:"change"}],promoid:[],dedicatedip:[{required:!1,message:"请输入独立IP地址",trigger:"blur"}],assignedips:[],domainstatus:[],overidesuspenduntil:[],auto_terminate_reason:[],notes:[],configoption:[],customfield:[],other:[]},billingcycleOptions:[],paymentOptions:[],promoidOptions:[],productidOptions:[],domainstatusOptions:[],hasProduct:!1,noProductMsg:"",hostOptions:[],serverOptions:[],configArray:[],dcim:{server_group:[]},dcimId:0,productType:"",rescueDialogFormVisible:!1,rescueForm:{id:this.$route.query.hid?Number(this.$route.query.hid):"",system:1},isCrack:!1,crackRest:[],crackPassObj:{id:this.$route.query.hid?Number(this.$route.query.hid):"",password:"",user:"",other_user:0},crackRules:{password:[{required:!0,message:"请输入密码"}]},dcimAssignDialog:!1,dcimTableData:[],total:0,search:{id:this.$route.query.hid?Number(this.$route.query.hid):"",page:1,limit:Number(localStorage.getItem("limit"))||50,search:void 0,group:void 0,status:void 0},statusOptions:[{value:1,label:"空闲",color:"black"},{value:2,label:"到期",color:"red"},{value:3,label:"正常",color:"green"},{value:4,label:"故障",color:"orange"},{value:5,label:"预装",color:"black"},{value:6,label:"锁定",color:"orange"}],server_groupOptions:[],statusColor:{1:"black",2:"red",3:"green",4:"orange",5:"black",6:"orange"},svg:0,os:"",reasonTypeOpitons:[],pauseForm:{reason_type:void 0,reason_type_custom:void 0,reason:void 0},pauseDialogVisible:!1,progress:100,isFinish:!1,powerStatus:"",reInstallOsInfo:{host_data:void 0,dcim:void 0},isReloadSystem:!1,showSubType:!0,showDisk:!1,hintStr:"",reinstallRules:{systemVal:[{required:!0,message:"请选择系统"}],versionsVal:[{required:!0,message:"请选择系统版本"}],port:[{required:!0,message:"端口不能为空"}]},systemArray:[],versionsArray:[],diskArray:[],advanced:[],rowItem:{},osname:"",reloadSystemData:{notes:"",domain:"",ID:"",sum:"",advIp:"",systemVal:"",versionsVal:"",rootPass:"",port:"",subareaType:"0",disk:""},submitLoading:!1,timer:null,reinstallOsName:"",operationName:"重装系统",operationStepInfo:"",preWindow:null,billList:[],billTotal:0,billSearch:{uid:Number(this.$route.query.id),page:1,limit:Number(localStorage.getItem("limit"))||50,order:"id",sort:"desc",hostid:this.$route.query.hid?Number(this.$route.query.hid):""},ticketList:[],ticketTotal:0,ticketSearch:{uid:Number(this.$route.query.id),page:1,limit:Number(localStorage.getItem("limit"))||50,order:"id",sort:"desc",hostid:this.$route.query.hid?Number(this.$route.query.hid):""},createLoading:!1,suspendLoading:!1,unsuspendLoading:!1,terminateLoading:!1,onLoading:!1,offLoading:!1,rebootLoading:!1,bmcLoading:!1,kvmLoading:!1,ikvmLoading:!1,module_buttons:[],reinstallDialog:!1,osArr:[],osReinstallFrom:{port:22,osSelected:[]},osReinstallRules:{port:[{required:!0,message:"请输入端口号"},{validator:e,trigger:"blur"}]},osSvg:1,powerInfo:{msg:"未知",des:"未知",status:""},powerLoading:!1,PowerStatusTimer:null,agreeOff:!1,crackDialog:!1,crackFrom:{password:""},errorMsg:"",proPending:"",proColor:"#333",renewShow:!1,cycleInit:"",osSelectedSvg:0,suspendDialog:!1,suspendFrom:{reason:""},applyInterfaceDis:!0,sendMsgVisible:!1,msgOptions:[],emailOptions:[],sendMsgformData:{msgid:void 0,msgtype:1,emaid:void 0,ematype:1,id:Number(this.$route.query.id),hid:0},sendMsgrules:{msgid:[{required:!1,message:"请选择",trigger:"change"}],emaid:[{required:!1,message:"请选择",trigger:"change"}]},product:{},zjmf_api:{name:""},upstream_host:{},pageData:{host_data:{}},renewDialogVis:!1,renewUseCredit:1,btnLoading:!1,refundVis:!1,refundTableData:[{invoice_id:10010,amount:10,type_zh:"ddd"}],refundFormData:{plan:"",amount:""},delLoading:!1}},filters:{dcimStatusFilter:function(e){switch(e){case"1":return"空闲";case"2":return"到期";case"3":return"正常";case"4":return"故障";case"5":return"预装";case"6":return"锁定"}}},watch:{progress:function(e){"重装系统"!==this.operationName&&100===e&&(this.operationStepInfo="")},$route:function(e,t){clearInterval(this.reinstallTimer)}},beforeDestroy:function(){clearInterval(this.reinstallTimer)},methods:{productCancelTask:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$confirm("将取消操作, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.$message.success("正在发起取消请求，请稍候");var t={id:e.pageData.host_data.upper_reaches_res};Object(d["x"])(t).then((function(t){200!==t.data.status?e.$message.error(t.data.msg):(e.$message.success(t.data.msg),e.reinstallProgress=!1,e.getData())}))})).catch((function(){}));case 1:case"end":return t.stop()}}),t)})))()},distributionSuccess:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(!e){a.next=9;break}return t.distributionVis=!1,Object.assign(t.$refs.distributionDia,t.$refs.distributionDia.$options.data()),a.next=5,t.getData();case 5:t.getProductsList(),t.getPromo(),t.getGetways(),t.getHostList();case 9:case"end":return a.stop()}}),a)})))()},openDistribution:function(){this.$eventBus.$emit("busManualInfo",this.manualInfo),this.distributionVis=!0},clearUid:function(){this.diaformData.transfer_uid=""},handleSelect:function(e){"notFound"!==e.type&&(this.diaformData.username=e.username,this.diaformData.transfer_uid=e.id)},querySearchAsync:function(e,t){var a=this;return Object(i["a"])(regeneratorRuntime.mark((function s(){var r,i,n;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,Object(v["f"])(e);case 2:if(r=s.sent,i=r.data,200===i.status){s.next=7;break}return a.$message.error(i.msg),s.abrupt("return");case 7:i.data.length?t(i.data):(n=[{username:"未找到相关数据",type:"notFound"}],t(n));case 8:case"end":return s.stop()}}),s)})))()},searchFlow:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,s,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={uid:e.$route.query.id,hid:e.$route.query.hid},t.next=3,Object(w["j"])(a);case 3:if(s=t.sent,r=s.data,200===r.status){t.next=8;break}return e.$message.error(r.msg),t.abrupt("return");case 8:e.$store.commit("setFlow",r),e.$router.push({name:"transactions",query:{id:e.$route.query.id}});case 10:case"end":return t.stop()}}),t)})))()},searchBill:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,s,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={uid:e.$route.query.id,hid:e.$route.query.hid},t.next=3,Object(w["a"])(a);case 3:if(s=t.sent,r=s.data,200===r.status){t.next=8;break}return e.$message.error(r.msg),t.abrupt("return");case 8:e.$store.commit("setBill",r),e.$router.push({name:"bill",query:{id:e.$route.query.id}});case 10:case"end":return t.stop()}}),t)})))()},searchWork:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,s,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={uid:e.$route.query.id,hostid:e.$route.query.hid,page:1,limit:10,order:"id",sort:"desc"},t.next=3,Object(y["f"])(a);case 3:if(s=t.sent,r=s.data,200===r.status){t.next=8;break}return e.$message.error(r.msg),t.abrupt("return");case 8:e.$store.commit("setWorkOrder",r.data),e.$router.push({name:"tickets",query:{id:e.$route.query.id}});case 10:case"end":return t.stop()}}),t)})))()},proSelectChange:function(){this.$router.push({query:C()(this.$route.query,{id:this.id,hid:this.hid})}),this.getData(),this.getTicketData()},getData:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.id=e.$route.query.id,e.dataLoading=!0,t.next=4,Object(_["c"])(e.id,e.hid);case 4:a=t.sent,s=a.data,200!==s.status?(e.hasProduct=!1,e.noProductMsg=s.msg):(e.hasProduct=!0,e.billingcycleOptions=s.data.billing_cycle,e.domainstatusOptions=s.data.domain_status_list,e.customList=s.data.custom_field,e.customForm=e.getCustomData(s.data.custom_field_value),e.formData.domainstatus=s.data.host_data.domainstatus,e.manualInfo=s.data.manual,e.isManual="manual"===s.data.product.api_type,e.manualProductId=s.data.host_data.upper_reaches_res,e.proPending=s.data.host_data.domainstatus,s.data.module_power_status&&e.getStatus(),e.formData.payment=s.data.host_data.payment,e.formData.assignedips="",(s.data.host_data.assignedips||[]).forEach((function(t,a){a!==s.data.host_data.assignedips.length-1?e.formData.assignedips+=t+",":e.formData.assignedips+=t})),e.formData.billingcycle=s.data.host_data.billingcycle,e.cycleInit=s.data.host_data.billingcycle,"ontrial"!==s.data.host_data.billingcycle&&"onetime"!==s.data.host_data.billingcycle&&"free"!==s.data.host_data.billingcycle?e.renewShow=!0:e.renewShow=!1,e.formData.productid=s.data.host_data.productid,e.formData.regdate=s.data.host_data.regdate,e.formData.firstpaymentamount=s.data.host_data.firstpaymentamount,e.formData.serverid=s.data.host_data.serverid,e.formData.dedicatedip=s.data.host_data.dedicatedip,e.formData.amount=s.data.host_data.amount,e.formData.nextduedate=s.data.host_data.nextduedate,e.formData.termination_date=1e3*s.data.host_data.termination_date,e.formData.promoid=s.data.host_data.promoid?s.data.host_data.promoid:void 0,e.regdateCus=1e3*s.data.host_data.regdate,e.nextduedateCus=1e3*s.data.host_data.nextduedate,e.formData.nextinvoicedate*=1e3,e.formData.create_time*=1e3,e.formData.domain=s.data.host_data.domain,e.formData.initiative_renew=s.data.host_data.initiative_renew,e.formData.ns1=s.data.host_data.ns1,e.formData.ns2=s.data.host_data.ns2,e.dcim=s.data.dcim,e.dcimId=s.data.host_data.dcimid||"无",e.productType=s.data.host_data.product_type,e.hid&&"dcim"===s.data.host_data.product_type&&0!==s.data.host_data.dcimid&&"bms"!==s.data.product.config_option1&&(e.getPowerStatus(),e.initPageProgress()),e.svg=s.data.host_data.svg,e.os=s.data.host_data.os,e.formData.notes=s.data.host_data.notes,(s.data.host_list||[]).forEach((function(e){e.dedicatedip&&(e.name=e.name+"("+e.dedicatedip+")")})),e.hid=s.data.hostid,(s.data.host_list||[]).forEach((function(t){s.data.hostid===t.id&&(e.proColor=t.domainstatus.name)})),e.formData.hostid=s.data.hostid,e.formData.orderid=s.data.host_data.orderid,e.formData.username=s.data.host_data.username,e.formData.password=s.data.host_data.password,e.formData.port=s.data.host_data.port||void 0,e.formData.remark=s.data.host_data.remark,e.serverOptions=s.data.server_list,(s.data.config_array||[]).forEach((function(t){if(1===t.option_type||2===t.option_type||3===t.option_type||6===t.option_type||8===t.option_type||10===t.option_type||13===t.option_type)(s.data.host_option_config||[]).forEach((function(e){t.id===e.configid&&(t.option_value=e.optionid)}));else if([4,7,9,11,14,15,16,17,18,19].includes(t.option_type))(s.data.host_option_config||[]).forEach((function(e){t.id===e.configid&&(t.option_value=e.qty)}));else if(5===t.option_type||12===t.option_type){var a=[],r=function(e){var s=[];5===t.option_type?((t.sub[e].child||[]).forEach((function(e){s.push({label:e.show_pricing,value:e.id})})),a.push({label:e,value:e,icon:t.sub[e].ico_url,children:s})):((t.sub[e].area||[]).forEach((function(e){s.push({label:e.area_zh||"默认节点",value:e.id})})),a.push({label:t.sub[e].option_name,value:t.sub[e].country_code,icon:t.sub[e].ico_url,children:s}))};for(var i in t.sub)r(i);t.sub=a,5===t.option_type&&(e.osArr=t.sub,t.sub.length&&t.sub[0].children.length&&(e.osReinstallFrom.osSelected=[t.sub[0].value,t.sub[0].children[0].value])),t.option_value=[],(s.data.host_option_config||[]).forEach((function(e){(t.sub||[]).forEach((function(a){var s=a.children.map((function(e){return e.value}));s.includes(e.optionid)&&(t.option_value.push(a.value),t.option_value.push(e.optionid))}))}))}else t.option_type})),e.configArray=s.data.config_array,e.reInstallOsInfo=s.data,(s.data.module_button||[]).forEach((function(e){e.loading=!1})),e.module_buttons=s.data.module_button,-1!==s.data.host_data.os_url.toLowerCase().indexOf("windows")?e.osSvg=1:-1!==s.data.host_data.os_url.toLowerCase().indexOf("centos")?e.osSvg=2:-1!==s.data.host_data.os_url.toLowerCase().indexOf("ubuntu")?e.osSvg=3:-1!==s.data.host_data.os_url.toLowerCase().indexOf("debian")?e.osSvg=4:-1!==s.data.host_data.os_url.toLowerCase().indexOf("esxi")?e.osSvg=5:-1!==s.data.host_data.os_url.toLowerCase().indexOf("xenserver")?e.osSvg=6:-1!==s.data.host_data.os_url.toLowerCase().indexOf("freebsd")?e.osSvg=7:-1!==s.data.host_data.os_url.toLowerCase().indexOf("fedora")?e.osSvg=8:"none"===s.data.host_data.os_url?e.osSvg=0:e.osSvg=9,e.search.group=s.data.dcim?s.data.dcim.server_group:void 0,e.product=s.data.product,e.zjmf_api=s.data.zjmf_api,e.upstream_host=s.data.upstream_host,e.pageData=s.data,parseFloat(s.data.credit)<=0&&(e.renewUseCredit=2),"dcim_client"===s.data.host_data.upper_reaches_control_mode&&(e.getDcimProgress(),e.loopStatus())),e.dataLoading=!1;case 8:case"end":return t.stop()}}),t)})))()},loopStatus:function(){var e=this;clearInterval(this.reinstallTimer),this.reinstallTimer=setInterval((function(){e.getDcimProgress()}),1e4)},ipFormatTooltip:function(e){var t=String(e.option_value);return(this.configArray||[]).forEach((function(a){a.option_type===e.option_type&&(a.sub||[]).forEach((function(a){a.qty_minimum<=e.option_value&&a.qty_maximum>=e.option_value&&(t=a.show_pricing)}))})),t},cpuFormatTooltip:function(e){var t=String(e);return(this.configArray||[]).forEach((function(a){7===a.option_type&&(a.sub||[]).forEach((function(a){a.qty_minimum<=e&&a.qty_maximum>=e&&(t=a.show_pricing)}))})),t},memFormatTooltip:function(e){var t=String(e);return(this.configArray||[]).forEach((function(a){9===a.option_type&&(a.sub||[]).forEach((function(a){a.qty_minimum<=e&&a.qty_maximum>=e&&(t=a.show_pricing)}))})),t},bwFormatTooltip:function(e){var t=String(e);return(this.configArray||[]).forEach((function(a){11===a.option_type&&(a.sub||[]).forEach((function(a){a.qty_minimum<=e&&a.qty_maximum>=e&&(t=a.show_pricing)}))})),t},diskFormatTooltip:function(e){var t=String(e);return(this.configArray||[]).forEach((function(a){14===a.option_type&&(a.sub||[]).forEach((function(a){a.qty_minimum<=e&&a.qty_maximum>=e&&(t=a.show_pricing)}))})),t},getCustomOption:function(e){if(""===e)return[];var t=e.split(",");return t},submitForm:function(){var e=this;this.formData.configoption=[],this.configArray.forEach((function(t){5===t.option_type||12===t.option_type?e.formData.configoption[t.id]=t.option_value[1]:e.formData.configoption[t.id]=t.option_value})),this.formData.custom=[],this.customList.forEach((function(t){e.formData.custom[t.id]=e.customForm[t.id]})),this.$refs.elForm.validate(function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(a){var s,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a){t.next=2;break}return t.abrupt("return",!1);case 2:return e.formData.regdate=e.regdateCus/1e3,e.formData.nextduedate=e.nextduedateCus/1e3,e.formData.termination_date/=1e3,"dcimcloud"!==e.productType&&"dcim"!==e.productType&&"zjmf_api"!==e.product.api_type||(e.formData.dcimid=e.dcimId),s=e.$qs.stringify(e.formData),t.next=9,Object(_["e"])(s);case 9:r=t.sent,200!==r.data.status?(e.$message.error(r.data.msg),e.formData.termination_date*=1e3):(e.getData(),e.$message.success(r.data.msg));case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},cancel:function(){this.$router.push({name:"abstract",query:{id:this.id}})},getCustomData:function(e){if(e==={})return{};var t={};for(var a in e)t[a]=e[a];return t},transferTop:function(){var e=this;this.diaformData.username?!this.diaformData.username||this.diaformData.transfer_uid?this.$refs.diaForm.validate(function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(a){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a){t.next=2;break}return t.abrupt("return",!1);case 2:e.diaVisible=!1,e.$confirm("转移该产品, 会删除产品关联的账单以及升降级订单, 是否确认?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.submitLoading=!0,Object(_["f"])(e.diaformData).then((function(t){200!==t.data.status?e.$message.error(t.data.msg):(e.$message.success(t.data.msg),e.diaVisible=!1,e.$router.push({name:"abstract",query:{id:e.id}})),e.submitLoading=!1}))})).catch((function(){}));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()):this.$message.error("请通过点击下拉来选择用户"):this.$message.error("请选择客户")},onOpen:function(){this.diaformData.transfer_uid="",this.diaformData.username=""},onClose:function(){},close:function(){this.$emit("update:visible",!1),this.diaVisible=!1},getClientList:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(k["b"])();case 2:a=t.sent,200!==a.status?e.$message.error(a.msg):e.uidOptions=a.data.data.clients;case 4:case"end":return t.stop()}}),t)})))()},del:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$route.query.hid?e.$confirm("该删除按钮只会删除产品记录，不会在接口中删除产品，建议使用模块命令删除产品后在再点击此删除。","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.delLoading=!0,Object(_["a"])(e.$route.query.hid).then((function(t){e.delLoading=!1,200!==t.data.status?e.$message.error(t.data.msg):(e.$message.success(t.data.msg),e.$router.push({path:"product-list",query:{id:e.id}}),sessionStorage.setItem("navIndex","productList"))}))})).catch((function(){})):e.$message.error("未获取到主机ID");case 1:case"end":return t.stop()}}),t)})))()},showOrderDetail:function(){this.$router.push({path:"/order-detail",query:{id:this.formData.orderid}})},renewHandleClick:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.renewDialogVis=!0;case 1:case"end":return t.stop()}}),t)})))()},renewSubmit:function(){var e=this;1===this.renewUseCredit&&parseFloat(this.pageData.credit)<parseFloat(this.pageData.host_data.amount)?this.$confirm("该客户的余额小于续费总金额，点击“确认”将应用用户余额，同时将账单标记为已支付并入账","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.createBill();case 1:case"end":return t.stop()}}),t)})))).catch((function(){})):this.createBill()},createBill:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.btnLoading=!0,t.next=3,Object(_["d"])({hostid:e.hid,billingcycles:e.formData.billingcycle});case 3:a=t.sent,s=a.data,e.btnLoading=!1,200!==s.status?e.$message.error(s.msg):(e.getData(),e.$message.success(s.msg),e.renewDialogVis=!1,1===e.renewUseCredit?(e.useCredit(s.data.invoice_id),parseFloat(e.pageData.credit)<parseFloat(e.pageData.host_data.amount)&&e.markPaid(s.data.invoice_id)):2===e.renewUseCredit&&e.markPaid(s.data.invoice_id));case 7:case"end":return t.stop()}}),t)})))()},useCredit:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var s,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Object(y["d"])({invoiceid:e,uid:t.id});case 2:s=a.sent,r=s.data,200!==r.status&&1001!==r.status?t.$message.error(r.msg):t.$message.success(r.msg);case 5:case"end":return a.stop()}}),a)})))()},markPaid:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var s,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Object(y["v"])({ids:e});case 2:s=a.sent,r=s.data,200!==r.status?t.$message.error(r.msg):t.$message.success(r.msg);case 5:case"end":return a.stop()}}),a)})))()},cycleChange:function(e){"ontrial"===this.cycleInit?this.renewShow="ontrial"!==e:this.renewShow="ontrial"!==e&&"onetime"!==e&&"free"!==e},defaultHandleClick:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var s,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return"create"===e?t.createLoading=!0:"unsuspend"===e?t.unsuspendLoading=!0:"terminate"===e&&(t.terminateLoading=!0),a.next=3,Object(w["i"])({id:t.hid,func:e});case 3:s=a.sent,r=s.data,200!==r.status?t.$message.error(r.msg):(t.$message.success(r.msg),t.getData()),t.createLoading=!1,t.unsuspendLoading=!1,t.terminateLoading=!1;case 9:case"end":return a.stop()}}),a)})))()},domainStatusChange:function(e){"Suspended"===e&&"dcim"===this.productType&&"bms"!==this.product.config_option1&&(this.pauseDialogVisible=!0)},pausePage:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(w["k"])({hostid:e.hid});case 2:a=t.sent,s=a.data,200!==s.status?e.$message.error(s.msg):e.reasonTypeOpitons=s.data.reason;case 5:case"end":return t.stop()}}),t)})))()},pauseSubmit:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.suspendLoading=!0,t.next=3,Object(w["i"])({id:e.hid,func:"suspend",reason_type:e.pauseForm.reason_type_custom||e.pauseForm.reason_type,reason:e.pauseForm.reason});case 3:a=t.sent,s=a.data,200!==s.status?e.$message.error(s.msg):(e.$message.success(s.msg),e.pauseDialogVisible=!1,e.getData()),e.suspendLoading=!1;case 7:case"end":return t.stop()}}),t)})))()},onHandleClick:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.onLoading=!0,t.next=3,Object(w["p"])({id:e.hid});case 3:a=t.sent,s=a.data,200!==s.status?e.$message.error(s.msg):(e.$message.success(s.msg),e.getData()),e.onLoading=!1;case 7:case"end":return t.stop()}}),t)})))()},offHandleClick:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.offLoading=!0,t.next=3,Object(w["o"])({id:e.hid});case 3:a=t.sent,s=a.data,200!==s.status?e.$message.error(s.msg):(e.$message.success(s.msg),e.getData()),e.offLoading=!1;case 7:case"end":return t.stop()}}),t)})))()},rebootHandleClick:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.rebootLoading=!0,t.next=3,Object(w["q"])({id:e.hid});case 3:a=t.sent,s=a.data,200!==s.status?e.$message.error(s.msg):(e.$message.success(s.msg),e.getData()),e.rebootLoading=!1;case 7:case"end":return t.stop()}}),t)})))()},bmcHandleClick:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.bmcLoading=!0,t.next=3,Object(w["b"])({id:e.hid});case 3:a=t.sent,s=a.data,200!==s.status?e.$message.error(s.msg):(e.$message.success(s.msg),e.getData()),e.bmcLoading=!1;case 7:case"end":return t.stop()}}),t)})))()},kvmHandleClick:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.kvmLoading=!0,t.next=3,Object(w["m"])({id:e.hid});case 3:a=t.sent,s=a.data,200!==s.status?e.$message.error(s.msg):(e.getData(),e.downloadFiles(s.name)),e.kvmLoading=!1;case 7:case"end":return t.stop()}}),t)})))()},ikvmHandleClick:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.ikvmLoading=!0,t.next=3,Object(w["l"])({id:e.hid});case 3:a=t.sent,s=a.data,200!==s.status?e.$message.error(s.msg):(e.getData(),e.downloadFiles(s.name)),e.ikvmLoading=!1;case 7:case"end":return t.stop()}}),t)})))()},downloadFiles:function(e){var t=document.createElement("a");t.download=e,t.style.display="none",t.href=this.$baseUrl+"/dcim/download?name="+e,document.body.appendChild(t),t.click(),document.body.removeChild(t)},vncHandleClick:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,s,r,i,n,o,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(w["n"])({id:e.hid});case 2:a=t.sent,s=a.data,200===s.status?(r="dcim/novnc?password=".concat(s.data.password,"&url=").concat(s.data.url),i=1100,n=550,o=(window.screen.availHeight-30-n)/2,l=(window.screen.availWidth-10-i)/2,window.open(r,"QRcodeWin"+e.hid,"height="+n+", width="+i+", top="+o+", left="+l+",toolbar=no, menubar=no,  scrollbars=yes,resizable=yes,location=no, status=no")):e.$message.error(s.msg);case 5:case"end":return t.stop()}}),t)})))()},reinstallHandleClick:function(){var e=this;100!==this.progress?this.$confirm("执行重装系统会终止之前的操作，确认继续吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.isReloadSystem=!0;case 1:case"end":return t.stop()}}),t)})))).catch((function(){})):this.isReloadSystem=!0},onClosed:function(){this.$refs.reloadSystemDataRef.resetFields()},reloadSystemPopup:function(){var e=this;this.showSubType=!0,this.reloadSystemData.subareaType="0",this.reloadSystemData.ID=this.reInstallOsInfo.host_data.serverid,this.reloadSystemData.advIp=this.reInstallOsInfo.host_data.dedicatedip,this.reloadSystemData.sum=this.reInstallOsInfo.host_data.ip_num,this.reloadSystemData.rootPass=this.reInstallOsInfo.host_data.password,(this.configArray||[]).forEach((function(t){5===t.option_type&&(e.systemArray=t.sub,t.sub.length&&(e.reloadSystemData.systemVal=t.sub[0].value,e.systemChang()))})),this.reloadSystemData.rootPass=this.systemPwd(),this.getDiskList()},subTypeFunc:function(){var e=this;(this.versionsArray||[]).forEach((function(t){e.reloadSystemData.versionsVal===t.value&&-1===e.reInstallOsInfo.host_data.os.toLowerCase().indexOf("windows")&&-1!==t.label.toLowerCase().indexOf("windows")&&(e.showSubType=!0,e.hintStr="如从".concat(e.reInstallOsInfo.host_data.os,",重装为").concat(t.label,"，选择第一分区重装，将会导致安装失败"))}))},systemChang:function(){var e=this;this.reloadSystemData.subareaType="0","Windows"===this.reloadSystemData.systemVal?(this.showSubType=!0,0===this.advanced.length?this.showDisk=!1:this.showDisk=!0):(this.showSubType=!1,this.showDisk=!1),(this.systemArray||[]).forEach((function(t){e.reloadSystemData.systemVal===t.value&&(e.osSelectedSvg=e.getOsSvg(t.value))})),this.getVersionsSelect()},getVersionsSelect:function(){var e=this;(this.configArray||[]).forEach((function(t){5===t.option_type&&(t.sub||[]).forEach((function(t){e.reloadSystemData.systemVal===t.value&&(e.versionsArray=t.children,t.children.length&&(e.reloadSystemData.versionsVal=t.children[0].value,e.portRandom()))}))}))},versionsChang:function(){var e=this;(this.versionsArray||[]).forEach((function(t){e.reloadSystemData.versionsVal===t.value&&-1===e.reInstallOsInfo.host_data.os.toLowerCase().indexOf("windows")&&-1!==t.label.toLowerCase().indexOf("windows")&&(e.showSubType=!0,e.hintStr="如从".concat(e.reInstallOsInfo.host_data.os,",重装为").concat(t.label,"，选择第一分区重装，将会导致安装失败"))}))},advancedFunc:function(){0===this.advanced.length?this.showDisk=!1:(this.showDisk=!0,this.reloadSystemData.disk=this.diskArray.length?this.diskArray[0].id:"")},getDiskList:function(){for(var e=[],t=0;t<Number(this.reInstallOsInfo.host_data.disk_num);t++)e.push({id:t,name:"disk"+t});this.diskArray=e},portRandom:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a=Math.floor(1e4*Math.random())+1e4,e.reloadSystemData.port=a;case 2:case"end":return t.stop()}}),t)})))()},saveReloadSystem:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:(e.versionsArray||[]).forEach((function(t){e.reloadSystemData.versionsVal===t.id&&(e.reinstallOsName=t.name)})),e.operationName="重装系统",e.progress=0,a={id:e.hid,os:e.reloadSystemData.versionsVal,password:e.reloadSystemData.rootPass,action:0,port:e.reloadSystemData.port,part_type:e.reloadSystemData.subareaType,disk:e.reloadSystemData.disk,check_disk_size:1},e.$refs.reloadSystemDataRef.validate(function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(s){var r,i,n,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(s){t.next=2;break}return t.abrupt("return",!1);case 2:return e.submitLoading=!0,t.next=5,Object(w["s"])(a);case 5:if(r=t.sent,i=r.data,200!==i.status){t.next=13;break}e.$message.success(i.msg),e.isReloadSystem=!1,e.timerSet(),t.next=23;break;case 13:if(!i.confirm){t.next=22;break}return a.check_disk_size=0,t.next=17,Object(w["s"])(a);case 17:n=t.sent,o=n.innerdata,200!==o.status?e.$message.error(o.msg):(e.$message.success(o.msg),e.isReloadSystem=!1,e.timerSet()),t.next=23;break;case 22:e.$message.error(i.msg);case 23:e.submitLoading=!1;case 24:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 5:case"end":return t.stop()}}),t)})))()},getProgress:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(w["u"])({id:e.hid});case 2:a=t.sent,s=a.data,200!==s.status?(e.$message.error(s.msg),clearInterval(e.timer),e.reinstallOsName="",e.reInstallOsInfo.host_data.os="",e.operationStepInfo="",e.operationName="",e.progress=100):s.data.last_result?s.data.last_result&&"1"===s.data.last_result.status&&(e.progress=100,e.operationName=s.data.last_result.act,clearInterval(e.timer)):(e.progress=Number(s.data.progress),e.isFinish=!s.data.task_type,e.operationStepInfo=s.data.step,"0"===s.data.task_type?(e.operationName="重装系统",e.reinstallOsName=s.data.reinstall_msg):"1"===s.data.task_type?e.operationName="救援系统":"2"===s.data.task_type&&(e.operationName="破解密码"),100===e.progress&&clearInterval(e.timer));case 5:case"end":return t.stop()}}),t)})))()},initPageProgress:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(w["u"])({id:e.hid});case 2:a=t.sent,s=a.data,200!==s.status?(e.$message.error(s.msg),clearInterval(e.timer)):s.data.task_type?(e.timerSet(),"0"===s.data.task_type?e.operationName="重装系统":"1"===s.data.task_type?e.operationName="救援系统":"2"===s.data.task_type&&(e.operationName="破解密码"),e.operationStepInfo=s.data.step):s.data.last_result&&"1"===s.data.last_result.status&&(e.progress=100,e.operationName=s.data.last_result.act);case 5:case"end":return t.stop()}}),t)})))()},cancelTask:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(w["c"])({id:e.hid});case 2:a=t.sent,s=a.data,200!==s.status?e.$message.error(s.msg):clearInterval(e.timer);case 5:case"end":return t.stop()}}),t)})))()},cancelHandleClick:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$confirm("确定终止操作吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(i["a"])(regeneratorRuntime.mark((function t(){var a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(w["c"])({id:e.hid});case 2:a=t.sent,s=a.data,200!==s.status?e.$message.error(s.msg):(e.$message.success(s.msg),e.getData(),clearInterval(e.timer));case 5:case"end":return t.stop()}}),t)})))).catch((function(){}));case 1:case"end":return t.stop()}}),t)})))()},rescueHandleClick:function(){var e=this;100!==this.progress?this.$confirm("执行救援系统会终止之前的操作，确认继续吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.rescueDialogFormVisible=!0;case 1:case"end":return t.stop()}}),t)})))).catch((function(){})):this.rescueDialogFormVisible=!0},rescueSubmit:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.operationName="救援系统",e.progress=0,e.submitLoading=!0,t.next=5,Object(w["t"])(e.rescueForm);case 5:a=t.sent,s=a.data,200!==s.status?e.$message.error(s.msg):(e.$message.success(s.msg),e.rescueDialogFormVisible=!1,e.getData()),e.submitLoading=!1;case 9:case"end":return t.stop()}}),t)})))()},crackPassHandleClick:function(){var e=this;100!==this.progress?this.$confirm("执行破解密码会终止之前的操作，确认继续吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.isCrack=!0,e.crackPassObj.password=e.systemPwd();case 2:case"end":return t.stop()}}),t)})))).catch((function(){})):(this.isCrack=!0,this.crackPassObj.password=this.systemPwd())},crackSubmit:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.operationName="破解密码",e.progress=0,e.submitLoading=!0,t.next=5,Object(w["d"])(e.crackPassObj);case 5:a=t.sent,s=a.data,200!==s.status?e.$message.error(s.msg):(e.$message.success(s.msg),e.isCrack=!1,e.getData()),e.submitLoading=!1;case 9:case"end":return t.stop()}}),t)})))()},crackPassFunc:function(){this.$refs.crackPassObj.resetFields(),this.crackRest=[],this.crackPassObj.password="",this.crackPassObj.user=""},systemPwd:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZ",t=e.length,a="",s=0;s<3;s++)a+=e.charAt(Math.floor(Math.random()*t));for(var r="abcdefghijklmnopqrstuvwxyz",i=r.length,n=0;n<3;n++)a+=r.charAt(Math.floor(Math.random()*i));for(var o="123456789",l=o.length,c=0;c<2;c++)a+=o.charAt(Math.floor(Math.random()*l));return a},getDcimServerList:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.search.id=e.hid,t.next=3,Object(w["h"])(e.search);case 3:a=t.sent,s=a.data,200!==s.status?e.$message.error(s.msg):(e.dcimTableData=s.data.list,e.total=s.data.count,e.server_groupOptions=s.data.server_group);case 6:case"end":return t.stop()}}),t)})))()},handleSizeChange:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.search.page=1,t.getDcimServerList();case 2:case"end":return e.stop()}}),e)})))()},handleCurrentChange:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.getDcimServerList();case 1:case"end":return e.stop()}}),e)})))()},toInnerPage:function(e,t){this.preWindow&&this.preWindow.close(),this.preWindow=window.open(this.$baseUrl+"/#/customer-view/product-innerpage?id="+e+"&hid="+t)},assignHandleClick:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var s,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Object(w["f"])({id:t.hid,dcimid:Number(e)});case 2:s=a.sent,r=s.data,200!==r.status?t.$message.error(r.msg):(t.$message.success(r.msg),t.dcimAssignDialog=!1,t.getData());case 5:case"end":return a.stop()}}),a)})))()},setFree:function(){var e=this;this.$confirm("执行空闲会终止之前的操作，确认继续吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(i["a"])(regeneratorRuntime.mark((function t(){var a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(w["g"])({id:e.hid});case 2:a=t.sent,s=a.data,200!==s.status?e.$message.error(s.msg):(e.$message.success(s.msg),e.getData());case 5:case"end":return t.stop()}}),t)})))).catch((function(){}))},dcimDialogClosed:function(){this.search.page=1,this.search.limit=50},creatOrderHandleClick:function(){this.$router.push({path:"/add-order",query:{uid:this.id}})},getPowerStatus:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.powerLoading=!0,t.next=3,Object(w["r"])({id:e.hid});case 3:a=t.sent,s=a.data,200!==s.status?(e.$message.error(s.msg),e.powerStatus="unknown",e.powerInfo.msg=s.msg):(e.powerStatus=s.data.power,e.powerInfo=s.data),e.powerLoading=!1;case 7:case"end":return t.stop()}}),t)})))()},timerSet:function(){var e=this;this.timer=setInterval((function(){e.getProgress()}),4e3)},getTicketData:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(y["f"])(e.ticketSearch);case 2:if(a=t.sent,s=a.data,200===s.status){t.next=9;break}return e.$message.error(s.msg),t.abrupt("return",!1);case 9:e.ticketList=s.data.ticket_data,e.ticketTotal=s.data.meta.total;case 11:case"end":return t.stop()}}),t)})))()},ticketChangeSort:function(e){"descending"===e.order?(this.ticketSearch.order=e.prop,this.ticketSearch.sort="desc"):(this.ticketSearch.order=e.prop,this.ticketSearch.sort="asc"),this.getTicketData()},handleTicketSizeChange:function(e){this.ticketSearch.page=1,this.getTicketData()},moduleButtonClick:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var s,r,n,o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if("dcim_client"!==t.pageData.host_data.upper_reaches_control_mode||"reinstall"!==e.func&&"crack_pass"!==e.func){a.next=3;break}return t.distributionDcimFunc(e),a.abrupt("return");case 3:if("default"!==e.type){a.next=23;break}if("reinstall"===e.func||"crack_pass"===e.func||"suspend"===e.func){a.next=20;break}if("vnc"!==e.func&&"panel"!==e.func){a.next=17;break}return e.loading=!0,t.$forceUpdate(),a.next=10,Object(w["i"])({id:t.hid,func:e.func});case 10:s=a.sent,r=s.data,200!==r.status?t.$message.error(r.msg):(t.$message.success(r.msg||"操作成功"),t.getData(),window.open(r.data.url)),e.loading=!1,t.$forceUpdate(),a.next=18;break;case 17:t.$confirm("确定执行"+e.name+"操作吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(i["a"])(regeneratorRuntime.mark((function a(){var s,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e.loading=!0,t.$forceUpdate(),a.next=4,Object(w["i"])({id:t.hid,func:e.func});case 4:s=a.sent,r=s.data,200!==r.status?t.$message.error(r.msg):(t.$message.success(r.msg||"操作成功"),t.getData(),"terminate"!==e.func&&t.pageData.module_power_status&&setTimeout((function(){t.getPowerStatusCycle()}),2e3)),e.loading=!1,t.$forceUpdate();case 9:case"end":return a.stop()}}),a)})))).catch((function(){}));case 18:a.next=21;break;case 20:"reinstall"===e.func?t.reinstallDialog=!0:"crack_pass"===e.func?t.crackDialog=!0:"suspend"===e.func&&(t.suspendDialog=!0);case 21:a.next=33;break;case 23:if("custom"!==e.type){a.next=33;break}return e.loading=!0,t.$forceUpdate(),a.next=28,Object(w["e"])({id:t.hid,func:e.func});case 28:n=a.sent,o=n.data,200!==o.status?t.$message.error(o.msg):t.$message.success(o.msg||"操作成功"),e.loading=!1,t.$forceUpdate();case 33:case"end":return a.stop()}}),a)})))()},distributionDcimFunc:function(e){"reinstall"===e.func?this.dcimReinstall():"crack_pass"===e.func&&this.dcimCrackPass()},dcimReinstall:function(){this.$eventBus.$emit("reinstall",this.pageData.host_data.upper_reaches_res),this.reinstallVis=!0},reinstallDcimSuc:function(e){e&&(this.reinstallVis=!1,this.getData(),this.getDcimProgress(),this.loopStatus())},dcimCrackPass:function(){this.$eventBus.$emit("crackPass",this.pageData.host_data.upper_reaches_res),this.crackPassVis=!0},crackpassDcimSuc:function(e){e&&(this.crackPassVis=!1,this.getData(),this.getDcimProgress(),this.loopStatus())},getDcimProgress:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,s,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={id:e.pageData.host_data.upper_reaches_res},t.next=3,Object(d["q"])(a);case 3:if(s=t.sent,r=s.data,200===r.status){t.next=8;break}return e.$message.error(r.msg),t.abrupt("return",!1);case 8:if(r.data.progress&&(e.reinstallProgress=!0),e.reinstallObj=r.data,0!==r.data.length){t.next=15;break}return e.reinstallObj.progress=100,e.reinstallProgress=!1,clearInterval(e.reinstallTimer),t.abrupt("return",!0);case 15:case"end":return t.stop()}}),t)})))()},randomPort:function(){var e=parseInt(65535*Math.random()+100);e>=100&&e<=65535&&(this.osReinstallFrom.port=e)},osChange:function(){-1!==this.osReinstallFrom.osSelected[0].indexOf("Win")?this.osReinstallFrom.port=3389:this.osReinstallFrom.port=22},saveReinstall:function(){var e=this;this.$refs.osReinstall.validate(function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(a){var s,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a){t.next=4;break}return t.abrupt("return",!1);case 4:return e.submitLoading=!0,t.next=7,Object(w["i"])({id:e.hid,func:"reinstall",os:e.osReinstallFrom.osSelected[1],port:e.osReinstallFrom.port});case 7:s=t.sent,r=s.data,200!==r.status?e.$message.error(r.msg):(e.$message.success(r.msg),e.getData(),e.pageData.module_power_status&&e.getPowerStatusCycle()),e.reinstallDialog=!1,e.submitLoading=!1;case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},getPowerStatusCycle:function(){var e=this;this.powerLoading=!0,this.PowerStatusTimer=setInterval(Object(i["a"])(regeneratorRuntime.mark((function t(){var a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(w["i"])({id:e.hid,func:"status"});case 2:a=t.sent,s=a.data,200!==s.status?(e.$message.error(s.msg),clearInterval(e.PowerStatusTimer)):s.data?(e.powerStatus=s.data.status,"unknown"!==s.data.status&&""!==s.data.status||(s.data.des="未知"),"process"!==s.data.status&&(e.powerLoading=!1,clearInterval(e.PowerStatusTimer)),e.powerInfo=s.data):e.powerInfo.des="未知";case 5:case"end":return t.stop()}}),t)}))),2e3)},getStatus:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.powerLoading=!0,t.next=3,Object(w["i"])({id:e.hid,func:"status"});case 3:a=t.sent,s=a.data,200!==s.status?(e.$message.error(s.msg),e.powerInfo={des:s.msg||"未知",status:""},e.powerStatus=""):s.data?(e.powerStatus=s.data.status,"unknown"!==s.data.status&&""!==s.data.status||(s.data.des="未知"),"on"===s.data.status&&clearInterval(e.PowerStatusTimer),e.powerInfo=s.data):e.powerInfo.des="未知",e.powerLoading=!1;case 7:case"end":return t.stop()}}),t)})))()},creatCode:function(e){for(var t="",a=parseInt(e),s=[0,1,2,3,4,5,6,7,8,9,"a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],r=0;r<a;r++){var i=Math.floor(62*Math.random());t+=s[i]}var n=/^(?=.*?[a-z])(?=.*?[A-Z])(?=.*?\d).*$/,o=new RegExp(n);o.test(t)?this.crackFrom.password=t:this.creatCode(12)},saveCrack:function(){var e=this;this.$refs.crackPassword.validate(function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(a){var s,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a){t.next=4;break}return t.abrupt("return",!1);case 4:return e.submitLoading=!0,t.next=7,Object(w["i"])({id:e.hid,func:"crack_pass",password:e.crackFrom.password});case 7:s=t.sent,r=s.data,200!==r.status?e.errorMsg=r.msg:(e.crackDialog=!1,e.$message.success(r.msg),e.getData(),setTimeout((function(){e.getStatus()}),2e3)),e.submitLoading=!1;case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},saveSuspend:function(){var e=this;this.$refs.suspendRef.validate(function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(a){var s,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a){t.next=4;break}return t.abrupt("return",!1);case 4:return e.submitLoading=!0,t.next=7,Object(w["i"])({id:e.hid,func:"suspend",reason:e.suspendFrom.reason});case 7:s=t.sent,r=s.data,200!==r.status?e.$message.error(r.msg):(e.suspendDialog=!1,e.$message.success(r.msg),e.getData(),e.pageData.module_power_status&&e.getPowerStatusCycle()),e.submitLoading=!1;case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},applyToInterface:function(){var e=this;this.$confirm("确认修改配置至后端接口？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(i["a"])(regeneratorRuntime.mark((function t(){var a,s,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={hid:e.hid,configoption:[]},e.configArray.forEach((function(e){5===e.option_type||12===e.option_type?a.configoption[e.id]=e.option_value[1]:a.configoption[e.id]=e.option_value})),e.submitLoading=!0,t.next=5,Object(_["g"])(e.$qs.stringify(a));case 5:s=t.sent,r=s.data,200!==r.status?e.$message.error("配置更改失败"):(e.$message.success(r.msg),e.getData()),e.submitLoading=!1;case 9:case"end":return t.stop()}}),t)})))).catch((function(){}))},getMessageTemplate:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(x["f"])({hid:e.hid});case 2:a=t.sent,s=a.data,200!==s.status?e.$message.error(s.msg):(e.msgOptions=s.templates,e.sendMsgformData.msgid=s.default.id);case 5:case"end":return t.stop()}}),t)})))()},getEmailTemplate:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(x["e"])({hid:e.hid});case 2:a=t.sent,s=a.data,200!==s.status?e.$message.error(s.msg):e.sendMsgformData.emaid=s.default.id;case 5:case"end":return t.stop()}}),t)})))()},getEmail:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(D["b"])("product");case 2:if(a=t.sent,s=a.data,200===s.status){t.next=7;break}return e.$message.error(s.msg),t.abrupt("return");case 7:e.emailOptions=s.email;case 8:case"end":return t.stop()}}),t)})))()},sendDialogOpen:function(){this.getMessageTemplate(),this.getEmailTemplate(),this.getEmail(),this.sendMsgformData.msgtype=1,this.sendMsgformData.ematype=1},msgSelectChange:function(){this.sendMsgformData.msgid||(this.sendMsgformData.msgtype=0)},msgCheckChange:function(){0===this.sendMsgformData.msgtype&&(this.sendMsgformData.msgid=void 0)},emailSelectChange:function(){this.sendMsgformData.emaid||(this.sendMsgformData.ematype=0)},emailCheckChange:function(){0===this.sendMsgformData.ematype&&(this.sendMsgformData.emaid=void 0)},sendMsgHandleClick:function(){var e=this;this.$refs.sendMsgForm.validate(function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(a){var s,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a){t.next=2;break}return t.abrupt("return",!1);case 2:return e.sendMsgformData.hid=e.$route.query.hid?Number(e.$route.query.hid):"",e.submitLoading=!0,t.next=6,Object(x["g"])(e.sendMsgformData);case 6:s=t.sent,r=s.data,200!==r.status?e.$message.error(r.msg):(e.$message.success(r.msg),e.sendMsgVisible=!1),e.submitLoading=!1;case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},getOsSvg:function(e){var t=1;return t=-1!==e.toLowerCase().indexOf("windows")?1:-1!==e.toLowerCase().indexOf("centos")?2:-1!==e.toLowerCase().indexOf("ubuntu")?3:-1!==e.toLowerCase().indexOf("debian")?4:-1!==e.toLowerCase().indexOf("esxi")?5:-1!==e.toLowerCase().indexOf("xenserver")?6:-1!==e.toLowerCase().indexOf("freebsd")?7:-1!==e.toLowerCase().indexOf("fedora")?8:"",t},getProductsList:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(D["e"])();case 2:if(a=t.sent,s=a.data,200===s.status){t.next=7;break}return e.$message.error(s.msg),t.abrupt("return");case 7:e.productidOptions=s.client_groups;case 8:case"end":return t.stop()}}),t)})))()},getPromo:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,s,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(D["f"])();case 2:for(r in a=t.sent,s=a.data,200!==s.status&&e.$message.error(s.msg),e.promoidOptions=[],s.promo_code)e.promoidOptions.push({promo_codeGroupName:r,child:s.promo_code[r]});e.promoidOptions=e.promoidOptions.reverse();case 8:case"end":return t.stop()}}),t)})))()},getGetways:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(D["c"])();case 2:if(a=t.sent,s=a.data,200===s.status){t.next=7;break}return e.$message.error(s.msg),t.abrupt("return");case 7:e.paymentOptions=s.gateway;case 8:case"end":return t.stop()}}),t)})))()},getHostList:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,s,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.$route.query.id,t.next=3,Object(D["d"])(a);case 3:if(s=t.sent,r=s.data,200===r.status){t.next=8;break}return e.$message.error(r.msg),t.abrupt("return");case 8:e.hostOptions=r.host_list;case 9:case"end":return t.stop()}}),t)})))()}},created:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getData();case 2:e.getProductsList(),e.getPromo(),e.getGetways(),e.getHostList();case 6:case"end":return t.stop()}}),t)})))()},destroyed:function(){clearInterval(this.timer)}},$=O,R=(a("a012"),Object(g["a"])($,s,r,!1,null,"4f624f4d",null));t["default"]=R.exports}}]);