(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["CustomerView~f71cff67"],{"13cd":function(t,e,n){},29435:function(t,e,n){"use strict";var r=n("74199"),a=n.n(r);a.a},"50fb":function(t,e,n){"use strict";var r=n("13cd"),a=n.n(r);a.a},"5a39":function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"customerview"},[t.screenWidth>992?[n("el-menu",{style:{width:t.wiiidth},attrs:{"default-active":t.activeIndex,mode:"horizontal",router:""},on:{select:t.handleSelect}},[n("router-link",{staticStyle:{display:"inline-block"},attrs:{to:{path:"/customer-view/abstract",query:{id:t.id}}}},[n("el-menu-item",{attrs:{index:"abstract",route:{path:"/customer-view/abstract",query:{id:t.id}}}},[t._v("客户摘要")])],1),n("router-link",{staticStyle:{display:"inline-block"},attrs:{to:{path:"/customer-view/person",query:{id:t.id}}}},[n("el-menu-item",{attrs:{index:"person",route:{path:"/customer-view/person",query:{id:t.id}}}},[t._v("个人资料")])],1),n("router-link",{staticStyle:{display:"inline-block"},attrs:{to:{path:"/customer-view/product-list",query:{id:t.id,hid:t.hid,currencyId:t.currencyId}}}},[n("el-menu-item",{attrs:{index:"productList",route:{path:"/customer-view/product-list",query:{id:t.id,hid:t.hid}}}},[t._v(" 产品/服务")])],1),n("router-link",{staticStyle:{display:"inline-block"},attrs:{to:{path:"/customer-view/bill",query:{id:t.id}}}},[n("el-menu-item",{attrs:{index:"bill",route:{path:"/customer-view/bill",query:{id:t.id}}}},[t._v("账单")])],1),n("router-link",{staticStyle:{display:"inline-block"},attrs:{to:{path:"/customer-view/transactions",query:{id:t.id}}}},[n("el-menu-item",{attrs:{index:"transactions",route:{path:"/customer-view/transactions",query:{id:t.id}}}},[t._v("交易记录 ")])],1),n("router-link",{staticStyle:{display:"inline-block"},attrs:{to:{path:"/customer-view/tickets",query:{id:t.id}}}},[n("el-menu-item",{attrs:{index:"tickets",route:{path:"/customer-view/tickets",query:{id:t.id}}}},[t._v("工单")])],1),n("router-link",{staticStyle:{display:"inline-block"},attrs:{to:{path:"/customer-view/log",query:{id:t.id}}}},[n("el-menu-item",{attrs:{index:"log",route:{path:"/customer-view/log",query:{id:t.id}}}},[t._v("日志")])],1),n("router-link",{staticStyle:{display:"inline-block"},attrs:{to:{path:"/customer-view/noticelog",query:{id:t.id}}}},[n("el-menu-item",{attrs:{index:"noticelog",route:{path:"/customer-view/noticelog",query:{id:t.id}}}},[t._v("通知日志")])],1),n("router-link",{staticStyle:{display:"inline-block"},attrs:{to:{path:"/customer-view/annex",query:{id:t.id}}}},[n("el-menu-item",{attrs:{index:"annex",route:{path:"/customer-view/annex",query:{id:t.id}}}},[t._v("附件")])],1),t.showPromanPlan?n("router-link",{staticStyle:{display:"inline-block"},attrs:{to:{path:"/customer-view/promotion_plan",query:{id:t.id}}}},[n("el-menu-item",{attrs:{index:"promotion_plan",route:{path:"/customer-view/promotion_plan",query:{id:t.id}}}},[t._v("推介计划 "),n("el-popover",{attrs:{placement:"top-start",title:"",width:"200",trigger:"hover"}},[n("el-row",[n("el-col",{attrs:{span:24}},[t._v("单独设置该客户的推介提成比例，优先级最高。")])],1),n("i",{staticClass:"el-icon-question blue_qus",staticStyle:{"font-size":"14px"},attrs:{slot:"reference"},slot:"reference"})],1)],1)],1):t._e(),n("router-link",{staticStyle:{display:"inline-block"},attrs:{to:{path:"/customer-view/follow-status",query:{id:t.id}}}},[n("el-menu-item",{attrs:{index:"follow-status",route:{path:"/customer-view/follow-status",query:{id:t.id}}}},[t._v("跟进状态 ")])],1)],1)]:[n("el-tabs",{on:{"tab-click":t.handleClick},model:{value:t.activeIndex,callback:function(e){t.activeIndex=e},expression:"activeIndex"}},[n("el-tab-pane",{attrs:{label:"客户摘要",name:"abstract"}}),n("el-tab-pane",{attrs:{label:"个人资料",name:"person"}}),n("el-tab-pane",{attrs:{label:"产品/服务",name:"productList"}}),n("el-tab-pane",{attrs:{label:"账单",name:"bill"}}),n("el-tab-pane",{attrs:{label:"交易记录",name:"transactions"}}),n("el-tab-pane",{attrs:{label:"工单",name:"tickets"}}),n("el-tab-pane",{attrs:{label:"日志",name:"log"}}),n("el-tab-pane",{attrs:{label:"通知日志",name:"noticelog"}}),n("el-tab-pane",{attrs:{label:"附件",name:"annex"}}),t.showPromanPlan?n("el-tab-pane",{attrs:{label:"推介计划",name:"promotion_plan"}},[n("span",{attrs:{slot:"label"},slot:"label"},[t._v(" 推介计划 "),n("el-popover",{attrs:{placement:"top-start",title:"",width:"200",trigger:"hover"}},[n("el-row",[n("el-col",{attrs:{span:24}},[t._v("单独设置该客户的推介提成比例，优先级最高。")])],1),n("i",{staticClass:"el-icon-question blue_qus",staticStyle:{"font-size":"14px"},attrs:{slot:"reference"},slot:"reference"})],1)],1)]):t._e(),n("el-tab-pane",{attrs:{label:"跟进状态",name:"followstatus"}})],1)],n("div",[n("Flag",{ref:"flagRefs"})],1),n("router-view")],2)},a=[],i=(n("b0c0"),n("96cf"),n("1da1")),o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.pageData.id?n("div",{staticClass:"user_summary"},[t.scroll?n("el-tooltip",{attrs:{effect:"light",placement:"bottom-end"}},[n("div",{attrs:{slot:"content"},slot:"content"},[t._v(" "+t._s(t.pageData.id)+" "+t._s(t.pageData.username?" - "+t.pageData.username:"")),n("br"),t._v(t._s(t.pageData.companyname?" / "+t.pageData.companyname:"")+" ")]),n("span",{staticClass:"content"},[t._v(" "+t._s(t.pageData.id)+" "+t._s(t.pageData.username?" - "+t.pageData.username:"")+" "+t._s(t.pageData.companyname?" / "+t.pageData.companyname:"")+" ")])]):n("span",{staticClass:"content"},[t._v(" "+t._s(t.pageData.id)+" "+t._s(t.pageData.username?" - "+t.pageData.username:"")+" "+t._s(t.pageData.companyname?" / "+t.pageData.companyname:"")+" ")])],1):t._e()},s=[],c=n("4360"),u=n("f6b0"),l={data:function(){return{scroll:!1,pageData:{companyname:"",id:"",username:""}}},created:function(){this.getCustomerBaseInfo()},mounted:function(){this.checkWidth()},methods:{getCustomerBaseInfo:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var n,r,a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.$route.query.id,null===sessionStorage.getItem("FLAGINFO")){e.next=6;break}if(r=JSON.parse(sessionStorage.getItem("FLAGINFO")),t.pageData=r,parseInt(r.id)!==parseInt(t.$route.query.id)||r.companyname!==t.pageData.companyname||r.username!==t.pageData.username){e.next=6;break}return e.abrupt("return");case 6:if(n){e.next=8;break}return e.abrupt("return");case 8:return e.next=10,Object(u["p"])({uid:n});case 10:if(a=e.sent,i=a.data,200===i.status){e.next=15;break}return t.$message.error(i.msg),e.abrupt("return");case 15:t.pageData=i.data,t.$parent.calcWidth(),c["b"].setUserInfo(i.data),sessionStorage.setItem("FLAGINFO",JSON.stringify(i.data)),t.$nextTick((function(){t.checkWidth()})),t.$parent.showPromanPlan=i.data.activation;case 21:case"end":return e.stop()}}),e)})))()},forcedRefresh:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var n,r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.$route.query.id,e.next=3,Object(u["p"])({uid:n});case 3:if(r=e.sent,a=r.data,t.$parent.showPromanPlan=a.data.activation,200===a.status){e.next=9;break}return t.$message.error(a.msg),e.abrupt("return");case 9:t.pageData=a.data,t.$parent.calcWidth(),c["b"].setUserInfo(a.data),sessionStorage.setItem("FLAGINFO",JSON.stringify(a.data)),t.$nextTick((function(){t.checkWidth()}));case 14:case"end":return e.stop()}}),e)})))()},checkWidth:function(){var t=document.querySelector(".content");t&&(this.scroll=200===t.offsetWidth)}},computed:{storeUserInfo:function(){return c["c"].userInfo},myRouterPath:function(){return this.$route.name}},watch:{myRouterPath:{handler:function(t){"abstract"===t&&this.forcedRefresh()},immediate:!0,deep:!0}}},d=l,m=(n("50fb"),n("2877")),p=Object(m["a"])(d,o,s,!1,null,"6806f74b",null),f=p.exports,h=n("6e81"),v={components:{Flag:f},metaInfo:{title:"客户配置"},data:function(){return{wiiidth:"",showPromanPlan:!1,isXscreen:window.document.body.clientWidth>768,id:void 0,hid:0,customerStr:"",activeIndex:"abstract",route:{abstract:"/customer-view/abstract",developer:"/customer-view/developer",person:"/customer-view/person",productList:"/customer-view/product-list",bill:"/customer-view/bill",transactions:"/customer-view/transactions",tickets:"/customer-view/tickets",log:"/customer-view/log",noticelog:"/customer-view/noticelog",smslog:"/customer-view/smslog",emaillog:"/customer-view/emaillog",promotion_plan:"/customer-view/promotion_plan",followstatus:"/customer-view/follow-status"},screenWidth:null,screenHeight:null,developer:0,currencyId:0}},mounted:function(){var t=this;this.calcWidth(),this.screenWidth=document.body.clientWidth,this.screenHeight=document.body.clientHeight,window.onresize=function(){return function(){t.screenWidth=document.body.clientWidth,t.screenHeight=document.body.clientHeight}()}},computed:{conCatStr:function(){return this.$store.state.customerInfo?this.customerStr+(this.$store.state.customerInfo.companyname?"("+this.$store.state.customerInfo.companyname+")":""):this.customerStr}},watch:{$route:function(t,e){this.activeIndex=t.name,t.query.id!==e.query.id&&(this.id=this.$route.query.id),t.name},activeIndex:function(t){this.activeName=t},activeName:function(t){this.activeIndex=t}},methods:{calcWidth:function(){var t=this;this.$nextTick((function(){var e=0,n=document.querySelector(".user_summary");n&&(e=n.offsetWidth),t.wiiidth="calc(100% - ".concat(e,"px)")}))},getCustomerPro:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(h["c"])(t.id);case 2:if(n=e.sent,r=n.data,200===r.status){e.next=6;break}return e.abrupt("return",!1);case 6:t.hid=r.data.hostid;case 7:case"end":return e.stop()}}),e)})))()},getCustomerInfo:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var n,r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(u["p"])({uid:t.id});case 2:n=e.sent,r=n.data,200!==r.status?t.$message.error(r.msg):(a={showPromanPlan:!1,customerStr:"",developer:!1,currencyId:0},1===r.data.activation?(t.showPromanPlan=!0,a.showPromanPlan=!0):(r.data.activation,t.showPromanPlan=!1,a.showPromanPlan=!1),t.customerStr="#"+r.data.id+"-"+r.data.username,a.customerStr="#"+r.data.id+"-"+r.data.username,t.developer=r.data.developer,a.developer=r.data.developer,t.currencyId=r.data.currency,a.currencyId=r.data.currency,sessionStorage.setItem("USERINNERID",t.$route.query.id),sessionStorage.setItem("USERINNER",JSON.stringify(a)));case 5:case"end":return e.stop()}}),e)})))()},handleSelect:function(t){this.activeIndex=t,sessionStorage.setItem("navIndex",this.activeIndex)},handleClick:function(t){this.activeIndex=t.name,sessionStorage.setItem("navIndex",t.name),this.$router.push({path:this.route[t.name],query:{id:this.id,uid:this.uid,currencyId:this.currencyId}})}},created:function(){this.id=this.$route.query.id,this.activeIndex=sessionStorage.getItem("navIndex")?sessionStorage.getItem("navIndex"):"/customer-view/promotion_plan"===this.$route.path?"promotion_plan":"abstract";var t=sessionStorage.getItem("USERINNER"),e=parseInt(this.$route.query.id),n=parseInt(sessionStorage.getItem("USERINNERID"));if("{}"!==t&&e===n){var r=JSON.parse(sessionStorage.getItem("USERINNER"));return this.currencyId=r.currencyId,this.customerStr=r.customerStr,this.developer=r.developer,void(this.showPromanPlan=r.showPromanPlan)}this.getCustomerInfo()},beforeDestroy:function(){},beforeRouteEnter:function(t,e,n){n((function(e){e.activeIndex=t.name}))}},b=v,g=(n("29435"),Object(m["a"])(b,r,a,!1,null,"6f601276",null));e["default"]=g.exports},"6e81":function(t,e,n){"use strict";n.d(e,"c",(function(){return a})),n.d(e,"e",(function(){return i})),n.d(e,"f",(function(){return o})),n.d(e,"a",(function(){return s})),n.d(e,"d",(function(){return c})),n.d(e,"g",(function(){return u})),n.d(e,"b",(function(){return l}));var r=n("a27e");function a(t,e){return Object(r["a"])({url:"clients_services",params:{uid:t,hostselect:e}})}function i(t){return Object(r["a"])({url:"clients_services/info",method:"post",data:t})}function o(t){return Object(r["a"])({url:"clients_services/transfer",method:"post",data:t})}function s(t){return Object(r["a"])({url:"clients_services/host",method:"delete",params:{hostid:t}})}function c(t){return Object(r["a"])({url:"clients_services/host_renew",params:t})}function u(t){return Object(r["a"])({url:"clients_services/upgrade_config",method:"post",data:t})}function l(t){return Object(r["a"])({url:"clients_services/host",method:"delete",params:t})}},74199:function(t,e,n){},f6b0:function(t,e,n){"use strict";n.d(e,"q",(function(){return a})),n.d(e,"s",(function(){return i})),n.d(e,"n",(function(){return o})),n.d(e,"a",(function(){return s})),n.d(e,"r",(function(){return c})),n.d(e,"m",(function(){return u})),n.d(e,"l",(function(){return l})),n.d(e,"g",(function(){return d})),n.d(e,"j",(function(){return m})),n.d(e,"h",(function(){return p})),n.d(e,"f",(function(){return f})),n.d(e,"e",(function(){return h})),n.d(e,"u",(function(){return v})),n.d(e,"x",(function(){return b})),n.d(e,"c",(function(){return g})),n.d(e,"b",(function(){return y})),n.d(e,"p",(function(){return _})),n.d(e,"A",(function(){return w})),n.d(e,"k",(function(){return I})),n.d(e,"B",(function(){return x})),n.d(e,"t",(function(){return O})),n.d(e,"y",(function(){return k})),n.d(e,"z",(function(){return S})),n.d(e,"d",(function(){return j})),n.d(e,"v",(function(){return q})),n.d(e,"o",(function(){return P})),n.d(e,"i",(function(){return $})),n.d(e,"w",(function(){return D}));var r=n("a27e");function a(t){return Object(r["a"])({url:"client_list",method:"post",data:t})}function i(t){return Object(r["a"])({url:"summary?client_id=".concat(t)})}function o(){return Object(r["a"])({url:"create_client"})}function s(t){return Object(r["a"])({url:"create_client_post",method:"post",data:t})}function c(t){return Object(r["a"])({url:"profile/".concat(t)})}function u(t){return Object(r["a"])({url:"profile_post",method:"post",data:t})}function l(t){return Object(r["a"])({url:"delete_client/".concat(t)})}function d(t){return Object(r["a"])({url:"close_client/".concat(t)})}function m(t){return Object(r["a"])({url:"user_invoice",params:t})}function p(t,e){return Object(r["a"])({url:"close_client/".concat(t),params:e})}function f(t){return Object(r["a"])({url:"client_ticket",params:t})}function h(t){return Object(r["a"])({url:"log_record",params:t})}function v(t){return Object(r["a"])({url:"login_by_user/"+t})}function b(t){return Object(r["a"])({url:"certifi_person_detail/".concat(t)})}function g(t){return Object(r["a"])({url:"add_user_invoice",method:"post",data:t})}function y(t){return Object(r["a"])({url:"add_recharge_invoice/"+t.uid,method:"post",data:t})}function _(t){return Object(r["a"])({url:"get_user",params:t})}function w(t){return Object(r["a"])({url:"request_cancel_list",params:t})}function I(t){return Object(r["a"])({url:"request_cancel_list/".concat(t),method:"delete"})}function x(t){return Object(r["a"])({url:"searchlist",params:{value:t}})}function O(t){return Object(r["a"])({url:"hostbyuid",params:t})}function k(t){return Object(r["a"])({url:"clients_services/host_batch_renew_page",method:"post",data:t})}function S(t){return Object(r["a"])({url:"clients_services/host_batch_renew",method:"post",data:t})}function j(t){return Object(r["a"])({url:"clients_services/apply_credit",method:"post",data:t})}function q(t){return Object(r["a"])({url:"invoice/paid",params:t})}function P(t){return Object(r["a"])({url:"get_combine_invoices",params:t})}function $(t){return Object(r["a"])({url:"combine_invoices",method:"post",data:t})}function D(t){return Object(r["a"])({url:"post_client_notes",method:"post",data:t})}}}]);