(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["SmsCreateTemplate~31ecd969"],{"1dde":function(e,t,r){var a=r("d039"),n=r("b622"),o=r("2d00"),s=n("species");e.exports=function(e){return o>=51||!a((function(){var t=[],r=t.constructor={};return r[s]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},"342b":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"create"},[r("h2",[e._v("短信通知")]),r("h5",[e._v("创建模板")]),r("el-divider"),r("el-row",{attrs:{gutter:15}},[r("el-form",{ref:"elForm",attrs:{model:e.formData,rules:e.rules,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"类型",prop:"range_type"}},[r("el-radio-group",{model:{value:e.formData.range_type,callback:function(t){e.$set(e.formData,"range_type",t)},expression:"formData.range_type"}},e._l(e.range_typeOptions,(function(t,a){return r("el-radio",{key:a,attrs:{label:t.value,disabled:t.disabled}},[e._v(e._s(t.label))])})),1)],1),r("el-form-item",{attrs:{label:"模板类型",prop:""}},[r("el-select",{style:{width:"260px"},attrs:{size:"small",placeholder:"请选择模板类型",clearable:""},on:{change:e.tempSelectChange},model:{value:e.tempCode,callback:function(t){e.tempCode=t},expression:"tempCode"}},e._l(e.templateTypeOptions,(function(e,t){return r("el-option",{key:t,attrs:{label:e.type,value:e.id}})})),1)],1),r("el-form-item",{attrs:{label:"短信供应商",prop:"sms_operator"}},[r("el-select",{style:{width:"260px"},attrs:{size:"small",placeholder:"请选择短信供应商",clearable:""},on:{change:e.tempSelectChange},model:{value:e.formData.sms_operator,callback:function(t){e.$set(e.formData,"sms_operator",t)},expression:"formData.sms_operator"}},e._l(e.sms_operatorOptions,(function(e,t){return r("el-option",{key:t,attrs:{label:e.value,value:e.label}})})),1)],1),r("el-form-item",{attrs:{label:"标题",prop:"title"}},[r("el-input",{style:{width:"260px"},attrs:{size:"small",placeholder:"请输入标题",clearable:""},model:{value:e.formData.title,callback:function(t){e.$set(e.formData,"title",t)},expression:"formData.title"}})],1),r("el-form-item",{attrs:{label:"内容",prop:"content"}},[r("el-input",{style:{width:"260px"},attrs:{size:"small",type:"textarea",placeholder:"请输入内容",autosize:{minRows:5,maxRows:5}},model:{value:e.formData.content,callback:function(t){e.$set(e.formData,"content",t)},expression:"formData.content"}}),r("div",[e._v(e._s(e.templateMsg?"建议模板: "+e.templateMsg:""))]),"aliyun"===e.formData.sms_operator?r("div",[e._v("参数形式: ${code}")]):e._e(),"submail"===e.formData.sms_operator?r("div",[e._v("参数形式: @var(code)")]):e._e(),"smsbao"===e.formData.sms_operator?r("div",[e._v("参数形式: {code}")]):e._e()],1),r("el-form-item",{attrs:{label:"备注",prop:"remark"}},[r("el-input",{style:{width:"260px"},attrs:{size:"small",placeholder:"请输入备注",clearable:""},model:{value:e.formData.remark,callback:function(t){e.$set(e.formData,"remark",t)},expression:"formData.remark"}})],1),r("el-form-item",[r("el-button",{attrs:{size:"small",type:"primary",loading:e.btnLoading},on:{click:e.submitForm}},[e._v("提交")]),r("el-button",{attrs:{size:"small"},on:{click:e.goBack}},[e._v("返回")]),r("el-button",{attrs:{size:"small"},on:{click:e.resetForm}},[e._v("重置")])],1)],1)],1),e.base_args.length?r("h4",[e._v("可合并区域")]):e._e(),e.base_args.length?r("div",{staticClass:"emailedit_baseArgs"},e._l(e.base_args,(function(t,a){return r("el-row",{key:a},[r("el-col",{attrs:{xs:8,md:4}},[e._v(e._s(t.name))]),r("el-col",{attrs:{xs:16,md:20}},[e._v(e._s(t.arg))])],1)})),1):e._e()],1)},n=[],o=(r("99af"),r("4160"),r("ac1f"),r("5319"),r("159b"),r("96cf"),r("1da1")),s=r("6770"),i={metaInfo:{title:"创建短信模板"},data:function(){return{formData:{range_type:void 0,sms_operator:"aliyun",title:void 0,content:void 0,remark:void 0},rules:{range_type:[{required:!0,message:"类型不能为空",trigger:"change"}],sms_operator:[{required:!0,message:"请选择短信供应商",trigger:"change"}],title:[{required:!0,message:"请输入标题",trigger:"blur"}],content:[{required:!0,message:"请输入内容",trigger:"blur"}],remark:[{required:!0,message:"请输入备注",trigger:"blur"}]},range_typeOptions:[{label:"大陆",value:0},{label:"非大陆",value:1}],sms_operatorOptions:[],templateTypeOptions:[],templateMsg:"",tempCode:void 0,base_args:[],btnLoading:!1}},methods:{createTemplatePage:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(s["c"])();case 2:r=t.sent,a=r.data,e.sms_operatorOptions=a.allowedSmsOperator,200!==a.status?e.$message.error(a.msg):function(){e.templateTypeOptions=a.data;var t=[];for(var r in a.combine)(a.combine[r]||[]).forEach((function(e){t.push(e)}));e.base_args=(a.base_args||[]).concat(t||[])}();case 6:case"end":return t.stop()}}),t)})))()},tempSelectChange:function(){var e=this;(this.templateTypeOptions||[]).forEach((function(t){e.tempCode===t.id&&("aliyun"===e.formData.sms_operator?e.templateMsg=t.var.replace(/@var/g,"$"):"submail"===e.formData.sms_operator?e.templateMsg=t.var.replace(/\$/g,"@var"):"smsbao"===e.formData.sms_operator&&(e.templateMsg=t.var.replace(/\$/g,"")))}))},submitForm:function(){var e=this;this.$refs.elForm.validate(function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(r){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r){t.next=2;break}return t.abrupt("return",!1);case 2:return e.btnLoading=!0,t.next=5,Object(s["d"])(e.formData);case 5:a=t.sent,n=a.data,200!==n.status?e.$message.error(n.msg):(e.$message.success(n.msg),e.$router.go(-1)),e.btnLoading=!1;case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},resetForm:function(){this.$refs.elForm.resetFields()},goBack:function(){this.$router.go(-1)}},created:function(){this.createTemplatePage()}},l=i,c=(r("e5ac"),r("2877")),u=Object(c["a"])(l,a,n,!1,null,"161963dc",null);t["default"]=u.exports},6770:function(e,t,r){"use strict";r.d(t,"j",(function(){return n})),r.d(t,"k",(function(){return o})),r.d(t,"n",(function(){return s})),r.d(t,"m",(function(){return i})),r.d(t,"d",(function(){return l})),r.d(t,"h",(function(){return c})),r.d(t,"l",(function(){return u})),r.d(t,"p",(function(){return m})),r.d(t,"s",(function(){return p})),r.d(t,"r",(function(){return f})),r.d(t,"a",(function(){return d})),r.d(t,"c",(function(){return g})),r.d(t,"q",(function(){return _})),r.d(t,"b",(function(){return b})),r.d(t,"i",(function(){return v})),r.d(t,"o",(function(){return h})),r.d(t,"f",(function(){return y})),r.d(t,"e",(function(){return O})),r.d(t,"g",(function(){return k}));var a=r("a27e");function n(){return Object(a["a"])({url:"config_message/config_mobile"})}function o(e){return Object(a["a"])({url:"config_message/config_mobile_post",method:"post",data:e})}function s(e){return Object(a["a"])({url:"config_message/template_list",method:"get",params:e})}function i(e,t){return Object(a["a"])({url:"config_message/delete_template",params:{ids:e,type:t}})}function l(e){return Object(a["a"])({url:"config_message/create_template",method:"post",data:e})}function c(e,t){return Object(a["a"])({url:"config_message/set_sms",params:{sms_operator:e,range_type:t}})}function u(e){return Object(a["a"])({url:"config_message/set_sms_post",method:"post",data:e})}function m(e){return Object(a["a"])({url:"config_message/test_message_template",method:"post",data:e})}function p(e){return Object(a["a"])({url:"config_message/update_template/".concat(e)})}function f(e){return Object(a["a"])({url:"config_message/update_template_post",method:"post",data:e})}function d(e){return Object(a["a"])({url:"config_message/test_message_template_page",params:e})}function g(){return Object(a["a"])({url:"config_message/create_template_page"})}function _(e){return Object(a["a"])({url:"config_message/update_tem_status",params:e})}function b(e,t){return Object(a["a"])({url:"config_message/check_post",method:"post",data:{ids:e,type:t}})}function v(e){return Object(a["a"])({url:"config_message/send_sms",method:"post",data:e})}function h(e){return Object(a["a"])({url:"config_message/test_message_template_page",params:e})}function y(e){return Object(a["a"])({url:"config_message/mobiletemplate_list",params:e})}function O(e){return Object(a["a"])({url:"email_template/emailtemplate_list",params:e})}function k(e){return Object(a["a"])({url:"config_message/sendmessage_post",method:"post",data:e})}},"7fbc":function(e,t,r){},8418:function(e,t,r){"use strict";var a=r("c04e"),n=r("9bf2"),o=r("5c6c");e.exports=function(e,t,r){var s=a(t);s in e?n.f(e,s,o(0,r)):e[s]=r}},"99af":function(e,t,r){"use strict";var a=r("23e7"),n=r("d039"),o=r("e8b5"),s=r("861d"),i=r("7b0b"),l=r("50c4"),c=r("8418"),u=r("65f0"),m=r("1dde"),p=r("b622"),f=r("2d00"),d=p("isConcatSpreadable"),g=9007199254740991,_="Maximum allowed index exceeded",b=f>=51||!n((function(){var e=[];return e[d]=!1,e.concat()[0]!==e})),v=m("concat"),h=function(e){if(!s(e))return!1;var t=e[d];return void 0!==t?!!t:o(e)},y=!b||!v;a({target:"Array",proto:!0,forced:y},{concat:function(e){var t,r,a,n,o,s=i(this),m=u(s,0),p=0;for(t=-1,a=arguments.length;t<a;t++)if(o=-1===t?s:arguments[t],h(o)){if(n=l(o.length),p+n>g)throw TypeError(_);for(r=0;r<n;r++,p++)r in o&&c(m,p,o[r])}else{if(p>=g)throw TypeError(_);c(m,p++,o)}return m.length=p,m}})},e5ac:function(e,t,r){"use strict";var a=r("7fbc"),n=r.n(a);n.a}}]);