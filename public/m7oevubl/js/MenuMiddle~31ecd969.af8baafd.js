(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["MenuMiddle~31ecd969"],{"019f3":function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));a("4160"),a("b64b"),a("d3b7"),a("3ca3"),a("10d1"),a("159b"),a("ddb0");var n=a("53ca");function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new WeakMap;if(null===e||"object"!==Object(n["a"])(e))return e;if(t.get(e))return e;var a=Array.isArray(e)?[]:{};return t.set(e,a),Object.keys(e).forEach((function(n){a[n]=r(e[n],t)})),a}},1276:function(e,t,a){"use strict";var n=a("d784"),r=a("44e7"),d=a("825a"),o=a("1d80"),l=a("4840"),i=a("8aa5"),u=a("50c4"),s=a("14c3"),c=a("9263"),m=a("d039"),f=[].push,_=Math.min,p=4294967295,h=!m((function(){return!RegExp(p,"y")}));n("split",2,(function(e,t,a){var n;return n="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,a){var n=String(o(this)),d=void 0===a?p:a>>>0;if(0===d)return[];if(void 0===e)return[n];if(!r(e))return t.call(n,e,d);var l,i,u,s=[],m=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),_=0,h=new RegExp(e.source,m+"g");while(l=c.call(h,n)){if(i=h.lastIndex,i>_&&(s.push(n.slice(_,l.index)),l.length>1&&l.index<n.length&&f.apply(s,l.slice(1)),u=l[0].length,_=i,s.length>=d))break;h.lastIndex===l.index&&h.lastIndex++}return _===n.length?!u&&h.test("")||s.push(""):s.push(n.slice(_)),s.length>d?s.slice(0,d):s}:"0".split(void 0,0).length?function(e,a){return void 0===e&&0===a?[]:t.call(this,e,a)}:t,[function(t,a){var r=o(this),d=void 0==t?void 0:t[e];return void 0!==d?d.call(t,r,a):n.call(String(r),t,a)},function(e,r){var o=a(n,e,this,r,n!==t);if(o.done)return o.value;var c=d(e),m=String(this),f=l(c,RegExp),g=c.unicode,b=(c.ignoreCase?"i":"")+(c.multiline?"m":"")+(c.unicode?"u":"")+(h?"y":"g"),D=new f(h?c:"^(?:"+c.source+")",b),v=void 0===r?p:r>>>0;if(0===v)return[];if(0===m.length)return null===s(D,m)?[m]:[];var x=0,w=0,y=[];while(w<m.length){D.lastIndex=h?w:0;var O,S=s(D,h?m:m.slice(w));if(null===S||(O=_(u(D.lastIndex+(h?0:w)),m.length))===x)w=i(m,w,g);else{if(y.push(m.slice(x,w)),y.length===v)return y;for(var j=1;j<=S.length-1;j++)if(y.push(S[j]),y.length===v)return y;w=x=O}}return y.push(m.slice(x)),y}]}),!h)},"40a8":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"menu-manage"},[a("h2",[e._v(e._s(e.formData.name))]),a("el-divider"),a("el-form",{attrs:{inline:!0,model:e.formData,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"菜单名称：",prop:"name"}},[a("el-input",{style:{width:"260px"},attrs:{size:"small",maxlength:"15",placeholder:"请输入菜单名称",clearable:""},model:{value:e.formData.name,callback:function(t){e.$set(e.formData,"name",t)},expression:"formData.name"}})],1),a("el-form-item",{attrs:{label:"菜单类型：",prop:"type"}},[e._v(" "+e._s(e.formData.type)+" ")])],1),a("el-tree",{attrs:{data:e.treeData,"default-expand-all":"",accordion:"","empty-text":e.emptyText,props:e.treeProps,"node-key":"id",draggable:"","allow-drop":e.allowDrop,"allow-drag":e.allowDrag},on:{"node-drag-start":e.handleDragStart,"node-drag-enter":e.handleDragEnter,"node-drag-leave":e.handleDragLeave,"node-drag-over":e.handleDragOver,"node-drag-end":e.handleDragEnd,"node-drop":e.handleDrop},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.node,r=t.data;return a("span",{staticClass:"custom-tree-node"},[a("div",{staticClass:"tree-item"},[a("span",{staticClass:"ml-10 icon-label"},[e._v(e._s(n.label))]),a("span",{staticClass:"ml-10 tip"},[e._v(e._s(r.cn_name))]),a("i",{staticClass:"ml-10 el-icon-edit blue",on:{click:function(){return e.changeName(n,r)}}}),a("i",{staticClass:"ml-10 el-icon-remove-outline blue",on:{click:function(){return e.remove(n,r)}}})])])}}])}),a("div",{staticClass:"add-box"},[a("i",{staticClass:"el-icon-circle-plus-outline",on:{click:e.addMenu}})]),a("div",{staticClass:"btn-box"},[a("el-button",{attrs:{size:"small",type:"primary",loading:e.btnLoading},on:{click:e.saveChange}},[e._v("保存更改")]),a("el-button",{attrs:{size:"small"},on:{click:e.cancelChange}},[e._v("取消更改")])],1),a("el-dialog",{attrs:{"before-close":e.handleClose,title:e.editFlag?"编辑页面":"新增页面",visible:e.dialogVisible,width:"50%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"addForm",attrs:{model:e.addData,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"name",prop:"name"}},[a("el-input",{staticStyle:{width:"50%"},attrs:{size:"small",clearable:""},model:{value:e.addData.name,callback:function(t){e.$set(e.addData,"name",t)},expression:"addData.name"}})],1),a("el-form-item",{attrs:{label:"add_role",prop:"add_role"}},[a("el-input",{staticStyle:{width:"50%"},attrs:{size:"small",clearable:""},model:{value:e.addData.add_role,callback:function(t){e.$set(e.addData,"add_role",t)},expression:"addData.add_role"}})],1),a("el-form-item",{attrs:{label:"add_role_menu",prop:"add_role_menu"}},[a("wlTreeSelect",{style:{width:"50%"},attrs:{defaultExpandAll:!1,leaf:"",filterable:!0,checkbox:"",props:e.defaultProps,data:e.options,nowrap:""},model:{value:e.addData.add_role_menu,callback:function(t){e.$set(e.addData,"add_role_menu",t)},expression:"addData.add_role_menu"}})],1),a("el-form-item",{attrs:{label:"cat_role",prop:"cat_role"}},[a("el-input",{staticStyle:{width:"50%"},attrs:{size:"small",clearable:""},model:{value:e.addData.cat_role,callback:function(t){e.$set(e.addData,"cat_role",t)},expression:"addData.cat_role"}})],1),a("el-form-item",{attrs:{label:"cat_role_menu",prop:"cat_role_menu"}},[a("wlTreeSelect",{style:{width:"50%"},attrs:{defaultExpandAll:!1,leaf:"",filterable:!0,checkbox:"",props:e.defaultProps,data:e.options2,nowrap:""},model:{value:e.addData.cat_role_menu,callback:function(t){e.$set(e.addData,"cat_role_menu",t)},expression:"addData.cat_role_menu"}})],1),a("el-form-item",{attrs:{label:"del_role",prop:"del_role"}},[a("el-input",{staticStyle:{width:"50%"},attrs:{size:"small",clearable:""},model:{value:e.addData.del_role,callback:function(t){e.$set(e.addData,"del_role",t)},expression:"addData.del_role"}})],1),a("el-form-item",{attrs:{label:"del_role_menu",prop:"del_role_menu"}},[a("wlTreeSelect",{style:{width:"50%"},attrs:{defaultExpandAll:!1,leaf:"",filterable:!0,checkbox:"",props:e.defaultProps,data:e.options3,nowrap:""},model:{value:e.addData.del_role_menu,callback:function(t){e.$set(e.addData,"del_role_menu",t)},expression:"addData.del_role_menu"}})],1),a("el-form-item",{attrs:{label:"edit_role",prop:"edit_role"}},[a("el-input",{staticStyle:{width:"50%"},attrs:{size:"small",clearable:""},model:{value:e.addData.edit_role,callback:function(t){e.$set(e.addData,"edit_role",t)},expression:"addData.edit_role"}})],1),a("el-form-item",{attrs:{label:"edit_role_menu",prop:"edit_role_menu"}},[a("wlTreeSelect",{style:{width:"50%"},attrs:{defaultExpandAll:!1,leaf:"",filterable:!0,checkbox:"",props:e.defaultProps,data:e.options4,nowrap:""},model:{value:e.addData.edit_role_menu,callback:function(t){e.$set(e.addData,"edit_role_menu",t)},expression:"addData.edit_role_menu"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.cancel}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary",loading:e.confirmLoading},on:{click:e.addConfirm}},[e._v("确 定")])],1)],1)],1)},r=[],d=(a("c740"),a("4160"),a("d81d"),a("a434"),a("b0c0"),a("d3b7"),a("ac1f"),a("25f0"),a("1276"),a("159b"),a("96cf"),a("1da1")),o=a("c5a1"),l=a("019f3"),i={data:function(){return{confirmLoading:!1,del_ids:[],editFlag:!1,editId:"",emptyText:"正在加载...",ids:[],dialogVisible:!1,btnLoading:!1,showIcon:!0,menuId:this.$route.query.menuId?this.$route.query.menuId:"",menuType:"",treeProps:{label:"name",children:"son"},defaultProps:{children:"son",label:"title",value:"id"},formData:{name:"",type:""},addData:{name:"",del_role:"",add_role:"",cat_role:"",edit_role:"",add_role_menu:[],cat_role_menu:[],del_role_menu:[],edit_role_menu:[]},pageData:[],treeData:[],options:[],options2:[],options3:[],options4:[]}},watch:{},created:function(){},mounted:function(){this.getData(),this.getNav()},methods:{getNav:function(){var e=this;Object(o["s"])().then((function(t){200===t.data.status&&(e.options=t.data.data,e.options2=Object(l["a"])(t.data.data),e.options3=Object(l["a"])(t.data.data),e.options4=Object(l["a"])(t.data.data))}))},changeName:function(e,t){this.editFlag=!0,this.editId=t.id,this.dialogVisible=!0,this.addData.type=parseInt(t.nav_type),this.addData.add_role=t.add_role,this.addData.name=t.name,this.addData.icon=t.fa_icon,this.addData.del_role=t.del_role,this.addData.cat_role=t.cat_role,this.addData.edit_role=t.edit_role,this.addData.add_role_menu=t.add_role_menu,this.addData.del_role_menu=t.del_role_menu,this.addData.cat_role_menu=t.cat_role_menu,this.addData.edit_role_menu=t.edit_role_menu},mapTree:function(e){var t=this;e.forEach((function(e){if(e.id===t.editId)return e.add_role=t.addData.add_role,e.name=t.addData.name,e.del_role=t.addData.del_role,e.cat_role=t.addData.cat_role,e.edit_role=t.addData.edit_role,e.add_role_menu=t.addData.add_role_menu.map((function(e){return e.id})).toString(),e.del_role_menu=t.addData.del_role_menu.map((function(e){return e.id})).toString(),e.cat_role_menu=t.addData.cat_role_menu.map((function(e){return e.id})).toString(),void(e.edit_role_menu=t.addData.edit_role_menu.map((function(e){return e.id})).toString());e.son&&e.son.length>0&&t.mapTree(e.son)}))},addConfirm:function(){var e=this;this.$refs.addForm.validate((function(t){t&&(e.editFlag?(e.mapTree(e.treeData),e.saveChange()):(e.addData.del_role_menu=e.addData.del_role_menu.map((function(e){return e.id})).toString(),e.addData.add_role_menu=e.addData.add_role_menu.map((function(e){return e.id})).toString(),e.addData.cat_role_menu=e.addData.cat_role_menu.map((function(e){return e.id})).toString(),e.addData.edit_role_menu=e.addData.edit_role_menu.map((function(e){return e.id})).toString(),Object(o["p"])(e.addData).then((function(t){if(200===t.data.status){var a={id:t.data.data,add_role:e.addData.add_role,name:e.addData.name,del_role:e.addData.del_role,cat_role:e.addData.cat_role,edit_role:e.addData.edit_role,add_role_menu:e.addData.add_role_menu.split(","),del_role_menu:e.addData.del_role_menu.split(","),cat_role_menu:e.addData.cat_role_menu.split(","),edit_role_menu:e.addData.edit_role_menu.split(",")};e.treeData.push(a),e.dialogVisible=!1,e.addData={del_role:"",add_role:"",name:"",cat_role:"",edit_role:"",add_role_menu:[],del_role_menu:[],cat_role_menu:[],edit_role_menu:[]}}}))))}))},selected:function(e){this.addData.icon=e},cancelChange:function(){sessionStorage.getItem("formData")&&(this.formData=JSON.parse(sessionStorage.getItem("formData"))),sessionStorage.getItem("treeData")&&(this.treeData=JSON.parse(sessionStorage.getItem("treeData")))},getData:function(){var e=this;return Object(d["a"])(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(o["q"])();case 2:a=t.sent,n=a.data,200!==n.status?e.$message.error(n.msg):(e.treeData=n.data||[],sessionStorage.setItem("formData",JSON.stringify(e.formData)),sessionStorage.setItem("treeData",JSON.stringify(e.treeData)),e.dialogVisible=!1,n.data.length||(e.emptyText="暂无数据"));case 5:case"end":return t.stop()}}),t)})))()},handleChanged:function(e){},cancel:function(){this.dialogVisible=!1,this.addData={del_role:"",add_role:"",name:"",cat_role:"",edit_role:"",add_role_menu:[],del_role_menu:[],cat_role_menu:[],edit_role_menu:[]}},handleClose:function(e){this.addData={del_role:"",add_role:"",cat_role:"",edit_role:"",name:"",add_role_menu:[],del_role_menu:[],cat_role_menu:[],edit_role_menu:[]},e()},addMenu:function(){this.editFlag=!1,this.addData={del_role:"",add_role:"",name:"",cat_role:"",edit_role:"",add_role_menu:[],del_role_menu:[],cat_role_menu:[],edit_role_menu:[]},this.dialogVisible=!0},saveChange:function(){var e=this;return Object(d["a"])(regeneratorRuntime.mark((function t(){var a,n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.treeData.forEach((function(e){e.pid="0"})),a={list:e.treeData},e.confirmLoading=!0,e.btnLoading=!0,t.next=6,Object(o["r"])(a);case 6:n=t.sent,r=n.data,200!==r.status?(e.$message.error(r.msg),e.confirmLoading=!1,e.btnLoading=!1):(e.$message.success(r.msg),e.confirmLoading=!1,e.btnLoading=!1,e.getData());case 9:case"end":return t.stop()}}),t)})))()},handleDragStart:function(e,t){},handleDragEnter:function(e,t,a){},handleDragLeave:function(e,t,a){},handleDragOver:function(e,t,a){},handleDragEnd:function(e,t,a,n){},handleDrop:function(e,t,a,n){},remove:function(e,t){var a=e.parent,n=a.data.son||a.data,r=n.findIndex((function(e){return e.id===t.id}));n.splice(r,1),this.deepMapTree(t)},deepMapTree:function(e){var t=this,a=[];Array.isArray(e)?a=e:a.push(e),a.forEach((function(e){t.del_ids.push(e.id),e.son&&e.son.length>0&&t.deepMapTree(e.son)}))},allowDrop:function(e,t,a){return!0},allowDrag:function(e){return!0}}},u=i,s=(a("42a7"),a("2877")),c=Object(s["a"])(u,n,r,!1,null,"54911b28",null);t["default"]=c.exports},"42a7":function(e,t,a){"use strict";var n=a("85ea"),r=a.n(n);r.a},"44e7":function(e,t,a){var n=a("861d"),r=a("c6b6"),d=a("b622"),o=d("match");e.exports=function(e){var t;return n(e)&&(void 0!==(t=e[o])?!!t:"RegExp"==r(e))}},8418:function(e,t,a){"use strict";var n=a("c04e"),r=a("9bf2"),d=a("5c6c");e.exports=function(e,t,a){var o=n(t);o in e?r.f(e,o,d(0,a)):e[o]=a}},"85ea":function(e,t,a){},a434:function(e,t,a){"use strict";var n=a("23e7"),r=a("23cb"),d=a("a691"),o=a("50c4"),l=a("7b0b"),i=a("65f0"),u=a("8418"),s=a("1dde"),c=a("ae40"),m=s("splice"),f=c("splice",{ACCESSORS:!0,0:0,1:2}),_=Math.max,p=Math.min,h=9007199254740991,g="Maximum allowed length exceeded";n({target:"Array",proto:!0,forced:!m||!f},{splice:function(e,t){var a,n,s,c,m,f,b=l(this),D=o(b.length),v=r(e,D),x=arguments.length;if(0===x?a=n=0:1===x?(a=0,n=D-v):(a=x-2,n=p(_(d(t),0),D-v)),D+a-n>h)throw TypeError(g);for(s=i(b,n),c=0;c<n;c++)m=v+c,m in b&&u(s,c,b[m]);if(s.length=n,a<n){for(c=v;c<D-n;c++)m=c+n,f=c+a,m in b?b[f]=b[m]:delete b[f];for(c=D;c>D-n+a;c--)delete b[c-1]}else if(a>n)for(c=D-n;c>v;c--)m=c+n-1,f=c+a-1,m in b?b[f]=b[m]:delete b[f];for(c=0;c<a;c++)b[c+v]=arguments[c+2];return b.length=D-n+a,s}})},c5a1:function(e,t,a){"use strict";a.d(t,"j",(function(){return r})),a.d(t,"h",(function(){return d})),a.d(t,"f",(function(){return o})),a.d(t,"b",(function(){return l})),a.d(t,"i",(function(){return i})),a.d(t,"u",(function(){return u})),a.d(t,"k",(function(){return s})),a.d(t,"m",(function(){return c})),a.d(t,"l",(function(){return m})),a.d(t,"a",(function(){return f})),a.d(t,"d",(function(){return _})),a.d(t,"c",(function(){return p})),a.d(t,"e",(function(){return h})),a.d(t,"g",(function(){return g})),a.d(t,"o",(function(){return b})),a.d(t,"n",(function(){return D})),a.d(t,"t",(function(){return v})),a.d(t,"q",(function(){return x})),a.d(t,"p",(function(){return w})),a.d(t,"r",(function(){return y})),a.d(t,"s",(function(){return O}));var n=a("a27e");function r(e){return Object(n["a"])({url:"menus/getMenuType",method:"post",data:e})}function d(e){return Object(n["a"])({url:"menus/getMenu",method:"post",data:e})}function o(e){return Object(n["a"])({url:"menus/editMenuActive",method:"post",data:e})}function l(e){return Object(n["a"])({url:"menus/addMenu",method:"post",data:e})}function i(e){return Object(n["a"])({url:"menus/getMenuList",method:"post",data:e})}function u(e){return Object(n["a"])({url:"menus/setNavList",method:"post",data:e})}function s(e){return Object(n["a"])({url:"menus/getNavType",method:"post",data:e})}function c(e){return Object(n["a"])({url:"menus/getSystemNav",method:"post",data:e})}function m(e){return Object(n["a"])({url:"menus/getProductList",method:"post",data:e})}function f(e){return Object(n["a"])({url:"menus/addCustomPage",method:"post",data:e})}function _(e){return Object(n["a"])({url:"menus/delMenu",method:"post",data:e})}function p(e){return Object(n["a"])({url:"menus/addProductPage",method:"post",data:e})}function h(e){return Object(n["a"])({url:"menus/delTwoMenu",method:"post",data:e})}function g(e){return Object(n["a"])({url:"menus/getLang",method:"post",data:e})}function b(e){return Object(n["a"])({url:"RuleManage/getMenuList",method:"post",data:e})}function D(e){return Object(n["a"])({url:"RuleManage/addMenu",method:"post",data:e})}function v(e){return Object(n["a"])({url:"RuleManage/saveMenuList",method:"post",data:e})}function x(e){return Object(n["a"])({url:"RuleMiddle/getMenuList",method:"post",data:e})}function w(e){return Object(n["a"])({url:"RuleMiddle/addMenu",method:"post",data:e})}function y(e){return Object(n["a"])({url:"RuleMiddle/saveMenuList",method:"post",data:e})}function O(e){return Object(n["a"])({url:"RuleMiddle/getNav",method:"post",data:e})}},c740:function(e,t,a){"use strict";var n=a("23e7"),r=a("b727").findIndex,d=a("44d2"),o=a("ae40"),l="findIndex",i=!0,u=o(l);l in[]&&Array(1)[l]((function(){i=!1})),n({target:"Array",proto:!0,forced:i||!u},{findIndex:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}}),d(l)},d81d:function(e,t,a){"use strict";var n=a("23e7"),r=a("b727").map,d=a("1dde"),o=a("ae40"),l=d("map"),i=o("map");n({target:"Array",proto:!0,forced:!l||!i},{map:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}})}}]);