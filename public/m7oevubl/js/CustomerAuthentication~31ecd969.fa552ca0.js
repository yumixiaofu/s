(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["CustomerAuthentication~31ecd969"],{"129f":function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t===1/e:t!=t&&e!=e}},"1dde":function(t,e,n){var r=n("d039"),a=n("b622"),o=n("2d00"),i=a("species");t.exports=function(t){return o>=51||!r((function(){var e=[],n=e.constructor={};return n[i]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},"3d7e":function(t,e,n){"use strict";var r=n("4a3a"),a=n.n(r);a.a},"44d25":function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("h5",{staticStyle:{"margin-top":"0"}},[t._v("客户在进行实名认证时提交的信息记录，可在此下载证件及人工审核。"),n("el-link",{on:{click:t.openDoc}},[t._v("帮助文档")])],1),n("el-select",{staticClass:"mb-20",attrs:{size:"small",clearable:""},on:{change:t.getData},model:{value:t.search.status,callback:function(e){t.$set(t.search,"status",e)},expression:"search.status"}},[n("el-option",{attrs:{value:1,label:"已认证"}}),n("el-option",{attrs:{value:2,label:"未通过"}}),n("el-option",{attrs:{value:3,label:"待审核"}}),n("el-option",{attrs:{value:4,label:"已提交资料"}})],1),n("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,border:""}},[n("div",{attrs:{slot:"empty"},slot:"empty"},[!t.tableData.length&&t.tableLoading?n("span",[n("i",{staticClass:"el-icon-loading"}),t._v(" 正在加载 ... ")]):t._e(),t.tableData.length||t.tableLoading?t._e():n("span",[t._v("暂无数据")])]),n("el-table-column",{attrs:{prop:"id",label:"ID",width:"80"}}),n("el-table-column",{attrs:{prop:"user.username",label:"姓名"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("router-link",{attrs:{to:{path:"/customer-view/abstract",query:{id:e.row.uid}}}},[n("el-link",{on:{click:function(n){return t.goToView(e.row)}}},[t._v(t._s(e.row.user.username))])],1)]}}])}),n("el-table-column",{attrs:{prop:"certifi_name",label:"实名认证名称",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("router-link",{attrs:{to:{path:"/customer-view/abstract",query:{id:e.row.uid}}}},[n("el-link",{on:{click:function(n){return t.goToView(e.row)}}},[t._v(t._s(e.row.certifi_name))])],1)]}}])}),n("el-table-column",{attrs:{prop:"idcard",label:"身份证号码",width:"160",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.row;return[n("el-popover",{attrs:{placement:"right",title:"认证详情",width:"260",trigger:"hover"}},[r.certype?n("div",[t._v("认证方式："+t._s(r.certype))]):t._e(),r.certifi_name?n("div",[t._v("姓名："+t._s(r.certifi_name))]):t._e(),r.idcard?n("div",[t._v("身份证号："+t._s(r.idcard))]):t._e(),r.bank?n("div",[t._v("银行卡号："+t._s(r.bank))]):t._e(),r.phone?n("div",[t._v("手机号："+t._s(r.phone))]):t._e(),n("span",{attrs:{slot:"reference"},slot:"reference"},[t._v(t._s(r.idcard))])])]}}])}),n("el-table-column",{attrs:{prop:"certype",label:"认证方式",width:"120",align:"center"}}),n("el-table-column",{attrs:{prop:"type",label:"认证类型",width:"80",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[1===e.row.type?n("span",[t._v("个人认证")]):t._e(),2===e.row.type?n("span",[t._v("企业认证")]):t._e(),3===e.row.type?n("span",[t._v("个人转企业")]):t._e()]}}])}),n("el-table-column",{attrs:{prop:"status",label:"状态/原因"},scopedSlots:t._u([{key:"default",fn:function(e){return[1===e.row.status?n("span",[n("i",{staticClass:"el-icon-circle-check yes-icon"})]):t._e(),2===e.row.status?n("span",[t._v(" "+t._s(e.row.error)+" ")]):t._e(),3===e.row.status?n("span",[t._v("待审核")]):t._e(),4===e.row.status?n("span",[t._v("已提交资料")]):t._e()]}}])}),n("el-table-column",{attrs:{prop:"create_time",label:"提交时间",width:"135",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(0===e.row.create_time?"-":t.$moment(1e3*e.row.create_time).format("YYYY-MM-DD HH:mm")))])]}}])}),n("el-table-column",{attrs:{prop:"",label:"操作",width:"250"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-dropdown",[n("el-button",{staticClass:"span-primary",attrs:{size:"small",type:"text",icon:"el-icon-download",disabled:!e.row.pic.length}},[t._v("下载")]),n("el-dropdown-menu",[n("el-dropdown-item",{nativeOn:{click:function(n){return t.downloadImg(e.row,0)}}},[t._v("个人身份证正面")]),n("el-dropdown-item",{nativeOn:{click:function(n){return t.downloadImg(e.row,1)}}},[t._v("个人身份证反面")]),1!==e.row.type?n("el-dropdown-item",{nativeOn:{click:function(n){return t.downloadImg(e.row,2)}}},[t._v("企业")]):t._e()],1)],1),n("el-dropdown",{staticClass:"ml-8"},[n("el-button",{staticClass:"span-success",attrs:{size:"small",type:"text",icon:"el-icon-view",disabled:!e.row.pic.length}},[t._v("查看")]),n("el-dropdown-menu",[n("el-dropdown-item",{nativeOn:{click:function(n){return t.showImg(e.row,0)}}},[t._v("个人身份证正面")]),n("el-dropdown-item",{nativeOn:{click:function(n){return t.showImg(e.row,1)}}},[t._v("个人身份证反面")]),1!==e.row.type?n("el-dropdown-item",{nativeOn:{click:function(n){return t.showImg(e.row,2)}}},[t._v("企业")]):t._e()],1)],1),2!==e.row.status&&3!==e.row.status&&4!==e.row.status||!e.row.is_newest?t._e():n("el-button",{staticClass:"ml-8 span-success",attrs:{size:"small",type:"text",icon:"el-icon-check"},on:{click:function(n){return t.operating(e.row,1)}}},[t._v("通过 ")]),1!==e.row.status&&3!==e.row.status&&4!==e.row.status||!e.row.is_newest?t._e():n("el-button",{staticClass:"ml-8 span-danger",attrs:{size:"small",type:"text",icon:"el-icon-close"},on:{click:function(n){return t.turndown(e.row,2)}}},[t._v(" 驳回")])]}}])})],1),n("el-pagination",{staticClass:"mt-10",attrs:{"current-page":t.search.page,"page-sizes":[10,15,20,25,50,100],"page-size":t.search.limit,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)},a=[],o=(n("99af"),n("a9e3"),n("ac1f"),n("841c"),n("96cf"),n("1da1")),i=n("78e3"),s={metaInfo:{title:"实名认证"},data:function(){return{tableLoading:!1,tableData:[],total:0,flag:0,search:{page:1,limit:Number(localStorage.getItem("limit"))||50,status:void 0}}},methods:{openDoc:function(){open("https://www.idcsmart.com/wiki_list/401.html")},getData:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.tableLoading=!0,e.next=3,Object(i["a"])(t.search);case 3:n=e.sent,r=n.data,t.tableData=r.data.list,t.total=r.data.total,t.tableLoading=!1;case 8:case"end":return e.stop()}}),e)})))()},downloadImg:function(t,e){var n=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:1===t.type&&2===e?n.$message.error("个人认证没有企业图片"):0===t.pic.length?n.$message.error("此用户没有上传图片"):open("certifi_download?id=".concat(t.id,"&type=").concat(e));case 1:case"end":return r.stop()}}),r)})))()},showImg:function(t,e){1===t.type&&2===e?this.$message.error("个人认证没有企业图片"):0===t.pic.length?this.$message.error("此用户没有上传图片"):open("http://"+t.pic[e])},operating:function(t,e){var n=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){var a,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:a={},a.uid=t.uid,a.type=t.type,a.status=e,a.error="后台手工驳回",o=1===e?"通过":"驳回",n.$confirm("将".concat(o,"此用户的实名认证, 是否继续?"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(i["b"])(a).then((function(t){200!==t.data.status?n.$message.error(t.data.msg):(n.$message.success("已".concat(o,"此实名认证请求")),n.getData())}))})).catch((function(){}));case 7:case"end":return r.stop()}}),r)})))()},turndown:function(t,e){var n=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:a={},a.uid=t.uid,a.type=t.type,a.status=e,a.error="后台手工驳回",n.$prompt("请输入驳回原因","提示",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/^.*[^\s]+.*$/,inputErrorMessage:"请填写驳回原因"}).then((function(t){var e=t.value;a.error=e||"后台手工驳回",Object(i["b"])(a).then((function(t){200!==t.data.status?n.$message.error(t.data.msg):(n.$message.success("已驳回此实名认证请求"),n.getData())}))})).catch((function(){}));case 6:case"end":return r.stop()}}),r)})))()},goToView:function(t){this.$router.push({path:"/customer-view/abstract",query:{id:t.uid}})},handleSizeChange:function(t){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:e.search.limit=t,e.search.page=1,e.getData();case 3:case"end":return n.stop()}}),n)})))()},handleCurrentChange:function(t){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:e.search.page=t,e.getData();case 2:case"end":return n.stop()}}),n)})))()}},created:function(){this.getData()}},c=s,u=(n("3d7e"),n("2877")),l=Object(u["a"])(c,r,a,!1,null,"1b95cd48",null);e["default"]=l.exports},"4a3a":function(t,e,n){},"78e3":function(t,e,n){"use strict";n.d(e,"a",(function(){return a})),n.d(e,"b",(function(){return o}));var r=n("a27e");function a(t){return Object(r["a"])({url:"cerify_log_list",params:t})}function o(t){return Object(r["a"])({url:"certifi_status",method:"post",data:t})}},8418:function(t,e,n){"use strict";var r=n("c04e"),a=n("9bf2"),o=n("5c6c");t.exports=function(t,e,n){var i=r(e);i in t?a.f(t,i,o(0,n)):t[i]=n}},"841c":function(t,e,n){"use strict";var r=n("d784"),a=n("825a"),o=n("1d80"),i=n("129f"),s=n("14c3");r("search",1,(function(t,e,n){return[function(e){var n=o(this),r=void 0==e?void 0:e[t];return void 0!==r?r.call(e,n):new RegExp(e)[t](String(n))},function(t){var r=n(e,t,this);if(r.done)return r.value;var o=a(t),c=String(this),u=o.lastIndex;i(u,0)||(o.lastIndex=0);var l=s(o,c);return i(o.lastIndex,u)||(o.lastIndex=u),null===l?-1:l.index}]}))},"99af":function(t,e,n){"use strict";var r=n("23e7"),a=n("d039"),o=n("e8b5"),i=n("861d"),s=n("7b0b"),c=n("50c4"),u=n("8418"),l=n("65f0"),d=n("1dde"),p=n("b622"),f=n("2d00"),w=p("isConcatSpreadable"),m=9007199254740991,h="Maximum allowed index exceeded",v=f>=51||!a((function(){var t=[];return t[w]=!1,t.concat()[0]!==t})),g=d("concat"),_=function(t){if(!i(t))return!1;var e=t[w];return void 0!==e?!!e:o(t)},b=!v||!g;r({target:"Array",proto:!0,forced:b},{concat:function(t){var e,n,r,a,o,i=s(this),d=l(i,0),p=0;for(e=-1,r=arguments.length;e<r;e++)if(o=-1===e?i:arguments[e],_(o)){if(a=c(o.length),p+a>m)throw TypeError(h);for(n=0;n<a;n++,p++)n in o&&u(d,p,o[n])}else{if(p>=m)throw TypeError(h);u(d,p++,o)}return d.length=p,d}})}}]);