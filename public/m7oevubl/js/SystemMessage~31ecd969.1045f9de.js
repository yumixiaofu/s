(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["SystemMessage~31ecd969"],{1148:function(e,t,r){"use strict";var a=r("a691"),n=r("1d80");e.exports="".repeat||function(e){var t=String(n(this)),r="",s=a(e);if(s<0||s==1/0)throw RangeError("Wrong number of repetitions");for(;s>0;(s>>>=1)&&(t+=t))1&s&&(r+=t);return r}},1276:function(e,t,r){"use strict";var a=r("d784"),n=r("44e7"),s=r("825a"),i=r("1d80"),o=r("4840"),l=r("8aa5"),c=r("50c4"),u=r("14c3"),p=r("9263"),d=r("d039"),m=[].push,f=Math.min,g=4294967295,h=!d((function(){return!RegExp(g,"y")}));a("split",2,(function(e,t,r){var a;return a="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,r){var a=String(i(this)),s=void 0===r?g:r>>>0;if(0===s)return[];if(void 0===e)return[a];if(!n(e))return t.call(a,e,s);var o,l,c,u=[],d=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),f=0,h=new RegExp(e.source,d+"g");while(o=p.call(h,a)){if(l=h.lastIndex,l>f&&(u.push(a.slice(f,o.index)),o.length>1&&o.index<a.length&&m.apply(u,o.slice(1)),c=o[0].length,f=l,u.length>=s))break;h.lastIndex===o.index&&h.lastIndex++}return f===a.length?!c&&h.test("")||u.push(""):u.push(a.slice(f)),u.length>s?u.slice(0,s):u}:"0".split(void 0,0).length?function(e,r){return void 0===e&&0===r?[]:t.call(this,e,r)}:t,[function(t,r){var n=i(this),s=void 0==t?void 0:t[e];return void 0!==s?s.call(t,n,r):a.call(String(n),t,r)},function(e,n){var i=r(a,e,this,n,a!==t);if(i.done)return i.value;var p=s(e),d=String(this),m=o(p,RegExp),b=p.unicode,v=(p.ignoreCase?"i":"")+(p.multiline?"m":"")+(p.unicode?"u":"")+(h?"y":"g"),w=new m(h?p:"^(?:"+p.source+")",v),k=void 0===n?g:n>>>0;if(0===k)return[];if(0===d.length)return null===u(w,d)?[d]:[];var y=0,x=0,_=[];while(x<d.length){w.lastIndex=h?x:0;var A,C=u(w,h?d:d.slice(x));if(null===C||(A=f(c(w.lastIndex+(h?0:x)),d.length))===y)x=l(d,x,b);else{if(_.push(d.slice(y,x)),_.length===k)return _;for(var j=1;j<=C.length-1;j++)if(_.push(C[j]),_.length===k)return _;x=y=A}}return _.push(d.slice(y)),_}]}),!h)},"212d":function(e,t,r){"use strict";var a=r("9dcc"),n=r.n(a);n.a},"408a":function(e,t,r){var a=r("c6b6");e.exports=function(e){if("number"!=typeof e&&"Number"!=a(e))throw TypeError("Incorrect invocation");return+e}},"44e7":function(e,t,r){var a=r("861d"),n=r("c6b6"),s=r("b622"),i=s("match");e.exports=function(e){var t;return a(e)&&(void 0!==(t=e[i])?!!t:"RegExp"==n(e))}},"51bf":function(e,t,r){"use strict";r.d(t,"j",(function(){return n})),r.d(t,"g",(function(){return s})),r.d(t,"i",(function(){return i})),r.d(t,"e",(function(){return o})),r.d(t,"h",(function(){return l})),r.d(t,"c",(function(){return c})),r.d(t,"f",(function(){return u})),r.d(t,"b",(function(){return p})),r.d(t,"d",(function(){return d})),r.d(t,"l",(function(){return m})),r.d(t,"m",(function(){return f})),r.d(t,"k",(function(){return g})),r.d(t,"n",(function(){return h})),r.d(t,"a",(function(){return b})),r.d(t,"o",(function(){return v}));var a=r("a27e");function n(){return Object(a["a"])({url:"system/info"})}function s(){return Object(a["a"])({url:"system/lastversion"})}function i(){return Object(a["a"])({url:"system/phpinfo"})}function o(){return Object(a["a"])({url:"system/databaseinfo"})}function l(){return Object(a["a"])({url:"system/optimizeTables",method:"post"})}function c(){return Object(a["a"])({url:"system/downdatabackup",method:"post",responseType:"blob"})}function u(){return Object(a["a"])({url:"upgrade/version"})}function p(){return Object(a["a"])({url:"upgrade/checkautoupdate"})}function d(){return Object(a["a"])({url:"upgrade/autoupdate"})}function m(e){return Object(a["a"])({url:"upgrade/checkupdateunzip",method:"POST",data:e})}function f(e){return Object(a["a"])({url:"upgrade/checkupdatecopy",method:"POST",data:e})}function g(e){return Object(a["a"])({url:"system/toggleversion",method:"post",data:e})}function h(){return Object(a["a"])({url:"system/updatecontent"})}function b(e){return Object(a["a"])({url:"system/license",method:"put",data:e})}function v(){return Object(a["a"])({url:"upgrade/sqlupdate"})}},"617c":function(e,t,r){},"987c":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"box"},[r("el-form",{attrs:{"label-width":"auto"}},[r("el-row",{attrs:{type:"flex",gutter:30}},[r("el-col",{attrs:{xs:24,md:10}},[r("el-card",[r("el-form-item",{attrs:{label:"服务器ip："}},[r("span",[e._v(e._s(e.listArray.server_ip))])]),r("el-form-item",{attrs:{label:"域名："}},[r("span",[e._v(e._s(e.listArray.server_name))])]),r("el-form-item",{attrs:{label:"系统号："}},[r("span",[e._v(e._s(e.listArray.system_token))])]),r("el-form-item",{attrs:{label:"系统当前版本："}},[r("span",[e._v(e._s(e.listArray.install_version)+"-"+e._s(e.listArray.zjmf_system_version_type_last))])]),r("el-form-item",{attrs:{label:"系统最新版本："}},[e.dataLoading?r("span",{staticClass:"el-icon-loading"}):r("span",["no_response"===e.lastVersionCheck?r("el-link",{staticStyle:{"line-height":"20px"},attrs:{href:"https://bbs.idcsmart.com/thread-615-1-1.html",target:"blank"}},[e._v("未检测到最新版本, 请前往手动更新")]):r("span",[r("span",{staticClass:"cursor-pointer mr-10",staticStyle:{color:"#2f54ea"},on:{click:function(t){e.updateContentDialog=!0}}},[e._v("更新内容")]),e._v(e._s(e.lastVersion))])],1)]),r("el-form-item",{attrs:{label:"版本："}},[e.listArray.system_version_type?r("span",{staticClass:"cursor-pointer mr-10",staticStyle:{color:"#2f54ea"},on:{click:e.toggleVersion}},[e._v("更换版本")]):e._e(),e.dataLoading?e._e():r("span",[e._v(e._s("stable"===e.listArray.system_version_type?"正式版":"内测版"))])]),r("el-form-item",{attrs:{label:"授权类型："}},[e.dataLoading?r("span",{staticClass:"el-icon-loading"}):r("span",[0===e.licenseType?r("span",[e._v("免费版")]):e._e(),1===e.licenseType?r("span",[e._v("专业版")]):e._e()])]),r("el-form-item",{attrs:{label:"授权码："}},[r("span",{staticClass:"cursor-pointer mr-10",staticStyle:{color:"#2f54ea"},on:{click:e.openAuthorize}},[e._v("更换授权码")]),e.clientWidth>1366?r("span",[e._v(e._s(e.listArray.system_license))]):e._e()]),e.clientWidth<=1366?r("el-form-item",{staticClass:"systemCode",staticStyle:{"margin-left":"0 !important"},attrs:{label:" "}},[r("span",[e._v(e._s(e.listArray.system_license))])]):e._e(),r("el-form-item",{staticClass:"upload-button",attrs:{label:""}},[e.isLastestVersion?r("el-button",{attrs:{size:"small",plain:"",icon:"el-icon-upload",disabled:""}},[e._v(" "+e._s(e.dataLoading?"正在检查更新":"您已是最新版本"))]):0==e.isDownload?r("el-button",{attrs:{size:"small",type:"success",icon:"el-icon-upload",loading:e.updateLoading,disabled:e.dataLoading},on:{click:e.updateHandleClick}},[e._v(" "+e._s(e.dataLoading?"正在检查更新":"立刻更新"))]):r("el-button",{attrs:{size:"small",type:"success",icon:"el-icon-upload",loading:e.updateLoading,disabled:e.dataLoading},on:{click:e.goToInstall}},[e._v(" "+e._s(e.dataLoading?"正在检查更新":"立刻升级"))])],1)],1)],1),r("el-col",{attrs:{xs:24,md:14}},[r("el-card",[r("el-form-item",{attrs:{label:"端口号："}},[r("span",[e._v(e._s(e.listArray.server_port))])]),r("el-form-item",{attrs:{label:"服务器系统版本："}},[r("span",[e._v(e._s(e.listArray.server_version))])]),r("el-form-item",{attrs:{label:"服务器操作系统："}},[r("span",[e._v(e._s(e.listArray.server_system))])]),r("el-form-item",{attrs:{label:"php版本："}},[r("span",[e._v(e._s(e.listArray.php_version))])]),r("el-form-item",{attrs:{label:"获取PHP安装路径："}},[r("span",[e._v(e._s(e.listArray.include_path))])]),r("el-form-item",{attrs:{label:"PHP运行方式："}},[r("span",[e._v(e._s(e.listArray.php_sapi_name))])]),r("el-form-item",{attrs:{label:"服务器时间："}},[r("span",[e._v(e._s(e.listArray.now_time))])]),r("el-form-item",{attrs:{label:"服务器上传限制："}},[r("span",[e._v(e._s(e.listArray.upload_max_filesize))])]),r("el-form-item",{attrs:{label:"服务脚本最大执行时间："}},[r("span",[e._v(e._s(e.listArray.max_execution_time))])]),r("el-form-item",{attrs:{label:"内存占用："}},[r("span",[e._v(e._s(e.listArray.memory_limit))])]),r("el-form-item",{attrs:{label:"脚本运行占用最大内存："}},[r("span",[e._v(e._s(e.listArray.processor_identifier))])]),r("el-form-item",{attrs:{label:"系统根目录："}},[r("span",[e._v(e._s(e.listArray.system_root))])]),r("el-form-item",{attrs:{label:"获取服务器语言："}},[r("span",[e._v(e._s(e.listArray.http_accept_language))])]),r("el-form-item",{attrs:{label:"数据库版本："}},[r("span",[e._v(e._s(e.listArray.mysql_version))])])],1)],1)],1)],1),r("el-dialog",{attrs:{title:"系统更新进度",visible:e.dialogVisible,width:"30%","show-close":!1,close:e.clearTimer},on:{"update:visible":function(t){e.dialogVisible=t},open:e.getUpdateProgress}},[r("el-progress",{class:{"progress-clear":100===e.progress},attrs:{"text-inside":!0,"stroke-width":26,percentage:e.progress}}),r("div",{staticClass:"tac mt-10"},[r("span",[e._v(e._s(e.updateDesc))])]),100===e.progress?r("div",{staticClass:"tac mt-10"},[r("el-button",{attrs:{size:"small"},on:{click:e.goToInstall}},[e._v("前往安装")])],1):e._e()],1),r("el-dialog",{attrs:{title:"更新内容",visible:e.updateContentDialog,width:"60%"},on:{"update:visible":function(t){e.updateContentDialog=t}}},[r("div",{staticStyle:{width:"100%","max-height":"600px",height:"-webkit-fill-available","overflow-y":"auto"},domProps:{innerHTML:e._s(e.updataContent)}})]),r("el-dialog",{attrs:{title:"更换授权码",visible:e.authorizeVisable,width:"550px"},on:{"update:visible":function(t){e.authorizeVisable=t}}},[r("el-form",{ref:"formData",attrs:{model:e.formData,size:"medium","label-width":"120px"}},[r("el-form-item",{attrs:{label:"授权码",prop:"license",rules:{required:!0,message:"请输入授权码"}}},[r("el-input",{model:{value:e.formData.license,callback:function(t){e.$set(e.formData,"license",t)},expression:"formData.license"}})],1)],1),r("div",{attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.authorizeVisable=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary",loading:e.authorizeLoading},on:{click:e.submitForm}},[e._v("确 定")])],1)],1)],1)},n=[],s=(r("4160"),r("a9e3"),r("ac1f"),r("1276"),r("159b"),r("96cf"),r("1da1")),i=r("51bf"),o={metaInfo:{title:"系统升级"},data:function(){return{listArray:{},updateLoading:!1,dialogVisible:!1,authorizeVisable:!1,timer:null,progress:0,updateDesc:"",preWindow:null,formData:{license:null},isLastestVersion:!0,updateContentDialog:!1,updataContent:"",dataLoading:!0,lastVersion:"",licenseType:-1,lastVersionCheck:"",authorizeLoading:!1,isDownload:0}},methods:{getSystemInfo:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.dataLoading=!0,t.next=3,Object(i["j"])();case 3:r=t.sent,a=r.data,200!==a.status||(e.listArray=a.data,e.getLastVersion(a.data.install_version)),e.dataLoading=!1;case 7:case"end":return t.stop()}}),t)})))()},getLastVersion:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function r(){var a,n,s,o,l,c;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return t.dataLoading=!0,r.next=3,Object(i["g"])();case 3:a=r.sent,n=a.data,t.dataLoading=!1,200!==n.status?t.$message.error(n.msg):(t.lastVersion=n.data.last_version,t.licenseType=n.data.license_type,t.lastVersionCheck=n.data.last_version_check,s=e.split("."),o=n.data.last_version.split("."),l="",c="",s.forEach((function(e){l+=e})),o.forEach((function(e){c+=e})),Number(l)<Number(c)?t.isLastestVersion=!1:t.isLastestVersion=!0),t.checkIsDownload();case 8:case"end":return r.stop()}}),r)})))()},checkIsDownload:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(i["f"])();case 3:r=t.sent,a=r.data,e.isDownload=a.data.is_download,t.next=10;break;case 8:t.prev=8,t.t0=t["catch"](0);case 10:case"end":return t.stop()}}),t,null,[[0,8]])})))()},getUpdateProgress:function(){var e=this;this.timer&&clearInterval(this.timer),this.dialogVisible=!0,this.timer=setInterval(Object(s["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(i["b"])();case 2:r=t.sent,"30%"===r.data.progress?(e.progress=100,e.updateDesc="下载完成",e.clearTimer()):"10%"===r.data.progress?(e.progress=10,e.updateDesc="正在升级"):"20%"===r.data.progress?(e.progress=parseFloat(r.data.progress_msg.split("%")[0]),e.updateDesc=r.data.msg):(e.$message.error("下载失败"),e.dialogVisible=!1,e.clearTimer());case 4:case"end":return t.stop()}}),t)}))),1e3)},updateHandleClick:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.getUpdateProgress(),t.next=4,Object(i["d"])();case 4:t.next=9;break;case 6:t.prev=6,t.t0=t["catch"](0),e.$message.error(t.t0.msg);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})))()},goToInstall:function(){this.preWindow=this.$router.push({name:"systemUpdata",params:{lastVersion:this.lastVersion,updataContent:this.updataContent}})},clearTimer:function(){clearInterval(this.timer)},toggleVersion:function(){var e=this,t="";t="stable"===this.listArray.system_version_type?"\n        当前为正式版，您可升级为内测版<br>\n        1、注意，请不要在商用环境申请内测版。<br>\n        2、所有新功能做完内部初审后都会第一时间向内测用户推送。<br>\n        3、内测版会有诸多小Bug，如遇到，可以论坛或QQ找我们，我们一定负责到底。<br>\n        4、内测意义在于为广大用户找Bug，魔方团队再一次感谢您的积极参与。<br>\n        5、如果你不是愿意付出及肯折腾学习的人，我们不建议申请内测。\n      ":"\n        当前为内测版，您可切换为正式版<br>\n        1.注意，只有当系统有更高版本正式版时，您才可以进行升级<br>\n        2.正式版不在提供新的功能测试<br>\n        3.转为正式版后，您可继续申请为内测版。\n      ",this.$confirm(t,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"",dangerouslyUseHTMLString:!0,customClass:"custom-width"}).then(Object(s["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(i["k"])({type:"stable"===e.listArray.system_version_type?"beta":"stable"});case 2:r=t.sent,a=r.data,200!==a.status?e.$message.error(a.msg):(e.$message.success(a.msg),e.getSystemInfo());case 5:case"end":return t.stop()}}),t)})))).catch((function(){}))},getUpdateContent:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(i["n"])();case 2:r=t.sent,a=r.data,200!==a.status?e.$message.error(a.msg):e.updataContent=a.data;case 5:case"end":return t.stop()}}),t)})))()},openAuthorize:function(){this.formData.license=this.listArray.system_license,this.authorizeVisable=!0},submitForm:function(){var e=this;this.$refs.formData.validate(function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(r){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!r){t.next=13;break}return e.authorizeLoading=!0,t.next=4,Object(i["a"])(e.formData);case 4:if(a=t.sent,n=a.data,e.authorizeLoading=!1,200===n.status){t.next=10;break}return e.$message.error(n.msg),t.abrupt("return",!1);case 10:e.getSystemInfo(),e.$message.success(n.msg),e.authorizeVisable=!1;case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},created:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getSystemInfo();case 2:e.getUpdateContent();case 3:case"end":return t.stop()}}),t)})))()},computed:{clientWidth:function(){return document.body.clientWidth}}},l=o,c=(r("212d"),r("2877")),u=Object(c["a"])(l,a,n,!1,null,"cb8f081c",null);t["default"]=u.exports},"9dcc":function(e,t,r){},b680:function(e,t,r){"use strict";var a=r("23e7"),n=r("a691"),s=r("408a"),i=r("1148"),o=r("d039"),l=1..toFixed,c=Math.floor,u=function(e,t,r){return 0===t?r:t%2===1?u(e,t-1,r*e):u(e*e,t/2,r)},p=function(e){var t=0,r=e;while(r>=4096)t+=12,r/=4096;while(r>=2)t+=1,r/=2;return t},d=l&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!o((function(){l.call({})}));a({target:"Number",proto:!0,forced:d},{toFixed:function(e){var t,r,a,o,l=s(this),d=n(e),m=[0,0,0,0,0,0],f="",g="0",h=function(e,t){var r=-1,a=t;while(++r<6)a+=e*m[r],m[r]=a%1e7,a=c(a/1e7)},b=function(e){var t=6,r=0;while(--t>=0)r+=m[t],m[t]=c(r/e),r=r%e*1e7},v=function(){var e=6,t="";while(--e>=0)if(""!==t||0===e||0!==m[e]){var r=String(m[e]);t=""===t?r:t+i.call("0",7-r.length)+r}return t};if(d<0||d>20)throw RangeError("Incorrect fraction digits");if(l!=l)return"NaN";if(l<=-1e21||l>=1e21)return String(l);if(l<0&&(f="-",l=-l),l>1e-21)if(t=p(l*u(2,69,1))-69,r=t<0?l*u(2,-t,1):l/u(2,t,1),r*=4503599627370496,t=52-t,t>0){h(0,r),a=d;while(a>=7)h(1e7,0),a-=7;h(u(10,a,1),0),a=t-1;while(a>=23)b(1<<23),a-=23;b(1<<a),h(1,1),b(2),g=v()}else h(0,r),h(1<<-t,0),g=v()+i.call("0",d);return d>0?(o=g.length,g=f+(o<=d?"0."+i.call("0",d-o)+g:g.slice(0,o-d)+"."+g.slice(o-d))):g=f+g,g}})},c46f:function(e,t,r){"use strict";var a=r("617c"),n=r.n(a);n.a},cf23:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"updata"},[a("el-row",{attrs:{type:"flex",justify:"center"}},[a("el-col",{staticClass:"box-col",attrs:{span:10}},[a("el-row",{staticClass:"logo-box",attrs:{type:"flex",justify:"space-between"}},[a("el-col",{staticClass:"logo-left",attrs:{span:6}},[a("img",{staticStyle:{"vertical-align":"middle"},attrs:{src:r("e321"),alt:"智简魔方"}})]),a("el-col",{staticClass:"logo-right",attrs:{span:9}},[e._v(" 智简魔方财务升级程序 "),a("span",[e._v(e._s(e.lastVersion))])])],1),e.active?a("el-row",[a("el-row",{staticClass:"protocol",domProps:{innerHTML:e._s(e.updataContent)}}),a("el-row",{staticStyle:{margin:"50px 0"},attrs:{type:"flex",justify:"center"}},[a("el-row",[a("el-checkbox",{model:{value:e.protocol.argee,callback:function(t){e.$set(e.protocol,"argee",t)},expression:"protocol.argee"}},[e._v("我已同意 "),a("el-link",{on:{click:function(t){e.isServerShow=!0}}},[e._v("《服务条款》")])],1),a("br"),a("el-checkbox",{model:{value:e.protocol.isBackup,callback:function(t){e.$set(e.protocol,"isBackup",t)},expression:"protocol.isBackup"}},[e._v(" 我已做好数据备份 ")])],1)],1),a("el-row",{staticStyle:{"margin-bottom":"40px"},attrs:{type:"flex",justify:"center"}},[a("el-col",{attrs:{span:3}},[a("el-button",{attrs:{type:e.protocol.argee&&e.protocol.isBackup?"primary":"",round:"",disabled:!e.protocol.argee||!e.protocol.isBackup},on:{click:e.updateHandleClick}},[e._v("立刻升级")])],1)],1)],1):a("el-row",[a("el-col",{staticClass:"Upgrade"},[a("el-row",{staticClass:"top-prossess"},[a("el-row",{staticClass:"top-text"},["banner5"!==e.bannerNum?a("div",[e._v(" "+e._s(e.progressMsg)+" "),a("span",{staticStyle:{color:"#7ab9ff"}},[e._v(e._s(e.progress)+"%")])]):e._e()]),"banner5"!==e.bannerNum?a("el-row",{staticClass:"bottom-prossess",attrs:{type:"flex",justify:"center",align:"center"}},[a("el-col",{attrs:{span:20}},[a("el-progress",{attrs:{percentage:e.progress,"stroke-width":14,"show-text":!1}})],1)],1):e._e()],1),a("el-row",{staticClass:"bottom-banner",class:e.bannerNum,attrs:{type:"flex",justify:"center"}},["banner5"==e.bannerNum?a("el-col",{attrs:{span:3}},[a("el-button",{attrs:{type:"primary",round:""},on:{click:function(t){return e.$router.push("home-page")}}},[e._v("访问后台")])],1):e._e()],1)],1)],1)],1)],1),a("el-row",{attrs:{type:"flex",justify:"center"}},[a("el-col",{attrs:{span:3}},[a("br"),e._v(" © 2020-2021 IDCSmart Team ")])],1)],1)},n=[],s=(r("b680"),r("96cf"),r("1da1")),i=r("51bf"),o={data:function(){return{active:!0,lastVersion:"2.2.0",isServerShow:!1,bannerNum:"",progress:20,timer:null,progressMsg:"正在解压",protocol:{argee:!0,isBackup:!0}}},created:function(){this.$route.params.lastVersion||this.$router.push("home-page"),this.lastVersion=this.$route.params.lastVersion,this.updataContent=this.$route.params.updataContent},mounted:function(){},methods:{updateHandleClick:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.active=!1,e.bannerNum="banner1",e.progress=Math.round(100*parseFloat((10*Math.random()+10).toFixed(2)))/100,e.progressMsg="正在解压",t.next=7,Object(i["l"])();case 7:e.loop(),t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](0),e.$message.error(t.t0.msg);case 13:case"end":return t.stop()}}),t,null,[[0,10]])})))()},upData:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(i["m"])();case 3:t.next=8;break;case 5:t.prev=5,t.t0=t["catch"](0),e.$message.error(t.t0.msg);case 8:case"end":return t.stop()}}),t,null,[[0,5]])})))()},loop:function(){var e=this;this.timer&&clearInterval(this.timer),"banner5"==this.bannerNum&&clearInterval(this.timer),this.timer=setInterval((function(){e.getCheckUpdateReq()}),3e3)},getCheckUpdateReq:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(i["b"])();case 3:if(r=t.sent,200==r.data.status){t.next=8;break}return e.$message.error("升级失败，请刷新重试"),history.go(-1),t.abrupt("return");case 8:"40%"==r.data.progress?(e.bannerNum="banner1",e.progress=Math.round(100*parseFloat((10*Math.random()+15).toFixed(2)))/100,e.progressMsg="正在解压"):"50%"==r.data.progress?(e.bannerNum="banner2",e.progress=Math.round(100*parseFloat((10*Math.random()+30).toFixed(2)))/100,e.progressMsg="解压成功",e.upData()):"60%"==r.data.progress?(e.bannerNum="banner3",e.progress=Math.round(100*(Math.round(100*parseFloat((7*Math.random()).toFixed(2)))/100+e.progress).toFixed(2))/100,e.progressMsg="正在复制文件"):"100%"==r.data.progress&&(e.bannerNum="banner4",e.progress=Math.round(100*parseFloat((10*Math.random()+85).toFixed(2)))/100,e.progressMsg="正在升级",setTimeout(Object(s["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.bannerNum="banner5",clearInterval(e.timer),t.next=4,Object(i["o"])();case 4:r=t.sent,e.$message.success(r.data.msg);case 6:case"end":return t.stop()}}),t)}))),2e3)),t.next=15;break;case 11:return t.prev=11,t.t0=t["catch"](0),e.$message.error(t.t0.msg),t.abrupt("return");case 15:case"end":return t.stop()}}),t,null,[[0,11]])})))()}},computed:{},watch:{},destroyed:function(){clearInterval(this.timer)}},l=o,c=(r("c46f"),r("2877")),u=Object(c["a"])(l,a,n,!1,null,"8f25a3ce",null);t["default"]=u.exports},e321:function(e,t){e.exports="data:image/png;base64,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"}}]);