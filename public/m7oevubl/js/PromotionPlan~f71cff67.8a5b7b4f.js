(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["PromotionPlan~f71cff67"],{"3d8d":function(e,t,a){"use strict";a.d(t,"f",(function(){return i})),a.d(t,"g",(function(){return s})),a.d(t,"e",(function(){return n})),a.d(t,"a",(function(){return l})),a.d(t,"c",(function(){return o})),a.d(t,"d",(function(){return f})),a.d(t,"b",(function(){return c}));var r=a("a27e");function i(){return Object(r["a"])({url:"config_general/affiliate"})}function s(e){return Object(r["a"])({url:"config_general/affiliate",method:"post",data:e})}function n(e){return Object(r["a"])({url:"affladder",params:e})}function l(e){return Object(r["a"])({url:"aff/add_affladder",method:"post",params:e})}function o(e){return Object(r["a"])({url:"aff/edit_affladder",method:"post",params:e})}function f(e){return Object(r["a"])({url:"aff/edit_affladderpage",params:{id:e}})}function c(e){return Object(r["a"])({url:"aff/del_affladder",params:{id:e}})}},9902:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"sales"},[a("h5",{staticClass:"mt-0"},[e._v(" 推荐提成相关设置，用户激活推介计划后，获取推荐链接，访问链接会生成cookie信息。注册时cookie有效则绑定推荐关系，推荐人将会获得佣金奖励。 "),a("el-link",{attrs:{type:"primary",href:"https://www.idcsmart.com/wiki_list/359.html",target:"blank"}},[e._v("查看帮助文档")])],1),a("el-tabs",{model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"推介设置",name:"grouping"}},[a("div",[a("el-row",{attrs:{gutter:15}},[a("el-form",{ref:"elForm",attrs:{model:e.formData,rules:e.rules,size:"medium","label-width":e.labelWidth}},[a("el-form-item",{attrs:{label:"是否启用推介",prop:"affiliate_enabled"}},[a("span",{attrs:{slot:"label"},slot:"label"},[e._v(" 是否启用推介 "),a("el-popover",{attrs:{placement:"top-start",title:"",width:"200",trigger:"hover"}},[a("el-row",[a("el-col",{attrs:{span:24}},[e._v("推介计划功能的总开关。")])],1),a("i",{staticClass:"el-icon-question blue_qus",attrs:{slot:"reference"},slot:"reference"})],1)],1),a("el-switch",{on:{change:e.PromotionChecked},model:{value:e.isPromotionChecked,callback:function(t){e.isPromotionChecked=t},expression:"isPromotionChecked"}})],1),e.isPromotionChecked?[a("el-form-item",{attrs:{label:"推介计划激活赠送金额",prop:"affiliate_bonusde_posit"}},[a("span",{attrs:{slot:"label"},slot:"label"},[e._v(" 推介计划激活赠送金额 "),a("el-popover",{attrs:{placement:"top-start",title:"",width:"200",trigger:"hover"}},[a("el-row",[a("el-col",{attrs:{span:24}},[e._v("输入客户激活推介计划时赠送的金额。")])],1),a("i",{staticClass:"el-icon-question blue_qus",attrs:{slot:"reference"},slot:"reference"})],1)],1),a("el-input-number",{style:{width:"260px"},attrs:{controls:!1,precision:2,placeholder:"请输入推介计划激活赠送金额",clearable:""},model:{value:e.formData.affiliate_bonusde_posit,callback:function(t){e.$set(e.formData,"affiliate_bonusde_posit",t)},expression:"formData.affiliate_bonusde_posit"}})],1),a("el-form-item",{attrs:{label:"推介计划比例类型",prop:"affiliate_type"}},[a("el-select",{style:{width:"260px"},attrs:{placeholder:"请选择推介计划比例类型",clearable:""},model:{value:e.formData.affiliate_type,callback:function(t){e.$set(e.formData,"affiliate_type",t)},expression:"formData.affiliate_type"}},e._l(e.affiliateTypeSelectOptions,(function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.type,disabled:e.disabled}})})),1)],1),a("el-form-item",{staticClass:"formItem_wrapper",attrs:{label:1===e.formData.affiliate_type?"推介计划金额":"推介计划比例",prop:"affiliate_bates"}},[a("span",{attrs:{slot:"label"},slot:"label"},[e._v(" "+e._s(1===e.formData.affiliate_type?"推介计划金额":"推介计划比例")+" "),a("el-popover",{attrs:{placement:"top-start",title:"",width:"200",trigger:"hover"}},[a("el-row",[a("el-col",{attrs:{span:24}},[e._v(" 输入用户注册购买产品后您希望推荐人收到的"+e._s(1===e.formData.affiliate_type?"金额":"比例")+"。 ")])],1),a("i",{staticClass:"el-icon-question blue_qus",attrs:{slot:"reference"},slot:"reference"})],1)],1),a("el-input-number",{style:{width:"260px"},attrs:{controls:!1,precision:2,placeholder:1===e.formData.affiliate_type?"请输入推介计划金额":"请输入推介计划比例",clearable:""},model:{value:e.formData.affiliate_bates,callback:function(t){e.$set(e.formData,"affiliate_bates",t)},expression:"formData.affiliate_bates"}}),a("span",{staticClass:"unit"},[e._v(e._s(1===e.formData.affiliate_type?"元":"%"))])],1),a("el-form-item",{staticClass:"formItem_wrapper",attrs:{controls:!1,precision:2,label:"推荐链接cookie有效期",prop:"affiliate_cookie"}},[a("span",{attrs:{slot:"label"},slot:"label"},[e._v(" 推荐链接cookie有效期 "),a("el-popover",{attrs:{placement:"top-start",title:"",width:"200",trigger:"hover"}},[a("el-row",[a("el-col",{attrs:{span:24}},[e._v("客户访问推荐人的链接后，cookie的有效期。")])],1),a("i",{staticClass:"el-icon-question blue_qus",attrs:{slot:"reference"},slot:"reference"})],1)],1),a("el-input-number",{style:{width:"260px"},attrs:{controls:!1,placeholder:"请输入推荐链接cookie有效期",clearable:""},model:{value:e.formData.affiliate_cookie,callback:function(t){e.$set(e.formData,"affiliate_cookie",t)},expression:"formData.affiliate_cookie"}}),a("span",{staticClass:"unit"},[e._v("天")])],1),a("el-form-item",{attrs:{label:"提现最低金额",prop:"affiliate_withdraw"}},[a("span",{attrs:{slot:"label"},slot:"label"},[e._v(" 提现最低金额 "),a("el-popover",{attrs:{placement:"top-start",title:"",width:"200",trigger:"hover"}},[a("el-row",[a("el-col",{attrs:{span:24}},[e._v("当佣金余额达到此级别后，推荐人前台将出现“提现”按钮。")])],1),a("i",{staticClass:"el-icon-question blue_qus",attrs:{slot:"reference"},slot:"reference"})],1)],1),a("el-input-number",{style:{width:"260px"},attrs:{controls:!1,precision:2,placeholder:"请输入提现最低金额",clearable:""},model:{value:e.formData.affiliate_withdraw,callback:function(t){e.$set(e.formData,"affiliate_withdraw",t)},expression:"formData.affiliate_withdraw"}})],1),a("el-form-item",{attrs:{label:"提现必须实名",prop:"affiliate_is_authentication"}},[a("span",{attrs:{slot:"label"},slot:"label"},[e._v(" 提现必须实名 "),a("el-popover",{attrs:{placement:"top-start",title:"",width:"200",trigger:"hover"}},[a("el-row",[a("el-col",{attrs:{span:24}},[e._v("佣金提现时，是否需要实名认证。")]),a("el-col",{staticClass:"tar",attrs:{span:24}},[a("router-link",{attrs:{to:{path:"/authentication-setting"},target:"_blank"}},[a("el-link",{attrs:{type:"primary"}},[e._v("设置实名认证")])],1)],1)],1),a("i",{staticClass:"el-icon-question blue_qus",attrs:{slot:"reference"},slot:"reference"})],1)],1),a("el-switch",{on:{change:e.AuthenticationChecked},model:{value:e.isAuthenticationChecked,callback:function(t){e.isAuthenticationChecked=t},expression:"isAuthenticationChecked"}})],1),a("el-form-item",{attrs:{label:"推荐佣金延迟天数",prop:"affiliate_delay_commission"}},[a("span",{attrs:{slot:"label"},slot:"label"},[e._v(" 推荐佣金延迟天数 "),a("el-popover",{attrs:{placement:"top-start",title:"",width:"200",trigger:"hover"}},[a("el-row",[a("el-col",{attrs:{span:24}},[e._v("即客户付款多少天后，推荐人的佣金被确认，如果在此值之前取消订单，则推荐人将不会获得佣金。")])],1),a("i",{staticClass:"el-icon-question blue_qus",attrs:{slot:"reference"},slot:"reference"})],1)],1),a("el-input",{style:{width:"260px"},attrs:{placeholder:"请输入延迟订单支付的天数",clearable:""},model:{value:e.formData.affiliate_delay_commission,callback:function(t){e.$set(e.formData,"affiliate_delay_commission",t)},expression:"formData.affiliate_delay_commission"}})],1),a("el-form-item",{attrs:{label:"是否开启二次订购",prop:"affiliate_reorder_type"}},[a("span",{attrs:{slot:"label"},slot:"label"},[e._v(" 是否开启二次订购 "),a("el-popover",{attrs:{placement:"top-start",title:"",width:"200",trigger:"hover"}},[a("el-row",[a("el-col",{attrs:{span:24}},[e._v("勾选后，推荐人名下的客户非首次订购的产品都会获得佣金，否则只有首次购买才获得。")])],1),a("i",{staticClass:"el-icon-question blue_qus",attrs:{slot:"reference"},slot:"reference"})],1)],1),a("el-switch",{on:{change:e.ReorderChecked},model:{value:e.isReorderChecked,callback:function(t){e.isReorderChecked=t},expression:"isReorderChecked"}})],1),e.isReorderChecked?[a("el-form-item",{attrs:{label:"二次订单比例类型",prop:"affiliate_reorder_type"}},[a("el-select",{style:{width:"260px"},attrs:{placeholder:"请选择二次订单比例类型",clearable:""},model:{value:e.formData.affiliate_reorder_type,callback:function(t){e.$set(e.formData,"affiliate_reorder_type",t)},expression:"formData.affiliate_reorder_type"}},e._l(e.affiliateTypeSelectOptions,(function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.type,disabled:e.disabled}})})),1)],1),a("el-form-item",{staticClass:"formItem_wrapper",attrs:{label:1===e.formData.affiliate_reorder_type?"二次订单金额":"二次订单比例",prop:"affiliate_reorder"}},[a("el-input-number",{style:{width:"260px"},attrs:{controls:!1,precision:2,placeholder:1===e.formData.affiliate_reorder_type?"请输入二次订单金额":"请输入二次订单比例",clearable:""},model:{value:e.formData.affiliate_reorder,callback:function(t){e.$set(e.formData,"affiliate_reorder",t)},expression:"formData.affiliate_reorder"}}),a("span",{staticClass:"unit"},[e._v(e._s(1===e.formData.affiliate_reorder_type?"元":"%"))])],1)]:e._e(),a("el-form-item",{attrs:{label:"是否开启续费",prop:"affiliate_is_renew"}},[a("span",{attrs:{slot:"label"},slot:"label"},[e._v(" 是否开启续费 "),a("el-popover",{attrs:{placement:"top-start",title:"",width:"200",trigger:"hover"}},[a("el-row",[a("el-col",{attrs:{span:24}},[e._v("产品续费是否计算佣金，推荐人是否获得佣金。")])],1),a("i",{staticClass:"el-icon-question blue_qus",attrs:{slot:"reference"},slot:"reference"})],1)],1),a("el-switch",{on:{change:e.RenewChecked},model:{value:e.isRenewChecked,callback:function(t){e.isRenewChecked=t},expression:"isRenewChecked"}})],1),e.isRenewChecked?[a("el-form-item",{attrs:{label:"续费比例比例类型",prop:"affiliate_renew_type"}},[a("el-select",{style:{width:"260px"},attrs:{placeholder:"请选择续费比例比例类型",clearable:""},model:{value:e.formData.affiliate_renew_type,callback:function(t){e.$set(e.formData,"affiliate_renew_type",t)},expression:"formData.affiliate_renew_type"}},e._l(e.affiliateTypeSelectOptions,(function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.type,disabled:e.disabled}})})),1)],1),a("el-form-item",{staticClass:"formItem_wrapper",attrs:{label:1===e.formData.affiliate_renew_type?"续费金额":"续费比例",prop:"affiliate_renew"}},[a("el-input-number",{style:{width:"260px"},attrs:{controls:!1,precision:2,placeholder:1===e.formData.affiliate_renew_type?"请输入续费金额":"请输入续费比例",clearable:""},model:{value:e.formData.affiliate_renew,callback:function(t){e.$set(e.formData,"affiliate_renew",t)},expression:"formData.affiliate_renew"}}),a("span",{staticClass:"unit"},[e._v(e._s(1===e.formData.affiliate_renew_type?"元":"%"))])],1)]:e._e(),a("el-form-item",{attrs:{size:"large"}},[a("el-button",{attrs:{size:"small",type:"primary",loading:e.btnLoading},on:{click:e.submitForm}},[e._v("提交")]),a("el-button",{attrs:{size:"small"},on:{click:e.resetForm}},[e._v("重置")])],1)]:e._e()],2)],1)],1)])],1)],1)},i=[],s=(a("a9e3"),a("96cf"),a("1da1")),n=a("3d8d"),l={metaInfo:{title:"推介设置"},data:function(){return{affiliateTypeSelectOptions:[{type:1,name:"金额"},{type:2,name:"百分比"}],isPromotionChecked:!1,isAuthenticationChecked:!1,isReorderChecked:!1,isRenewChecked:!1,labelWidth:window.document.body.clientWidth>768?"185px":null,activeName:"grouping",toData:[],title:["我们的产品","您选择的产品"],dialogVis:!1,ladderVis:!1,isEdit:!1,isAdd:!1,isLadderEdit:!1,isLadderAdd:!1,tableData:[],tableData02:[],pageInfo:{total:0,limit:Number(localStorage.getItem("limit"))||50,currentPage:1},pageInfo2:{total02:0,limit02:50,currentPage02:1},formData:{},ladderFormData:{turnover:void 0,bates:void 0},defaultProps:{label:"name",children:"children"},rules:{affiliate_renew:[{required:!0,message:"请填写数值",trigger:"blur"}],affiliate_reorder:[{required:!0,message:"请填写数值",trigger:"blur"}],affiliate_delay_commission:[{required:!0,message:"请输入推荐佣金延迟的天数",trigger:"blur"}],affiliate_withdraw:[{required:!0,message:"请输入提现最低金额",trigger:"blur"}],affiliate_cookie:[{required:!0,message:"请输入推荐链接cookie有效期",trigger:"blur"}],affiliate_bates:[{required:!0,message:"请填写数值",trigger:"blur"}],affiliate_bonusde_posit:[{required:!0,message:"请填写推介计划激活赠送金额",trigger:"blur"}],affiliate_renew_type:[{required:!0,message:"请选择二次续费比例比例类型",trigger:"change"}],affiliate_type:[{required:!0,message:"请选择推介计划比例类型",trigger:"change"}],affiliate_reorder_type:[{required:!0,message:"请选择二次订单比例类型",trigger:"change"}]},addRules:{turnover:[{required:!0,message:"请输入营业额",trigger:"blur"}],bates:[{required:!0,message:"请输入提成比例",trigger:"blur"}]},pidsOptions:[],btnLoading:!1}},methods:{isStratUse:function(e){return 1===parseInt(e)},getData:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(n["f"])();case 2:a=t.sent,r=a.data,200!==r.status?e.$message.error(r.msg):(e.formData=r.data.config_value,e.formData.affiliate_enabled=null===e.formData.affiliate_enabled?0:e.formData.affiliate_enabled,e.formData.affiliate_is_authentication=null===e.formData.affiliate_is_authentication?0:e.formData.affiliate_is_authentication,e.formData.affiliate_is_reorder=null===e.formData.affiliate_is_reorder?0:e.formData.affiliate_is_reorder,e.formData.affiliate_is_renew=null===e.formData.affiliate_is_renew?0:e.formData.affiliate_is_renew,e.isPromotionChecked=e.isStratUse(e.formData.affiliate_enabled),e.isAuthenticationChecked=e.isStratUse(e.formData.affiliate_is_authentication),e.isReorderChecked=e.isStratUse(e.formData.affiliate_is_reorder),e.isRenewChecked=e.isStratUse(e.formData.affiliate_is_renew),e.formData.affiliate_type=null===e.formData.affiliate_type?2:parseInt(e.formData.affiliate_type),e.formData.affiliate_reorder_type=null===e.formData.affiliate_reorder_type?2:parseInt(e.formData.affiliate_reorder_type),e.formData.affiliate_renew_type=null===e.formData.affiliate_renew_type?2:parseInt(e.formData.affiliate_renew_type));case 5:case"end":return t.stop()}}),t)})))()},getLadder:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(n["e"])(e.pageInfo2);case 2:if(a=t.sent,r=a.data,200===r.status){t.next=7;break}return e.$message.error(r.msg),t.abrupt("return");case 7:e.tableData02=r.list,e.pageInfo2.total02=r.total;case 9:case"end":return t.stop()}}),t)})))()},handleSizeChange02:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var r,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.pageInfo2.limit02=e,a.next=3,Object(n["e"])(t.pageInfo2.currentPage02,t.pageInfo2.limit02);case 3:if(r=a.sent,i=r.data,200===i.status){a.next=8;break}return t.$message.error(i.msg),a.abrupt("return");case 8:t.pageInfo2.total02=i.total,t.tableData02=i.list;case 10:case"end":return a.stop()}}),a)})))()},currentChange02:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var r,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.pageInfo2.currentPage02=e,a.next=3,Object(n["e"])(t.pageInfo2.currentPage02,t.pageInfo2.limit02);case 3:if(r=a.sent,i=r.data,200===i.status){a.next=8;break}return t.$message.error("发生了错误"),a.abrupt("return");case 8:t.pageInfo2.total02=i.total,t.tableData02=i.list;case 10:case"end":return a.stop()}}),a)})))()},editRow02:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var r,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.isLadderEdit=!0,t.isAdd=!1,t.ladderVis=!0,a.next=5,Object(n["d"])(e.id);case 5:r=a.sent,i=r.data,200!==i.status?t.$message.error(i.msg):t.ladderFormData=i.data.ladder;case 8:case"end":return a.stop()}}),a)})))()},deleteRow02:function(e){var t=this;this.$confirm("将删除此阶梯, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(n["b"])(e.id).then((function(e){200!==e.data.status?t.$message.error(e.data.msg):(t.$message.success("阶梯已删除"),t.getLadder())}))})).catch((function(){}))},ReorderChecked:function(e){this.isReorderChecked=e,this.formData.affiliate_is_reorder=e?1:0},AuthenticationChecked:function(e){this.isAuthenticationChecked=e,this.formData.affiliate_is_authentication=e?1:0},PromotionChecked:function(e){this.isPromotionChecked=e,this.formData.affiliate_enabled=e?1:0},RenewChecked:function(e){this.isRenewChecked=e,this.formData.affiliate_is_renew=e?1:0},submitForm:function(){var e=this;this.$refs.elForm.validate(function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(a){var r,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a){t.next=2;break}return t.abrupt("return");case 2:return e.btnLoading=!0,t.next=5,Object(n["g"])(e.formData);case 5:r=t.sent,i=r.data,e.btnLoading=!1,200!==i.status?e.$message.error(i.msg):(e.$message.success(i.msg),e.getData());case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},onOpen:function(){},onClose:function(){this.$refs.elForm.resetFields(),this.dialogVis=!1,this.isEdit=!1,this.isAdd=!1,this.pidsOptions=[]},close:function(){this.$emit("update:visible",!1),this.dialogVis=!1,this.isEdit=!1,this.isAdd=!1,this.pidsOptions=[]},onLadderOpen:function(){},onLadderClose:function(){this.$refs.elLadderForm.resetFields(),this.ladderVis=!1,this.isLadderEdit=!1,this.isLadderAdd=!1},ladderclose:function(){this.$emit("update:visible",!1),this.ladderVis=!1,this.isLadderEdit=!1,this.isLadderAdd=!1},addLadder:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.ladderFormData={turnover:void 0,bates:void 0},e.isLadderAdd=!0,e.ladderVis=!0;case 3:case"end":return t.stop()}}),t)})))()},handelLadderConfirm:function(){var e=this;this.isLadderAdd?this.$refs.elLadderForm.validate(function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(a){var r,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a){t.next=2;break}return t.abrupt("return");case 2:return e.btnLoading=!0,t.prev=3,t.next=6,Object(n["a"])(e.ladderFormData);case 6:r=t.sent,i=r.data,e.btnLoading=!1,200!==i.status?e.$message.error(i.msg):(e.$message.success(i.msg),e.getLadder(),e.onLadderClose()),t.next=15;break;case 12:t.prev=12,t.t0=t["catch"](3),e.btnLoading=!1;case 15:case"end":return t.stop()}}),t,null,[[3,12]])})));return function(e){return t.apply(this,arguments)}}()):this.isLadderEdit&&this.$refs.elLadderForm.validate(function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(a){var r,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a){t.next=2;break}return t.abrupt("return");case 2:return e.btnLoading=!0,t.prev=3,t.next=6,Object(n["c"])(e.ladderFormData);case 6:r=t.sent,i=r.data,e.btnLoading=!1,200!==i.status?e.$message.error(i.msg):(e.$message.success(i.msg),e.getLadder(),e.onLadderClose()),t.next=15;break;case 12:t.prev=12,t.t0=t["catch"](3),e.btnLoading=!1;case 15:case"end":return t.stop()}}),t,null,[[3,12]])})));return function(e){return t.apply(this,arguments)}}())},resetForm:function(){this.$refs.elForm.resetFields()}},created:function(){this.getData(),this.getLadder()}},o=l,f=(a("c62e"),a("2877")),c=Object(f["a"])(o,r,i,!1,null,"7acd675a",null);t["default"]=c.exports},c62e:function(e,t,a){"use strict";var r=a("d55d"),i=a.n(r);i.a},d55d:function(e,t,a){}}]);