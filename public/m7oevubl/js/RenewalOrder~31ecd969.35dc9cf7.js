(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["RenewalOrder~31ecd969"],{"129f":function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e===1/t:e!=e&&t!=t}},"5d4a":function(e,t,a){"use strict";var r=a("be13"),n=a.n(r);n.a},"841c":function(e,t,a){"use strict";var r=a("d784"),n=a("825a"),s=a("1d80"),i=a("129f"),o=a("14c3");r("search",1,(function(e,t,a){return[function(t){var a=s(this),r=void 0==t?void 0:t[e];return void 0!==r?r.call(t,a):new RegExp(t)[e](String(a))},function(e){var r=a(t,e,this);if(r.done)return r.value;var s=n(e),c=String(this),u=s.lastIndex;i(u,0)||(s.lastIndex=0);var l=o(s,c);return i(s.lastIndex,u)||(s.lastIndex=u),null===l?-1:l.index}]}))},af9c:function(e,t,a){"use strict";a.d(t,"m",(function(){return n})),a.d(t,"l",(function(){return s})),a.d(t,"i",(function(){return i})),a.d(t,"a",(function(){return o})),a.d(t,"e",(function(){return c})),a.d(t,"p",(function(){return u})),a.d(t,"c",(function(){return l})),a.d(t,"j",(function(){return d})),a.d(t,"n",(function(){return h})),a.d(t,"k",(function(){return p})),a.d(t,"d",(function(){return m})),a.d(t,"o",(function(){return f})),a.d(t,"q",(function(){return g})),a.d(t,"b",(function(){return b})),a.d(t,"h",(function(){return v})),a.d(t,"f",(function(){return _})),a.d(t,"g",(function(){return w}));var r=a("a27e");function n(e){return Object(r["a"])({url:"order/search_page",params:e})}function s(e){return Object(r["a"])({url:"order/search",params:e})}function i(e){return Object(r["a"])({url:"order/check",params:e})}function o(e){return Object(r["a"])({url:"order/cancel",params:e})}function c(e){return Object(r["a"])({url:"orders/delete",method:"delete",params:e})}function u(e){return Object(r["a"])({url:"order/create_page",params:e})}function l(e){return Object(r["a"])({url:"order/create",method:"post",data:e})}function d(e){return Object(r["a"])({url:"orders/"+e})}function h(e){return Object(r["a"])({url:"orders/set_config",params:e})}function p(e){return Object(r["a"])({url:"get_total",method:"post",data:e})}function m(e){return Object(r["a"])({url:"order/save_promo_code",method:"post",data:e})}function f(e){return Object(r["a"])({url:"orders/active",method:"post",data:e})}function g(){return Object(r["a"])({url:"order/promo_code_page"})}function b(e){return Object(r["a"])({url:"orders/change_status",method:"post",data:e})}function v(e){return Object(r["a"])({url:"order/order_commission",method:"post",data:e})}function _(e){return Object(r["a"])({url:"order/getclients",params:{username:e}})}function w(e){return Object(r["a"])({url:"invoice/renew",method:"get",params:e})}},be13:function(e,t,a){},d2a8:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"productOrder custom-tabs"},[a("h5",{staticClass:"mt-0"},[e._v("在这里查看所有的续费产品、时间等 ")]),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-button",{staticClass:"ml-10",attrs:{size:"small"},on:{click:function(t){e.showSearchArea=!e.showSearchArea}}},[e._v(" "+e._s(e.showSearchArea?"收起搜索":"高级搜索")+" ")])],1)],1),a("transition",{attrs:{name:"el-zoom-in-top"}},[e.showSearchArea?a("el-form",{ref:"elForm",staticClass:"mt-20 unfold-search",attrs:{inline:"",model:e.search,"label-width":"65px"}},[a("el-form-item",{attrs:{label:"客户",prop:"username"}},[a("el-autocomplete",{style:{width:"160px"},attrs:{"trigger-on-focus":!0,size:"small","fetch-suggestions":e.querySearchAsync,placeholder:"请输入用户"},on:{input:e.clearUid,select:e.handleSelect},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.item;return[a("el-row",[a("el-col",{attrs:{span:24}},[a("span",{staticStyle:{"font-size":"14px"}},[e._v(e._s(r.username))]),a("span",[e._v(e._s(r.companyname?" ("+r.companyname+")":""))]),a("span",[e._v(e._s(r.id?" - #"+r.id:""))])]),a("el-col",{staticStyle:{"margin-top":"-10px"},attrs:{span:24}},[a("span",{staticStyle:{"font-size":"12px",color:"#999"}},[e._v(e._s(r.email))])])],1)]}}],null,!1,1605673202),model:{value:e.search.username,callback:function(t){e.$set(e.search,"username",t)},expression:"search.username"}})],1),a("el-form-item",{attrs:{label:"时间",prop:"time"}},[a("el-date-picker",{style:{width:"350px"},attrs:{size:"small",type:"datetimerange","value-format":"timestamp","start-placeholder":"开始时间","end-placeholder":"结束时间","range-separator":"至",clearable:""},on:{change:e.dateSelectChange},model:{value:e.searchTime,callback:function(t){e.searchTime=t},expression:"searchTime"}})],1),a("el-form-item",{attrs:{label:"金额",prop:"amount"}},[a("el-input",{style:{width:"160px"},attrs:{size:"small",placeholder:"请输入金额",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchHandeClick(t)}},model:{value:e.search.amount,callback:function(t){e.$set(e.search,"amount",t)},expression:"search.amount"}})],1),a("el-form-item",{attrs:{label:"付款方式",prop:"payment"}},[a("el-select",{style:{width:"160px"},attrs:{size:"small",placeholder:"请选择付款方式",clearable:""},model:{value:e.search.payment,callback:function(t){e.$set(e.search,"payment",t)},expression:"search.payment"}},e._l(e.paymentOptions,(function(e,t){return a("el-option",{key:t,attrs:{label:e.title,value:e.name}})})),1)],1),a("el-form-item",{attrs:{label:" "}},[a("el-button",{attrs:{size:"mini",type:"primary",loading:e.btnLoading},on:{click:e.searchHandeClick}},[e._v("搜索")]),a("el-button",{attrs:{size:"mini"},on:{click:e.clearSearchHandleClick}},[e._v("清空")])],1)],1):e._e()],1),a("el-table",{ref:"dataTable",staticClass:"mt-10",attrs:{data:e.orderTableData,border:""},on:{"sort-change":e.sortChange}},[a("div",{attrs:{slot:"empty"},slot:"empty"},[!e.orderTableData.length&&e.tableLoading?a("span",[a("i",{staticClass:"el-icon-loading"}),e._v(" 正在加载 ... ")]):e._e(),e.orderTableData.length||e.tableLoading?e._e():a("span",[e._v("暂无数据")])]),a("el-table-column",{attrs:{prop:"id",label:"ID",sortable:"",width:"120",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.id)+" ")]}}])}),a("el-table-column",{attrs:{prop:"username",label:"客户名"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-link",{on:{click:function(a){return e.goToView(t.row.uid)}}},[e._v(e._s(t.row.username))]),a("div",{staticClass:"second-row"},[e._v(e._s(t.row.companyname))])]}}])}),a("el-table-column",{attrs:{prop:"hosts",label:"产品"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("router-link",{attrs:{to:{name:"productInnerpage",query:{id:t.row.uid,hid:t.row.hostid}}}},[a("el-link",[e._v(" "+e._s(t.row.name)+" ")]),a("div",{staticClass:"second-row"},[e._v(e._s(t.row.domain))])],1)]}}])}),a("el-table-column",{attrs:{label:"IP",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[a("div",[e._v(" "+e._s(r.dedicatedip)+" ")])]}}])}),a("el-table-column",{attrs:{prop:"paid_time",label:"续费时间",sortable:"",width:"135",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.paid_time?e.$moment(1e3*t.row.paid_time).format("YYYY-MM-DD HH:mm"):"-"))])]}}])}),a("el-table-column",{attrs:{prop:"amount",label:"金额",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.amount)+e._s(t.row.cycle?" / "+t.row.cycle:""))])]}}])}),a("el-table-column",{attrs:{label:"付款方式",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[a("div",[e._v(" "+e._s(r.payment)+" ")])]}}])})],1),e.adPageFlag&&!e.OriginalSearch?a("el-pagination",{attrs:{"current-page":e.search.page,"page-sizes":[10,15,20,25,50,100],"page-size":e.search.limit,layout:"total, prev, pager, next, jumper",total:e.vuexTotal},on:{"current-change":e.adSizeChange,"update:currentPage":function(t){return e.$set(e.search,"page",t)},"update:current-page":function(t){return e.$set(e.search,"page",t)},"update:pageSize":function(t){return e.$set(e.search,"limit",t)},"update:page-size":function(t){return e.$set(e.search,"limit",t)}}}):a("el-pagination",{staticClass:"mt-10",attrs:{"current-page":e.search.page,"page-sizes":[10,15,20,25,50,100],"page-size":e.search.limit,total:e.total,layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){return e.$set(e.search,"page",t)},"update:current-page":function(t){return e.$set(e.search,"page",t)},"update:pageSize":function(t){return e.$set(e.search,"limit",t)},"update:page-size":function(t){return e.$set(e.search,"limit",t)}}})],1)},n=[],s=(a("a9e3"),a("ac1f"),a("5319"),a("841c"),a("96cf"),a("1da1")),i=a("dd77"),o=a("af9c"),c={metaInfo:{title:"产品订单"},data:function(){return{tableLoading:!1,adPageFlag:!1,OriginalSearch:void 0,first:!0,vuexTotal:this.$store.state.searchObj.total,examLoading:!1,cancelLoading:!1,deleteLoading:!1,labelWidth:window.document.body.clientWidth>768?"100px":null,showSearchArea:!1,searchTime:[],search:{page:1,limit:Number(localStorage.getItem("limit"))||50,order:"paid_time",sort:"desc",username:void 0,uid:void 0,payment:void 0,start_time:void 0,end_time:void 0,amount:void 0,id:void 0},paymentOptions:[],total:0,orderTableData:[],btnLoading:!1}},methods:{adSearch:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var r,n,s,o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r={},Object.assign(r,t.$route.query),r.page=e,r.limit=Number(localStorage.getItem("limit"))||50,""!==r.flag&&delete r.flag,r.table=t.$route.query.type,a.next=8,Object(i["a"])(r);case 8:n=a.sent,s=n.data,t.orderTableData=s.list,t.vuexTotal=s.count,t.total=s.count,t.btnLoading=!1,o=JSON.parse(JSON.stringify(t.$route.query)),o.page=e,delete o.request_time,t.$router.replace({query:o});case 18:case"end":return a.stop()}}),a)})))()},adSizeChange:function(e){this.adSearch(e)},clearUid:function(){this.search.uid=""},handleSelect:function(e){"notFound"!==e.type&&(this.search.username=e.username,this.search.uid=e.id)},querySearchAsync:function(e,t){var a=this;return Object(s["a"])(regeneratorRuntime.mark((function r(){var n,s,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,Object(o["f"])(e);case 2:if(n=r.sent,s=n.data,200===s.status){r.next=7;break}return a.$message.error(s.msg),r.abrupt("return");case 7:s.data.length?t(s.data):(i=[{username:"未找到相关数据",type:"notFound"}],t(i));case 8:case"end":return r.stop()}}),r)})))()},orderSearchPage:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(o["m"])();case 2:a=t.sent,r=a.data,200===r.status&&(e.paymentOptions=r.gateway);case 5:case"end":return t.stop()}}),t)})))()},dateSelectChange:function(e){this.search.start_time=e[0]/1e3,this.search.end_time=e[1]/1e3},searchHandeClick:function(){this.adPageFlag=!1,this.search.uid=""===this.search.uid?void 0:this.search.uid,this.OriginalSearch=!0,this.btnLoading=!0,this.search.page=1,this.getData()},clearSearchHandleClick:function(){this.search.page=1,this.search.limit=10,this.search.uid=void 0,this.search.username=void 0,this.search.payment=void 0,this.search.start_time=void 0,this.search.end_time=void 0,this.searchTime=[],this.search.amount=void 0,this.search.id=void 0,this.showSearchArea=!1,this.getData()},getData:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.btnLoading=!0,e.tableLoading=!0,t.next=4,Object(o["g"])(e.search);case 4:a=t.sent,r=a.data,200===r.status&&(e.orderTableData=r.list,e.total=r.count),e.btnLoading=!1,e.tableLoading=!1;case 9:case"end":return t.stop()}}),t)})))()},goToView:function(e){this.$router.push({path:"/customer-view/abstract",query:{id:e}})},sortChange:function(e,t,a){if("hosts"===e.prop)return!1;this.search.order=e.prop,"ascending"===e.order?this.search.sort="asc":this.search.sort="desc",this.getData()},handleSizeChange:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.search.page=1,t.orderTableData=[],t.getData();case 3:case"end":return e.stop()}}),e)})))()},handleCurrentChange:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.orderTableData=[],t.getData();case 2:case"end":return e.stop()}}),e)})))()},toDetailPage:function(e){this.$router.push({path:"/order-detail",query:{id:e}})}},beforeDestroy:function(){this.$store.commit("searchQuery",{}),this.$store.commit("setAdFlag",!1)},watch:{searchTime:function(e){e||(this.search.start_time=void 0,this.search.end_time=void 0)}},created:function(){this.orderSearchPage(),this.getData()}},u=c,l=(a("5d4a"),a("2877")),d=Object(l["a"])(u,r,n,!1,null,"3161425a",null);t["default"]=d.exports},dd77:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var r=a("a27e");function n(e){return Object(r["a"])({url:"searchfornamelist",method:"post",data:e})}}}]);