(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["MenuTest~31ecd969"],{"1dde":function(t,e,a){var n=a("d039"),r=a("b622"),i=a("2d00"),o=r("species");t.exports=function(t){return i>=51||!n((function(){var e=[],a=e.constructor={};return a[o]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},7903:function(t,e,a){"use strict";var n=a("79fa"),r=a.n(n);r.a},"79fa":function(t,e,a){},8418:function(t,e,a){"use strict";var n=a("c04e"),r=a("9bf2"),i=a("5c6c");t.exports=function(t,e,a){var o=n(e);o in t?r.f(t,o,i(0,a)):t[o]=a}},9786:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"menu-manage"},[a("h2",[t._v(t._s(t.formData.name))]),a("el-divider"),a("el-form",{attrs:{inline:!0,model:t.formData,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"菜单名称：",prop:"name"}},[a("el-input",{style:{width:"260px"},attrs:{size:"small",maxlength:"15",placeholder:"请输入菜单名称",clearable:""},model:{value:t.formData.name,callback:function(e){t.$set(t.formData,"name",e)},expression:"formData.name"}})],1),a("el-form-item",{attrs:{label:"菜单类型：",prop:"type"}},[t._v(" "+t._s(t.formData.type)+" ")])],1),a("el-tree",{attrs:{data:t.treeData,"empty-text":t.emptyText,props:t.treeProps,"node-key":"id",draggable:"","allow-drop":t.allowDrop,"allow-drag":t.allowDrag},on:{"node-drag-start":t.handleDragStart,"node-drag-enter":t.handleDragEnter,"node-drag-leave":t.handleDragLeave,"node-drag-over":t.handleDragOver,"node-drag-end":t.handleDragEnd,"node-drop":t.handleDrop},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.node,r=e.data;return a("span",{staticClass:"custom-tree-node"},[a("div",{staticClass:"tree-item"},[a("span",{staticClass:"ml-10 icon-label"},[t._v(t._s(n.label))]),a("span",{staticClass:"ml-10 tip"},[t._v(t._s(r.cn_name))]),a("i",{staticClass:"ml-10 el-icon-edit blue",on:{click:function(){return t.changeName(n,r)}}}),a("i",{staticClass:"ml-10 el-icon-remove-outline blue",on:{click:function(){return t.remove(n,r)}}})])])}}])}),a("div",{staticClass:"add-box"},[a("i",{staticClass:"el-icon-circle-plus-outline",on:{click:t.addMenu}})]),a("div",{staticClass:"btn-box"},[a("el-button",{attrs:{size:"small",type:"primary",loading:t.btnLoading},on:{click:t.saveChange}},[t._v("保存更改")]),a("el-button",{attrs:{size:"small"},on:{click:t.cancelChange}},[t._v("取消更改")])],1),a("el-dialog",{attrs:{"before-close":t.handleClose,title:t.editFlag?"编辑页面":"新增页面",visible:t.dialogVisible,width:"50%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("el-form",{ref:"addForm",attrs:{model:t.addData,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"name",prop:"name"}},[a("el-input",{staticStyle:{width:"50%"},attrs:{size:"small",clearable:""},model:{value:t.addData.name,callback:function(e){t.$set(t.addData,"name",e)},expression:"addData.name"}})],1),a("el-form-item",{attrs:{label:"title",prop:"title"}},[a("el-input",{staticStyle:{width:"50%"},attrs:{size:"small",clearable:""},model:{value:t.addData.title,callback:function(e){t.$set(t.addData,"title",e)},expression:"addData.title"}})],1),a("el-form-item",{attrs:{label:"url",prop:"url"}},[a("el-input",{staticStyle:{width:"50%"},attrs:{size:"small",clearable:""},model:{value:t.addData.url,callback:function(e){t.$set(t.addData,"url",e)},expression:"addData.url"}})],1),a("el-form-item",{attrs:{label:"is_display",prop:"url"}},[a("el-input",{staticStyle:{width:"50%"},attrs:{size:"small",clearable:""},model:{value:t.addData.is_display,callback:function(e){t.$set(t.addData,"is_display",e)},expression:"addData.is_display"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.cancel}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary",loading:t.confirmLoading},on:{click:t.addConfirm}},[t._v("确 定")])],1)],1)],1)},r=[],i=(a("c740"),a("4160"),a("a434"),a("b0c0"),a("159b"),a("96cf"),a("1da1")),o=a("c5a1"),d={data:function(){return{confirmLoading:!1,del_ids:[],editFlag:!1,editId:"",emptyText:"正在加载...",ids:[],dialogVisible:!1,btnLoading:!1,showIcon:!0,menuId:this.$route.query.menuId?this.$route.query.menuId:"",menuType:"",treeProps:{label:"title",children:"son"},formData:{name:"",type:""},addData:{url:"",name:"",title:"",is_display:"0"},pageData:[],treeData:[]}},watch:{},created:function(){},mounted:function(){this.getData()},methods:{changeName:function(t,e){this.editFlag=!0,this.editId=e.id,this.dialogVisible=!0,this.addData.type=parseInt(e.nav_type),this.addData.name=e.name,this.addData.icon=e.fa_icon,this.addData.url=e.url,this.addData.title=e.title},mapTree:function(t){var e=this;t.forEach((function(t){if(t.id===e.editId)return t.name=e.addData.name,t.url=e.addData.url,t.title=e.addData.title,void(t.is_display=e.addData.is_display);t.son&&t.son.length>0&&e.mapTree(t.son)}))},addConfirm:function(){var t=this;this.$refs.addForm.validate((function(e){e&&(t.editFlag?(t.mapTree(t.treeData),t.saveChange()):Object(o["n"])(t.addData).then((function(e){if(200===e.data.status){var a={id:e.data.data,name:t.addData.name,url:t.addData.url,title:t.addData.title,is_display:t.addData.is_display};t.treeData.push(a),t.dialogVisible=!1,t.addData={url:"",name:"",title:"",is_display:"0"}}})))}))},selected:function(t){this.addData.icon=t},cancelChange:function(){sessionStorage.getItem("formData")&&(this.formData=JSON.parse(sessionStorage.getItem("formData"))),sessionStorage.getItem("treeData")&&(this.treeData=JSON.parse(sessionStorage.getItem("treeData")))},getData:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(o["o"])();case 2:a=e.sent,n=a.data,200!==n.status?t.$message.error(n.msg):(t.formData.name=n.data.name,t.treeData=n.data||[],sessionStorage.setItem("formData",JSON.stringify(t.formData)),sessionStorage.setItem("treeData",JSON.stringify(t.treeData)),t.dialogVisible=!1,n.data.length||(t.emptyText="暂无数据"));case 5:case"end":return e.stop()}}),e)})))()},handleChanged:function(t){},cancel:function(){this.dialogVisible=!1,this.addData={url:"",name:"",title:"",is_display:"0"}},handleClose:function(t){this.addData={url:"",name:"",title:"",is_display:"0"},t()},addMenu:function(){this.editFlag=!1,this.addData={url:"",name:"",title:"",is_display:"0"},this.dialogVisible=!0},saveChange:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a,n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.treeData.forEach((function(t){t.pid="0"})),a={list:t.treeData},t.confirmLoading=!0,t.btnLoading=!0,e.next=6,Object(o["t"])(a);case 6:n=e.sent,r=n.data,200!==r.status?(t.$message.error(r.msg),t.confirmLoading=!1,t.btnLoading=!1):(t.$message.success(r.msg),t.confirmLoading=!1,t.btnLoading=!1,t.getData());case 9:case"end":return e.stop()}}),e)})))()},handleDragStart:function(t,e){},handleDragEnter:function(t,e,a){},handleDragLeave:function(t,e,a){},handleDragOver:function(t,e,a){},handleDragEnd:function(t,e,a,n){},handleDrop:function(t,e,a,n){},remove:function(t,e){var a=t.parent,n=a.data.son||a.data,r=n.findIndex((function(t){return t.id===e.id}));n.splice(r,1),this.deepMapTree(e)},deepMapTree:function(t){var e=this,a=[];Array.isArray(t)?a=t:a.push(t),a.forEach((function(t){e.del_ids.push(t.id),t.son&&t.son.length>0&&e.deepMapTree(t.son)}))},allowDrop:function(t,e,a){return!0},allowDrag:function(t){return!0}}},s=d,l=(a("7903"),a("2877")),u=Object(l["a"])(s,n,r,!1,null,"5a859c50",null);e["default"]=u.exports},a434:function(t,e,a){"use strict";var n=a("23e7"),r=a("23cb"),i=a("a691"),o=a("50c4"),d=a("7b0b"),s=a("65f0"),l=a("8418"),u=a("1dde"),c=a("ae40"),f=u("splice"),m=c("splice",{ACCESSORS:!0,0:0,1:2}),p=Math.max,h=Math.min,g=9007199254740991,b="Maximum allowed length exceeded";n({target:"Array",proto:!0,forced:!f||!m},{splice:function(t,e){var a,n,u,c,f,m,D=d(this),v=o(D.length),y=r(t,v),O=arguments.length;if(0===O?a=n=0:1===O?(a=0,n=v-y):(a=O-2,n=h(p(i(e),0),v-y)),v+a-n>g)throw TypeError(b);for(u=s(D,n),c=0;c<n;c++)f=y+c,f in D&&l(u,c,D[f]);if(u.length=n,a<n){for(c=y;c<v-n;c++)f=c+n,m=c+a,f in D?D[m]=D[f]:delete D[m];for(c=v;c>v-n+a;c--)delete D[c-1]}else if(a>n)for(c=v-n;c>y;c--)f=c+n-1,m=c+a-1,f in D?D[m]=D[f]:delete D[m];for(c=0;c<a;c++)D[c+y]=arguments[c+2];return D.length=v-n+a,u}})},c5a1:function(t,e,a){"use strict";a.d(e,"j",(function(){return r})),a.d(e,"h",(function(){return i})),a.d(e,"f",(function(){return o})),a.d(e,"b",(function(){return d})),a.d(e,"i",(function(){return s})),a.d(e,"u",(function(){return l})),a.d(e,"k",(function(){return u})),a.d(e,"m",(function(){return c})),a.d(e,"l",(function(){return f})),a.d(e,"a",(function(){return m})),a.d(e,"d",(function(){return p})),a.d(e,"c",(function(){return h})),a.d(e,"e",(function(){return g})),a.d(e,"g",(function(){return b})),a.d(e,"o",(function(){return D})),a.d(e,"n",(function(){return v})),a.d(e,"t",(function(){return y})),a.d(e,"q",(function(){return O})),a.d(e,"p",(function(){return _})),a.d(e,"r",(function(){return w})),a.d(e,"s",(function(){return x}));var n=a("a27e");function r(t){return Object(n["a"])({url:"menus/getMenuType",method:"post",data:t})}function i(t){return Object(n["a"])({url:"menus/getMenu",method:"post",data:t})}function o(t){return Object(n["a"])({url:"menus/editMenuActive",method:"post",data:t})}function d(t){return Object(n["a"])({url:"menus/addMenu",method:"post",data:t})}function s(t){return Object(n["a"])({url:"menus/getMenuList",method:"post",data:t})}function l(t){return Object(n["a"])({url:"menus/setNavList",method:"post",data:t})}function u(t){return Object(n["a"])({url:"menus/getNavType",method:"post",data:t})}function c(t){return Object(n["a"])({url:"menus/getSystemNav",method:"post",data:t})}function f(t){return Object(n["a"])({url:"menus/getProductList",method:"post",data:t})}function m(t){return Object(n["a"])({url:"menus/addCustomPage",method:"post",data:t})}function p(t){return Object(n["a"])({url:"menus/delMenu",method:"post",data:t})}function h(t){return Object(n["a"])({url:"menus/addProductPage",method:"post",data:t})}function g(t){return Object(n["a"])({url:"menus/delTwoMenu",method:"post",data:t})}function b(t){return Object(n["a"])({url:"menus/getLang",method:"post",data:t})}function D(t){return Object(n["a"])({url:"RuleManage/getMenuList",method:"post",data:t})}function v(t){return Object(n["a"])({url:"RuleManage/addMenu",method:"post",data:t})}function y(t){return Object(n["a"])({url:"RuleManage/saveMenuList",method:"post",data:t})}function O(t){return Object(n["a"])({url:"RuleMiddle/getMenuList",method:"post",data:t})}function _(t){return Object(n["a"])({url:"RuleMiddle/addMenu",method:"post",data:t})}function w(t){return Object(n["a"])({url:"RuleMiddle/saveMenuList",method:"post",data:t})}function x(t){return Object(n["a"])({url:"RuleMiddle/getNav",method:"post",data:t})}},c740:function(t,e,a){"use strict";var n=a("23e7"),r=a("b727").findIndex,i=a("44d2"),o=a("ae40"),d="findIndex",s=!0,l=o(d);d in[]&&Array(1)[d]((function(){s=!1})),n({target:"Array",proto:!0,forced:s||!l},{findIndex:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),i(d)}}]);