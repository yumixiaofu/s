(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["AdminManagement~f71cff67"],{b98d:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"admin"},[n("h5",[e._v("您可以在这里配置有权访问后台的用户。")]),n("el-button",{attrs:{size:"small",type:"success",icon:"el-icon-circle-plus-outline"},on:{click:e.toAdd}},[e._v("添加员工")]),n("el-table",{staticClass:"mt-10",staticStyle:{width:"100%"},attrs:{border:"",data:e.tableData.filter((function(t){return!e.search||t.user_login.toLowerCase().includes(e.search.toLowerCase())}))}},[n("div",{attrs:{slot:"empty"},slot:"empty"},[!e.tableData.length&&e.tableLoading?n("span",[n("i",{staticClass:"el-icon-loading"}),e._v(" 正在加载 ... ")]):e._e(),e.tableData.length||e.tableLoading?e._e():n("span",[e._v("暂无数据")])]),n("el-table-column",{attrs:{label:"ID",prop:"id",width:"70",align:"center"}}),n("el-table-column",{attrs:{label:"真实名称",prop:"user_nickname"}}),n("el-table-column",{attrs:{label:"邮件地址",prop:"user_email"}}),n("el-table-column",{attrs:{label:"用户名",prop:"user_login"}}),n("el-table-column",{attrs:{label:"管理员角色",prop:"role"}}),n("el-table-column",{attrs:{label:"分配到的部门",prop:"dept"}}),n("el-table-column",{attrs:{label:"是否是销售",prop:"is_sale",width:"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.is_sale?n("i",{staticClass:"el-icon-circle-check yes-icon"}):e._e(),0==t.row.is_sale?n("i",{staticClass:"el-icon-circle-close no-icon"}):e._e()]}}])}),n("el-table-column",{attrs:{label:"销售是否启用",prop:"sale_is_use",width:"120",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.sale_is_use?n("i",{staticClass:"el-icon-circle-check yes-icon"}):e._e(),0==t.row.sale_is_use?n("i",{staticClass:"el-icon-circle-close no-icon"}):e._e()]}}])}),n("el-table-column",{attrs:{label:"操作",width:"125",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{staticClass:"span-primary",attrs:{size:"small",type:"text",icon:"el-icon-edit"},on:{click:function(n){return e.editAdmin(t.$index,t.row)}}},[e._v("编辑 ")]),n("el-button",{staticClass:"span-danger",attrs:{size:"small",type:"text",icon:"el-icon-delete",disabled:1===t.row.id},on:{click:function(n){return e.deleteAdmin(t.row)}}},[e._v("删除")])]}}])})],1),n("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[10,15,20,25,50,100],"page-size":e.limit,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)},a=[],i=(n("a9e3"),n("96cf"),n("1da1")),s=n("c9da"),c={metaInfo:{title:"员工列表"},data:function(){return{tableLoading:!1,tableData:[],search:"",row:[],total:0,limit:Number(localStorage.getItem("limit"))||50,currentPage:1}},methods:{editAdmin:function(e,t){var n=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n.$router.push({name:"adminEdit",query:{id:t.id}});case 1:case"end":return e.stop()}}),e)})))()},toAdd:function(){this.$router.push({name:"adminEdit"})},change:function(){this.$forceUpdate()},getAdminData:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.tableLoading=!0,t.next=3,Object(s["e"])(e.limit,e.currentPage);case 3:if(n=t.sent,r=n.data,200===r.status){t.next=8;break}return e.$message.error(r.msg),t.abrupt("return");case 8:e.tableData=r.list,e.total=r.count,e.tableLoading=!1;case 11:case"end":return t.stop()}}),t)})))()},deleteAdmin:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var r,a,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(1!==e.id){n.next=4;break}t.$message.error("id为1的用户无法进行删除"),n.next=14;break;case 4:return n.next=6,t.$confirm("请问是否要删除该用户","删除提示",{confirmButtonText:"确认删除",cancelButtonText:"取消",type:"warning"}).catch((function(e){return e}));case 6:if(r=n.sent,"confirm"===r){n.next=9;break}return n.abrupt("return",t.$message.info("已经取消删除"));case 9:return n.next=11,Object(s["c"])(e.id);case 11:a=n.sent,i=a.data,200!==i.status?t.$message.error(i.msg):(t.$message.success(i.msg),t.getAdminData());case 14:case"end":return n.stop()}}),n)})))()},handleSizeChange:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var r,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.limit=e,n.next=3,Object(s["e"])(t.limit,t.currentPage);case 3:if(r=n.sent,a=r.data,200===a.status){n.next=8;break}return t.$message.error(a.msg),n.abrupt("return");case 8:t.total=a.count,t.tableData=a.list;case 10:case"end":return n.stop()}}),n)})))()},handleCurrentChange:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var r,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.currentPage=e,n.next=3,Object(s["e"])(t.limit,t.currentPage);case 3:if(r=n.sent,a=r.data,200===a.status){n.next=8;break}return t.$message.error("发生了错误"),n.abrupt("return");case 8:t.tableData=a.list;case 9:case"end":return n.stop()}}),n)})))()}},mounted:function(){this.getAdminData()}},u=c,l=n("2877"),o=Object(l["a"])(u,r,a,!1,null,"e336766a",null);t["default"]=o.exports},c9da:function(e,t,n){"use strict";n.d(t,"e",(function(){return a})),n.d(t,"c",(function(){return i})),n.d(t,"h",(function(){return s})),n.d(t,"a",(function(){return c})),n.d(t,"d",(function(){return u})),n.d(t,"b",(function(){return l})),n.d(t,"f",(function(){return o})),n.d(t,"g",(function(){return d}));var r=n("a27e");function a(e,t){return Object(r["a"])({url:"adminuser",params:{page:t,limit:e}})}function i(e){return Object(r["a"])({url:"adminuser/".concat(e,"/"),method:"delete"})}function s(e){return Object(r["a"])({url:"adminuser/update",method:"post",data:e})}function c(){return Object(r["a"])({url:"create_page"})}function u(e){return Object(r["a"])({url:"adminuser/".concat(e),method:"get"})}function l(e){return Object(r["a"])({url:"adminuser",method:"post",data:e})}function o(){return Object(r["a"])({url:"user/get_black_list"})}function d(e){return Object(r["a"])({url:"user/remove_black_list",method:"post",data:e})}}}]);