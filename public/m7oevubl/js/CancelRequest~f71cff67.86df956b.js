(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["CancelRequest~f71cff67"],{"4b27":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"cancel"},[a("h2",[t._v("取消请求")]),a("el-divider"),a("el-form",{ref:"elForm",attrs:{model:t.formData,rules:t.rules,"label-width":"150px"}},[a("el-row",{attrs:{gutter:15}},[a("el-form-item",{attrs:{"label-width":"0",prop:"tabs"}},[a("el-radio-group",{model:{value:t.formData.tabs,callback:function(e){t.$set(t.formData,"tabs",e)},expression:"formData.tabs"}},t._l(t.tabsOptions,(function(e,r){return a("el-radio-button",{key:r,attrs:{label:e.value,disabled:e.disabled}},[t._v(t._s(e.label))])})),1)],1)],1)],1),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData}},[a("el-table-column",{attrs:{prop:"id",label:"ID"}}),a("el-table-column",{attrs:{prop:"relid",label:"主机ID"}}),a("el-table-column",{attrs:{prop:"type",label:"类型"},scopedSlots:t._u([{key:"default",fn:function(e){return["Immediate"===e.row.type?a("span",[t._v("立即取消")]):t._e(),"Endofbilling"===e.row.type?a("span",[t._v("等待账单周期结束")]):t._e()]}}])}),a("el-table-column",{attrs:{prop:"reason",label:"取消原因"}}),a("el-table-column",{attrs:{prop:"username",label:"用户名"}}),a("el-table-column",{attrs:{prop:"hostid",label:"主机ID"}}),a("el-table-column",{attrs:{prop:"uid",label:"用户ID"}}),a("el-table-column",{attrs:{prop:"domainstatus",label:"主机状态"}}),a("el-table-column",{attrs:{prop:"nextduedate",label:"到期时间"}}),a("el-table-column",{attrs:{prop:"productname",label:"产品名称"}}),a("el-table-column",{attrs:{prop:"groupname",label:"组名称"}}),a("el-table-column",{attrs:{prop:"type_desc",label:"显示类型描述"}}),a("el-table-column",{attrs:{prop:"product_desc",label:"显示产品描述"}}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"small",type:"danger",icon:"el-icon-delete"},on:{click:function(a){return t.deleteRequest(e.row)}}},[t._v("删除")])]}}])})],1)],1)},n=[],l=(a("96cf"),a("1da1")),s=a("c2b8"),u={metaInfo:{title:"取消请求"},data:function(){return{tableData:[],formData:{tabs:0},rules:{tabs:[]},tabsOptions:[{label:"待审核的取消请求",value:0},{label:"已审核的取消请求",value:1}]}},methods:{getData:function(){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function e(){var a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(s["e"])();case 2:a=e.sent,r=a.data,t.tableData=r.data;case 5:case"end":return e.stop()}}),e)})))()},getCancelData:function(){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function e(){var a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(s["d"])();case 2:if(a=e.sent,r=a.data,200===r.status){e.next=7;break}return t.$message.error(r.msg),e.abrupt("return");case 7:t.tableData=r.data;case 8:case"end":return e.stop()}}),e)})))()},deleteRequest:function(t){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:e.$confirm("将删除该请求, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(s["b"])(t.id).then((function(t){200!==t.data.status?e.$message.error(t.msg):(e.$message.success(t.msg),e.getData())}))})).catch((function(){}));case 1:case"end":return a.stop()}}),a)})))()}},computed:{tabsVal:function(){return this.formData.tabs}},watch:{tabsVal:function(t,e){0===t?this.getData():1===t&&this.getCancelData()}},created:function(){this.getData(),this.cancelReason()}},c=u,o=a("2877"),i=Object(o["a"])(c,r,n,!1,null,null,null);e["default"]=i.exports},c2b8:function(t,e,a){"use strict";a.d(e,"e",(function(){return n})),a.d(e,"d",(function(){return l})),a.d(e,"b",(function(){return s})),a.d(e,"a",(function(){return u})),a.d(e,"c",(function(){return c}));var r=a("a27e");function n(){return Object(r["a"])({url:"cancel_request/list"})}function l(){return Object(r["a"])({url:"cancel_request/cancellist"})}function s(t){return Object(r["a"])({url:"cancel_request/list",method:"delete",params:{id:t}})}function u(){return Object(r["a"])({url:"request_cancel_reason"})}function c(t){return Object(r["a"])({url:"request_cancel_reason_post",method:"post",data:t})}}}]);