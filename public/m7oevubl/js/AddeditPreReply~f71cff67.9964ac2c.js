(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["AddeditPreReply~f71cff67"],{"57e4":function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("h2",[e._v(e._s(e.id?"编辑预设回复":"添加预设回复"))]),r("el-divider"),r("el-row",[r("el-col",{attrs:{span:24}},[r("el-form",{ref:"addPreReplyForm",attrs:{model:e.addPreReplyFormData,rules:e.addPreReplyFormRules,"label-width":"200px"}},[r("el-form-item",{attrs:{label:"分类",prop:"cid"}},[r("el-select",{style:{width:"40%"},attrs:{size:"small",placeholder:"请选择分类",clearable:""},model:{value:e.addPreReplyFormData.cid,callback:function(t){e.$set(e.addPreReplyFormData,"cid",t)},expression:"addPreReplyFormData.cid"}},e._l(e.typeList,(function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),r("el-form-item",{attrs:{label:"回复名称",prop:"title"}},[r("el-input",{style:{width:"40%"},attrs:{size:"small",placeholder:"请输入回复名称",clearable:""},model:{value:e.addPreReplyFormData.title,callback:function(t){e.$set(e.addPreReplyFormData,"title",t)},expression:"addPreReplyFormData.title"}})],1),r("el-form-item",{attrs:{label:"回复内容",prop:"content"}},[r("quill-editor",{ref:"myQuillEditor",attrs:{options:e.editorOption},on:{blur:function(t){return e.onEditorBlur(t)},focus:function(t){return e.onEditorFocus(t)},change:function(t){return e.onEditorChange(t)}},model:{value:e.addPreReplyFormData.content,callback:function(t){e.$set(e.addPreReplyFormData,"content",t)},expression:"addPreReplyFormData.content"}}),r("div",{directives:[{name:"show",rawName:"v-show",value:e.isEditorContentNull,expression:"isEditorContentNull"}],staticClass:"el-form-item__error"},[e._v(" 请输入回复内容 ")])],1),r("el-form-item",[r("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.preReplySubmit}},[e._v(e._s(e.id?"保存更改":"添加回复"))]),r("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.cancel}},[e._v("取消")])],1)],1)],1)],1)],1)},a=[],i=(r("a9e3"),r("96cf"),r("1da1")),o=r("6336"),s={metaInfo:{title:"编辑预设回复"},data:function(){return{id:this.$route.query.id,addPreReplyFormData:{cid:Number(this.$route.query.typeId),title:"",content:""},addPreReplyFormRules:{cid:[{required:!0,message:"请选择分类",trigger:"change"}],title:[{required:!0,message:"请输入类型名称",trigger:"blur"}],content:[{required:!0,message:"请输入回复内容",trigger:"blur"}]},typeList:[],editorOption:{},isEditorContentNull:!1}},methods:{getTypeList:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(o["h"])();case 2:r=t.sent,n=r.data,200===n.status&&(e.typeList=n.categories);case 5:case"end":return t.stop()}}),t)})))()},getEditDetail:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(o["g"])(e.id);case 2:r=t.sent,n=r.data,200===n.status?(e.addPreReplyFormData.cid=Number(n.list.cid),e.addPreReplyFormData.title=n.list.title,e.addPreReplyFormData.content=n.list.content,e.typeList=n.categories):e.$message({message:n.msg,type:"error"});case 5:case"end":return t.stop()}}),t)})))()},onEditorReady:function(e){},onEditorBlur:function(){""===this.addPreReplyFormData.content?this.isEditorContentNull=!0:this.isEditorContentNull=!1},onEditorFocus:function(){},onEditorChange:function(){},preReplySubmit:function(){var e=this;""===this.addPreReplyFormData.content?this.isEditorContentNull=!0:this.isEditorContentNull=!1,this.$refs.addPreReplyForm.validate(function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(r){var n,a,i,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r&&!e.isEditorContentNull){t.next=3;break}t.next=17;break;case 3:if(e.id){t.next=11;break}return t.next=6,Object(o["a"])(e.addPreReplyFormData);case 6:n=t.sent,a=n.data,200===a.status?(e.$message({message:a.msg,type:"success"}),e.$router.push({path:"/preset-reply"})):e.$message({message:a.msg,type:"error"}),t.next=17;break;case 11:return e.addPreReplyFormData.id=e.id,t.next=14,Object(o["e"])(e.addPreReplyFormData);case 14:i=t.sent,s=i.data,200===s.status?(e.$message({message:s.msg,type:"success"}),e.$router.push({path:"/preset-reply"})):e.$message({message:s.msg,type:"error"});case 17:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},cancel:function(){this.$refs.addPreReplyForm.resetFields(),this.$router.go(-1)}},mounted:function(){this.id?this.getEditDetail():this.getTypeList()}},l=s,u=r("2877"),c=Object(u["a"])(l,n,a,!1,null,"3b2a36d2",null);t["default"]=c.exports},6336:function(e,t,r){"use strict";r.d(t,"i",(function(){return a})),r.d(t,"b",(function(){return i})),r.d(t,"f",(function(){return o})),r.d(t,"d",(function(){return s})),r.d(t,"h",(function(){return l})),r.d(t,"a",(function(){return u})),r.d(t,"g",(function(){return c})),r.d(t,"e",(function(){return d})),r.d(t,"c",(function(){return p})),r.d(t,"j",(function(){return m}));var n=r("a27e");function a(){return Object(n["a"])({url:"ticket_prereply_list"})}function i(e){return Object(n["a"])({url:"add_ticket_prereply_category",method:"post",data:e})}function o(e){return Object(n["a"])({url:"save_ticket_prereply_category",method:"post",data:e})}function s(e){return Object(n["a"])({url:"delete_ticket_prereply_category/"+e})}function l(){return Object(n["a"])({url:"add_ticket_prereply/page"})}function u(e){return Object(n["a"])({url:"add_ticket_prereply",method:"post",data:e})}function c(e){return Object(n["a"])({url:"save_ticket_prereply/page?id="+e})}function d(e){return Object(n["a"])({url:"save_ticket_prereply",method:"post",data:e})}function p(e){return Object(n["a"])({url:"ticket_prereply/"+e+"/",method:"delete"})}function m(e){return Object(n["a"])({url:"search_ticket_prereply",method:"post",data:e})}}}]);