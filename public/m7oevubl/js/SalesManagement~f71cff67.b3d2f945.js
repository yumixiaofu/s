(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["SalesManagement~f71cff67"],{"8de4":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"sales"},[a("h5",{staticClass:"mt-0"},[e._v(" 对销售人员设置产品提成比例，划分销售权限，用户下单时可选择销售，并实时统计销售营业额及提成。 "),a("el-link",{attrs:{type:"primary",href:"https://www.idcsmart.com/wiki_list/344.html",target:"blank"}},[e._v("帮助文档")])],1),a("el-tabs",{model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"商品提成",name:"grouping"}},[a("span",{attrs:{slot:"label"},slot:"label"},[e._v(" 商品提成 "),a("el-popover",{attrs:{placement:"top-start",title:"",width:"200",trigger:"hover"}},[a("el-row",[a("el-col",{attrs:{span:24}},[e._v("可将相同提成比例的产品划分为同一分组，同一个产品只能出现在一个分组下。")])],1),a("i",{staticClass:"el-icon-question blue_qus",attrs:{slot:"reference"},slot:"reference"})],1)],1),a("div",{staticClass:"title"},[a("el-button",{attrs:{size:"small",type:"success"},on:{click:e.addGroup}},[e._v("添加分组")])],1),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData}},[a("div",{attrs:{slot:"empty"},slot:"empty"},[!e.tableData.length&&e.tableLoading?a("span",[a("i",{staticClass:"el-icon-loading"}),e._v(" 正在加载 ... ")]):e._e(),e.tableData.length||e.tableLoading?e._e():a("span",[e._v("暂无数据")])]),a("el-table-column",{attrs:{prop:"group_name",label:"分组名"}}),a("el-table-column",{attrs:{prop:"bates",label:"新购提成比例",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[a("span",[e._v(" "+e._s(r.bates)+"% ")])]}}])},[a("template",{slot:"header"},[a("span",{staticClass:"mr-5"},[e._v("新购提成比例")]),a("el-popover",{attrs:{placement:"top-start",title:"",width:"200",trigger:"hover"}},[a("el-row",[a("el-col",{attrs:{span:24}},[e._v("新订购产品时，将已此比例进行计算提成。")])],1),a("i",{staticClass:"el-icon-question blue_qus",attrs:{slot:"reference"},slot:"reference"})],1)],1)],2),a("el-table-column",{attrs:{prop:"bates",label:"续费提成比例",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[a("span",[e._v(" "+e._s(r.renew_bates)+"% ")])]}}])},[a("template",{slot:"header"},[a("span",{staticClass:"mr-5"},[e._v("续费提成比例")]),a("el-popover",{attrs:{placement:"top-start",title:"",width:"200",trigger:"hover"}},[a("el-row",[a("el-col",{attrs:{span:24}},[e._v("若开启续费计算提成，则续费后已此比例计算提成。")])],1),a("i",{staticClass:"el-icon-question blue_qus",attrs:{slot:"reference"},slot:"reference"})],1)],1)],2),a("el-table-column",{attrs:{prop:"bates",label:"升降级提成比例",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[a("span",[e._v(" "+e._s(r.upgrade_bates)+"% ")])]}}])},[a("template",{slot:"header"},[a("span",{staticClass:"mr-5"},[e._v("升降级提成比例")]),a("el-popover",{attrs:{placement:"top-start",title:"",width:"200",trigger:"hover"}},[a("el-row",[a("el-col",{attrs:{span:24}},[e._v("若开启升降级计算提成，则升降后已此比例计算提成。")])],1),a("i",{staticClass:"el-icon-question blue_qus",attrs:{slot:"reference"},slot:"reference"})],1)],1)],2),a("el-table-column",{attrs:{prop:"is_renew",label:"包含续费计算",align:"center"},scopedSlots:e._u([{key:"default",fn:function(e){var t=e.row;return[1===t.is_renew?a("i",{staticClass:"el-icon-circle-check yes-icon "}):a("i",{staticClass:"el-icon-circle-close no-icon"})]}}])}),a("el-table-column",{attrs:{prop:"updategrade",label:"计算升降级",align:"center"},scopedSlots:e._u([{key:"default",fn:function(e){var t=e.row;return[1===t.updategrade?a("i",{staticClass:"el-icon-circle-check yes-icon "}):a("i",{staticClass:"el-icon-circle-close no-icon"})]}}])}),a("el-table-column",{attrs:{label:"操作",width:"140"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[a("el-button",{staticClass:"span-primary",attrs:{size:"small",type:"text",icon:"el-icon-edit"},on:{click:function(t){return e.editRow(r)}}},[e._v("编辑 ")]),a("el-button",{staticClass:"span-danger",attrs:{size:"small",type:"text",icon:"el-icon-delete"},on:{click:function(t){return e.deleteRow(r)}}},[e._v("删除 ")])]}}])})],1),a("el-pagination",{staticClass:"mt-10",attrs:{"current-page":e.currentPage,"page-sizes":[10,15,20,25,50,100],"page-size":e.limit,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.currentChange}}),a("el-dialog",e._g(e._b({attrs:{visible:e.dialogVis,title:e.isAdd?"添加":"修改"},on:{opened:e.onOpen,close:e.onClose}},"el-dialog",e.$attrs,!1),e.$listeners),[a("el-row",{attrs:{gutter:15}},[a("el-form",{ref:"elForm",attrs:{model:e.formData,rules:e.rules,"label-width":"107px"}},[a("el-col",{attrs:{span:23}},[a("el-row",[a("el-col",{staticStyle:{display:"none"},attrs:{span:24}},[a("el-form-item",{attrs:{label:"ID",prop:"id"}},[a("el-input",{style:{width:"100%"},attrs:{size:"small",placeholder:"请输入ID",clearable:""},model:{value:e.formData.id,callback:function(t){e.$set(e.formData,"id",t)},expression:"formData.id"}})],1)],1),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"分组名称",prop:"group_name"}},[a("el-input",{style:{width:"100%"},attrs:{size:"small",placeholder:"请输入分组名称",clearable:""},model:{value:e.formData.group_name,callback:function(t){e.$set(e.formData,"group_name",t)},expression:"formData.group_name"}})],1)],1),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"新订购比例",prop:"bates"}},[a("div",{staticClass:"limit"},[a("el-input-number",{style:{width:"100%"},attrs:{size:"small",min:1,max:100,precision:2,placeholder:"请输入比例，最小为1",controls:!1,clearable:""},model:{value:e.formData.bates,callback:function(t){e.$set(e.formData,"bates",t)},expression:"formData.bates"}}),a("div",{staticClass:"percentage"},[e._v("%")])],1)])],1),e.formData.is_renew?a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"续费比例",prop:"renew_bates"}},[a("div",{staticClass:"limit"},[a("el-input-number",{style:{width:"100%"},attrs:{size:"small",min:1,max:100,precision:2,placeholder:"请输入比例，最小为1",controls:!1,clearable:""},model:{value:e.formData.renew_bates,callback:function(t){e.$set(e.formData,"renew_bates",t)},expression:"formData.renew_bates"}}),a("div",{staticClass:"percentage"},[e._v("%")])],1)])],1):e._e(),e.formData.updategrade?a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"升降级比例",prop:"upgrade_bates"}},[a("div",{staticClass:"limit"},[a("el-input-number",{style:{width:"100%"},attrs:{size:"small",min:1,max:100,precision:2,placeholder:"请输入比例，最小为1",controls:!1,clearable:""},model:{value:e.formData.upgrade_bates,callback:function(t){e.$set(e.formData,"upgrade_bates",t)},expression:"formData.upgrade_bates"}}),a("div",{staticClass:"percentage"},[e._v("%")])],1)])],1):e._e(),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"包含续费计算",prop:"is_renew",required:""}},[a("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:e.formData.is_renew,callback:function(t){e.$set(e.formData,"is_renew",t)},expression:"formData.is_renew"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"计算升降级",prop:"updategrade",required:""}},[a("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:e.formData.updategrade,callback:function(t){e.$set(e.formData,"updategrade",t)},expression:"formData.updategrade"}})],1)],1),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"产品集",prop:"pids"}},[a("el-select",{style:{width:"100%"},attrs:{size:"small",placeholder:"请选择产品,可输入关键字搜索",clearable:"",multiple:"",filterable:""},model:{value:e.formData.pids,callback:function(t){e.$set(e.formData,"pids",t)},expression:"formData.pids"}},e._l(e.pidsOptions,(function(t){return a("el-option-group",{key:t.id,attrs:{label:t.name}},e._l(t.children,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)})),1)],1)],1)],1)],1)],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:e.close}},[e._v("取消")]),a("el-button",{attrs:{size:"small",type:"primary",loading:e.btnLoading},on:{click:e.handelConfirm}},[e._v("确定")])],1)],1)],1),a("el-tab-pane",{attrs:{label:"阶梯设置",name:"ladder"}},[a("span",{attrs:{slot:"label"},slot:"label"},[e._v(" 阶梯设置 "),a("el-popover",{attrs:{placement:"top-start",title:"",width:"200",trigger:"hover"}},[a("el-row",[a("el-col",{attrs:{span:24}},[e._v("当销售达到营业额X后的额外提成，阶梯提成额=营业额*阶梯提成比例。")])],1),a("i",{staticClass:"el-icon-question blue_qus",attrs:{slot:"reference"},slot:"reference"})],1)],1),a("div",{staticClass:"title"},[a("el-button",{attrs:{size:"small",type:"success"},on:{click:e.addLadder}},[e._v("添加阶梯")])],1),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData02}},[a("div",{attrs:{slot:"empty"},slot:"empty"},[!e.tableData02.length&&e.tableLoading02?a("span",[a("i",{staticClass:"el-icon-loading"}),e._v(" 正在加载 ... ")]):e._e(),e.tableData02.length||e.tableLoading02?e._e():a("span",[e._v("暂无数据")])]),a("el-table-column",{attrs:{prop:"turnover",label:"营业额"}},[a("template",{slot:"header"},[a("span",{staticClass:"mr-5"},[e._v("营业额")]),a("el-popover",{attrs:{placement:"top-start",title:"",width:"200",trigger:"hover"}},[a("el-row",[a("el-col",{attrs:{span:24}},[e._v("是指销售名下客户购买产品的交易流水总额。")])],1),a("i",{staticClass:"el-icon-question blue_qus",attrs:{slot:"reference"},slot:"reference"})],1)],1)],2),a("el-table-column",{attrs:{prop:"bates",label:"额外提成奖励"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[a("span",[e._v(" "+e._s(r.bates)+"% ")])]}}])},[a("template",{slot:"header"},[a("span",{staticClass:"mr-5"},[e._v("额外提成奖励")]),a("el-popover",{attrs:{placement:"top-start",title:"",width:"200",trigger:"hover"}},[a("el-row",[a("el-col",{attrs:{span:24}},[e._v("当销售达到营业额X后，设置额外增加的提成比例。")])],1),a("i",{staticClass:"el-icon-question blue_qus",attrs:{slot:"reference"},slot:"reference"})],1)],1)],2),a("el-table-column",{attrs:{label:"操作",width:"140"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[a("el-button",{staticClass:"span-primary",attrs:{size:"small",type:"text",icon:"el-icon-edit"},on:{click:function(t){return e.editRow02(r)}}},[e._v("编辑 ")]),a("el-button",{staticClass:"span-danger",attrs:{size:"small",type:"text",icon:"el-icon-delete"},on:{click:function(t){return e.deleteRow02(r)}}},[e._v("删除 ")])]}}])})],1),a("el-pagination",{staticClass:"mt-10",attrs:{"current-page":e.currentPage02,"page-sizes":[10,15,20,25,50,100],"page-size":e.limit02,layout:"total, sizes, prev, pager, next, jumper",total:e.total02},on:{"size-change":e.handleSizeChange02,"current-change":e.currentChange02}}),a("el-dialog",e._g(e._b({attrs:{visible:e.ladderVis,title:e.isLadderAdd?"添加":"修改"},on:{open:e.onLadderOpen,close:e.onLadderClose}},"el-dialog",e.$attrs,!1),e.$listeners),[a("el-row",{attrs:{gutter:15}},[a("el-form",{ref:"elLadderForm",attrs:{model:e.ladderFormData,rules:e.addRules,"label-width":"107px"}},[a("el-col",{attrs:{span:22}},[a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"营业额",prop:"turnover"}},[a("el-input-number",{style:{width:"100%"},attrs:{size:"small",min:1,max:9999999,precision:2,controls:!1,placeholder:"请输入营业额，最小为1，最大为9999999",clearable:""},model:{value:e.ladderFormData.turnover,callback:function(t){e.$set(e.ladderFormData,"turnover",t)},expression:"ladderFormData.turnover"}})],1)],1),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"额外提成奖励",prop:"bates"}},[a("div",{staticClass:"limit"},[a("el-input-number",{style:{width:"100%"},attrs:{size:"small",precision:2,min:0,max:100,controls:!1,placeholder:"请输入额外提成奖励",clearable:""},model:{value:e.ladderFormData.bates,callback:function(t){e.$set(e.ladderFormData,"bates",t)},expression:"ladderFormData.bates"}}),a("div",{staticClass:"percentage"},[e._v("%")])],1)])],1)],1)],1)],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:e.ladderclose}},[e._v("取消")]),a("el-button",{attrs:{size:"small",type:"primary",loading:e.btnLoading},on:{click:e.handelLadderConfirm}},[e._v("确定")])],1)],1)],1),a("el-tab-pane",{attrs:{label:"人员设置",name:"personSet"}},[a("span",{attrs:{slot:"label"},slot:"label"},[e._v(" 人员设置 "),a("el-popover",{attrs:{placement:"top-start",title:"",width:"200",trigger:"hover"}},[a("el-row",[a("el-col",{attrs:{span:24}},[e._v("系统中添加的管理员都会在此显示，可以设置管理员为销售，并给予他权限。")]),a("el-col",{staticClass:"tar",attrs:{span:24}},[a("router-link",{attrs:{to:{path:"/admin-management"},target:"_blank"}},[a("el-link",{attrs:{type:"primary"}},[e._v("前往人员设置")])],1)],1)],1),a("i",{staticClass:"el-icon-question blue_qus",attrs:{slot:"reference"},slot:"reference"})],1)],1),a("el-table",{attrs:{data:e.tableData03}},[a("div",{attrs:{slot:"empty"},slot:"empty"},[!e.tableData03.length&&e.tableLoading03?a("span",[a("i",{staticClass:"el-icon-loading"}),e._v(" 正在加载 ... ")]):e._e(),e.tableData03.length||e.tableLoading03?e._e():a("span",[e._v("暂无数据")])]),a("el-table-column",{attrs:{prop:"id",label:"ID",width:"60",align:"center"}}),a("el-table-column",{attrs:{prop:"user_nickname",label:"真实姓名"}}),a("el-table-column",{attrs:{prop:"user_email",label:"邮箱地址"}}),a("el-table-column",{attrs:{prop:"user_login",label:"用户名"}}),a("el-table-column",{attrs:{prop:"role",label:"管理员分组"}}),a("el-table-column",{attrs:{prop:"is_sale",label:"是否销售",align:"center",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[a("div",[a("el-switch",{attrs:{"active-value":1,"inactive-value":0},on:{change:function(t){return e.changeSettings(r)}},model:{value:r.is_sale,callback:function(t){e.$set(r,"is_sale",t)},expression:"row.is_sale"}})],1)]}}])},[a("template",{slot:"header"},[a("span",{staticClass:"mr-5"},[e._v("是否销售")]),a("el-popover",{attrs:{placement:"top-start",title:"",width:"auto",trigger:"hover"}},[a("el-row",[a("el-col",{attrs:{span:24}},[e._v("设置管理员是否是销售员。")])],1),a("i",{staticClass:"el-icon-question blue_qus",attrs:{slot:"reference"},slot:"reference"})],1)],1)],2),a("el-table-column",{attrs:{prop:"sale_is_use",label:"下单时可选",align:"center",width:"125"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[a("div",[a("el-switch",{attrs:{"active-value":1,"inactive-value":0,disabled:!Boolean(r.is_sale)},on:{change:function(t){return e.changeSettings(r)}},model:{value:r.sale_is_use,callback:function(t){e.$set(r,"sale_is_use",t)},expression:"row.sale_is_use"}})],1)]}}])},[a("template",{slot:"header"},[a("span",{staticClass:"mr-5"},[e._v("下单时可选")]),a("el-popover",{attrs:{placement:"top-start",title:"",width:"200",trigger:"hover"}},[a("el-row",[a("el-col",{attrs:{span:24}},[e._v("开启后，用户在前台下单时可选择此销售人员进行对接。")])],1),a("i",{staticClass:"el-icon-question blue_qus",attrs:{slot:"reference"},slot:"reference"})],1)],1)],2),a("el-table-column",{attrs:{prop:"only_mine",label:"只能查看自己客户",width:"165",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[a("div",[a("el-switch",{attrs:{"active-value":1,"inactive-value":0,disabled:!Boolean(r.is_sale)},on:{change:function(t){return e.changeSettings(r)}},model:{value:r.only_mine,callback:function(t){e.$set(r,"only_mine",t)},expression:"row.only_mine"}})],1)]}}])},[a("template",{slot:"header"},[a("span",{staticClass:"mr-5"},[e._v("只能查看自己客户")]),a("el-popover",{attrs:{placement:"top-start",title:"",width:"200",trigger:"hover"}},[a("el-row",[a("el-col",{attrs:{span:24}},[e._v("是指销售只能查看自己的客户、订单、业务列表以及未关联销售的客户。")])],1),a("i",{staticClass:"el-icon-question blue_qus",attrs:{slot:"reference"},slot:"reference"})],1)],1)],2),a("el-table-column",{attrs:{prop:"all_sale",label:"查看所有人业绩",align:"center",width:"145"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[a("div",[a("el-switch",{attrs:{"active-value":1,"inactive-value":0,disabled:!Boolean(r.is_sale)},on:{change:function(t){return e.changeSettings(r)}},model:{value:r.all_sale,callback:function(t){e.$set(r,"all_sale",t)},expression:"row.all_sale"}})],1)]}}])},[a("template",{slot:"header"},[a("span",{staticClass:"mr-5"},[e._v("查看所有人业绩")]),a("el-popover",{attrs:{placement:"top-start",title:"",width:"200",trigger:"hover"}},[a("el-row",[a("el-col",{attrs:{span:24}},[e._v("开启后可在我的业绩中查看其他销售人员的业绩信息")])],1),a("i",{staticClass:"el-icon-question blue_qus",attrs:{slot:"reference"},slot:"reference"})],1)],1)],2),a("el-table-column",{attrs:{prop:"only_oneself_notice",label:"仅自己客户工单提醒",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[a("div",[a("el-switch",{attrs:{"active-value":1,"inactive-value":0,disabled:!Boolean(r.is_sale)},on:{change:function(t){return e.changeSettings(r)}},model:{value:r.only_oneself_notice,callback:function(t){e.$set(r,"only_oneself_notice",t)},expression:"row.only_oneself_notice"}})],1)]}}])},[a("template",{slot:"header"},[a("span",{staticClass:"mr-5"},[e._v("仅自己客户工单提醒")]),a("el-popover",{attrs:{placement:"top-start",title:"",width:"200",trigger:"hover"}},[a("el-row",[a("el-col",{attrs:{span:24}},[e._v("开启后，只会受到自己客户的工单提醒邮件")])],1),a("i",{staticClass:"el-icon-question blue_qus",attrs:{slot:"reference"},slot:"reference"})],1)],1)],2)],1),a("el-pagination",{staticClass:"mt-10",attrs:{"current-page":e.currentPage03,"page-sizes":[10,15,20,25,50,100],"page-size":e.limit03,layout:"total, sizes, prev, pager, next, jumper",total:e.total03},on:{"size-change":e.handleSizeChange03,"current-change":e.currentChange03}})],1),a("el-tab-pane",{attrs:{label:"设置",name:"settings"}},[a("el-form",{ref:"settingsForm",attrs:{model:e.settingsFormData,rules:e.settingsRules,size:"small","label-width":"auto"}},[a("el-form-item",{attrs:{label:"下单销售分配"}},[a("el-select",{style:{width:"260px"},attrs:{placeholder:"请选择分配逻辑"},model:{value:e.settingsFormData.sale_setting,callback:function(t){e.$set(e.settingsFormData,"sale_setting",t)},expression:"settingsFormData.sale_setting"}},e._l(e.sale_settingOptions,(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value,disabled:e.disabled}})})),1)],1),a("el-form-item",{attrs:{label:"注册销售分配"}},[a("el-select",{style:{width:"260px"},attrs:{placeholder:"请选择分配逻辑"},model:{value:e.settingsFormData.sale_reg_setting,callback:function(t){e.$set(e.settingsFormData,"sale_reg_setting",t)},expression:"settingsFormData.sale_reg_setting"}},e._l(e.sale_settingOptions,(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value,disabled:e.disabled}})})),1)],1),a("el-form-item",{attrs:{label:"自动分配逻辑"}},[a("el-select",{style:{width:"260px"},attrs:{placeholder:"请选择分配逻辑"},model:{value:e.settingsFormData.sale_auto_setting,callback:function(t){e.$set(e.settingsFormData,"sale_auto_setting",t)},expression:"settingsFormData.sale_auto_setting"}},e._l(e.sale_auto_settingOptions,(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value,disabled:e.disabled}})})),1)],1),a("el-form-item",[a("el-col",{attrs:{span:24}},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.submitForm}},[e._v("提交")])],1)],1)],1)],1)],1)],1)},s=[],n=(a("a9e3"),a("96cf"),a("1da1")),l=a("a27e");function i(e,t,a,r,s,n){return Object(l["a"])({url:"salegroup",params:{page:e,limit:t,order:a,sort:r,group_name:s,bates:n}})}function o(e){return Object(l["a"])({url:"sale/edit_salegrouppage",params:{id:e}})}function c(){return Object(l["a"])({url:"sale/add_salegrouppage"})}function u(e){return Object(l["a"])({url:"sale/edit_salegroup",method:"post",data:e})}function d(e){return Object(l["a"])({url:"sale/add_salegroup",method:"post",data:e})}function p(e){return Object(l["a"])({url:"sale/del_salegroup",params:{id:e}})}function m(e,t,a,r){return Object(l["a"])({url:"saleladder",params:{page:e,limit:t,order:a,sort:r}})}function g(e){return Object(l["a"])({url:"sale/del_saleladder",params:{id:e}})}function b(e){return Object(l["a"])({url:"sale/add_saleladder",method:"post",data:e})}function f(e){return Object(l["a"])({url:"sale/edit_saleladderpage",params:{id:e}})}function v(e){return Object(l["a"])({url:"sale/edit_saleladder",method:"post",data:e})}function h(e,t,a){return Object(l["a"])({url:"sale/adminlist",params:{page:e,limit:t,search:a}})}function _(e){return Object(l["a"])({url:"sale/edit_adminlist",method:"post",data:e})}function w(e){return Object(l["a"])({url:"sale/sale_enble",method:"post",data:e})}function x(){return Object(l["a"])({url:"sale/get_sale_enble"})}var k={metaInfo:{title:"销售设置"},data:function(){return{tableLoading03:!1,tableLoading02:!1,tableLoading:!1,labelWidth:window.document.body.clientWidth>768?"130px":null,settingsFormData:{sale_setting:void 0,sale_reg_setting:void 0,sale_auto_setting:void 0},settingsRules:{},activeName:"grouping",toData:[],title:["我们的产品","您选择的产品"],dialogVis:!1,ladderVis:!1,isEdit:!1,isAdd:!1,isLadderEdit:!1,isLadderAdd:!1,tableData:[],tableData02:[],tableData03:[],total:0,limit:Number(localStorage.getItem("limit"))||50,currentPage:1,total02:0,limit02:50,currentPage02:1,total03:0,limit03:50,currentPage03:1,formData:{id:void 0,group_name:void 0,bates:void 0,renew_bates:void 0,upgrade_bates:void 0,is_renew:!1,updategrade:!1,pids:[]},ladderFormData:{turnover:void 0,bates:void 0,is_flag:!1},defaultProps:{label:"name",children:"children"},rules:{id:[],group_name:[{required:!0,message:"请输入分组名称",trigger:"blur"}],bates:[{required:!0,message:"请输入比例",trigger:"blur"}],pids:[{required:!0,message:"请选择产品集",trigger:"change"}]},addRules:{turnover:[{required:!0,message:"请输入营业额",trigger:"blur"}],bates:[{required:!0,message:"请输入提成比例",trigger:"blur"}]},pidsOptions:[],btnLoading:!1,sale_settingOptions:[{label:"不分配",value:"0"},{label:"系统自动分配",value:"1"},{label:"客户选择",value:"2"}],sale_auto_settingOptions:[{label:"随机分配",value:"1"},{label:"循环分配",value:"2"}]}},methods:{getFourTabsData:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,x();case 2:a=t.sent,r=a.data,e.settingsFormData=r.data.config_value;case 5:case"end":return t.stop()}}),t)})))()},submitForm:function(){var e=this;this.$refs.settingsForm.validate(function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(a){var r,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a){t.next=2;break}return t.abrupt("return",!1);case 2:return t.next=4,w(e.settingsFormData);case 4:r=t.sent,s=r.data,200!==s.status?e.$message.error(s.msg):(e.$message.success(s.msg),e.getFourTabsData());case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},getData:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.tableLoading=!0,t.next=3,i(e.currentPage,e.limit);case 3:a=t.sent,r=a.data,200!==r.status?e.$message.error(r.msg):(e.total=r.total,e.tableData=r.list),e.tableLoading=!1;case 7:case"end":return t.stop()}}),t)})))()},getLadder:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.tableLoading02=!0,t.next=3,m(e.currentPage02,e.limit02);case 3:if(a=t.sent,r=a.data,200===r.status){t.next=9;break}return e.$message.error(r.msg),e.tableLoading02=!1,t.abrupt("return");case 9:e.tableLoading02=!1,e.tableData02=r.list,e.total02=r.total;case 12:case"end":return t.stop()}}),t)})))()},getSetting:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.tableLoading03=!0,t.next=3,h(e.currentPage03,e.limit03);case 3:if(a=t.sent,r=a.data,200===r.status){t.next=9;break}return e.$message.error(r.msg),e.tableLoading03=!1,t.abrupt("return");case 9:e.tableLoading03=!1,e.tableData03=r.list,e.total03=r.count;case 12:case"end":return t.stop()}}),t)})))()},handleSizeChange:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var r,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.limit=e,a.next=3,i(t.currentPage,t.limit);case 3:if(r=a.sent,s=r.data,200===s.status){a.next=8;break}return t.$message.error(s.msg),a.abrupt("return");case 8:t.total=s.total,t.tableData=s.list;case 10:case"end":return a.stop()}}),a)})))()},currentChange:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var r,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.currentPage=e,a.next=3,i(t.currentPage,t.limit);case 3:if(r=a.sent,s=r.data,200===s.status){a.next=8;break}return t.$message.error("发生了错误"),a.abrupt("return");case 8:t.total=s.total,t.tableData=s.list;case 10:case"end":return a.stop()}}),a)})))()},handleSizeChange02:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var r,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.limit02=e,a.next=3,m(t.currentPage02,t.limit02);case 3:if(r=a.sent,s=r.data,200===s.status){a.next=8;break}return t.$message.error(s.msg),a.abrupt("return");case 8:t.total02=s.total,t.tableData02=s.list;case 10:case"end":return a.stop()}}),a)})))()},currentChange02:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var r,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.currentPage02=e,a.next=3,m(t.currentPage02,t.limit02);case 3:if(r=a.sent,s=r.data,200===s.status){a.next=8;break}return t.$message.error("发生了错误"),a.abrupt("return");case 8:t.total02=s.total,t.tableData02=s.list;case 10:case"end":return a.stop()}}),a)})))()},handleSizeChange03:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var r,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.limit03=e,a.next=3,h(t.currentPage03,t.limit03);case 3:r=a.sent,s=r.data,200!==s.status&&t.$message.error(s.msg),t.total03=s.count,t.tableData03=s.list;case 8:case"end":return a.stop()}}),a)})))()},currentChange03:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var r,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.currentPage03=e,a.next=3,h(t.currentPage03,t.limit03);case 3:if(r=a.sent,s=r.data,200===s.status){a.next=8;break}return t.$message.error("发生了错误"),a.abrupt("return");case 8:t.total03=s.count,t.tableData03=s.list;case 10:case"end":return a.stop()}}),a)})))()},editRow:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var r,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.isEdit=!0,t.isAdd=!1,t.dialogVis=!0,a.next=5,o(e.id);case 5:if(r=a.sent,s=r.data,200===s.status){a.next=10;break}return t.$message.error(s.msg),a.abrupt("return",!1);case 10:t.pidsOptions=s.data.group,t.formData=s.data.spg;case 12:case"end":return a.stop()}}),a)})))()},deleteRow:function(e){var t=this;this.$confirm("将删除此分组, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){p(e.id).then((function(e){200!==e.data.status?t.$message.error(e.data.msg):(t.$message.success("分组已删除"),t.getData())}))})).catch((function(){}))},editRow02:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var r,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.isLadderEdit=!0,t.isAdd=!1,t.ladderVis=!0,a.next=5,f(e.id);case 5:if(r=a.sent,s=r.data,200===s.status){a.next=10;break}return t.$message.error(s.msg),a.abrupt("return");case 10:t.ladderFormData=s.data.ladder;case 11:case"end":return a.stop()}}),a)})))()},deleteRow02:function(e){var t=this;this.$confirm("将删除此阶梯, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){g(e.id).then((function(e){200!==e.data.status?t.$message.error(e.data.msg):(t.$message.success("阶梯已删除"),t.getLadder())}))})).catch((function(){}))},onOpen:function(){this.isAdd&&(this.$refs.elForm.resetFields(),this.formData.renew_bates=void 0,this.formData.upgrade_bates=void 0)},onClose:function(){this.$refs.elForm.resetFields(),this.dialogVis=!1,this.isEdit=!1,this.isAdd=!1,this.pidsOptions=[]},close:function(){this.$emit("update:visible",!1),this.dialogVis=!1,this.isEdit=!1,this.isAdd=!1,this.pidsOptions=[]},onLadderOpen:function(){},onLadderClose:function(){this.$refs.elLadderForm.resetFields(),this.ladderVis=!1,this.isLadderEdit=!1,this.isLadderAdd=!1},ladderclose:function(){this.$emit("update:visible",!1),this.ladderVis=!1,this.isLadderEdit=!1,this.isLadderAdd=!1},addGroup:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.isAdd=!0,e.pidsOptions=[],e.dialogVis=!0,t.next=5,c();case 5:if(a=t.sent,r=a.data,200===r.status){t.next=10;break}return e.$message.error(r.msg),t.abrupt("return");case 10:e.pidsOptions=r.data.group;case 11:case"end":return t.stop()}}),t)})))()},addLadder:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.isLadderAdd=!0,e.ladderVis=!0;case 2:case"end":return t.stop()}}),t)})))()},handelConfirm:function(){var e=this;this.isEdit?this.$refs.elForm.validate(function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(a){var r,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a){t.next=2;break}return t.abrupt("return");case 2:return e.btnLoading=!0,e.formData.is_renew||(e.formData.renew_bates=""),e.formData.updategrade||(e.formData.upgrade_bates=""),t.next=7,u(e.formData);case 7:r=t.sent,s=r.data,200!==s.status?e.$message.error(s.msg):(e.getData(),e.getLadder(),e.$message.success(s.msg),e.onClose()),e.btnLoading=!1;case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()):this.isAdd&&this.$refs.elForm.validate(function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(a){var r,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a){t.next=2;break}return t.abrupt("return");case 2:return e.btnLoading=!0,t.next=5,d(e.formData);case 5:r=t.sent,s=r.data,200!==s.status?e.$message.error(s.msg):(e.getData(),e.getLadder(),e.$message.success(s.msg),e.onClose()),e.btnLoading=!1;case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},handelLadderConfirm:function(){var e=this;this.isLadderAdd?this.$refs.elLadderForm.validate(function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(a){var r,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a){t.next=2;break}return t.abrupt("return");case 2:return e.btnLoading=!0,t.next=5,b(e.ladderFormData);case 5:r=t.sent,s=r.data,200!==s.status?e.$message.error(s.msg):(e.$message.success(s.msg),e.getLadder(),e.onLadderClose()),e.btnLoading=!1;case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()):this.isLadderEdit&&this.$refs.elLadderForm.validate(function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(a){var r,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a){t.next=2;break}return t.abrupt("return");case 2:return e.btnLoading=!0,t.next=5,v(e.ladderFormData);case 5:r=t.sent,s=r.data,200!==s.status?e.$message.error(s.msg):(e.$message.success(s.msg),e.getLadder(),e.onLadderClose()),e.btnLoading=!1;case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},changeSettings:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var r,s,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e.is_sale||(e.sale_is_use=0,e.only_mine=0,e.all_sale=0,e.only_oneself_notice=0),r={id:e.id,is_sale:e.is_sale,sale_is_use:e.sale_is_use,only_mine:e.only_mine,all_sale:e.all_sale,only_oneself_notice:e.only_oneself_notice},a.next=4,_(r);case 4:s=a.sent,n=s.data,200!==n.status?t.$message.error(n.msg):(t.getSetting(t.currentPage03,t.limit03),t.$message.success(n.msg));case 7:case"end":return a.stop()}}),a)})))()}},created:function(){this.getData(),this.getLadder(),this.getSetting(),this.getFourTabsData()}},D=k,y=(a("a559"),a("2877")),C=Object(y["a"])(D,r,s,!1,null,"768dfa1e",null);t["default"]=C.exports},a559:function(e,t,a){"use strict";var r=a("c502"),s=a.n(r);s.a},c502:function(e,t,a){}}]);