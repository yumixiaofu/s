(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["PaymentInterface~f71cff67"],{"6a8e":function(t,e,a){"use strict";a.d(e,"e",(function(){return l})),a.d(e,"f",(function(){return r})),a.d(e,"c",(function(){return s})),a.d(e,"b",(function(){return i})),a.d(e,"a",(function(){return o})),a.d(e,"d",(function(){return c})),a.d(e,"g",(function(){return u})),a.d(e,"i",(function(){return p})),a.d(e,"h",(function(){return d}));var n=a("a27e");function l(t,e){return Object(n["a"])({url:"common/get_product_list",params:{type:t,id:e}})}function r(t){return Object(n["a"])({url:"common/get_promo_code",params:{type:t}})}function s(){return Object(n["a"])({url:"common/get_getways"})}function i(t){return Object(n["a"])({url:"common/get_email_tem",params:{type:t}})}function o(){return Object(n["a"])({url:"common/get_client_groups"})}function c(t){return Object(n["a"])({url:"common/host_list",params:{uid:t}})}function u(){return Object(n["a"])({url:"common/get_sms_country"})}function p(){return Object(n["a"])({url:"common/product_config_options"})}function d(t){return Object(n["a"])({url:"common/get_upstream_ticket_department_list",params:{id:t}})}},ae17:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("h5",{staticClass:"mt-0"},[t._v(" 选择支付网关点击安装，填写接口相关配置信息后，用户在前台可选择支付方式进行结算付款。 "),a("el-link",{attrs:{type:"primary",href:"https://www.idcsmart.com/wiki_list/336.html",target:"blank"}},[t._v("查看帮助文档")])],1),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-table",{attrs:{data:t.tableData,border:"","row-key":"id"}},[a("div",{attrs:{slot:"empty"},slot:"empty"},[!t.tableData.length&&t.tableLoading?a("span",[a("i",{staticClass:"el-icon-loading"}),t._v(" 正在加载 ... ")]):t._e(),t.tableData.length||t.tableLoading?t._e():a("span",[t._v("暂无数据")])]),a("el-table-column",{attrs:{prop:"id",label:"ID",width:"80",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[a("i",{staticClass:"el-icon-rank cursor-grabbing mr-20"}),a("span",[t._v(t._s(n.id))])]}}])}),a("el-table-column",{attrs:{prop:"title",label:"插件名称",sortable:""}}),a("el-table-column",{attrs:{prop:"name",label:"标识",sortable:""}}),a("el-table-column",{attrs:{prop:"description",label:"描述",sortable:""}}),a("el-table-column",{attrs:{prop:"author",label:"作者",sortable:""}}),a("el-table-column",{attrs:{prop:"version",label:"版本",sortable:"",width:"80",align:"center"}}),a("el-table-column",{attrs:{prop:"status",label:"状态",sortable:"",width:"80",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t._f("statusFilter")(e.row.status)))])]}}])}),a("el-table-column",{attrs:{label:"操作",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[3===n.status?a("el-button",{staticClass:"span-success",attrs:{size:"small",type:"text"},on:{click:function(e){return t.plInstallHandleClick(n.name)}}},[t._v("安装 ")]):t._e(),3!==n.status?a("el-button",{staticClass:"span-warning",attrs:{size:"small",type:"text"},on:{click:function(e){return t.plUnInstallHandleClick(n.id)}}},[t._v("卸载 ")]):t._e(),0===n.status?a("el-button",{staticClass:"span-primary",attrs:{size:"small",type:"text"},on:{click:function(e){return t.plToggleHandleClick(n.id,"enable")}}},[t._v("启用")]):t._e(),1===n.status?a("el-button",{staticClass:"span-danger",attrs:{size:"small",type:"text"},on:{click:function(e){return t.plToggleHandleClick(n.id,"disable")}}},[t._v("禁用")]):t._e(),3!==n.status?a("el-button",{staticClass:"span-info",attrs:{size:"small",type:"text"},on:{click:function(e){return t.plSettingHandleClick(n.id)}}},[t._v("配置 ")]):t._e(),"UserCustom"===n.name?a("el-button",{staticClass:"span-primary",attrs:{size:"small",type:"text"},on:{click:function(e){return t.plCopyHandleClick(n)}}},[t._v("复制 ")]):t._e()]}}])})],1)],1)],1),a("el-dialog",{attrs:{title:t.plInfo.title,visible:t.dialogVisible,width:"35%"},on:{"update:visible":function(e){t.dialogVisible=e}}},["支付宝网页支付"===t.plInfo.title||"支付宝扫码支付"===t.plInfo.title||"支付宝当面付"===t.plInfo.title?a("span",{attrs:{slot:"title"},slot:"title"},[t._v(" "+t._s(t.plInfo.title)+" "),a("el-popover",{attrs:{placement:"top-start",title:"",width:"200",trigger:"hover"}},[a("el-row",[a("el-col",{attrs:{span:24}},[t._v("配置后，用户在前台可选择此支付方式进行结算付款")]),a("el-col",{staticClass:"tar",attrs:{span:24}},[a("el-link",{attrs:{type:"primary",href:"https://bbs.idcsmart.com/forum.php?mod=viewthread&tid=68&extra=page%3D1%26filter%3Dtypeid%26typeid%3D7",target:"blank"}},[t._v("帮助文档")])],1)],1),a("i",{staticClass:"el-icon-question blue_qus",attrs:{slot:"reference"},slot:"reference"})],1)],1):"微信支付"===t.plInfo.title?a("span",{attrs:{slot:"title"},slot:"title"},[t._v(" "+t._s(t.plInfo.title)+" "),a("el-popover",{attrs:{placement:"top-start",title:"",width:"200",trigger:"hover"}},[a("el-row",[a("el-col",{attrs:{span:24}},[t._v("配置后，用户在前台可选择此支付方式进行结算付款")]),a("el-col",{staticClass:"tar",attrs:{span:24}},[a("el-link",{attrs:{type:"primary",href:"https://bbs.idcsmart.com/forum.php?mod=viewthread&tid=169&page=1&extra=#pid306",target:"blank"}},[t._v(" 帮助文档")])],1)],1),a("i",{staticClass:"el-icon-question blue_qus",attrs:{slot:"reference"},slot:"reference"})],1)],1):t._e(),a("el-form",{ref:"configForm",attrs:{"label-width":t.labelWidth}},t._l(t.plInfo.config,(function(e,n){return a("el-form-item",{key:n,attrs:{label:e.title,prop:""}},["text"===e.type?a("el-input",{style:{width:"100%"},attrs:{size:"small",type:"textarea",rows:3,placeholder:"请输入"+e.title,disabled:e.attribute,clearable:""},model:{value:e.value,callback:function(a){t.$set(e,"value",a)},expression:"item.value"}}):t._e(),"select"===e.type?a("el-select",{style:{width:"100%"},attrs:{size:"small",placeholder:"请选择"+e.title,disabled:e.attribute,clearable:""},model:{value:e.value,callback:function(a){t.$set(e,"value",a)},expression:"item.value"}},t._l(e.options,(function(t,e){return a("el-option",{key:e,attrs:{label:t,value:e}})})),1):t._e(),"radio"===e.type?a("el-radio",{attrs:{disabled:e.attribute},model:{value:e.value,callback:function(a){t.$set(e,"value",a)},expression:"item.value"}},[t._v("备选项")]):t._e(),"checkbox"===e.type?a("el-checkbox",{attrs:{disabled:e.attribute},model:{value:e.value,callback:function(a){t.$set(e,"value",a)},expression:"item.value"}},[t._v("备选项")]):t._e()],1)})),1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(e){t.dialogVisible=!1}}},[t._v("取消")]),a("el-button",{attrs:{size:"small",type:"primary",loading:t.btnLoading},on:{click:t.saveHandleClick}},[t._v("保存更改")])],1)],1),a("el-dialog",{attrs:{title:t.pltitle,visible:t.uninstallDialogVisible,width:"30%"},on:{"update:visible":function(e){t.uninstallDialogVisible=e},open:t.getGetways,close:t.plDialogClose}},[a("span",[t._v(t._s(t.pltitle)+"此支付接口，您需要为该支付接口所关联的用户先选择一个新的支付接口来替代目前的方式")]),a("el-form",{ref:"plForm",attrs:{model:t.plModel}},[a("el-form-item",{attrs:{label:"",prop:"newGatewayId",rules:[{required:!0,message:"请选择新的接口"}]}},[a("el-select",{staticClass:"mt-20",staticStyle:{width:"100%"},attrs:{size:"small"},model:{value:t.plModel.newGatewayId,callback:function(e){t.$set(t.plModel,"newGatewayId",e)},expression:"plModel.newGatewayId"}},t._l(t.gateway,(function(e,n){return a("el-option",{key:n,attrs:{value:e.id,label:e.title,disabled:e.id===t.plid}},[t._v(t._s(e.title))])})),1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(e){t.uninstallDialogVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{size:"small",type:"primary",loading:t.btnLoading},on:{click:t.sure}},[t._v("确 定")])],1)],1)],1)},l=[],r=(a("b0c0"),a("96cf"),a("1da1")),s=a("a27e");function i(t){return Object(s["a"])({url:"pl_index/".concat(t,"/")})}function o(t){return Object(s["a"])({url:"pl_install",method:"post",data:t})}function c(t){return Object(s["a"])({url:"pl_toggle",method:"post",data:t})}function u(t){return Object(s["a"])({url:"pl_setting/gateways/".concat(t)})}function p(t){return Object(s["a"])({url:"pl_setting_post",method:"post",data:t})}function d(t){return Object(s["a"])({url:"pl_uninstall",method:"post",data:t})}function m(t){return Object(s["a"])({url:"pl_copy",method:"post",data:t})}function g(t){return Object(s["a"])({url:"pl_sort/".concat(t.moduleName,"/"),method:"post",data:t})}var f=a("aa47"),b=a("6a8e"),w={metaInfo:{title:"支付接口"},data:function(){return{tableLoading:!1,labelWidth:window.document.body.clientWidth>768?"auto":null,moduleName:"gateways",tableData:[],dialogVisible:!1,plInfo:{},btnLoading:!1,toggleparam:{},plid:0,pltitle:"",uninstallDialogVisible:!1,plModel:{newGatewayId:void 0},gateway:[]}},filters:{statusFilter:function(t){return 0===t?"禁用":1===t?"启用":3===t?"未安装":void 0}},methods:{getData:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.tableLoading=!0,e.next=3,i(t.moduleName);case 3:a=e.sent,n=a.data,200===n.status?t.tableData=n.data:t.$message.error(n.msg),t.tableLoading=!1;case 7:case"end":return e.stop()}}),e)})))()},plInstallHandleClick:function(t){var e=this;this.$confirm("确认安装?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(r["a"])(regeneratorRuntime.mark((function a(){var n,l;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,o({name:t,module:"gateways"});case 2:n=a.sent,l=n.data,200===l.status?(e.getData(),e.$message.success(l.msg)):e.$message.warning(l.msg);case 5:case"end":return a.stop()}}),a)})))).catch((function(){}))},plUnInstallHandleClick:function(t){this.uninstallDialogVisible=!0,this.plid=t,this.pltitle="卸载"},plUnInstallApi:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.btnLoading=!0,e.next=3,d({id:t.plid,default:t.plModel.newGatewayId});case 3:a=e.sent,n=a.data,200===n.status?(t.getData(),t.$message.success(n.msg),t.uninstallDialogVisible=!1):t.$message.warning(n.msg),t.btnLoading=!1;case 7:case"end":return e.stop()}}),e)})))()},plToggleHandleClick:function(t,e){var a=this;this.toggleparam.id=t,this.toggleparam.disable=void 0,this.toggleparam.enable=void 0,this.toggleparam[e]=e,"enable"===e?this.$confirm("确认启用?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a.plToggleApi(a.toggleparam);case 1:case"end":return t.stop()}}),t)})))).catch((function(){})):"disable"===e&&(this.uninstallDialogVisible=!0,this.plid=t,this.pltitle="禁用")},plToggleApi:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.btnLoading=!0,t.toggleparam.default=t.plModel.newGatewayId,e.next=4,c(t.toggleparam);case 4:a=e.sent,n=a.data,200===n.status?(t.getData(),t.$message.success(n.msg),t.uninstallDialogVisible=!1):t.$message.warning(n.msg),t.btnLoading=!1;case 8:case"end":return e.stop()}}),e)})))()},plSettingHandleClick:function(t){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function a(){var n,l;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,u(t);case 2:n=a.sent,l=n.data,200===l.status?e.plInfo=l.data.data:e.$message.error(l.msg),e.dialogVisible=!0;case 6:case"end":return a.stop()}}),a)})))()},plCopyHandleClick:function(t){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function a(){var n,l;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,m({name:t.name});case 2:n=a.sent,l=n.data,200!==l.status?e.$message.error(l.msg):(e.$message.success(l.msg),e.getData());case 5:case"end":return a.stop()}}),a)})))()},saveHandleClick:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var a,n,l,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:for(n in a={id:t.plInfo.id,module:"gateways",config:[]},t.plInfo.config)a.config[n]=t.plInfo.config[n].value;return t.btnLoading=!0,e.next=5,p(t.$qs.stringify(a));case 5:l=e.sent,r=l.data,200!==r.status?t.$message.error(r.msg):(t.$message.success(r.msg),t.dialogVisible=!1,t.getData()),t.btnLoading=!1;case 9:case"end":return e.stop()}}),e)})))()},getGetways:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(b["c"])();case 2:if(a=e.sent,n=a.data,200===n.status){e.next=6;break}return e.abrupt("return",!1);case 6:t.gateway=n.gateway;case 7:case"end":return e.stop()}}),e)})))()},sure:function(){var t=this;this.$refs.plForm.validate((function(e){if(!e)return!1;"禁用"===t.pltitle?t.plToggleApi():"卸载"===t.pltitle&&t.plUnInstallApi()}))},plDialogClose:function(){this.$refs.plForm.clearValidate(),this.$refs.plForm.resetFields()},rowDrag:function(){var t=this,e=document.querySelector(".el-table__body-wrapper tbody");setTimeout((function(){f["a"].create(e,{animation:500,handle:".el-icon-rank",onEnd:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(a){var n,l,r,s,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.tableData[a.oldIndex],l=t.tableData[a.newIndex],a.newIndex!==a.oldIndex){e.next=4;break}return e.abrupt("return",!1);case 4:return a.newIndex>a.oldIndex&&(l=t.tableData[a.newIndex]),a.newIndex<a.oldIndex&&(l=0===a.newIndex?{id:0}:t.tableData[a.newIndex-1]),r={id:n.id,moduleName:n.module,pre_id:l.id},e.next=9,g(r);case 9:s=e.sent,i=s.data,200!==i.status?t.$message.error(i.msg):(t.$message.success(i.msg),t.getData());case 12:case"end":return e.stop()}}),e)})));function a(t){return e.apply(this,arguments)}return a}()})}),500)}},created:function(){this.getData()},mounted:function(){this.rowDrag()}},v=w,h=a("2877"),_=Object(h["a"])(v,n,l,!1,null,"39604b86",null);e["default"]=_.exports}}]);