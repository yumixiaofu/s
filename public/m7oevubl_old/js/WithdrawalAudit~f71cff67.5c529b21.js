(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["WithdrawalAudit~f71cff67"],{"2fd6":function(t,e,a){"use strict";a.d(e,"c",(function(){return o})),a.d(e,"a",(function(){return i})),a.d(e,"h",(function(){return s})),a.d(e,"b",(function(){return n})),a.d(e,"d",(function(){return l})),a.d(e,"j",(function(){return c})),a.d(e,"i",(function(){return u})),a.d(e,"e",(function(){return p})),a.d(e,"g",(function(){return d})),a.d(e,"f",(function(){return m}));var r=a("a27e");function o(t){return Object(r["a"])({url:"aff",params:t})}function i(t){return Object(r["a"])({url:"aff/affiwithdraw_record",method:"post",data:t})}function s(t){return Object(r["a"])({url:"aff/affiwithdrawsh",method:"post",data:t})}function n(){return Object(r["a"])({url:"aff/gateway_list",method:"get"})}function l(t){return Object(r["a"])({url:"aff/useraffi_page",method:"get",params:t})}function c(t){return Object(r["a"])({url:"aff/useraffi_post",method:"post",data:t})}function u(t){return Object(r["a"])({url:"aff/useraffi_balance",method:"post",data:t})}function p(t){return Object(r["a"])({url:"aff/useraffi_list",method:"get",params:t})}function d(t){return Object(r["a"])({url:"aff/useraffibuy_record",method:"get",params:t})}function m(t){return Object(r["a"])({url:"aff/useraffi_record",method:"get",params:t})}},"4d11":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"sales"},[a("el-tabs",{on:{"tab-click":t.tabChange},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"推介提现",name:"promotion"}},[a("span",{attrs:{slot:"label"},slot:"label"},[t._v(" 推介提现 "),a("el-popover",{attrs:{placement:"top-start",title:"",width:"200",trigger:"hover"}},[a("el-row",[a("el-col",{attrs:{span:24}},[t._v("推介人在前台提交提现申请后，管理员需在此进行审核。")])],1),a("i",{staticClass:"el-icon-question blue_qus",attrs:{slot:"reference"},slot:"reference"})],1)],1),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-button",{attrs:{size:"small"},on:{click:function(e){t.showSearchArea1=!t.showSearchArea1}}},[t._v(" "+t._s(t.showSearchArea1?"收起搜索":"高级搜索")+" ")])],1)],1),a("transition",{attrs:{name:"el-zoom-in-top"}},[a("el-form",{directives:[{name:"show",rawName:"v-show",value:t.showSearchArea1,expression:"showSearchArea1"}],ref:"elForm",staticClass:"mt-10 mb-20 unfold-search",attrs:{inline:"",model:t.promotionSearch,"label-width":"60px",size:"small"}},[a("el-form-item",{attrs:{label:"用户名",prop:"id"}},[a("el-input",{style:{width:"100%"},attrs:{placeholder:"请输入用户名称",clearable:""},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.promotionSearchHandleClick(e)}},model:{value:t.promotionSearch.user_nickname,callback:function(e){t.$set(t.promotionSearch,"user_nickname",e)},expression:"promotionSearch.user_nickname"}})],1),a("el-form-item",{attrs:{label:"提现方式",prop:"status"}},[a("el-select",{style:{width:"100%"},attrs:{placeholder:"请选择类型",clearable:""},model:{value:t.promotionSearch.status,callback:function(e){t.$set(t.promotionSearch,"status",e)},expression:"promotionSearch.status"}},t._l(t.statusSelectOption,(function(t,e){return a("el-option",{key:e,attrs:{label:t.name,value:t.id}})})),1)],1),a("el-form-item",{attrs:{label:" "}},[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:t.promotionSearchHandleClick}},[t._v("搜索")]),a("el-button",{attrs:{size:"mini"},on:{click:t.clearPromotionSearch}},[t._v("清空")])],1)],1)],1),a("el-table",{staticClass:"mt-10",attrs:{data:t.promotionTableData,border:""},on:{"sort-change":t.promotionSortChange}},[a("div",{attrs:{slot:"empty"},slot:"empty"},[!t.promotionTableData.length&&t.tableLoading?a("span",[a("i",{staticClass:"el-icon-loading"}),t._v(" 正在加载 ... ")]):t._e(),t.promotionTableData.length||t.tableLoading?t._e():a("span",[t._v("暂无数据")])]),a("el-table-column",{attrs:{prop:"id",label:"ID",sortable:"",width:"70",align:"center"}}),a("el-table-column",{attrs:{prop:"username",label:"姓名(公司名)",sortable:"",width:"300"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.row;return[a("div",{domProps:{innerHTML:t._s(r.username)}})]}}])}),a("el-table-column",{attrs:{prop:"num",label:"金额",sortable:"",width:"100"}}),a("el-table-column",{attrs:{prop:"type",label:"类型",sortable:"",width:"110"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.row;return[1===r.type?a("span",[t._v("余额")]):2===r.type?a("span",[t._v("仅记录")]):3===r.type?a("span",[t._v("流水支持")]):t._e()]}}])}),a("el-table-column",{attrs:{prop:"user_nickname",label:"操作人",sortable:"","min-width":"110"}}),a("el-table-column",{attrs:{prop:"status",label:"状态",width:"100",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.row;return[1===r.status?a("el-tag",{attrs:{size:"small",type:"info"}},[t._v(t._s(t.statusText(r.status)))]):2===r.status?a("el-tag",{attrs:{size:"small",type:"success"}},[t._v(t._s(t.statusText(r.status)))]):3===r.status?a("el-tag",{attrs:{size:"small",type:"danger"}},[t._v(t._s(t.statusText(r.status)))]):t._e()]}}])}),a("el-table-column",{attrs:{prop:"reason",label:"拒绝原因",sortable:"","min-width":"110"}}),a("el-table-column",{attrs:{prop:"create_time",label:"时间",sortable:"",width:"135"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.create_time?t.$moment(1e3*e.row.create_time).format("YYYY-MM-DD HH:mm"):"-"))])]}}])}),a("el-table-column",{attrs:{label:"操作",width:"135"},scopedSlots:t._u([{key:"default",fn:function(e){return 1===e.row.status?[a("el-button",{staticClass:"ml-8 span-success",attrs:{size:"small",type:"text",icon:"el-icon-check"},on:{click:function(a){return t.promotionOperating(e.row,1)}}},[t._v(" 通过 ")]),a("el-button",{staticClass:"ml-8 span-danger",attrs:{size:"small",type:"text",icon:"el-icon-close"},on:{click:function(a){return t.promotionOperating(e.row,2)}}},[t._v(" 驳回")])]:void 0}}],null,!0)})],1),a("el-pagination",{staticClass:" mt-10",attrs:{"current-page":t.promotionSearch.page,"page-sizes":[10,15,20,25,50,100],"page-size":t.promotionSearch.limit,layout:"total, sizes, prev, pager, next, jumper",total:t.promotionTotal},on:{"size-change":t.promotionSizeChange,"current-change":t.getPromotionList,"update:currentPage":function(e){return t.$set(t.promotionSearch,"page",e)},"update:current-page":function(e){return t.$set(t.promotionSearch,"page",e)},"update:pageSize":function(e){return t.$set(t.promotionSearch,"limit",e)},"update:page-size":function(e){return t.$set(t.promotionSearch,"limit",e)}}}),a("el-dialog",t._g(t._b({attrs:{visible:t.withdrawDepositVis,title:t.isPass?"通过":"驳回"},on:{close:t.promotionDialogClose}},"el-dialog",t.$attrs,!1),t.$listeners),[a("el-row",{attrs:{gutter:15}},[a("el-form",{ref:"elLadderForm",attrs:{model:t.withdrawDepositData,rules:t.withdrawRules,size:"medium","label-width":"107px"}},[a("el-col",{attrs:{span:22}},[a("el-row",[t.isPass?a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"通过类型",prop:"type"}},[a("span",{attrs:{slot:"label"},slot:"label"},[t._v(" 通过类型 "),a("el-popover",{attrs:{placement:"top-start",title:"",width:"200",trigger:"hover"}},[a("el-row",[a("el-col",{attrs:{span:24}},[t._v(t._s(t._f("withdrawDepositDataFilter")(t.withdrawDepositData.type)))])],1),a("i",{staticClass:"el-icon-question blue_qus",attrs:{slot:"reference"},slot:"reference"})],1)],1),a("el-select",{staticStyle:{width:"95%"},attrs:{placeholder:"请选择通过类型",clearable:""},on:{change:t.changeTypeOption},model:{value:t.withdrawDepositData.type,callback:function(e){t.$set(t.withdrawDepositData,"type",e)},expression:"withdrawDepositData.type"}},t._l(t.accessTypeSelectOptions,(function(t,e){return a("el-option",{key:e,attrs:{label:t.name,value:t.id,disabled:t.disabled}})})),1)],1)],1):t._e(),t.isPass&&3===t.withdrawDepositData.type?a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"支付方式",prop:"payment"}},[a("el-select",{staticStyle:{width:"95%"},attrs:{placeholder:"请选择支付方式",clearable:""},on:{change:t.changeTypeOption},model:{value:t.withdrawDepositData.payment,callback:function(e){t.$set(t.withdrawDepositData,"payment",e)},expression:"withdrawDepositData.payment"}},t._l(t.paymentOptions,(function(t,e){return a("el-option",{key:e,attrs:{label:t.title,value:t.title,disabled:t.disabled}})})),1)],1)],1):t._e(),3===t.withdrawDepositData.type?a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"付款流水号",prop:"trans_id"}},[a("el-input",{style:{width:"95%"},attrs:{placeholder:"请输入付款流水号",clearable:""},model:{value:t.withdrawDepositData.trans_id,callback:function(e){t.$set(t.withdrawDepositData,"trans_id",e)},expression:"withdrawDepositData.trans_id"}})],1)],1):t._e(),t.isReject?a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"拒绝原因",prop:"reason"}},[a("el-input",{style:{width:"95%"},attrs:{size:"small",type:"textarea",rows:3,placeholder:"请输入拒绝原因"},model:{value:t.withdrawDepositData.reason,callback:function(e){t.$set(t.withdrawDepositData,"reason",e)},expression:"withdrawDepositData.reason"}})],1)],1):t._e()],1)],1)],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.cancel}},[t._v("取消")]),a("el-button",{attrs:{type:"primary",loading:t.btnLoading},on:{click:t.promotionSubmit}},[t._v("确定")])],1)],1)],1)],1)],1)},o=[],i=(a("b0c0"),a("a9e3"),a("96cf"),a("1da1")),s=a("2fd6"),n=a("a27e");function l(t){return Object(n["a"])({url:"withdraw/withdraw",params:t})}function c(t){return Object(n["a"])({url:"withdraw/withdraw",method:"post",data:t})}var u={metaInfo:{title:"提现审核"},data:function(){return{tableLoading02:!1,tableLoading:!1,labelWidth:window.document.body.clientWidth>768?"155px":null,activeName:"promotion",paymentOptions:[],statusSelectOption:[{id:1,name:"待审核"},{id:2,name:"通过"},{id:3,name:"拒绝"}],accessTypeSelectOptions:[{id:1,name:"余额"},{id:2,name:"仅记录"},{id:3,name:"流水支持"}],showSearchArea1:!1,promotionSearch:{page:1,limit:Number(localStorage.getItem("limit"))||50,order:"id",sort:"desc",id:void 0,user_nickname:void 0,status:void 0},promotionTableData:[],promotionTotal:0,withdrawDepositVis:!1,isReject:!1,isPass:!1,withdrawDepositData:{id:void 0,status:void 0,type:void 0,payment:void 0,trans_id:void 0,reason:void 0},withdrawRules:{type:[{required:!0,message:"请选择通过类型",trigger:"change"}],payment:[{required:!0,message:"请选择支付方式",trigger:"change"}],trans_id:[{required:!0,message:"请填写付款流水号",trigger:"blur"}],reason:[{required:!0,message:"请填写驳回原因",trigger:"blur"}]},btnLoading:!1,profitSearch:{page:1,limit:Number(localStorage.getItem("limit"))||50,order:"id",sort:"desc",status:void 0,type:void 0},profitTableData:[],profitTotal:0,statusOptions:[],typeOptions:[]}},filters:{withdrawDepositDataFilter:function(t){return 1===t?"提现的金额将添加到推介人的余额中。":2===t?"在此列表中记录，不会有任何的操作。":3===t?"审核后系统将添加一笔交易流水。":void 0}},methods:{goUser:function(t){this.$router.push({name:"abstract",query:{id:t}})},tabChange:function(t){"promotion"===t.name?this.getPromotionList():"profit"===t.name&&this.getProfitList()},getPromotionList:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.tableLoading=!0,e.next=3,Object(s["a"])(t.promotionSearch);case 3:if(a=e.sent,r=a.data,200===r.status){e.next=8;break}return r.msg&&(t.$message.error(r.msg),t.tableLoading=!1),e.abrupt("return");case 8:t.tableLoading=!1,t.promotionTableData=r.data,t.promotionTotal=r.total;case 11:case"end":return e.stop()}}),e)})))()},promotionSizeChange:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.promotionSearch.page=1,e.getPromotionList();case 2:case"end":return t.stop()}}),t)})))()},promotionSortChange:function(t,e,a){this.promotionSearch.order=t.prop,"ascending"===t.order?this.promotionSearch.sort="asc":this.promotionSearch.sort="desc",this.getPromotionList()},getpayType:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(s["b"])();case 2:a=e.sent,r=a.data,200===r.status?t.paymentOptions=r.gateway:t.$message.error(r.msg);case 5:case"end":return e.stop()}}),e)})))()},changeTypeOption:function(t){3===t&&(this.paymentOptions=[],this.getpayType())},promotionSearchHandleClick:function(){this.showSearchArea1=!1,this.getPromotionList(this.promotionSearch)},clearPromotionSearch:function(){this.promotionSearch.page=1,this.promotionSearch.limit=50,this.promotionSearch.id=void 0,this.promotionSearch.user_nickname=void 0,this.promotionSearch.status=void 0,this.promotionSearch.sort="desc",this.promotionSearch.order="id",this.getPromotionList(this.promotionSearch)},statusText:function(t){switch(t){case 1:return"待审核";case 2:return"审核通过";case 3:return"拒绝";default:return""}},promotionOperating:function(t,e){this.withdrawDepositData.id=t.id,1===e?(this.withdrawDepositData.type=1,this.isPass=!0,this.isReject=!1):2===e&&(this.isReject=!0,this.isPass=!1),this.withdrawDepositVis=!0},goToView:function(t){this.$router.push({path:"/customer-view/promotion_plan",query:{id:t}})},close:function(){this.$emit("update:visible",!1)},promotionDialogClose:function(){this.$refs.elLadderForm.resetFields(),this.withdrawDepositVis=!1,this.withdrawDepositData={id:void 0,status:void 0,type:void 0,payment:void 0,trans_id:void 0,reason:void 0}},cancel:function(){this.$emit("update:visible",!1),this.withdrawDepositVis=!1,this.isReject=!1,this.isPass=!1},promotionSubmit:function(){var t=this;this.$refs.elLadderForm.validate(function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(a){var r,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a){e.next=2;break}return e.abrupt("return");case 2:return t.btnLoading=!0,e.prev=3,t.isPass?t.withdrawDepositData.status=2:t.isReject&&(t.withdrawDepositData.status=3),e.next=7,Object(s["h"])(t.withdrawDepositData);case 7:r=e.sent,o=r.data,t.btnLoading=!1,200!==o.status?t.$message.error(o.msg):(t.$message.success(o.msg),t.getPromotionList(),t.promotionDialogClose()),e.next=16;break;case 13:e.prev=13,e.t0=e["catch"](3),t.btnLoading=!1;case 16:case"end":return e.stop()}}),e,null,[[3,13]])})));return function(t){return e.apply(this,arguments)}}())},getProfitList:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.tableLoading02=!0,e.next=3,l(t.profitSearch);case 3:if(a=e.sent,r=a.data,200===r.status){e.next=7;break}return e.abrupt("return",!1);case 7:t.tableLoading02=!1,t.profitTableData=r.data.logs,t.profitTotal=r.data.count,t.statusOptions=r.data.withdraw_status,t.typeOptions=r.data.withdraw_method;case 12:case"end":return e.stop()}}),e)})))()},profitSizeChange:function(t){this.profitSearch.size=t,this.getProfitList()},profitSortChange:function(t,e,a){this.profitSearch.order=t.prop,"ascending"===t.order?this.profitSearch.sort="asc":this.profitSearch.sort="desc",this.getProfitList()},reset:function(){this.profitSearch={page:1,limit:Number(localStorage.getItem("limit"))||50,order:"id",sort:"desc",status:void 0,type:void 0},this.getProfitList()},profitOperating:function(t,e){var a=this;1===e?this.$confirm("确认通过？","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(Object(i["a"])(regeneratorRuntime.mark((function e(){var r,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,c({id:t.id,status:"Active"});case 2:r=e.sent,o=r.data,200!==o.status?a.$message.error(o.msg):(a.$message.success(o.msg),a.getProfitList());case 5:case"end":return e.stop()}}),e)})))).catch((function(){a.$message.info("取消输入")})):2===e&&this.$prompt("请输入驳回原因","提示",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/^[\s\S]*.*[^\s][\s\S]*$/,inputErrorMessage:"请输入原因"}).then(function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(r){var o,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,c({id:t.id,status:"Cancelled",cancelled_reason:r.value});case 2:o=e.sent,i=o.data,200!==i.status?a.$message.error(i.msg):(a.$message.success(i.msg),a.getProfitList());case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(){a.$message.info("取消输入")}))}},created:function(){this.getPromotionList(this.promotionSearch)}},p=u,d=(a("dd6f"),a("2877")),m=Object(d["a"])(p,r,o,!1,null,"44908c16",null);e["default"]=m.exports},"98f5":function(t,e,a){},dd6f:function(t,e,a){"use strict";var r=a("98f5"),o=a.n(r);o.a}}]);