(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["NewWorkOrderDept~31ecd969"],{"057f":function(t,e,r){var a=r("fc6a"),n=r("241c").f,o={}.toString,i="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(t){try{return n(t)}catch(e){return i.slice()}};t.exports.f=function(t){return i&&"[object Window]"==o.call(t)?s(t):n(a(t))}},"13d5":function(t,e,r){"use strict";var a=r("23e7"),n=r("d58f").left,o=r("a640"),i=r("ae40"),s=o("reduce"),c=i("reduce",{1:0});a({target:"Array",proto:!0,forced:!s||!c},{reduce:function(t){return n(this,t,arguments.length,arguments.length>1?arguments[1]:void 0)}})},"1dde":function(t,e,r){var a=r("d039"),n=r("b622"),o=r("2d00"),i=n("species");t.exports=function(t){return o>=51||!a((function(){var e=[],r=e.constructor={};return r[i]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},"22fc":function(t,e,r){"use strict";r.d(e,"g",(function(){return n})),r.d(e,"e",(function(){return o})),r.d(e,"d",(function(){return i})),r.d(e,"f",(function(){return s})),r.d(e,"a",(function(){return c})),r.d(e,"c",(function(){return u})),r.d(e,"b",(function(){return f})),r.d(e,"h",(function(){return l})),r.d(e,"i",(function(){return d}));var a=r("a27e");function n(){return Object(a["a"])({url:"list_ticket_department"})}function o(){return Object(a["a"])({url:"get_ticket_deliver"})}function i(){return Object(a["a"])({url:"get_ticket_department"})}function s(t){return Object(a["a"])({url:"list_ticket_department/"+t})}function c(t){return Object(a["a"])({url:"add_ticket_department",method:"post",data:t})}function u(t){return Object(a["a"])({url:"save_ticket_department",method:"post",data:t})}function f(t){return Object(a["a"])({url:"delete_ticket_department",method:"post",data:t})}function l(t){return Object(a["a"])({url:"movedown_ticket_department",method:"post",data:t})}function d(t){return Object(a["a"])({url:"moveup_ticket_department",method:"post",data:t})}},"40ef":function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("h2",[t._v(t._s(t.orderId?"编辑部门":"添加新部门"))]),r("el-col",{staticClass:"topform_wrap"},[r("el-form",{ref:"elForm",attrs:{model:t.formData,rules:t.rules,"label-width":"95px"}},[r("el-tabs",{model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[r("el-tab-pane",{attrs:{label:"详情",name:"details"}},[r("el-form-item",{attrs:{label:"部门名称",prop:"name"}},[r("el-input",{style:{width:"260px"},attrs:{size:"small",placeholder:"请输入部门名称",clearable:""},model:{value:t.formData.name,callback:function(e){t.$set(t.formData,"name",e)},expression:"formData.name"}})],1),r("el-form-item",{attrs:{label:"描述",prop:"description"}},[r("el-input",{style:{width:"260px"},attrs:{size:"small",placeholder:"请输入描述",clearable:""},model:{value:t.formData.description,callback:function(e){t.$set(t.formData,"description",e)},expression:"formData.description"}})],1),r("el-form-item",{attrs:{label:"需要激活产品",prop:"is_product_order"}},[r("el-switch",{attrs:{"active-value":1,"inactive-value":0,"active-text":"开启后客户需要有已激活的产品才可创建工单"},model:{value:t.formData.is_product_order,callback:function(e){t.$set(t.formData,"is_product_order",e)},expression:"formData.is_product_order"}})],1),r("el-form-item",{attrs:{label:"提交工单需实名",prop:"is_certifi"}},[r("el-switch",{attrs:{"active-value":1,"inactive-value":0,"active-text":"开启后，客户在前台创建工单的时候，需要验证该客户是否实名"},model:{value:t.formData.is_certifi,callback:function(e){t.$set(t.formData,"is_certifi",e)},expression:"formData.is_certifi"}})],1),r("el-form-item",{attrs:{label:"自动回复",prop:"is_open_auto_reply"}},[r("el-switch",{attrs:{"active-text":"开启后可预设自动回复内容","active-value":1,"inactive-value":0},model:{value:t.formData.is_open_auto_reply,callback:function(e){t.$set(t.formData,"is_open_auto_reply",e)},expression:"formData.is_open_auto_reply"}})],1),t.formData.is_open_auto_reply?[r("el-form-item",{attrs:{label:"自动回复设置"}},[r("span",{staticStyle:{color:"#333","font-size":"12px"}},[t._v("自动回复将在收到工单后的下一个自动任务执行时回复以下内容")])])]:t._e(),t.formData.is_open_auto_reply?[r("el-form-item",{attrs:{label:"回复内容"}},[r("el-input",{style:{width:"260px"},attrs:{type:"textarea",placeholder:"请输入回复内容",maxlength:1e4,autosize:{minRows:5,maxRows:5},"show-word-limit":""},model:{value:t.formData.bz,callback:function(e){t.$set(t.formData,"bz",e)},expression:"formData.bz"}})],1)]:t._e(),r("el-form-item",{attrs:{label:"工单评分",prop:"feedback_request"}},[r("el-switch",{attrs:{"active-value":1,"inactive-value":0,"active-text":"客户可对工单内容进行评分"},model:{value:t.formData.feedback_request,callback:function(e){t.$set(t.formData,"feedback_request",e)},expression:"formData.feedback_request"}})],1),r("el-form-item",{attrs:{label:"隐藏",prop:"hidden"}},[r("el-switch",{attrs:{"active-value":1,"inactive-value":0,"active-text":"从用户中心中隐藏"},model:{value:t.formData.hidden,callback:function(e){t.$set(t.formData,"hidden",e)},expression:"formData.hidden"}})],1)],2),r("el-tab-pane",{attrs:{label:"工单传递",name:"pass"}},[r("el-form-item",{attrs:{label:"关联上游部门",prop:"hidden"}},[r("el-switch",{attrs:{"active-value":1,"inactive-value":0,"active-text":"开启后可将本地工单传递到上游"},model:{value:t.formData.is_related_upstream,callback:function(e){t.$set(t.formData,"is_related_upstream",e)},expression:"formData.is_related_upstream"}})],1),1===t.formData.is_related_upstream?t._l(t.financeOptions,(function(e){return r("el-form-item",{key:e.id,attrs:{label:e.name}},[r("el-select",{attrs:{placeholder:"请选择"},model:{value:t.formData.upstreams[e.id],callback:function(r){t.$set(t.formData.upstreams,e.id,r)},expression:"formData.upstreams[upstream.id]"}},t._l(e.children,(function(t){return r("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1)})):t._e()],2)],1)],1)],1),r("div",{staticClass:"bottomOperationAdd"},[r("el-button",{attrs:{size:"small",type:"primary",loading:t.btnLoading},on:{click:t.submitForm}},[t._v(t._s(t.orderId?"保存更改":"添加新部门")+" ")]),r("el-button",{attrs:{size:"small"},on:{click:t.goBack}},[t._v("返回")]),r("el-button",{attrs:{size:"small"},on:{click:t.resetForm}},[t._v("取消")])],1)],1)},n=[],o=(r("a4d3"),r("e01a"),r("4160"),r("13d5"),r("a434"),r("159b"),r("96cf"),r("1da1")),i=r("22fc"),s=r("6a8e"),c={metaInfo:{title:"编辑工单部门"},data:function(){return{orderId:this.$route.query.id,formData:{is_certifi:0,bz:"您的问题已收到，我们将会尽快处理您的问题，请耐心等待，感谢您的支持理解。",is_open_auto_reply:1,name:"",description:"",email:"test@qq.com",admins:[],is_product_order:0,feedback_request:1,hidden:0,host:"",port:"",login:"",password:"",is_related_upstream:"",customfieldname:[""],customsortorder:[0],customfieldtype:[""],customcfdesc:[""],customregexpr:[""],customfieldoptions:[""],customadminonly:[!1],customrequired:[!0],addfieldname:"",addsortorder:0,addfieldtype:"",addcfdesc:"",addregexpr:"",addfieldoptions:"",addadminonly:"",addrequired:"",upstreams:{}},rules:{name:[{required:!0,message:"请输入部门名称",trigger:"blur"}],description:[],is_open_auto_reply:[],email:[{required:!0,message:"请输入邮箱",trigger:"blur"},{required:!0,pattern:/^([0-9a-zA-Z]([-.\w]*[0-9a-zA-Z])*@(([0-9a-zA-Z])+([-\w]*[0-9a-zA-Z])*\.)+[a-zA-Z]{2,9})$/,message:"请输入正确的邮箱",trigger:"blur"}],admins:[],only_reg_client:[],feedback_request:[],hidden:[],host:[],port:[],login:[],password:[]},adminsOptions:[{id:1,user_login:"admin",user_nickname:"admin"}],financeOptions:[],activeName:"details",customfieldtypeOptions:[{label:"文本框",value:"text"},{label:"链接/URL",value:"link"},{label:"密码",value:"password"},{label:"下拉式",value:"dropdown"},{label:"选项框",value:"tickbox"},{label:"文本区",value:"textarea"}],btnLoading:!1}},methods:{getFormInfo:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(i["d"])();case 2:r=e.sent,a=r.data,200===a.status?(t.adminsOptions=a.data.admin_list,t.financeOptions=a.data.zjmf_finance_api,t.getUpstreamConfigOptions()):t.$message({message:a.msg,type:"error"});case 5:case"end":return e.stop()}}),e)})))()},getFormInfoById:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(i["f"])(t.orderId);case 2:r=e.sent,a=r.data,200===a.status?((a.data.customfields||[]).forEach((function(t){t.adminonly=Boolean(t.adminonly),t.required=Boolean(t.required)})),t.formData=a.data):t.$message({message:a.msg,type:"error"});case 5:case"end":return e.stop()}}),e)})))()},deleteCustomerField:function(t){this.formData.customfields.splice(t,1)},submitForm:function(){var t=this;this.$refs.elForm.validate(function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(r){var a,n,o,s,c,u,f;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r){e.next=5;break}return t.$message.error("填写有误，请检查必填项是否正确填写"),e.abrupt("return",!1);case 5:if(1===t.formData.is_related_upstream)for(a in t.formData.upstreams)Object.hasOwnProperty.call(t.formData.upstreams,a)&&(n=t.formData.upstreams[a],n||delete t.formData.upstreams[a]);else delete t.formData.upstreams;if(t.orderId){e.next=16;break}return t.btnLoading=!0,e.next=10,Object(i["a"])(t.formData);case 10:o=e.sent,s=o.data,200===s.status?(t.$message({message:s.msg,type:"success"}),t.$router.push({path:"/work-order-dept"})):t.$message({message:s.msg,type:"error"}),t.btnLoading=!1,e.next=34;break;case 16:return t.formData.customfieldname=[],t.formData.customsortorder=[],t.formData.customfieldtype=[],t.formData.customcfdesc=[],t.formData.customregexpr=[],t.formData.customfieldoptions=[],t.formData.customadminonly=[],t.formData.customrequired=[],(t.formData.customfields||[]).forEach((function(e,r){t.formData.customfieldname[e.id]=e.fieldname,t.formData.customsortorder[e.id]=e.sortorder,t.formData.customfieldtype[e.id]=e.fieldtype,t.formData.customcfdesc[e.id]=e.description,t.formData.customregexpr[e.id]=e.regexpr,t.formData.customfieldoptions[e.id]=e.fieldoptions,t.formData.customadminonly[e.id]=e.adminonly,t.formData.customrequired[e.id]=e.required})),t.formData.customfields=[],c=t.$qs.stringify(t.formData,{arrayFormat:"indices"}),t.btnLoading=!0,e.next=30,Object(i["c"])(c);case 30:u=e.sent,f=u.data,200===f.status?(t.$message({message:f.msg,type:"success"}),t.$router.push({path:"/work-order-dept"})):t.$message({message:f.msg,type:"error"}),t.btnLoading=!1;case 34:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},resetForm:function(){this.$refs.elForm.resetFields()},goBack:function(){this.$router.go(-1)},getUpstreamConfigOptions:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var r,a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.financeOptions.reduce((function(t,e){return t.push(e.id),t}),[]),e.next=3,Object(s["h"])(r);case 3:a=e.sent,n=a.data,(t.financeOptions||[]).forEach((function(e){t.$set(e,"children",n.upstream_ticket_departments[e.id]?n.upstream_ticket_departments[e.id].data.data:[]),t.$set(t.formData.upstreams,e.id,t.formData.upstreams[e.id]||null)}));case 6:case"end":return e.stop()}}),e)})))()}},mounted:function(){this.getFormInfo(),this.orderId&&this.getFormInfoById()}},u=c,f=r("2877"),l=Object(f["a"])(u,a,n,!1,null,"555af5cb",null);e["default"]=l.exports},"6a8e":function(t,e,r){"use strict";r.d(e,"e",(function(){return n})),r.d(e,"f",(function(){return o})),r.d(e,"c",(function(){return i})),r.d(e,"b",(function(){return s})),r.d(e,"a",(function(){return c})),r.d(e,"d",(function(){return u})),r.d(e,"g",(function(){return f})),r.d(e,"i",(function(){return l})),r.d(e,"h",(function(){return d}));var a=r("a27e");function n(t,e){return Object(a["a"])({url:"common/get_product_list",params:{type:t,id:e}})}function o(t){return Object(a["a"])({url:"common/get_promo_code",params:{type:t}})}function i(){return Object(a["a"])({url:"common/get_getways"})}function s(t){return Object(a["a"])({url:"common/get_email_tem",params:{type:t}})}function c(){return Object(a["a"])({url:"common/get_client_groups"})}function u(t){return Object(a["a"])({url:"common/host_list",params:{uid:t}})}function f(){return Object(a["a"])({url:"common/get_sms_country"})}function l(){return Object(a["a"])({url:"common/product_config_options"})}function d(t){return Object(a["a"])({url:"common/get_upstream_ticket_department_list",params:{id:t}})}},"746f":function(t,e,r){var a=r("428f"),n=r("5135"),o=r("e538"),i=r("9bf2").f;t.exports=function(t){var e=a.Symbol||(a.Symbol={});n(e,t)||i(e,t,{value:o.f(t)})}},8418:function(t,e,r){"use strict";var a=r("c04e"),n=r("9bf2"),o=r("5c6c");t.exports=function(t,e,r){var i=a(e);i in t?n.f(t,i,o(0,r)):t[i]=r}},a434:function(t,e,r){"use strict";var a=r("23e7"),n=r("23cb"),o=r("a691"),i=r("50c4"),s=r("7b0b"),c=r("65f0"),u=r("8418"),f=r("1dde"),l=r("ae40"),d=f("splice"),m=l("splice",{ACCESSORS:!0,0:0,1:2}),p=Math.max,b=Math.min,v=9007199254740991,g="Maximum allowed length exceeded";a({target:"Array",proto:!0,forced:!d||!m},{splice:function(t,e){var r,a,f,l,d,m,h=s(this),_=i(h.length),y=n(t,_),w=arguments.length;if(0===w?r=a=0:1===w?(r=0,a=_-y):(r=w-2,a=b(p(o(e),0),_-y)),_+r-a>v)throw TypeError(g);for(f=c(h,a),l=0;l<a;l++)d=y+l,d in h&&u(f,l,h[d]);if(f.length=a,r<a){for(l=y;l<_-a;l++)d=l+a,m=l+r,d in h?h[m]=h[d]:delete h[m];for(l=_;l>_-a+r;l--)delete h[l-1]}else if(r>a)for(l=_-a;l>y;l--)d=l+a-1,m=l+r-1,d in h?h[m]=h[d]:delete h[m];for(l=0;l<r;l++)h[l+y]=arguments[l+2];return h.length=_-a+r,f}})},a4d3:function(t,e,r){"use strict";var a=r("23e7"),n=r("da84"),o=r("d066"),i=r("c430"),s=r("83ab"),c=r("4930"),u=r("fdbf"),f=r("d039"),l=r("5135"),d=r("e8b5"),m=r("861d"),p=r("825a"),b=r("7b0b"),v=r("fc6a"),g=r("c04e"),h=r("5c6c"),_=r("7c73"),y=r("df75"),w=r("241c"),D=r("057f"),O=r("7418"),k=r("06cf"),x=r("9bf2"),j=r("d1e7"),$=r("9112"),S=r("6eeb"),q=r("5692"),z=r("f772"),F=r("d012"),I=r("90e3"),R=r("b622"),E=r("e538"),N=r("746f"),P=r("d44e"),A=r("69f3"),C=r("b727").forEach,B=z("hidden"),L="Symbol",Z="prototype",J=R("toPrimitive"),T=A.set,M=A.getterFor(L),U=Object[Z],W=n.Symbol,Q=o("JSON","stringify"),G=k.f,H=x.f,K=D.f,V=j.f,X=q("symbols"),Y=q("op-symbols"),tt=q("string-to-symbol-registry"),et=q("symbol-to-string-registry"),rt=q("wks"),at=n.QObject,nt=!at||!at[Z]||!at[Z].findChild,ot=s&&f((function(){return 7!=_(H({},"a",{get:function(){return H(this,"a",{value:7}).a}})).a}))?function(t,e,r){var a=G(U,e);a&&delete U[e],H(t,e,r),a&&t!==U&&H(U,e,a)}:H,it=function(t,e){var r=X[t]=_(W[Z]);return T(r,{type:L,tag:t,description:e}),s||(r.description=e),r},st=u?function(t){return"symbol"==typeof t}:function(t){return Object(t)instanceof W},ct=function(t,e,r){t===U&&ct(Y,e,r),p(t);var a=g(e,!0);return p(r),l(X,a)?(r.enumerable?(l(t,B)&&t[B][a]&&(t[B][a]=!1),r=_(r,{enumerable:h(0,!1)})):(l(t,B)||H(t,B,h(1,{})),t[B][a]=!0),ot(t,a,r)):H(t,a,r)},ut=function(t,e){p(t);var r=v(e),a=y(r).concat(pt(r));return C(a,(function(e){s&&!lt.call(r,e)||ct(t,e,r[e])})),t},ft=function(t,e){return void 0===e?_(t):ut(_(t),e)},lt=function(t){var e=g(t,!0),r=V.call(this,e);return!(this===U&&l(X,e)&&!l(Y,e))&&(!(r||!l(this,e)||!l(X,e)||l(this,B)&&this[B][e])||r)},dt=function(t,e){var r=v(t),a=g(e,!0);if(r!==U||!l(X,a)||l(Y,a)){var n=G(r,a);return!n||!l(X,a)||l(r,B)&&r[B][a]||(n.enumerable=!0),n}},mt=function(t){var e=K(v(t)),r=[];return C(e,(function(t){l(X,t)||l(F,t)||r.push(t)})),r},pt=function(t){var e=t===U,r=K(e?Y:v(t)),a=[];return C(r,(function(t){!l(X,t)||e&&!l(U,t)||a.push(X[t])})),a};if(c||(W=function(){if(this instanceof W)throw TypeError("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,e=I(t),r=function(t){this===U&&r.call(Y,t),l(this,B)&&l(this[B],e)&&(this[B][e]=!1),ot(this,e,h(1,t))};return s&&nt&&ot(U,e,{configurable:!0,set:r}),it(e,t)},S(W[Z],"toString",(function(){return M(this).tag})),S(W,"withoutSetter",(function(t){return it(I(t),t)})),j.f=lt,x.f=ct,k.f=dt,w.f=D.f=mt,O.f=pt,E.f=function(t){return it(R(t),t)},s&&(H(W[Z],"description",{configurable:!0,get:function(){return M(this).description}}),i||S(U,"propertyIsEnumerable",lt,{unsafe:!0}))),a({global:!0,wrap:!0,forced:!c,sham:!c},{Symbol:W}),C(y(rt),(function(t){N(t)})),a({target:L,stat:!0,forced:!c},{for:function(t){var e=String(t);if(l(tt,e))return tt[e];var r=W(e);return tt[e]=r,et[r]=e,r},keyFor:function(t){if(!st(t))throw TypeError(t+" is not a symbol");if(l(et,t))return et[t]},useSetter:function(){nt=!0},useSimple:function(){nt=!1}}),a({target:"Object",stat:!0,forced:!c,sham:!s},{create:ft,defineProperty:ct,defineProperties:ut,getOwnPropertyDescriptor:dt}),a({target:"Object",stat:!0,forced:!c},{getOwnPropertyNames:mt,getOwnPropertySymbols:pt}),a({target:"Object",stat:!0,forced:f((function(){O.f(1)}))},{getOwnPropertySymbols:function(t){return O.f(b(t))}}),Q){var bt=!c||f((function(){var t=W();return"[null]"!=Q([t])||"{}"!=Q({a:t})||"{}"!=Q(Object(t))}));a({target:"JSON",stat:!0,forced:bt},{stringify:function(t,e,r){var a,n=[t],o=1;while(arguments.length>o)n.push(arguments[o++]);if(a=e,(m(e)||void 0!==t)&&!st(t))return d(e)||(e=function(t,e){if("function"==typeof a&&(e=a.call(this,t,e)),!st(e))return e}),n[1]=e,Q.apply(null,n)}})}W[Z][J]||$(W[Z],J,W[Z].valueOf),P(W,L),F[B]=!0},d58f:function(t,e,r){var a=r("1c0b"),n=r("7b0b"),o=r("44ad"),i=r("50c4"),s=function(t){return function(e,r,s,c){a(r);var u=n(e),f=o(u),l=i(u.length),d=t?l-1:0,m=t?-1:1;if(s<2)while(1){if(d in f){c=f[d],d+=m;break}if(d+=m,t?d<0:l<=d)throw TypeError("Reduce of empty array with no initial value")}for(;t?d>=0:l>d;d+=m)d in f&&(c=r(c,f[d],d,u));return c}};t.exports={left:s(!1),right:s(!0)}},e01a:function(t,e,r){"use strict";var a=r("23e7"),n=r("83ab"),o=r("da84"),i=r("5135"),s=r("861d"),c=r("9bf2").f,u=r("e893"),f=o.Symbol;if(n&&"function"==typeof f&&(!("description"in f.prototype)||void 0!==f().description)){var l={},d=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),e=this instanceof d?new f(t):void 0===t?f():f(t);return""===t&&(l[e]=!0),e};u(d,f);var m=d.prototype=f.prototype;m.constructor=d;var p=m.toString,b="Symbol(test)"==String(f("test")),v=/^Symbol\((.*)\)[^)]+$/;c(m,"description",{configurable:!0,get:function(){var t=s(this)?this.valueOf():this,e=p.call(t);if(i(l,t))return"";var r=b?e.slice(7,-1):e.replace(v,"$1");return""===r?void 0:r}}),a({global:!0,forced:!0},{Symbol:d})}},e538:function(t,e,r){var a=r("b622");e.f=a}}]);