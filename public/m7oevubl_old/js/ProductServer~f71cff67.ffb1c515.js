(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["ProductServer~f71cff67"],{"07c1":function(t,e,r){t.exports=r.p+"img/order2.f608c900.png"},"1cb9":function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"productserver"},[a("h5",{staticClass:"mt-0"},[t._v("在这里管理您的所有商品和服务。每个商品都必须分配到一个在前台订购页面客户可见的或隐藏的分组里。商品也可以单独设为隐藏。隐藏的商品仍然可以直接使用链接地址访问和订购。")]),a("div",{staticClass:"productserver_header"},[a("el-button",{attrs:{size:"small",type:"success",icon:"el-icon-circle-plus-outline"},on:{click:t.goToAddGroup}},[t._v("新增分组")]),a("el-button",{attrs:{size:"small",type:"success",icon:"el-icon-plus"},on:{click:t.showAddProduct}},[t._v("新增商品")]),a("el-button",{attrs:{size:"small",icon:"el-icon-copy-document"},on:{click:t.showCopyProduct}},[t._v("复制商品")]),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){t.asyncOsDialog=!0}}},[t._v("同步操作系统")]),a("el-input",{staticClass:"ml-10",staticStyle:{width:"200px"},attrs:{size:"small",placeholder:"请输入商品名称关键字搜索"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.getData(e)}},model:{value:t.search.keywords,callback:function(e){t.$set(t.search,"keywords",e)},expression:"search.keywords"}},[a("i",{staticClass:"el-input__icon el-icon-search cursor-pointer",attrs:{slot:"suffix"},on:{click:t.getData},slot:"suffix"})])],1),a("div",{staticClass:"productserver_table"},[a("el-table",{ref:"singleTable",staticClass:"productserver_sTable",attrs:{data:t.tableData,"row-class-name":t.tableRowClassName,"header-row-class-name":t.headerRowClassName,"expand-row-keys":t.expandRows,border:"","row-key":"guid"}},[a("div",{attrs:{slot:"empty"},slot:"empty"},[!t.tableData.length&&t.tableLoading?a("span",[a("i",{staticClass:"el-icon-loading"}),t._v(" 正在加载 ... ")]):t._e(),t.tableData.length||t.tableLoading?t._e():a("span",[t._v("暂无数据")])]),a("el-table-column",{attrs:{prop:"guid",label:"",width:"40",type:"index"}},[[a("i",{staticClass:"el-icon-rank cursor-grabbing",staticStyle:{opacity:"0"}})]],2),a("el-table-column",{attrs:{prop:"name",label:"商品名称"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.row;return[r.groups||r.products?a("span",[r.groups?a("span",{style:{color:"#2c67ee"}},[t._v(t._s(r.name))]):t._e(),r.products?a("span",{style:{color:"#333"}},[t._v(t._s(r.name)+t._s(r.hidden?"(隐藏)":""))]):t._e()]):a("span",{staticClass:"color-999"},[a("span",{staticClass:"mr-10 row_hover",staticStyle:{display:"inline-block",width:"2px",height:"2px",background:"#999999","margin-bottom":"3px"}}),a("span",[t._v(t._s(r.name))])])]}}])}),a("el-table-column",{attrs:{prop:"type_zh",label:"类型"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.row;return[a("span",{class:{"color-999":!r.groups&&!r.products}},[t._v(t._s(r.type_zh))])]}}])}),a("el-table-column",{attrs:{prop:"pay_type",label:"定价",width:"100",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.row;return[a("span",{class:{"color-999":!r.groups&&!r.products}},[t._v(t._s(r.pay_type))])]}}])}),a("el-table-column",{attrs:{prop:"qty",label:"库存",width:"100",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.row;return[r.groups||r.products?t._e():a("div",[r.editStock?t._e():a("span",{class:{"color-999":!r.groups&&!r.products}},[t._v(t._s(r.stock_control?r.newQty||r.qty:"-"))]),r.editStock?a("el-input-number",{staticStyle:{width:"70%"},attrs:{size:"mini",controls:!1,precision:0},model:{value:r.newQty,callback:function(e){t.$set(r,"newQty",e)},expression:"row.newQty"}}):t._e(),r.editStock||r.loading||!r.stock_control?t._e():a("i",{staticClass:"el-icon-edit fr cursor-pointer",staticStyle:{"line-height":"17px"},on:{click:function(t){r.editStock=!0}}}),r.editStock&&!r.loading?a("i",{staticClass:"el-icon-check fr cursor-pointer",staticStyle:{"line-height":"28px"},on:{click:function(e){return t.editStockHandleClick(r)}}}):t._e(),r.editStock&&r.loading?a("i",{staticClass:"el-icon-loading fr",staticStyle:{"line-height":"28px"}}):t._e()],1)]}}])}),a("el-table-column",{attrs:{prop:"count",label:"已开通/总数量",width:"120",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.row;return[a("span",{class:{"color-999":!r.groups&&!r.products}},[t._v(" "+t._s(r.count_active)+" "),r.count_active||0===r.count_active?a("span",[t._v("/")]):t._e(),t._v(" "+t._s(r.count)+" ")])]}}])}),a("el-table-column",{attrs:{prop:"auto_setup",label:"自动开通",width:"200",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.row;return[a("span",{class:{"color-999":!r.groups&&!r.products}},[""===r.auto_setup?a("div",[t._v("不自动")]):"payment"===r.auto_setup?a("div",[t._v("付款后自动")]):"order"===r.auto_setup?a("div",[t._v("下单后直接开通（无需付款）")]):t._e()])]}}])}),a("el-table-column",{attrs:{label:"操作",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.row;return[r.groups||r.products?[a("el-button",{staticStyle:{color:"#2c67ee"},attrs:{size:"small",type:"text"},on:{click:function(e){return t.editGroup(r)}}},[t._v("编辑")]),r.products?a("el-button",{staticClass:"span-success",attrs:{size:"small",type:"text"},on:{click:function(e){return t.showAddProduct(r)}}},[t._v(" 新增商品 ")]):t._e(),r.groups&&!r.groups.length&&1!==r.id?a("el-button",{staticStyle:{color:"#ee5186"},attrs:{size:"small",type:"text"},on:{click:function(e){return t.deleteGroup(r)}}},[t._v("删除")]):t._e(),r.products&&!r.products.length?a("el-button",{staticStyle:{color:"#ee5186"},attrs:{size:"small",type:"text"},on:{click:function(e){return t.deleteGroup(r)}}},[t._v("删除")]):t._e()]:[a("router-link",{staticClass:"mr-10",staticStyle:{color:"#2c67ee"},attrs:{to:{path:"/edit-product",query:{id:r.id,prePage:r.type}}}},[t._v("编辑")]),a("el-button",{staticStyle:{color:"#ee5186"},attrs:{size:"small",type:"text"},on:{click:function(e){return t.deleteProduct(r.id)}}},[t._v("删除")])]]}}])})],1)],1),a("div",{staticClass:"productserver_dialog"},[a("el-dialog",{attrs:{title:"添加商品",visible:t.addProductDialog},on:{"update:visible":function(e){t.addProductDialog=e},closed:t.closeAdd}},[a("el-form",{ref:"addProductRef",attrs:{model:t.formData,rules:t.addProductRules,"label-width":"100px"}},[a("el-row",{attrs:{gutter:15}},[a("el-col",{attrs:{span:23}},[a("el-form-item",{attrs:{label:"商品名称",prop:"productname"}},[a("el-input",{attrs:{size:"small",placeholder:"请输入商品名称",clearable:""},model:{value:t.formData.productname,callback:function(e){t.$set(t.formData,"productname",e)},expression:"formData.productname"}})],1)],1),a("el-col",{attrs:{span:23}},[a("el-form-item",{attrs:{label:"商品类型",prop:"type"}},[a("el-select",{style:{width:"100%"},attrs:{size:"small",placeholder:"请选择商品类型"},model:{value:t.formData.type,callback:function(e){t.$set(t.formData,"type",e)},expression:"formData.type"}},t._l(t.typeOptions,(function(t,e){return a("el-option",{key:e,attrs:{label:t.label,value:t.value}})})),1)],1)],1),a("el-col",{attrs:{span:23}},[a("el-form-item",{attrs:{label:"商品组",prop:"gid"}},[a("el-select",{style:{width:"100%"},attrs:{size:"small",placeholder:"请选择商品组",filterable:""},model:{value:t.formData.gid,callback:function(e){t.$set(t.formData,"gid",e)},expression:"formData.gid"}},t._l(t.gidOptions,(function(t,e){return a("el-option",{key:e,attrs:{label:t.name,value:t.id}})})),1)],1)],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small",type:"primary",loading:t.btnLoading},on:{click:t.submitForm}},[t._v("确 定")]),a("el-button",{attrs:{size:"small"},on:{click:t.cancelAdd}},[t._v("取 消")])],1)],1)],1),a("div",{staticClass:"copyproduct_dialog"},[a("el-dialog",{attrs:{visible:t.copyProductDialog,title:"复制商品"},on:{"update:visible":function(e){t.copyProductDialog=e},closed:t.closeCopy}},[a("el-row",{attrs:{gutter:15}},[a("el-form",{ref:"copyProductFormRef",attrs:{model:t.copyProductFormData,rules:t.copyProductFormRules,"label-width":"150px"}},[a("el-col",{attrs:{span:23}},[a("el-row",{attrs:{gutter:15}},[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"现有的商品",prop:"existingproduct"}},[a("el-select",{style:{width:"100%"},attrs:{size:"small",filterable:"",placeholder:"请选择现有的商品"},model:{value:t.copyProductFormData.existingproduct,callback:function(e){t.$set(t.copyProductFormData,"existingproduct",e)},expression:"copyProductFormData.existingproduct"}},t._l(t.existingproductOptions,(function(e){return a("el-option-group",{key:e.id,attrs:{label:e.name}},t._l(e.product,(function(t,e){return a("el-option",{key:t.id+"a1bG"+e,attrs:{label:t.name,value:t.id}})})),1)})),1)],1)],1),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"新商品名称",prop:"newproductname"}},[a("el-input",{attrs:{size:"small",placeholder:"请输入新商品名称",clearable:""},model:{value:t.copyProductFormData.newproductname,callback:function(e){t.$set(t.copyProductFormData,"newproductname",e)},expression:"copyProductFormData.newproductname"}})],1)],1)],1)],1)],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small",type:"primary",loading:t.btnLoading},on:{click:t.copyProduct}},[t._v("确定")]),a("el-button",{attrs:{size:"small"},on:{click:t.cancelCopy}},[t._v("取消")])],1)],1)],1),a("el-dialog",{attrs:{title:t.addGroupForm.id?"编辑分组":"新增分组",visible:t.addGroupVis,"append-to-body":!0},on:{"update:visible":function(e){t.addGroupVis=e},open:t.getGroupDialogData,close:t.addGroupClose}},[a("el-form",{ref:"addGroupFormRef",attrs:{model:t.addGroupForm,"label-width":"auto",rules:t.addGroupFormRules}},[a("el-form-item",{attrs:{label:"创建类型",placeholder:"请选择"}},[a("el-select",{attrs:{size:"small",disabled:Boolean(t.addGroupForm.id)},model:{value:t.createType,callback:function(e){t.createType=e},expression:"createType"}},[a("el-option",{attrs:{value:"1",label:"商品分组"}}),a("el-option",{attrs:{value:"2",label:"一级分组"}})],1)],1),"1"===t.createType?a("div",[a("el-form-item",{attrs:{label:"一级分组",prop:"gid",placeholder:"请选择"}},[a("el-select",{attrs:{size:"small"},model:{value:t.addGroupForm.gid,callback:function(e){t.$set(t.addGroupForm,"gid",e)},expression:"addGroupForm.gid"}},t._l(t.firstGroups,(function(t,e){return a("el-option",{key:"firstgroup"+e,attrs:{value:t.id,label:t.name}})})),1)],1),a("el-form-item",{ref:"nameFormItem",attrs:{label:"商品组名称",prop:"name"}},[a("el-input",{attrs:{size:"small",placeholder:"请输入商品组名称"},model:{value:t.addGroupForm.name,callback:function(e){t.$set(t.addGroupForm,"name",e)},expression:"addGroupForm.name"}})],1),a("el-form-item",{ref:"headlineFormItem",attrs:{label:"商品组标题",prop:"headline"}},[a("el-input",{attrs:{size:"small",placeholder:"例如：选择您的完美的计划"},model:{value:t.addGroupForm.headline,callback:function(e){t.$set(t.addGroupForm,"headline",e)},expression:"addGroupForm.headline"}})],1),a("el-form-item",{ref:"taglineFormItem",attrs:{label:"商品组标语",prop:"tagline"}},[a("el-input",{attrs:{size:"small",placeholder:"例如：凭我们30天退款保证,您千万不要错过!"},model:{value:t.addGroupForm.tagline,callback:function(e){t.$set(t.addGroupForm,"tagline",e)},expression:"addGroupForm.tagline"}})],1),a("el-form-item",{attrs:{label:"订购表格模板"}},[a("el-radio-group",{model:{value:t.addGroupForm.tpl_type,callback:function(e){t.$set(t.addGroupForm,"tpl_type",e)},expression:"addGroupForm.tpl_type"}},[a("el-radio",{attrs:{label:"default"}},[t._v("系统默认")]),a("el-radio",{attrs:{label:"custom"}},[t._v("自定义")])],1)],1),"custom"===t.addGroupForm.tpl_type?a("el-form-item",{attrs:{label:"",prop:"order_frm_tpl"}},[a("el-radio-group",{on:{change:t.photoListFunc},model:{value:t.addGroupForm.order_frm_tpl,callback:function(e){t.$set(t.addGroupForm,"order_frm_tpl",e)},expression:"addGroupForm.order_frm_tpl"}},[a("el-radio",{attrs:{label:"0"}},[t._v("默认")]),a("el-radio",{attrs:{label:"1"}},[t._v("省份地区")]),a("el-radio",{attrs:{label:"2"}},[t._v("区域配置")])],1),a("div",{staticClass:"noImagePrevNext",on:{click:function(e){t.saveClickPicSrc(r("63db")("./order"+t.addGroupForm.order_frm_tpl+".png"))}}},[a("el-image",{staticClass:"order_page_img",staticStyle:{width:"100%"},attrs:{"preview-src-list":t.photoList,src:r("63db")("./order"+t.addGroupForm.order_frm_tpl+".png"),alt:""}},[a("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[a("i",{staticClass:"el-icon-picture-outline"})]),a("div",{staticClass:"image-slot",attrs:{slot:"placeholder"},slot:"placeholder"},[t._v(" 加载中"),a("span",{staticClass:"dot"},[t._v("...")])])])],1)],1):t._e()],1):t._e(),"2"===t.createType?a("div",[a("el-form-item",{attrs:{label:"分组组名称",prop:"name"}},[a("el-input",{attrs:{size:"small",placeholder:"请输入商品组名称"},model:{value:t.addGroupForm.name,callback:function(e){t.$set(t.addGroupForm,"name",e)},expression:"addGroupForm.name"}})],1)],1):t._e(),a("el-form-item",{attrs:{label:"是否隐藏"}},[a("el-radio",{attrs:{label:1},model:{value:t.addGroupForm.hidden,callback:function(e){t.$set(t.addGroupForm,"hidden",e)},expression:"addGroupForm.hidden"}},[t._v("隐藏")]),a("el-radio",{attrs:{label:0},model:{value:t.addGroupForm.hidden,callback:function(e){t.$set(t.addGroupForm,"hidden",e)},expression:"addGroupForm.hidden"}},[t._v("不隐藏")])],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small",type:"primary",loading:t.btnLoading},on:{click:t.editGroupSubmit}},[t._v("确定")]),a("el-button",{attrs:{size:"small"},on:{click:t.groupDialogCancel}},[t._v("取消")])],1)],1),a("el-dialog",{attrs:{title:"同步操作系统",visible:t.asyncOsDialog},on:{"update:visible":function(e){t.asyncOsDialog=e},open:t.getOsList}},[a("div",{staticClass:"tar mb-20"},[a("el-button",{attrs:{size:"small",type:"primary",loading:t.btnLoading,disabled:!t.asyncSelectedData.length},on:{click:t.asyncOsPost}},[t._v("同步操作系统")])],1),a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.asyncOsTableData,"tooltip-effect":"dark",height:"450","row-key":"pid"},on:{"selection-change":t.handleSelectionChange}},[a("div",{attrs:{slot:"empty"},slot:"empty"},[!t.asyncOsTableData.length&&t.asyncOsTableLoading?a("span",[a("i",{staticClass:"el-icon-loading"}),t._v(" 正在加载 ... ")]):t._e(),t.asyncOsTableData.length||t.asyncOsTableLoading?t._e():a("span",[t._v("暂无数据")])]),a("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),a("el-table-column",{attrs:{prop:"name",label:"商品名称"}}),a("el-table-column",{attrs:{prop:"type",label:"类型","show-overflow-tooltip":"",width:"150",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.row;return[a("span",[t._v(t._s("dcim"===r.type?"裸金属":"魔方云"))])]}}])}),a("el-table-column",{attrs:{prop:"msg",label:"同步结果","show-overflow-tooltip":"",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.row;return[r.loading?a("span",{staticClass:"el-icon-loading"}):a("span",[t._v(t._s(r.msg||"-"))])]}}])})],1)],1)],1)},o=[],n=(r("99af"),r("c740"),r("4160"),r("fb6a"),r("b0c0"),r("ac1f"),r("841c"),r("159b"),r("96cf"),r("1da1")),s=r("2909"),i=r("f421"),c=r("6a8e"),u=r("aa47"),d=r("2118"),l={inject:["reload"],metaInfo:{title:"商品管理"},data:function(){return{now:"",photos:[r("a6ea"),r("baaf"),r("07c1")],tableLoading:!1,search:{keywords:"",timer:null},tableData:[],expandRows:[],addProductDialog:!1,formData:{productname:void 0,type:void 0,gid:void 0},addProductRules:{productname:[{required:!0,message:"请输入商品名称",trigger:"blur"}],type:[{required:!0,message:"请选择商品类型",trigger:"change"}],gid:[{required:!0,message:"请选择商品组",trigger:"change"}]},typeOptions:[],gidOptions:[],productId:void 0,copyProductDialog:!1,copyProductFormData:{existingproduct:void 0,newproductname:void 0},copyProductFormRules:{existingproduct:[{required:!0,message:"请选择现有的商品",trigger:"change"}],newproductname:[{required:!0,message:"请输入新商品名称",trigger:"blur"}]},existingproductOptions:[],pid:void 0,btnLoading:!1,addGroupVis:!1,defaultPage:0,addGroupForm:{type:1,name:"",headline:"",tagline:"",order_frm_tpl:"0",tpl_type:"default",hidden:0,id:void 0,gid:void 0},addGroupFormRules:{name:[{required:!0,message:"请输入分组名",trigger:"blur"}],gid:[{required:!0,message:"请选择一级分组",trigger:"change"}]},createType:"1",firstGroups:[],asyncOsDialog:!1,asyncOsTableLoading:!1,asyncOsTableData:[],asyncSelectedData:[]}},methods:{photoListFunc:function(){var t=this,e=this.photos.concat(),r=e.findIndex((function(e){return e===t.now}));if(r>-1){var a=e.slice(0,r),o=e.slice(r);e=[].concat(Object(s["a"])(o),Object(s["a"])(a))}return e},saveClickPicSrc:function(t){this.now=t},editStockHandleClick:function(t){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function r(){var a,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return t.loading=!0,r.next=3,Object(i["r"])({id:t.id,qty:t.newQty});case 3:a=r.sent,o=a.data,t.loading=!1,200!==o.status?e.$message.error(o.msg):(e.$message.success(o.msg),t.editStock=!1);case 7:case"end":return r.stop()}}),r)})))()},getData:function(t){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function r(){var a,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return e.tableLoading=!0,r.next=3,Object(i["x"])({keywords:e.search.keywords});case 3:if(a=r.sent,o=a.data,e.tableLoading=!1,200===o.status){r.next=8;break}return r.abrupt("return",!1);case 8:e.expandRows=[],(o.data||[]).forEach((function(r){r.children=r.groups,r.guid=Object(d["a"])(),e.expandRows.push(r.guid),(r.groups||[]).forEach((function(a){a.children=a.products,a.guid=Object(d["a"])(),(r.groups.length<=15||a.id===t)&&e.expandRows.push(a.guid),(a.products||[]).forEach((function(t){t.guid=Object(d["a"])(),t.newQty=t.qty,t.editStock=!1,t.loading=!1}))}))})),e.tableData=o.data;case 11:case"end":return r.stop()}}),r)})))()},tableRowClassName:function(t){var e=t.row;t.rowIndex;if(!e.groups)return"not_first_group"},headerRowClassName:function(){return"hearder_row_class"},editGroup:function(t){this.createType=t.groups?"2":"1",this.addGroupForm.id=t.id,this.addGroupForm.gid=t.gid||void 0,this.addGroupVis=!0},deleteGroup:function(t){var e=this;t.groups?this.$confirm("此操作将永久删除该一级分组, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(n["a"])(regeneratorRuntime.mark((function r(){var a,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,Object(i["i"])({id:t.id});case 2:a=r.sent,o=a.data,200!==o.status?e.$message.error(o.msg):(e.$message.success(o.msg),e.getData());case 5:case"end":return r.stop()}}),r)})))).catch((function(){})):this.$confirm("此操作将永久删除该商品组, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(n["a"])(regeneratorRuntime.mark((function r(){var a,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,Object(i["l"])(t.id);case 2:a=r.sent,o=a.data,200!==o.status?e.$message.error(o.msg):(e.$message.success(o.msg),e.getData());case 5:case"end":return r.stop()}}),r)})))).catch((function(){}))},goToEditProduct:function(t){this.$router.push({path:"/edit-product",query:{id:t.id,prePage:t.type}})},deleteProduct:function(t){var e=this;this.$confirm("此操作将永久删除该商品, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(n["a"])(regeneratorRuntime.mark((function r(){var a,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,Object(i["m"])(t);case 2:a=r.sent,o=a.data,200!==o.status?e.$message.error(o.msg):(e.$message.success(o.msg),e.getData());case 5:case"end":return r.stop()}}),r)})))).catch((function(){}))},goToAddGroup:function(){this.addGroupVis=!0},showAddProduct:function(t){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function r(){var a,o,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return t&&(e.formData.gid=t.id),r.next=3,Object(i["s"])({type:1});case 3:if(a=r.sent,o=a.data,200===o.status){r.next=7;break}return r.abrupt("return",!1);case 7:for(n in e.gidOptions=o.data.groupdata,e.typeOptions=[],o.data.type)e.typeOptions.push({value:n,label:o.data.type[n]});e.addProductDialog=!0;case 11:case"end":return r.stop()}}),r)})))()},submitForm:function(){var t=this;this.$refs.addProductRef.validate(function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(r){var a,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!r){e.next=10;break}return t.btnLoading=!0,e.next=4,Object(i["c"])(t.formData);case 4:a=e.sent,o=a.data,200!==o.status?t.$message.error(o.msg):(t.productId=o.id,t.$message({type:"success",message:"添加成功!"}),t.addProductDialog=!1,t.$refs.addProductRef.resetFields(),t.$router.push({path:"/edit-product",query:{id:t.productId}})),t.btnLoading=!1,e.next=11;break;case 10:return e.abrupt("return",!1);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},cancelAdd:function(){this.addProductDialog=!1,this.$refs.addProductRef.resetFields()},showCopyProduct:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.copyProductDialog=!0,e.next=3,Object(c["e"])();case 3:if(r=e.sent,a=r.data,200===a.status){e.next=8;break}return t.$message.error(a.msg),e.abrupt("return");case 8:t.existingproductOptions=a.client_groups;case 9:case"end":return e.stop()}}),e)})))()},cancelCopy:function(){this.copyProductDialog=!1,this.$refs.copyProductFormRef.resetFields()},copyProduct:function(){var t=this;this.$refs.copyProductFormRef.validate(function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(r){var a,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!r){e.next=10;break}return t.btnLoading=!0,e.next=4,Object(i["h"])(t.copyProductFormData);case 4:a=e.sent,o=a.data,200!==o.status?t.$message.error(o.msg):(t.pid=o.pid,t.$message({type:"success",message:o.msg}),t.copyProductDialog=!1,t.$refs.copyProductFormRef.resetFields(),t.$router.push({path:"/edit-product",query:{id:t.pid}})),t.btnLoading=!1,e.next=11;break;case 10:return e.abrupt("return",!1);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},closeCopy:function(){this.$refs.copyProductFormRef.resetFields()},closeAdd:function(){this.$refs.addProductRef.resetFields()},rowDrag:function(){var t=this,e=document.querySelector(".el-table__body-wrapper tbody");setTimeout((function(){u["a"].create(e,{animation:500,handle:".el-icon-rank",onEnd:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(r){var a,o,n,s,i,c,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=[],(t.tableData||[]).forEach((function(t){a.push(t),(t.children||[]).forEach((function(t){a.push(t),(t.children||[]).forEach((function(t){a.push(t)}))}))})),o=a[r.oldIndex],n=a[r.newIndex],r.newIndex!==r.oldIndex){e.next=6;break}return e.abrupt("return",!1);case 6:if(!(r.newIndex>r.oldIndex)){e.next=52;break}if(n=a[r.newIndex],!o.groups){e.next=28;break}if(!n.groups){e.next=13;break}t.firstGroupSortApi(o.id,n.id),e.next=26;break;case 13:if(!n.products){e.next=20;break}if(o.id!==n.gid){e.next=17;break}return t.getData(),e.abrupt("return",!1);case 17:t.firstGroupSortApi(o.id,n.gid),e.next=26;break;case 20:if(s=0,(t.tableData||[]).forEach((function(t){(t.groups||[]).forEach((function(t){n.gid===t.id&&(s=t.gid)}))})),o.id!==s){e.next=25;break}return t.getData(),e.abrupt("return",!1);case 25:t.firstGroupSortApi(o.id,s);case 26:e.next=52;break;case 28:if(!o.products){e.next=45;break}if(!n.groups){e.next=33;break}t.proGroupSortApi(o.id,o.gid,0,n.id),e.next=43;break;case 33:if(!n.products){e.next=37;break}t.proGroupSortApi(o.id,o.gid,n.id,n.gid),e.next=43;break;case 37:if(o.id!==n.gid){e.next=40;break}return t.getData(),e.abrupt("return",!1);case 40:i=0,(t.tableData||[]).forEach((function(t){(t.groups||[]).forEach((function(t){n.gid===t.id&&(i=t.gid)}))})),t.proGroupSortApi(o.id,o.gid,n.gid,i);case 43:e.next=52;break;case 45:if(!n.groups){e.next=51;break}return t.$message.warning("请拖动到正确组内"),t.getData(),e.abrupt("return",!1);case 51:n.products?t.proSortApi(o.id,o.gid,0,n.id):t.proSortApi(o.id,o.gid,n.id,n.gid);case 52:if(!(r.newIndex<r.oldIndex)){e.next=86;break}if(0!==r.newIndex){e.next=70;break}if(n={id:0,gid:0},!o.groups){e.next=59;break}t.firstGroupSortApi(o.id,n.id),e.next=68;break;case 59:if(!o.products){e.next=65;break}return t.$message.warning("请拖动到正确组内"),t.getData(),e.abrupt("return",!1);case 65:return t.$message.warning("请拖动到正确组内"),t.getData(),e.abrupt("return",!1);case 68:e.next=86;break;case 70:if(n=a[r.newIndex-1],!o.groups){e.next=75;break}n.groups?t.firstGroupSortApi(o.id,n.id):n.products?t.firstGroupSortApi(o.id,n.gid):(c=0,(t.tableData||[]).forEach((function(t){(t.groups||[]).forEach((function(t){n.gid===t.id&&(c=t.gid)}))})),t.firstGroupSortApi(o.id,c)),e.next=86;break;case 75:if(!o.products){e.next=79;break}n.groups?t.proGroupSortApi(o.id,o.gid,0,n.id):n.products?t.proGroupSortApi(o.id,o.gid,n.id,n.gid):(u=0,(t.tableData||[]).forEach((function(t){(t.groups||[]).forEach((function(t){n.gid===t.id&&(u=t.gid)}))})),t.proGroupSortApi(o.id,o.gid,n.gid,u)),e.next=86;break;case 79:if(!n.groups){e.next=85;break}return t.$message.warning("请拖动到正确组内"),t.getData(),e.abrupt("return",!1);case 85:n.products?t.proSortApi(o.id,o.gid,0,n.id):t.proSortApi(o.id,o.gid,n.id,n.gid);case 86:case"end":return e.stop()}}),e)})));function r(t){return e.apply(this,arguments)}return r}()})}),500)},proSortApi:function(t,e,r,a){var o=this;return Object(n["a"])(regeneratorRuntime.mark((function n(){var s,c,u;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return s={pid:t,gid:e,pre_pid:r,current_gid:a},n.next=3,Object(i["F"])(s);case 3:c=n.sent,u=c.data,200!==u.status?o.$message.error(u.msg):(o.$message.success(u.msg),o.getData(e));case 6:case"end":return n.stop()}}),n)})))()},proGroupSortApi:function(t,e,r,a){var o=this;return Object(n["a"])(regeneratorRuntime.mark((function n(){var s,c,u;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return s={pid:t,gid:e,pre_pid:r,current_gid:a},n.next=3,Object(i["E"])(s);case 3:c=n.sent,u=c.data,200!==u.status?o.$message.error(u.msg):(o.$message.success(u.msg),o.getData());case 6:case"end":return n.stop()}}),n)})))()},firstGroupSortApi:function(t,e){var r=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var o,n,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return o={gid:t,pre_gid:e},a.next=3,Object(i["D"])(o);case 3:n=a.sent,s=n.data,200!==s.status?r.$message.error(s.msg):(r.$message.success(s.msg),r.getData());case 6:case"end":return a.stop()}}),a)})))()},getGroupDialogData:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var r,a,o,n,s,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.addGroupForm.id){e.next=23;break}if("1"!==t.createType){e.next=13;break}return e.next=4,Object(i["w"])(t.addGroupForm.id);case 4:if(r=e.sent,a=r.data,200===a.status){e.next=8;break}return e.abrupt("return",!1);case 8:t.addGroupForm=a.data.productgroup,t.firstGroups=a.data.firstGroups,t.defaultPage=a.data.default_page,e.next=21;break;case 13:return e.next=15,Object(i["o"])({id:t.addGroupForm.id});case 15:if(o=e.sent,n=o.data,200===n.status){e.next=19;break}return e.abrupt("return",!1);case 19:t.addGroupForm.name=n.data.productfirstgroup.name,t.addGroupForm.hidden=n.data.productfirstgroup.hidden;case 21:e.next=32;break;case 23:return e.next=25,Object(i["w"])();case 25:if(s=e.sent,c=s.data,200===c.status){e.next=29;break}return e.abrupt("return",!1);case 29:t.firstGroups=c.data.firstGroups,t.addGroupForm.gid=c.data.firstGroups.length?c.data.firstGroups[0].id:void 0,t.defaultPage=c.data.default_page;case 32:case"end":return e.stop()}}),e)})))()},editGroupSubmit:function(){var t=this;this.$refs.addGroupFormRef.validate(function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(r){var a,o,n,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r){e.next=2;break}return e.abrupt("return",!1);case 2:if("1"!==t.createType){e.next=13;break}return"default"===t.addGroupForm.tpl_type&&(t.addGroupForm.order_frm_tpl="0"),t.btnLoading=!0,e.next=7,Object(i["p"])(t.addGroupForm);case 7:a=e.sent,o=a.data,200!==o.status?t.$message.error(o.msg):(t.getData(),t.$message.success(o.msg),t.addGroupVis=!1),t.btnLoading=!1,e.next=20;break;case 13:return t.btnLoading=!0,e.next=16,Object(i["B"])(t.addGroupForm);case 16:n=e.sent,s=n.data,200!==s.status?t.$message.error(s.msg):(t.getData(),t.$message.success(s.msg),t.addGroupVis=!1),t.btnLoading=!1;case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},groupDialogCancel:function(){this.addGroupVis=!1},addGroupClose:function(){this.createType="1",this.addGroupForm.id=void 0,this.addGroupForm.name="",this.$refs.headlineFormItem.resetField(),this.$refs.taglineFormItem.resetField(),this.$refs.addGroupFormRef.clearValidate()},getOsList:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.asyncOsTableLoading=!0,e.next=3,Object(i["f"])();case 3:r=e.sent,a=r.data,t.asyncOsTableLoading=!1,200!==a.status?t.$message.error(a.msg):((a.products||[]).forEach((function(t){t.loading=!1,t.status=200,t.msg=""})),t.asyncOsTableData=a.products);case 7:case"end":return e.stop()}}),e)})))()},handleSelectionChange:function(t){this.asyncSelectedData=t},asyncOsPost:function(){var t=this;(this.asyncSelectedData||[]).forEach((function(e){t.OsPostApi(e)}))},OsPostApi:function(t){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function r(){var a,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return e.btnLoading=!0,t.loading=!0,r.next=4,Object(i["g"])(t.pid);case 4:a=r.sent,o=a.data,e.btnLoading=!1,t.loading=!1,t.msg=o.msg,t.status=o.status;case 10:case"end":return r.stop()}}),r)})))()}},watch:{"search.keywords":{handler:function(){var t=this;this.search.timer&&clearTimeout(this.search.timer),this.search.timer=setTimeout((function(){t.getData()}),200)},deep:!0}},created:function(){this.getData()},mounted:function(){this.rowDrag()},computed:{photoList:function(){var t=this,e=this.photos.concat(),r=e.findIndex((function(e){return e===t.now}));if(r>-1){var a=e.slice(0,r),o=e.slice(r);e=[].concat(Object(s["a"])(o),Object(s["a"])(a))}return e}}},p=l,f=(r("3b7f"),r("2877")),m=Object(f["a"])(p,a,o,!1,null,"5f3084c4",null);e["default"]=m.exports},2118:function(t,e,r){"use strict";r.d(e,"a",(function(){return a}));r("d3b7"),r("ac1f"),r("25f0"),r("5319");function a(){return"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0,r="x"===t?e:3&e|8;return r.toString(16)}))}},"3b7f":function(t,e,r){"use strict";var a=r("6b80"),o=r.n(a);o.a},"63db":function(t,e,r){var a={"./order0.png":"a6ea","./order1.png":"baaf","./order2.png":"07c1"};function o(t){var e=n(t);return r(e)}function n(t){if(!r.o(a,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return a[t]}o.keys=function(){return Object.keys(a)},o.resolve=n,t.exports=o,o.id="63db"},"6a8e":function(t,e,r){"use strict";r.d(e,"e",(function(){return o})),r.d(e,"f",(function(){return n})),r.d(e,"c",(function(){return s})),r.d(e,"b",(function(){return i})),r.d(e,"a",(function(){return c})),r.d(e,"d",(function(){return u})),r.d(e,"g",(function(){return d})),r.d(e,"i",(function(){return l})),r.d(e,"h",(function(){return p}));var a=r("a27e");function o(t,e){return Object(a["a"])({url:"common/get_product_list",params:{type:t,id:e}})}function n(t){return Object(a["a"])({url:"common/get_promo_code",params:{type:t}})}function s(){return Object(a["a"])({url:"common/get_getways"})}function i(t){return Object(a["a"])({url:"common/get_email_tem",params:{type:t}})}function c(){return Object(a["a"])({url:"common/get_client_groups"})}function u(t){return Object(a["a"])({url:"common/host_list",params:{uid:t}})}function d(){return Object(a["a"])({url:"common/get_sms_country"})}function l(){return Object(a["a"])({url:"common/product_config_options"})}function p(t){return Object(a["a"])({url:"common/get_upstream_ticket_department_list",params:{id:t}})}},"6b80":function(t,e,r){},a6ea:function(t,e,r){t.exports=r.p+"img/order0.42a7f474.png"},baaf:function(t,e,r){t.exports=r.p+"img/order1.9ba96351.png"},f421:function(t,e,r){"use strict";r.d(e,"x",(function(){return o})),r.d(e,"w",(function(){return n})),r.d(e,"p",(function(){return s})),r.d(e,"l",(function(){return i})),r.d(e,"m",(function(){return c})),r.d(e,"s",(function(){return u})),r.d(e,"c",(function(){return d})),r.d(e,"t",(function(){return l})),r.d(e,"q",(function(){return p})),r.d(e,"h",(function(){return f})),r.d(e,"a",(function(){return m})),r.d(e,"k",(function(){return g})),r.d(e,"u",(function(){return b})),r.d(e,"F",(function(){return h})),r.d(e,"E",(function(){return _})),r.d(e,"z",(function(){return v})),r.d(e,"C",(function(){return y})),r.d(e,"y",(function(){return x})),r.d(e,"v",(function(){return w})),r.d(e,"A",(function(){return k})),r.d(e,"D",(function(){return O})),r.d(e,"o",(function(){return G})),r.d(e,"B",(function(){return F})),r.d(e,"i",(function(){return D})),r.d(e,"e",(function(){return j})),r.d(e,"d",(function(){return S})),r.d(e,"b",(function(){return $})),r.d(e,"j",(function(){return R})),r.d(e,"n",(function(){return P})),r.d(e,"r",(function(){return C})),r.d(e,"f",(function(){return T})),r.d(e,"g",(function(){return z}));var a=r("a27e");function o(t){return Object(a["a"])({url:"product_list_page",params:t})}function n(t){return Object(a["a"])({url:"edit_product_group_page",params:{id:t}})}function s(t){return Object(a["a"])({url:"save_product_group",method:"post",data:t})}function i(t){return Object(a["a"])({url:"del_product_group",params:{id:t}})}function c(t){return Object(a["a"])({url:"del_product",params:{id:t}})}function u(t){return Object(a["a"])({url:"add_product_page",params:t})}function d(t){return Object(a["a"])({url:"create_product",method:"post",data:t})}function l(t){return Object(a["a"])({url:"edit_product_page/".concat(t)})}function p(t){return Object(a["a"])({url:"edit_product",method:"post",data:t})}function f(t){return Object(a["a"])({url:"product_duplicate",method:"post",data:t})}function m(t){return Object(a["a"])({url:"product_downloadcats",method:"post",data:t})}function g(t){return Object(a["a"])({url:"product_del_custom",method:"post",data:t})}function b(t){return Object(a["a"])({url:"provision/".concat(t)})}function h(t){return Object(a["a"])({url:"update_productsort",method:"post",data:t})}function _(t){return Object(a["a"])({url:"update_groupsort",method:"post",data:t})}function v(t){return Object(a["a"])({url:"get_upstream_products",params:t})}function y(t){return Object(a["a"])({url:"product/sync_product_info",method:"post",data:t})}function x(t){return Object(a["a"])({url:"product/get_upstream_price",params:t})}function w(t){return Object(a["a"])({url:"product_selectcates",params:{productid:t}})}function k(t){return Object(a["a"])({url:"product_manage_downloads",method:"post",data:t})}function O(t){return Object(a["a"])({url:"update_firstgroupsort",method:"post",data:t})}function G(t){return Object(a["a"])({url:"edit_product_first_group_page",params:t})}function F(t){return Object(a["a"])({url:"save_product_first_group",method:"post",data:t})}function D(t){return Object(a["a"])({url:"del_product_first_group",params:t})}function j(t){return Object(a["a"])({url:"advanced_options/page",params:t})}function S(t){return Object(a["a"])({url:"advanced_options/create",method:"post",data:t})}function $(t){return Object(a["a"])({url:"advanced_options/addcondition",method:"post",data:t})}function R(t){return Object(a["a"])({url:"advanced_options/deletecondition",method:"delete",params:t})}function P(t){return Object(a["a"])({url:"advanced_options/deleteresult",method:"delete",params:t})}function C(t){return Object(a["a"])({url:"edit_stock",method:"post",data:t})}function T(){return Object(a["a"])({url:"options/config_options_check_os"})}function z(t){return Object(a["a"])({url:"options/config_options_check_os/".concat(t),method:"post"})}}}]);