(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["StandaloneServerUpgradePay~0aad09ea"],{7358:function(t,e,a){},b489:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"order"},["product"===t.upgradeType?a("div",{staticClass:"order_box"},[a("el-row",{staticClass:"box_goodsitem_box"},[a("el-col",{attrs:{span:24}},[a("div",{staticClass:"goodsitem_box_header"},[a("div",[a("span",[t._v(t._s(t.proPageData.old_host.host))])])]),a("el-row",{staticClass:"goodsitem_box_body"},[a("el-col",{staticClass:"box_body_left",attrs:{lg:18,xs:24}},[t._v(" "+t._s(t.$t("standaloneServer.newProduct"))+": "+t._s(t.proPageData.des)+" ")]),a("el-col",{staticClass:"box_body_right",attrs:{lg:6,xs:24}},[a("div",[a("span",[t._v(" "+t._s(t.proPageData.currency.prefix)+" "+t._s(t.proPageData.amount)+" "+t._s(t.proPageData.suffix))]),a("span",{staticClass:"body_right_cycle"},[t._v("/ "+t._s(t.proPageData.billingcycle_zh))])])])],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:24}},[a("div",{staticClass:"fr"},[a("div",{staticClass:"order_box_total"},[a("div",[t._v(t._s(t.$t("standaloneServer.total")))]),a("div",{staticClass:"box_total_money"},[a("span",{staticClass:"total_money_price"},[t._v(t._s(t.proPageData.currency.prefix)+" "+t._s(t.proPageData.amount_total)+" "+t._s(t.proPageData.suffix))]),a("span",{staticStyle:{"font-size":"12px",color:"#999999"}},[t._v(" / "+t._s(t.proPageData.billingcycle_zh))])])]),a("div",{staticClass:"youhui",staticStyle:{display:"block"}},[t._v(" "+t._s(Number(t.proPageData.saleproducts)?"(客户折扣:"+t.proPageData.currency.prefix+Number(t.proPageData.saleproducts).toFixed(2)+")":"")+" ")]),a("div",{staticClass:"order_box_promo"},[a("el-input",{staticClass:"box_promo_inp",attrs:{placeholder:t.$t("standaloneServer.placeholderPromo")},on:{change:t.promoChange},model:{value:t.promoCode,callback:function(e){t.promoCode=e},expression:"promoCode"}}),a("el-button",{staticClass:"box_promo_btn",attrs:{type:"primary"},on:{click:t.addProductCode}},[t._v(" "+t._s(t.$t("standaloneServer.usePromo")))])],1),a("div",[a("el-button",{staticClass:"order_box_topay",attrs:{type:"primary",loading:t.btnLoading},on:{click:t.proUpgradePay}},[t._v(" "+t._s(t.$t("standaloneServer.settlement")))])],1),a("div",{staticClass:"tar"},[a("el-button",{staticClass:"order_box_continue",attrs:{type:"text"},on:{click:t.backHandleClick}},[t._v(" "+t._s(t.$t("standaloneServer.goBack")))])],1)])])],1)],1):t._e(),"config"===t.upgradeType?a("div",{staticClass:"order_box"},[a("el-row",{staticClass:"box_goodsitem_box"},[a("el-col",{attrs:{span:24}},[a("div",{staticClass:"goodsitem_box_header"},[a("div",[a("span",[t._v(t._s(t.configPageData.name))])])]),a("el-row",{staticClass:"goodsitem_box_body"},[a("el-col",{staticClass:"box_body_left",attrs:{lg:18,xs:24}},t._l(t.configPageData.alloption,(function(e,s){return a("div",{key:s,staticClass:"body_left_item"},[t._v(" "+t._s(e.option_name)+": "),[4,7,9,11,14,15,16,17,18,19].includes(e.option_type)?a("span",{staticClass:"body_item_value"},[t._v(t._s(e.qty))]):a("span",{staticClass:"body_item_value"},[t._v(t._s(e.suboption_name))])])})),0),a("el-col",{staticClass:"box_body_right",attrs:{lg:6,xs:24}},[a("div",[a("span",[t._v(t._s(t.configPageData.currency.prefix)+" "+t._s(t.configPageData.subtotal)+" "+t._s(t.configPageData.currency.suffix))]),a("span",{staticClass:"body_right_cycle"},[t._v("/"+t._s(t.configPageData.billingcycle_zh))])])])],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:24}},[a("div",{staticClass:"fr"},[a("div",{staticClass:"order_box_total"},[a("div",[t._v(t._s(t.$t("standaloneServer.total")))]),a("div",{staticClass:"box_total_money"},[a("span",{staticClass:"total_money_price"},[t._v(t._s(t.configPageData.currency.prefix)+t._s(t.configPageData.total)+t._s(t.configPageData.currency.suffix))]),a("span",{staticStyle:{"font-size":"12px",color:"#999999"}},[t._v(" / "+t._s(t.configPageData.billingcycle_zh))])])]),a("div",{staticClass:"youhui"},[t._v(" "+t._s(Number(t.configPageData.saleproducts)?"(客户折扣:"+t.configPageData.currency.prefix+Number(t.configPageData.saleproducts).toFixed(2)+t.configPageData.currency.suffix+")":"")+" ")]),a("div",{staticClass:"order_box_promo"},[a("el-input",{staticClass:"box_promo_inp",attrs:{placeholder:t.$t("standaloneServer.placeholderPromo")},on:{change:t.promoChange},model:{value:t.promoCode,callback:function(e){t.promoCode=e},expression:"promoCode"}}),a("el-button",{staticClass:"box_promo_btn",attrs:{type:"primary"},on:{click:t.addConfigCode}},[t._v(" "+t._s(t.$t("standaloneServer.usePromo"))+" ")])],1),a("div",[a("el-button",{staticClass:"order_box_topay",attrs:{type:"primary",loading:t.btnLoading},on:{click:t.configUpgradePay}},[t._v(" "+t._s(t.$t("standaloneServer.settlement")))])],1),a("div",{staticClass:"tar"},[a("el-button",{staticClass:"order_box_continue",attrs:{type:"text"},on:{click:t.backHandleClick}},[t._v(" "+t._s(t.$t("standaloneServer.goBack")))])],1)])])],1)],1):t._e(),a("payNew",{ref:"control",on:{"pay-success":t.successCallBack}})],1)},o=[],r=(a("96cf"),a("1da1")),i=a("27fd"),n=a("2ef0"),c={props:{upgradeTypeChild:{type:String,default:"product"}},data:function(){return{groupid:this.$route.query.groupid,id:this.$route.query.id,upgradeType:this.upgradeTypeChild,proPageData:{old_host:{id:0,host:"",domain:""},currency:{id:0,code:"",prefix:"",suffix:""}},configPageData:{alloption:[],currency:{id:1,code:"",prefix:"",suffix:""}},promoCode:"",payment:"",dialogVisible:!1,QRcodeUrl:"",payType:"",btnLoading:!1}},methods:{getProductData:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(i["Q"])({hid:t.id});case 2:a=e.sent,s=a.data,200!==s.status?t.$message.error(s.msg):(t.proPageData=s.data,t.promoCode=s.data.promo_code);case 5:case"end":return e.stop()}}),e)})))()},addProductCode:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(i["b"])({hid:t.id,pormo_code:t.promoCode});case 2:a=e.sent,s=a.data,200!==s.status?t.$message.error(s.msg):(t.$message.success(s.msg),t.getProductData());case 5:case"end":return e.stop()}}),e)})))()},proUpgradePay:n.throttle(Object(r["a"])(regeneratorRuntime.mark((function t(){var e,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.btnLoading=!0,t.next=3,Object(i["h"])({hid:this.proPageData.old_host.id});case 3:e=t.sent,a=e.data,200===a.status?this.$refs.control.main({id:a.data.invoiceid,name:this.$t("standaloneServer.upDown")}):1001===a.status?(this.$message.success(a.msg),this.$router.push({path:"/servers",query:{groupid:this.groupid}})):this.$message.error(a.msg),this.btnLoading=!1;case 7:case"end":return t.stop()}}),t,this)}))),2e3),getConfigData:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(i["N"])({hid:t.id});case 2:a=e.sent,s=a.data,200!==s.status?t.$message.error(s.msg):(t.configPageData=s.data,t.promoCode=s.data.promo_code);case 5:case"end":return e.stop()}}),e)})))()},promoChange:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var a,s,o,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(""!==t.promoCode){e.next=14;break}if("product"!==t.upgradeType){e.next=9;break}return e.next=4,Object(i["H"])({hid:t.id});case 4:a=e.sent,s=a.data,200!==s.status?t.$message.error(s.msg):(t.$message.success(s.msg),t.getProductData()),e.next=14;break;case 9:return e.next=11,Object(i["I"])({hid:t.id});case 11:o=e.sent,r=o.data,200!==r.status?t.$message.error(r.msg):(t.$message.success(r.msg),t.getConfigData());case 14:case"end":return e.stop()}}),e)})))()},addConfigCode:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(i["a"])({hid:t.id,pormo_code:t.promoCode});case 2:a=e.sent,s=a.data,200!==s.status?t.$message.error(s.msg):(t.$message.success(s.msg),t.getConfigData());case 5:case"end":return e.stop()}}),e)})))()},configUpgradePay:n.throttle(Object(r["a"])(regeneratorRuntime.mark((function t(){var e,a,s,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:for(a in e={hid:this.id},e.configoption=[],this.configPageData.alloption)4===this.configPageData.alloption[a].option_type?e.configoption[this.configPageData.alloption[a].id]=this.configPageData.alloption[a].qty:e.configoption[this.configPageData.alloption[a].id]=this.configPageData.alloption[a].suboption_id;return this.btnLoading=!0,t.next=6,Object(i["g"])(this.$qs.stringify(e));case 6:s=t.sent,o=s.data,200===o.status?this.$refs.control.main({id:o.data.invoiceid,name:this.$t("standaloneServer.upDownOptions")}):1001===o.status?(this.$message.success(o.msg),this.$router.push({path:"/servers",query:{groupid:this.groupid}})):this.$message.error(o.msg),this.btnLoading=!1;case 10:case"end":return t.stop()}}),t,this)}))),2e3),successCallBack:function(t){t&&this.$router.push({path:"/servers",query:{groupid:this.groupid}})},backHandleClick:function(){this.$router.go(-1)}},created:function(){"config"===this.upgradeType?this.getConfigData():this.getProductData()},destroyed:function(){}},d=c,l=(a("f76b"),a("2877")),u=Object(l["a"])(d,s,o,!1,null,"563d6196",null);e["default"]=u.exports},f76b:function(t,e,a){"use strict";var s=a("7358"),o=a.n(s);o.a}}]);