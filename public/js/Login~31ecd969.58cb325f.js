(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Login~31ecd969"],{"05da":function(e,t,n){"use strict";n.r(t);var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"login"},[n("div",{staticClass:"login_custom_text"},[n("div",{staticClass:"login_custom_wrapper"},[n("h3",{staticClass:"login_custom_title"},[e._v(e._s(this.$store.state.loginText))]),n("p",{staticClass:"login_custom_desc"},[e._v(e._s(this.$store.state.loginDesc))])])]),"1"===e.commonData.login_header_footer?n("div",{ref:"customHeader",staticClass:"tac",staticStyle:{background:"#fff",overflow:"hidden"}},[n("span",{domProps:{innerHTML:e._s(e.commonData.login_header)}})]):e._e(),n("div",{ref:"loginBox",staticClass:"login_box"},[n("div",{staticClass:"limit"},[n("div",{staticClass:"logo"},[n("img",{staticClass:"cursor-pointer",attrs:{src:e.logoSrc,alt:""},on:{click:e.logoHandleClick}})]),n("el-tabs",{staticClass:"nopl-30",attrs:{stretch:""},on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[1===e.allow_login_phone?n("el-tab-pane",{attrs:{label:e.$t("login.loginPhone"),name:"phone"}},[n("div",{staticClass:"login_form"},[n("el-form",{ref:"loginPhoneFormRef",attrs:{model:e.loginPhoneForm,rules:e.loginPhoneFormRules}},[n("el-form-item",{attrs:{prop:"phone",error:e.phoneError}},[n("el-input",{staticClass:"input-with-select",attrs:{placeholder:e.$t("login.enterPhone"),clearable:""},model:{value:e.loginPhoneForm.phone,callback:function(t){e.$set(e.loginPhoneForm,"phone",t)},expression:"loginPhoneForm.phone"}},[n("el-select",{attrs:{slot:"prepend",filterable:""},slot:"prepend",model:{value:e.loginPhoneForm.phone_code,callback:function(t){e.$set(e.loginPhoneForm,"phone_code",t)},expression:"loginPhoneForm.phone_code"}},e._l(e.phoneCodeOptions,(function(e,t){return n("el-option",{key:t,attrs:{label:e.phone_code,value:e.phone_code}})})),1)],1)],1),"pwd"===e.loginBy?n("el-form-item",{attrs:{prop:"password"}},[n("el-input",{attrs:{placeholder:e.$t("login.enterPwd"),"show-password":""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.loginByPhone(t)}},model:{value:e.loginPhoneForm.password,callback:function(t){e.$set(e.loginPhoneForm,"password",t)},expression:"loginPhoneForm.password"}})],1):e._e(),n("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.loginPhoneCaptcha,expression:"loginPhoneCaptcha"}],attrs:{prop:"captcha",rules:{required:e.loginPhoneCaptcha,message:"请输入图形验证码"}}},[n("captcha",{ref:"loginPhoneCaptcha",attrs:{name:e.loginPhoneCaptchaName,isCaptcha:e.loginPhoneCaptcha},on:{login:e.loginByPhone,"update:isCaptcha":function(t){e.loginPhoneCaptcha=t},"update:is-captcha":function(t){e.loginPhoneCaptcha=t}},model:{value:e.loginPhoneForm.captcha,callback:function(t){e.$set(e.loginPhoneForm,"captcha",t)},expression:"loginPhoneForm.captcha"}})],1),"pwd"!==e.loginBy?n("el-form-item",{attrs:{prop:"code"}},[n("el-input",{staticClass:"codeinput",attrs:{placeholder:e.$t("login.enterCode")},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.loginByPhone(t)}},model:{value:e.loginPhoneForm.code,callback:function(t){e.$set(e.loginPhoneForm,"code",t)},expression:"loginPhoneForm.code"}}),n("el-button",{staticClass:"codebtn",attrs:{type:e.codeBtnDisabled?"info":"primary",disabled:e.codeBtnDisabled},on:{click:e.getCheckedCode}},[e._v(" "+e._s(e.changeBtnValue))])],1):e._e(),n("div",{staticClass:"login_btns"},["phone"===e.activeName?n("span",{on:{click:e.changeLoginBy}},["pwd"===e.loginBy?n("router-link",{attrs:{to:""}},[e._v(e._s(e.$t("login.loginCode")))]):n("router-link",{attrs:{to:""}},[e._v(e._s(e.$t("login.loginPwd")))])],1):e._e(),n("span",{staticClass:"forgetPwd"},[n("router-link",{attrs:{to:"/reset"}},[e._v(e._s(e.$t("login.forgetPwd")))])],1)]),n("el-button",{staticClass:"loginBtn",attrs:{type:"primary",loading:e.loginLoading},on:{click:e.loginByPhone}},[e._v(" "+e._s(e.$t("login.login")))])],1)],1)]):e._e(),1===e.allow_login_email||1===e.allow_id?n("el-tab-pane",{attrs:{lazy:"",label:1===e.allow_login_email?e.$t("login.loginEmail"):"ID登录",name:"email"}},[n("div",{staticClass:"login_form"},[n("el-form",{ref:"loginEmialFormRef",attrs:{model:e.loginEmialForm,rules:e.loginEmialFormRules}},[n("el-form-item",{attrs:{prop:"email",error:e.emailError}},[1===e.allow_login_email&&1===e.allow_id?n("el-input",{attrs:{placeholder:e.$t("login.enterEmailLogin"),clearable:""},model:{value:e.loginEmialForm.email,callback:function(t){e.$set(e.loginEmialForm,"email",t)},expression:"loginEmialForm.email"}}):e._e(),1===e.allow_login_email&&1!==e.allow_id?n("el-input",{attrs:{placeholder:"请输入邮箱",clearable:""},model:{value:e.loginEmialForm.email,callback:function(t){e.$set(e.loginEmialForm,"email",t)},expression:"loginEmialForm.email"}}):e._e(),1!==e.allow_login_email&&1===e.allow_id?n("el-input",{attrs:{placeholder:"请输入ID",clearable:""},model:{value:e.loginEmialForm.email,callback:function(t){e.$set(e.loginEmialForm,"email",t)},expression:"loginEmialForm.email"}}):e._e()],1),n("el-form-item",{attrs:{prop:"password"}},[n("el-input",{attrs:{placeholder:e.$t("login.enterPwd"),"show-password":""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.loginByEmail(t)}},model:{value:e.loginEmialForm.password,callback:function(t){e.$set(e.loginEmialForm,"password",t)},expression:"loginEmialForm.password"}})],1),n("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.loginEmailCaptcha,expression:"loginEmailCaptcha"}],attrs:{prop:"captcha",rules:{required:e.loginEmailCaptcha,message:"请输入图形验证码"}}},[n("captcha",{ref:"loginEmailCaptcha",attrs:{name:"allow_login_email_captcha",isCaptcha:e.loginEmailCaptcha},on:{login:e.loginByEmail,"update:isCaptcha":function(t){e.loginEmailCaptcha=t},"update:is-captcha":function(t){e.loginEmailCaptcha=t}},model:{value:e.loginEmialForm.captcha,callback:function(t){e.$set(e.loginEmialForm,"captcha",t)},expression:"loginEmialForm.captcha"}})],1),n("div",{staticClass:"login_btns"},[n("span",{staticClass:"forgetPwd"},[n("router-link",{attrs:{to:"/reset"}},[e._v(e._s(e.$t("login.forgetPwd")))])],1)]),n("el-button",{staticClass:"loginBtn",attrs:{type:"primary",loading:e.loginLoading},on:{click:e.loginByEmail}},[e._v(" "+e._s(e.$t("login.login")))])],1)],1)]):e._e()],1),1===e.allow_login_phone||1===e.allow_login_email?n("div",{staticClass:"login_login"},[e._v(" "+e._s(e.$t("login.hasNoAccount"))+" "),n("router-link",{attrs:{to:"/register"}},[e._v(e._s(e.$t("login.register")))])],1):0===e.allow_login_phone&&0===e.allow_login_email?n("div",{staticClass:"tac"},[e._v(e._s(e.$t("login.nothing")))]):e._e(),n("div",{staticClass:"oauth_box"},[n("div",{staticClass:"oauth_main"},e._l(e.oauthList,(function(t,o){return n("div",{key:o,staticClass:"oauthHeaderLogin oauth_item",domProps:{innerHTML:e._s(t.img)},on:{click:function(n){return e.jumpPage(t)}}})})),0)])],1)]),"1"===e.commonData.login_header_footer?n("div",{ref:"customFooter",staticClass:"tac",staticStyle:{background:"#fff",overflow:"hidden",width:"100%"}},[n("span",{domProps:{innerHTML:e._s(e.commonData.login_footer)}})]):e._e(),n("el-dialog",e._g(e._b({attrs:{visible:e.secondVerifyVis,title:"二次验证",width:"500px"},on:{"update:visible":function(t){e.secondVerifyVis=t},close:e.secondDialogClose}},"el-dialog",e.$attrs,!1),e.$listeners),[n("el-form",{ref:"secondVerifyForm",attrs:{model:e.secondVerifyFormData,rules:e.secondVerifyRules,size:"medium","label-width":"100px"}},[n("el-form-item",{attrs:{label:"验证方式",prop:"type"}},[n("el-select",{staticStyle:{width:"90%"},model:{value:e.secondVerifyFormData.type,callback:function(t){e.$set(e.secondVerifyFormData,"type",t)},expression:"secondVerifyFormData.type"}},e._l(e.verifyType,(function(e,t){return n("el-option",{key:t,attrs:{value:e.name,label:e.name_zh+"："+e.account}})})),1)],1),n("el-form-item",{attrs:{label:"验证码",prop:"code"}},[n("el-input",{style:{width:"90%"},attrs:{placeholder:e.$t("securityCenter.enterCaptcha"),clearable:""},model:{value:e.secondVerifyFormData.code,callback:function(t){e.$set(e.secondVerifyFormData,"code",t)},expression:"secondVerifyFormData.code"}}),n("span",{staticClass:"line"}),n("el-button",{staticClass:"code-btn",attrs:{type:"text",disabled:"获取验证码"!==e.changeBtnValue},on:{click:e.sendCode}},[e._v(" "+e._s(e.changeBtnValue))])],1)],1),n("div",{attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:e.secondVerifyClose}},[e._v(e._s(e.$t("btnCancle")))]),n("el-button",{attrs:{type:"primary",loading:e.loginLoading},on:{click:e.secondVerifySubmit}},[e._v(e._s(e.$t("btnConfirmation"))+" ")])],1)],1)],1)},a=[],r=(n("caad"),n("d81d"),n("45fc"),n("b0c0"),n("2532"),n("498a"),n("96cf"),n("1da1")),i=n("4360"),s=n("a78e"),l=n.n(s),c=n("c7a1"),u=n("7555"),g=n("9ec0"),m=n("2ef0"),h={metaInfo:function(){return{title:this.$t("login.login"),titleTemplate:"%s - "+this.companyTitle,htmlAttrs:{lang:this.$t("htmlAttrs.lang"),amp:!0}}},data:function(){var e=this,t=function(t,n,o){""===n?o(new Error(e.$t("login.enterPhone"))):e.checkPhone(n)?o():(e.loginPhoneForm.phone=e.loginPhoneForm.phone.trim(),o(new Error(e.$t("login.validatePhone"))))},n=function(t,n,o){""===n?o(new Error(e.$t("login.enterEmail"))):e.checkEmail(n)?o():o(new Error(e.$t("login.validateEmail")))},o=function(t,n,o){""===n?o(new Error(e.$t("login.enterPwd"))):o()},a=function(t,n,o){""===n?o(new Error(e.$t("login.enterCode"))):o()};return{bgUrl:"",oauthList:[],commonData:{},companyTitle:"",logoSrc:"",allow_login_phone:void 0,allow_login_email:void 0,allow_id:void 0,allow_wechat:void 0,activeName:"phone",loginLoading:!1,loginBy:"pwd",phoneCodeOptions:[],loginPhoneCaptchaName:"allow_login_phone_captcha",loginPhoneForm:{phone_code:"+86",phone:"",code:"",password:"",captcha:""},phoneError:"",loginPhoneFormRules:{phone:[{validator:t,trigger:"blur"}],password:[{validator:o,trigger:"blur"},{min:6,max:32,message:this.$t("login.pwdLength"),trigger:"blur"}],code:[{validator:a,trigger:"blur"}]},loginEmailCaptcha:!1,loginPhoneCaptcha:!1,loginEmialForm:{email:"",password:"",captcha:""},loginEmialFormRules:{email:[{validator:n,trigger:"blur"}],password:[{validator:o,trigger:"blur"},{min:6,max:32,message:this.$t("login.pwdLength"),trigger:"blur"}]},emailError:"",changeBtnValue:this.$t("login.getCode"),codeBtnDisabled:!1,timer:null,wechatUrl:"",prePath:"",allow_second_verify:0,second_verify_action_home:[],secondVerifyVis:!1,verifyType:[],secondVerifyFormData:{second_verify:0,code:void 0,type:void 0},secondVerifyRules:{code:[{required:!0,message:"请输入验证码",trigger:"blur"}],type:[{required:!0,message:"请选择验证方式",trigger:"change"}]},system_url:""}},methods:{jumpPage:function(e){open(e.url)},getOauth:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var n,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(u["f"])();case 2:if(n=t.sent,o=n.data,200===o.status){t.next=7;break}return e.$message.error(o.msg),t.abrupt("return");case 7:e.oauthList=o.data;case 8:case"end":return t.stop()}}),t)})))()},setHeight:function(){var e=this;this.$nextTick((function(){var t,n,o=document.body.clientHeight,a=null===(t=e.$refs.customHeader)||void 0===t?void 0:t.offsetHeight,r=null===(n=e.$refs.customFooter)||void 0===n?void 0:n.offsetHeight;e.$refs.loginBox.style.height=o-a-r+"px"}))},logoHandleClick:function(){location.href=this.system_url},getConfig:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var n,o,a,r,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(c["a"])();case 2:n=t.sent,o=n.data,200!==o.status?e.$message.error(o.msg):(i["b"].setPROFESSION(o.data.is_profession),a=7200,r=new Date(1*new Date+1e3*a),l.a.set("msfntk",o.data.msfntk,{expires:r}),e.companyTitle=o.data.company_name,e.logoSrc=o.data.logo_url,e.system_url=o.data.system_url,sessionStorage.setItem("changeLang",o.data.allow_user_language),sessionStorage.setItem("logoSrc",o.data.logo_url_home),localStorage.setItem("system_url",o.data.system_url),sessionStorage.setItem("certifi_open",o.data.certifi_open),e.$store.dispatch("addCertifiOpen",o.data.certifi_open),s=window.langStr.some((function(e){return e.flag===localStorage.getItem("locale")})),null!==localStorage.getItem("locale")&&s||(e.appendScript(o.data.language+".js"),localStorage.setItem("locale",o.data.language)),o.data.login_header=Object(g["a"])(o.data.login_header),o.data.login_footer=Object(g["a"])(o.data.login_footer),e.commonData=o.data,e.setHeight());case 5:case"end":return t.stop()}}),t)})))()},setDefaultBg:function(){this.$nextTick((function(){var e=document.querySelector(".login");e.style.background="url(".concat(n("ef57"),") no-repeat")}))},setCustomBg:function(){var e=this;this.$nextTick((function(){var t=document.querySelector(".login");t.style.background="url(".concat(e.loginBg,") no-repeat"),t.style.backgroundSize="cover"}))},appendScript:function(e){var t=document.createElement("script");t.type="text/javascript",t.src="./lang/"+e+"?v1.0.7";var n=document.getElementsByTagName("head")[0];n.appendChild(t)},getSomeMsg:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var n,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(u["e"])();case 2:if(n=t.sent,o=n.data,200===o.status){t.next=6;break}return t.abrupt("return",!1);case 6:if(e.allow_login_phone=o.data.allow_login_phone,e.allow_login_email=o.data.allow_login_email,e.allow_id=o.data.allow_id,e.allow_wechat=o.data.allow_wechat,e.allow_second_verify=parseInt(o.data.allow_second_verify),e.second_verify_action_home=o.data.second_verify_action_home,1!==e.allow_login_phone){t.next=15;break}return e.activeName="phone",t.abrupt("return",!1);case 15:if(1!==e.allow_login_email){t.next=18;break}return e.activeName="email",t.abrupt("return",!1);case 18:if(1!==e.allow_wechat){t.next=21;break}return e.activeName="weChat",t.abrupt("return",!1);case 21:case"end":return t.stop()}}),t)})))()},handleClick:function(e){this.activeName=e.name,"phone"===e.name?(this.wechatUrl="",this.$refs.loginEmialFormRef.resetFields()):"email"===e.name?(this.wechatUrl="",this.$refs.loginPhoneFormRef.resetFields()):"weChat"===e.name&&(this.loginWeChat(),this.$refs.loginEmialFormRef.resetFields(),this.$refs.loginPhoneFormRef.resetFields())},changeLoginBy:function(){var e=this;"code"===this.loginBy?(this.loginBy="pwd",this.$refs.loginPhoneFormRef.clearValidate(),this.loginPhoneCaptchaName="allow_login_phone_captcha"):"pwd"===this.loginBy&&(this.loginBy="code",this.$refs.loginPhoneFormRef.clearValidate(),this.loginPhoneCaptchaName="allow_login_code_captcha"),setTimeout((function(){e.$refs.loginPhoneCaptcha.getVerify()}),0)},checkPhone:function(e){var t=/^\d{5,13}$/;return!!t.test(e)},checkEmail:function(e){var t=/^([0-9a-zA-Z]([-.\w]*[0-9a-zA-Z])*@(([0-9a-zA-Z])+([-\w]*[0-9a-zA-Z])*\.)+[a-zA-Z]{2,9})$/,n=/^\d{1,}$/;return!(!t.test(e)&&!n.test(e))},getLogin:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var n,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(u["d"])();case 2:if(n=t.sent,o=n.data,200===o.status){t.next=6;break}return t.abrupt("return",!1);case 6:e.phoneCodeOptions=o.data;case 7:case"end":return t.stop()}}),t)})))()},getCheckedCode:m.throttle((function(){var e=this;"phone"===this.activeName&&"code"===this.loginBy&&this.$refs.loginPhoneFormRef.validateField("phone",(function(t){if(t)return!1;e.$refs.loginPhoneFormRef.validateField("captcha",(function(t){if(t)return!1;e.getCode(e.loginPhoneForm.phone_code,e.loginPhoneForm.phone,e.loginPhoneForm.captcha)}))}))}),3e3),getCode:function(e,t,n){var o=this;return Object(r["a"])(regeneratorRuntime.mark((function a(){var r,i,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return o.phoneError="",o.countDown(),r={phone_code:e,phone:t,captcha:n,mk:l.a.get("msfntk")},a.next=5,Object(u["c"])(r);case 5:if(i=a.sent,s=i.data,200===s.status){a.next=16;break}return o.$refs.loginPhoneCaptcha.getVerify(),o.phoneError=s.msg,clearInterval(o.timer),o.codeBtnDisabled=!1,o.changeBtnValue=o.$t("login.getCode"),a.abrupt("return",!1);case 16:o.$message.success(s.msg);case 17:case"end":return a.stop()}}),a)})))()},loginByPhone:m.throttle((function(){var e=this;"pwd"===this.loginBy?this.$refs.loginPhoneFormRef.validate(function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!n){t.next=5;break}1===e.allow_second_verify&&e.second_verify_action_home.includes("login")?e.getSecondPageData():e.loginByPhoneApi(),e.$refs.loginPhoneCaptcha.getVerify(),t.next=6;break;case 5:return t.abrupt("return",!1);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()):"code"===this.loginBy&&this.$refs.loginPhoneFormRef.validate(function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(n){var o,a,r,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!n){t.next=24;break}return e.loginLoading=!0,t.next=4,Object(u["k"])(e.loginPhoneForm.phone_code,e.loginPhoneForm.phone,e.loginPhoneForm.code);case 4:if(o=t.sent,a=o.data,200===a.status){t.next=11;break}return e.$refs.loginPhoneCaptcha.getVerify(),e.$message.error(a.msg),e.loginLoading=!1,t.abrupt("return",!1);case 11:e.$message.success(a.msg),r=7200,i=new Date(1*new Date+1e3*r),l.a.set("OrfLcI2IqQItv0vS",a.jwt,{expires:i,path:"/"}),e.loginLoading=!1,clearInterval(e.timer),e.codeBtnDisabled=!1,e.changeBtnValue=e.$t("login.getCode"),window.localStorage.setItem("OrfLcI2IqQItv0vS",a.jwt),window.localStorage.setItem("loginTime",(new Date).getTime()),"/order-cart"===e.prePath?e.$router.push("/order-cart"):e.$router.push("/"),t.next=25;break;case 24:return t.abrupt("return",!1);case 25:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}),3e3),loginByEmail:m.throttle((function(){var e=this;this.$refs.loginEmialFormRef.validate(function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!n){t.next=5;break}1===e.allow_second_verify&&e.second_verify_action_home.includes("login")?e.getSecondPageData():e.loginByEmailApi(),e.$refs.loginEmailCaptcha.getVerify(),t.next=6;break;case 5:return t.abrupt("return",!1);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}),3e3),countDown:function(){var e=this,t=60;this.changeBtnValue=t+this.$t("login.timeCount"),this.timer=setInterval((function(){0===t?(clearInterval(e.timer),e.codeBtnDisabled=!1,e.changeBtnValue=e.$t("login.getCode")):(e.codeBtnDisabled=!0,e.changeBtnValue=t+e.$t("login.timeCount"),t--)}),1e3)},loginWeChat:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var n,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(u["m"])();case 2:if(n=t.sent,o=n.data,200===o.status){t.next=6;break}return t.abrupt("return",!1);case 6:e.wechatUrl=o.wxlogin_url;case 7:case"end":return t.stop()}}),t)})))()},loginByPhoneApi:m.throttle(Object(r["a"])(regeneratorRuntime.mark((function e(){var t,n,o,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return localStorage.getItem("locale")||this.getConfig(),this.loginLoading=!0,e.next=4,Object(u["l"])(this.loginPhoneForm.phone_code,this.loginPhoneForm.phone,this.loginPhoneForm.password,this.secondVerifyFormData.code,this.loginPhoneForm.captcha);case 4:if(t=e.sent,n=t.data,200===n.status){e.next=10;break}return this.$message({message:n.msg,type:"error",center:!0}),this.loginLoading=!1,e.abrupt("return",!1);case 10:this.$message({message:n.msg,type:"success",center:!0}),o=7200,a=new Date(1*new Date+1e3*o),l.a.set("OrfLcI2IqQItv0vS",n.jwt,{expires:a,path:"/"}),this.loginLoading=!1,window.localStorage.setItem("OrfLcI2IqQItv0vS",n.jwt),window.localStorage.setItem("loginTime",(new Date).getTime()),"/order-cart"===this.prePath?this.$router.push("/order-cart"):this.$router.push("/");case 18:case"end":return e.stop()}}),e,this)}))),3e3),loginByEmailApi:m.throttle(Object(r["a"])(regeneratorRuntime.mark((function e(){var t,n,o,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return localStorage.getItem("locale")||this.getConfig(),this.loginLoading=!0,e.next=4,Object(u["j"])(this.loginEmialForm.email,this.loginEmialForm.password,this.secondVerifyFormData.code,this.loginEmialForm.captcha);case 4:if(t=e.sent,n=t.data,200===n.status){e.next=12;break}return this.$refs.loginEmailCaptcha.getVerify(),this.emailError=n.msg,this.$message({message:n.msg,type:"error",center:!0}),this.loginLoading=!1,e.abrupt("return",!1);case 12:o=7200,a=new Date(1*new Date+1e3*o),l.a.set("OrfLcI2IqQItv0vS",n.jwt,{expires:a,path:"/"}),this.$message({message:n.msg,type:"success",center:!0}),this.loginLoading=!1,window.localStorage.setItem("OrfLcI2IqQItv0vS",n.jwt),window.localStorage.setItem("loginTime",(new Date).getTime()),"/order-cart"===this.prePath?this.$router.push("/order-cart"):this.$router.push("/");case 20:case"end":return e.stop()}}),e,this)}))),3e3),getSecondPageData:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var n,o,a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n={},"phone"===e.activeName?(n.username=e.loginPhoneForm.phone,n.password=e.loginPhoneForm.password):"email"===e.activeName&&(n.username=e.loginEmialForm.email,n.password=e.loginEmialForm.password),t.next=4,Object(u["r"])(n);case 4:o=t.sent,a=o.data,200!==a.status?e.$message.error(a.msg):(r=a.data.allow_type.map((function(e){return e.name})),"phone"===e.activeName?r.includes("phone")?e.secondVerifyFormData.type="phone":r.includes("email")&&(e.secondVerifyFormData.type="email"):"email"===e.activeName&&(r.includes("email")?e.secondVerifyFormData.type="email":r.includes("phone")&&(e.secondVerifyFormData.type="phone")),e.verifyType=a.data.allow_type,e.secondVerifyVis=!0);case 7:case"end":return t.stop()}}),t)})))()},secondDialogClose:function(){this.$refs.secondVerifyForm.resetFields(),this.$refs.secondVerifyForm.clearValidate()},sendCode:function(){var e=this,t={};"phone"===this.activeName?(t.username=this.loginPhoneForm.phone,t.password=this.loginPhoneForm.password):"email"===this.activeName&&(t.username=this.loginEmialForm.email,t.password=this.loginEmialForm.password),this.$refs.secondVerifyForm.validateField("type",function(){var n=Object(r["a"])(regeneratorRuntime.mark((function n(o){var a,r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!o){n.next=2;break}return n.abrupt("return",!1);case 2:return e.countDown(),n.next=5,Object(u["s"])({type:e.secondVerifyFormData.type,action:"login",username:t.username,password:t.password});case 5:a=n.sent,r=a.data,200!==r.status?e.$message.error(r.msg):e.$message.success(r.msg);case 8:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}())},secondVerifyClose:function(){this.$refs.secondVerifyForm.clearValidate(),this.$refs.secondVerifyForm.resetFields(),this.secondVerifyVis=!1},secondVerifySubmit:function(){var e=this;this.$refs.secondVerifyForm.validate(function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n){t.next=2;break}return t.abrupt("return",!1);case 2:"phone"===e.activeName?e.loginByPhoneApi():"email"===e.activeName&&e.loginByEmailApi();case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},created:function(){this.getSomeMsg(),this.getOauth(),this.getLogin(),this.getConfig()},computed:{loginBg:function(){return this.$store.state.loginBg},appComplete:function(){return this.$store.state.commlistComplete}},beforeRouteEnter:function(e,t,n){n((function(e){e.prePath=t.path,sessionStorage.setItem("prePath",t.path)}))},mounted:function(){},watch:{appComplete:{handler:function(e){e&&""===this.loginBg?this.setDefaultBg():this.setCustomBg()},immediate:!0}}},d=h,p=(n("295b"),n("2877")),f=Object(p["a"])(d,o,a,!1,null,"d5bd3066",null);t["default"]=f.exports},"1dde":function(e,t,n){var o=n("d039"),a=n("b622"),r=n("2d00"),i=a("species");e.exports=function(e){return r>=51||!o((function(){var t=[],n=t.constructor={};return n[i]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},2532:function(e,t,n){"use strict";var o=n("23e7"),a=n("5a34"),r=n("1d80"),i=n("ab13");o({target:"String",proto:!0,forced:!i("includes")},{includes:function(e){return!!~String(r(this)).indexOf(a(e),arguments.length>1?arguments[1]:void 0)}})},"295b":function(e,t,n){"use strict";var o=n("5ca4"),a=n.n(o);a.a},"44e7":function(e,t,n){var o=n("861d"),a=n("c6b6"),r=n("b622"),i=r("match");e.exports=function(e){var t;return o(e)&&(void 0!==(t=e[i])?!!t:"RegExp"==a(e))}},"498a":function(e,t,n){"use strict";var o=n("23e7"),a=n("58a8").trim,r=n("c8d2");o({target:"String",proto:!0,forced:r("trim")},{trim:function(){return a(this)}})},"5a34":function(e,t,n){var o=n("44e7");e.exports=function(e){if(o(e))throw TypeError("The method doesn't accept regular expressions");return e}},"5ca4":function(e,t,n){},"9ec0":function(e,t,n){"use strict";function o(e){var t=document.createElement("div");t.innerHTML=e;var n=t.innerText||t.textContent;return t=null,n}n.d(t,"a",(function(){return o}))},ab13:function(e,t,n){var o=n("b622"),a=o("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[a]=!1,"/./"[e](t)}catch(o){}}return!1}},c8d2:function(e,t,n){var o=n("d039"),a=n("5899"),r="​᠎";e.exports=function(e){return o((function(){return!!a[e]()||r[e]()!=r||a[e].name!==e}))}},d81d:function(e,t,n){"use strict";var o=n("23e7"),a=n("b727").map,r=n("1dde"),i=n("ae40"),s=r("map"),l=i("map");o({target:"Array",proto:!0,forced:!s||!l},{map:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}})},ef57:function(e,t,n){e.exports=n.p+"img/new-background.0b8cb548.jpg"}}]);