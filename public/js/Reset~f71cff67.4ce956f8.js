(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Reset~f71cff67"],{"2fd0":function(e,t,r){},"9ec0":function(e,t,r){"use strict";function a(e){var t=document.createElement("div");t.innerHTML=e;var r=t.innerText||t.textContent;return t=null,r}r.d(t,"a",(function(){return a}))},acf9:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"reset"},[r("div",{staticClass:"login_custom_text"},[r("div",{staticClass:"login_custom_wrapper"},[r("h3",{staticClass:"login_custom_title"},[e._v(e._s(this.$store.state.loginText))]),r("p",{staticClass:"login_custom_desc"},[e._v(e._s(this.$store.state.loginDesc))])])]),"1"===e.commonData.login_header_footer?r("div",{ref:"customHeader",staticClass:"tac",staticStyle:{background:"#fff",overflow:"hidden"}},[r("span",{domProps:{innerHTML:e._s(e.commonData.login_header)}})]):e._e(),r("div",{ref:"resetBox",staticClass:"reset_box"},[r("div",{staticClass:"limit"},[r("div",{staticClass:"logo"},[r("img",{staticClass:"cursor-pointer",attrs:{src:e.logoSrc,alt:""},on:{click:e.logoHandleClick}})]),r("el-tabs",{staticClass:"nopl-30",attrs:{stretch:""},on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[1===e.allow_login_phone?r("el-tab-pane",{attrs:{label:e.$t("login.resetPhone"),name:"phone"}},[r("div",{staticClass:"reset_form"},[r("el-form",{ref:"resetPhoneFormRef",attrs:{model:e.resetPhoneForm,rules:e.resetPhoneFormRules}},[r("el-form-item",{attrs:{prop:"phone",error:e.phoneErrorMsg}},[r("el-input",{staticClass:"input-with-select",attrs:{placeholder:e.$t("login.enterPhone"),clearable:""},model:{value:e.resetPhoneForm.phone,callback:function(t){e.$set(e.resetPhoneForm,"phone",t)},expression:"resetPhoneForm.phone"}},[r("el-select",{attrs:{slot:"prepend",filterable:""},slot:"prepend",model:{value:e.resetPhoneForm.phone_code,callback:function(t){e.$set(e.resetPhoneForm,"phone_code",t)},expression:"resetPhoneForm.phone_code"}},e._l(e.phoneCodeOptions,(function(e,t){return r("el-option",{key:t,attrs:{label:e.phone_code,value:e.phone_code}})})),1)],1)],1),r("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.resetPhoneCaptcha,expression:"resetPhoneCaptcha"}],attrs:{prop:"captcha",rules:{required:e.resetPhoneCaptcha,message:"请输入图形验证码"}}},[r("captcha",{ref:"resetPhoneCaptcha",attrs:{name:"allow_phone_forgetpwd_captcha",isCaptcha:e.resetPhoneCaptcha},on:{"update:isCaptcha":function(t){e.resetPhoneCaptcha=t},"update:is-captcha":function(t){e.resetPhoneCaptcha=t}},model:{value:e.resetPhoneForm.captcha,callback:function(t){e.$set(e.resetPhoneForm,"captcha",t)},expression:"resetPhoneForm.captcha"}})],1),r("el-form-item",{attrs:{prop:"code"}},[r("el-input",{staticClass:"codeinput",attrs:{placeholder:e.$t("login.enterCode")},model:{value:e.resetPhoneForm.code,callback:function(t){e.$set(e.resetPhoneForm,"code",t)},expression:"resetPhoneForm.code"}}),r("el-button",{staticClass:"codebtn",attrs:{type:e.codeBtnDisabled1?"info":"primary",disabled:e.codeBtnDisabled1},on:{click:e.getCheckedCode}},[e._v(" "+e._s(e.changeBtnValue1))])],1),r("el-form-item",{attrs:{prop:"password"}},[r("el-input",{attrs:{placeholder:e.$t("login.enterNewPwd"),"show-password":"",autocomplete:"off"},model:{value:e.resetPhoneForm.password,callback:function(t){e.$set(e.resetPhoneForm,"password",t)},expression:"resetPhoneForm.password"}})],1),r("el-form-item",{attrs:{prop:"checkPassword"}},[r("el-input",{attrs:{placeholder:e.$t("login.enterPwdAgain"),"show-password":"",autocomplete:"off"},model:{value:e.resetPhoneForm.checkPassword,callback:function(t){e.$set(e.resetPhoneForm,"checkPassword",t)},expression:"resetPhoneForm.checkPassword"}})],1),r("el-button",{staticClass:"resetBtn",attrs:{type:"primary",loading:e.resetLoading},on:{click:e.resetPhone}},[e._v(" "+e._s(e.$t("login.reset")))])],1)],1)]):e._e(),1===e.allow_login_email?r("el-tab-pane",{attrs:{lazy:"",label:e.$t("login.resetEmail"),name:"email"}},[r("div",{staticClass:"reset_form"},[r("el-form",{ref:"resetEmailFormRef",attrs:{model:e.resetEmailForm,rules:e.resetEmailFormRules}},[r("el-form-item",{attrs:{prop:"email",error:e.emailErrorMsg}},[r("el-input",{attrs:{placeholder:e.$t("login.enterEmail"),clearable:""},model:{value:e.resetEmailForm.email,callback:function(t){e.$set(e.resetEmailForm,"email",t)},expression:"resetEmailForm.email"}})],1),r("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.resetEmailCaptcha,expression:"resetEmailCaptcha"}],attrs:{prop:"captcha",rules:{required:e.resetEmailCaptcha,message:"请输入图形验证码"}}},[r("captcha",{ref:"resetEmailCaptcha",attrs:{name:"allow_email_forgetpwd_captcha",isCaptcha:e.resetEmailCaptcha},on:{"update:isCaptcha":function(t){e.resetEmailCaptcha=t},"update:is-captcha":function(t){e.resetEmailCaptcha=t}},model:{value:e.resetEmailForm.captcha,callback:function(t){e.$set(e.resetEmailForm,"captcha",t)},expression:"resetEmailForm.captcha"}})],1),r("el-form-item",{attrs:{prop:"code"}},[r("el-input",{staticClass:"codeinput",attrs:{placeholder:e.$t("login.enterCode")},model:{value:e.resetEmailForm.code,callback:function(t){e.$set(e.resetEmailForm,"code",t)},expression:"resetEmailForm.code"}}),r("el-button",{staticClass:"codebtn",attrs:{type:e.codeBtnDisabled2?"info":"primary",disabled:e.codeBtnDisabled2},on:{click:e.getCheckedCode}},[e._v(" "+e._s(e.changeBtnValue2))])],1),r("el-form-item",{attrs:{prop:"password"}},[r("el-input",{attrs:{placeholder:e.$t("login.enterNewPwd"),"show-password":""},model:{value:e.resetEmailForm.password,callback:function(t){e.$set(e.resetEmailForm,"password",t)},expression:"resetEmailForm.password"}})],1),r("el-form-item",{attrs:{prop:"checkPassword"}},[r("el-input",{attrs:{placeholder:e.$t("login.enterPwdAgain"),"show-password":""},model:{value:e.resetEmailForm.checkPassword,callback:function(t){e.$set(e.resetEmailForm,"checkPassword",t)},expression:"resetEmailForm.checkPassword"}})],1),r("el-button",{staticClass:"resetBtn",attrs:{type:"primary",loading:e.resetLoading},on:{click:e.resetEmail}},[e._v(" "+e._s(e.$t("login.reset")))])],1)],1)]):e._e()],1),1===e.allow_login_phone||1===e.allow_login_email?r("div",{staticClass:"reset_login"},[e._v(" "+e._s(e.$t("login.hasAccount"))+" "),r("router-link",{attrs:{to:"/login"}},[e._v(e._s(e.$t("login.login")))])],1):0===e.allow_login_phone&&0===e.allow_login_email?r("div",{staticClass:"tac"},[e._v(e._s(e.$t("login.nothing")))]):e._e()],1)]),"1"===e.commonData.login_header_footer?r("div",{ref:"customFooter",staticClass:"tac",staticStyle:{background:"#fff",overflow:"hidden",width:"100%"}},[r("span",{domProps:{innerHTML:e._s(e.commonData.login_footer)}})]):e._e()])},o=[],n=(r("b0c0"),r("96cf"),r("1da1")),s=r("4360"),i=r("a78e"),l=r.n(i),c=r("c7a1"),m=r("7555"),u=r("9ec0"),d=r("2ef0"),h={metaInfo:function(){return{title:this.$t("login.reset"),titleTemplate:"%s - "+this.companyTitle,htmlAttrs:{lang:this.$t("htmlAttrs.lang"),amp:!0}}},data:function(){var e=this,t=function(t,r,a){""===r?a(new Error(e.$t("login.enterPhone"))):e.checkPhone(r)?a():a(new Error(e.$t("login.validatePhone")))},r=function(t,r,a){""===r?a(new Error(e.$t("login.enterEmail"))):e.checkEmail(r)?a():a(new Error(e.$t("login.validateEmail")))},a=function(t,r,a){""===r?a(new Error(e.$t("login.enterCode"))):a()},o=function(t,r,a){""===r?a(new Error(e.$t("login.enterNewPwd"))):(""!==e.resetPhoneForm.checkPassword&&e.$refs.resetPhoneFormRef.validateField("checkPassword"),a())},n=function(t,r,a){""===r?a(new Error(e.$t("login.enterPwdAgain"))):r!==e.resetPhoneForm.password?a(new Error(e.$t("login.validatePwd"))):a()},s=function(t,r,a){""===r?a(new Error(e.$t("login.enterNewPwd"))):(""!==e.resetEmailForm.checkPassword&&e.$refs.resetEmailFormRef.validateField("checkPassword"),a())},i=function(t,r,a){""===r?a(new Error(e.$t("login.enterPwdAgain"))):r!==e.resetEmailForm.password?a(new Error(e.$t("login.validatePwd"))):a()};return{commonData:{},companyTitle:"",logoSrc:"",allow_login_email:void 0,allow_login_phone:void 0,allow_wechat:void 0,activeName:"phone",resetLoading:!1,resetPhoneForm:{phone:"",phone_code:"+86",code:"",password:"",captcha:"",checkPassword:""},resetPhoneFormRules:{phone:[{validator:t,trigger:"blur"}],code:[{validator:a,trigger:"blur"}],password:[{validator:o,trigger:"blur"},{min:6,max:32,message:this.$t("login.pwdLength"),trigger:"blur"}],checkPassword:[{validator:n,trigger:"blur"}]},phoneCodeOptions:[],phoneErrorMsg:"",resetPhoneCaptcha:!1,resetEmailCaptcha:!1,resetEmailForm:{email:"",code:"",password:"",captcha:"",checkPassword:""},resetEmailFormRules:{email:[{validator:r,trigger:"blur"}],code:[{validator:a,trigger:"blur"}],password:[{validator:s,trigger:"blur"},{min:6,max:32,message:this.$t("login.pwdLength"),trigger:"blur"}],checkPassword:[{validator:i,trigger:"blur"}]},emailErrorMsg:"",changeBtnValue1:this.$t("login.getCode"),codeBtnDisabled1:!1,timer1:null,changeBtnValue2:this.$t("login.getCode"),codeBtnDisabled2:!1,timer2:null,system_url:""}},methods:{setHeight:function(){var e=this;this.$nextTick((function(){var t=document.body.clientHeight,r=e.$refs.customHeader.offsetHeight,a=e.$refs.customFooter.offsetHeight;e.$refs.resetBox.style.height=t-r-a+"px"}))},logoHandleClick:function(){location.href=this.system_url},getConfig:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var r,a,o,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(c["a"])();case 2:r=t.sent,a=r.data,200!==a.status?e.$message.error(a.msg):(s["b"].setPROFESSION(a.data.is_profession),o=7200,n=new Date(1*new Date+1e3*o),l.a.set("msfntk",a.data.msfntk,{expires:n}),e.companyTitle=a.data.company_name,e.logoSrc=a.data.logo_url,e.system_url=a.data.system_url,localStorage.setItem("locale",a.data.language),sessionStorage.setItem("changeLang",a.data.allow_user_language),sessionStorage.setItem("logoSrc",a.data.logo_url_home),localStorage.setItem("system_url",a.data.system_url),sessionStorage.setItem("certifi_open",a.data.certifi_open),e.$store.dispatch("addCertifiOpen",a.data.certifi_open),a.data.login_header=Object(u["a"])(a.data.login_header),a.data.login_footer=Object(u["a"])(a.data.login_footer),e.commonData=a.data,e.setHeight());case 5:case"end":return t.stop()}}),t)})))()},setDefaultBg:function(){this.$nextTick((function(){var e=document.querySelector(".reset");e.style.background="url(".concat(r("ef57"),") no-repeat")}))},setCustomBg:function(){var e=this;this.$nextTick((function(){var t=document.querySelector(".reset");t.style.background="url(".concat(e.loginBg,") no-repeat"),t.style.backgroundSize="cover"}))},getSomeMsg:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(m["e"])();case 2:if(r=t.sent,a=r.data,200===a.status){t.next=6;break}return t.abrupt("return",!1);case 6:if(e.allow_login_email=a.data.allow_login_email,e.allow_login_phone=a.data.allow_login_phone,e.allow_wechat=a.data.allow_wechat,1!==e.allow_login_phone){t.next=12;break}return e.activeName="phone",t.abrupt("return",!1);case 12:if(1!==e.allow_login_email){t.next=15;break}return e.activeName="email",t.abrupt("return",!1);case 15:if(1!==e.allow_wechat){t.next=18;break}return e.activeName="weChat",t.abrupt("return",!1);case 18:case"end":return t.stop()}}),t)})))()},handleClick:function(e){this.activeName=e.name,"phone"===e.name?this.$refs.resetEmailFormRef.resetFields():"email"===e.name&&this.$refs.resetPhoneFormRef.resetFields()},checkPhone:function(e){var t=/^\d{5,13}$/;return!!t.test(e)},checkEmail:function(e){var t=/^([0-9a-zA-Z]([-.\w]*[0-9a-zA-Z])*@(([0-9a-zA-Z])+([-\w]*[0-9a-zA-Z])*\.)+[a-zA-Z]{2,9})$/;return!!t.test(e)},getLogin:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(m["d"])();case 2:if(r=t.sent,a=r.data,200===a.status){t.next=6;break}return t.abrupt("return",!1);case 6:e.phoneCodeOptions=a.data;case 7:case"end":return t.stop()}}),t)})))()},getCheckedCode:d.throttle((function(){var e=this;"phone"===this.activeName?this.$refs.resetPhoneFormRef.validateField("phone",(function(t){if(t)return!1;e.$refs.resetPhoneFormRef.validateField("captcha",(function(t){if(t)return!1;e.codeByPhone(e.resetPhoneForm.phone_code,e.resetPhoneForm.phone,e.resetPhoneForm.captcha)}))})):this.$refs.resetEmailFormRef.validateField("email",(function(t){if(t)return!1;e.$refs.resetEmailFormRef.validateField("captcha",(function(t){if(t)return!1;e.codeByEmail(e.resetEmailForm.email,e.resetEmailForm.captcha)}))}))}),3e3),codeByPhone:function(e,t,r){var a=this;return Object(n["a"])(regeneratorRuntime.mark((function o(){var n,s,i;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return a.phoneErrorMsg="",a.countDownPhone(),n={phone_code:e,phone:t,captcha:r,mk:l.a.get("msfntk")},o.next=5,Object(m["h"])(n);case 5:s=o.sent,i=s.data,200!==i.status?(a.phoneErrorMsg=i.msg,clearInterval(a.timer1),a.codeBtnDisabled1=!1,a.changeBtnValue1=a.$t("login.getCode"),a.$message.error(i.msg),a.$refs.resetPhoneCaptcha.getVerify()):a.$message.success(i.msg);case 8:case"end":return o.stop()}}),o)})))()},resetPhone:d.throttle((function(){var e=this;this.$refs.resetPhoneFormRef.validate(function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(r){var a,o,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!r){t.next=20;break}return e.resetLoading=!0,a={phone_code:e.resetPhoneForm.phone_code,phone:e.resetPhoneForm.phone,code:e.resetPhoneForm.code,password:e.resetPhoneForm.password},t.next=5,Object(m["q"])(a);case 5:if(o=t.sent,n=o.data,200===n.status){t.next=12;break}return e.$message({message:n.msg,type:"error",center:!0}),e.resetLoading=!1,e.$refs.resetPhoneCaptcha.getVerify(),t.abrupt("return",!1);case 12:e.$message({message:n.msg,type:"success",center:!0}),e.resetLoading=!1,clearInterval(e.timer1),e.codeBtnDisabled1=!1,e.changeBtnValue1=e.$t("login.getCode"),e.$router.push("/login"),t.next=21;break;case 20:return t.abrupt("return",!1);case 21:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}),3e3),codeByEmail:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function r(){var a,o,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return t.emailErrorMsg="",t.countDownEmail(),a={email:e,captcha:t.resetEmailForm.captcha},r.next=5,Object(m["g"])(a);case 5:o=r.sent,n=o.data,200!==n.status?(t.emailErrorMsg=n.msg,clearInterval(t.timer2),t.codeBtnDisabled2=!1,t.changeBtnValue2=t.$t("login.getCode"),t.$message.error(n.msg),t.$refs.resetEmailCaptcha.getVerify()):t.$message.success(n.msg);case 8:case"end":return r.stop()}}),r)})))()},resetEmail:d.throttle((function(){var e=this;this.$refs.resetEmailFormRef.validate(function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(r){var a,o,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!r){t.next=20;break}return a={email:e.resetEmailForm.email,code:e.resetEmailForm.code,password:e.resetEmailForm.password},e.resetLoading=!0,t.next=5,Object(m["p"])(a);case 5:if(o=t.sent,n=o.data,200===n.status){t.next=12;break}return e.$message.error(n.msg),e.resetLoading=!1,e.$refs.resetEmailCaptcha.getVerify(),t.abrupt("return",!1);case 12:e.$message({message:n.msg,type:"success",center:!0}),e.resetLoading=!1,clearInterval(e.timer2),e.codeBtnDisabled2=!1,e.changeBtnValue2=e.$t("login.getCode"),e.$router.push("/login"),t.next=21;break;case 20:return t.abrupt("return",!1);case 21:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}),3e3),countDownPhone:function(){var e=this,t=60;this.changeBtnValue1=t+this.$t("login.timeCount"),this.timer1=setInterval((function(){0===t?(clearInterval(e.timer1),e.codeBtnDisabled1=!1,e.changeBtnValue1=e.$t("login.getCode")):(e.codeBtnDisabled1=!0,e.changeBtnValue1=t+e.$t("login.timeCount"),t--)}),1e3)},countDownEmail:function(){var e=this,t=60;this.changeBtnValue2=t+this.$t("login.timeCount"),this.timer2=setInterval((function(){0===t?(clearInterval(e.timer2),e.codeBtnDisabled2=!1,e.changeBtnValue2=e.$t("login.getCode")):(e.codeBtnDisabled2=!0,e.changeBtnValue2=t+e.$t("login.timeCount"),t--)}),1e3)}},created:function(){this.getSomeMsg(),this.getLogin(),this.getConfig()},computed:{loginBg:function(){return this.$store.state.loginBg},appComplete:function(){return this.$store.state.commlistComplete}},mounted:function(){},watch:{appComplete:{handler:function(e){e&&""===this.loginBg?this.setDefaultBg():this.setCustomBg()},immediate:!0}}},p=h,g=(r("b4d7"),r("2877")),f=Object(g["a"])(p,a,o,!1,null,"772cab46",null);t["default"]=f.exports},b4d7:function(e,t,r){"use strict";var a=r("2fd0"),o=r.n(a);o.a},ef57:function(e,t,r){e.exports=r.p+"img/new-background.0b8cb548.jpg"}}]);