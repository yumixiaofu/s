(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["StandaloneServer~31ecd969","StandaloneServerUpgradePay~0aad09ea","StandaloneServerUpgradeProduct~912b7c68"],{"0838":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"standalone_server layout_card"},[a("div",{staticClass:"page-title"},[t._v(t._s(t.host_data.group.groupname))]),a("div",{staticClass:"serve_msg"},["on"===t.powerStatus?a("el-tooltip",{attrs:{content:t.powerStatusMsg,placement:"right",effect:"light"}},[a("div",{staticClass:"power_status on_color",on:{click:t.againRefresh}})]):"off"===t.powerStatus?a("el-tooltip",{attrs:{content:t.powerStatusMsg,placement:"right",effect:"light"}},[a("div",{staticClass:"power_status off_color",on:{click:t.againRefresh}})]):"error"===t.powerStatus?a("el-tooltip",{attrs:{content:t.powerStatusMsg,placement:"right",effect:"light"}},[a("div",{staticClass:"power_status error_color",on:{click:t.againRefresh}})]):"not_support"===t.powerStatus?a("el-tooltip",{attrs:{content:t.powerStatusMsg,placement:"right",effect:"light"}},[a("div",{staticClass:"power_status not_color",on:{click:t.againRefresh}})]):t._e(),t.powerStatusLoading?a("div",[a("div",{staticClass:"loading_status el-icon-loading"})]):t._e(),a("server-header",{attrs:{serverInfo:t.host_data,animation:t.isSpeenAnimation},on:{consoleClick:t.handleClick}})],1),a("div",{staticClass:"standalone_server_nav"},[a("el-tabs",{on:{"tab-click":t.getCustom},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},["Active"===t.host_data.domainstatus&&t.host_data.auth||t.pageData.module_button.control.length?a("el-tab-pane",{attrs:{label:t.$t("standaloneServer.control"),name:"1"}},[a("control",{attrs:{id:t.id},on:{againRefresh:t.againRefresh}})],1):t._e(),"Active"===t.host_data.domainstatus&&"on"===(t.host_data.auth?t.host_data.auth.traffic:"")?a("el-tab-pane",{attrs:{label:t.$t("standaloneServer.chart"),name:"2"}},[a("chart",{attrs:{id:t.id}})],1):t._e(),"Active"===t.host_data.domainstatus||"Suspended"===t.host_data.domainstatus||"Pending"===t.host_data.domainstatus||"Fraud"===t.host_data.domainstatus?a("el-tab-pane",{attrs:{label:t.$t("standaloneServer.billing"),name:"3"}},[a("finance",{attrs:{id:t.id}})],1):t._e(),a("el-tab-pane",{attrs:{label:t.$t("standaloneServer.log"),name:"4"}},[a("log",{attrs:{id:t.id}})],1),"Active"===t.host_data.domainstatus&&0!==t.bwlimit||"已暂停"===t.host_data.domainstatus&&("用量超额"===t.suspendreason_type||"flow"===t.suspendreason_type)?a("el-tab-pane",{attrs:{label:t.$t("standaloneServer.traffic"),name:"5"}},[a("traffic",{attrs:{id:t.id}})],1):t._e(),"Active"!==t.host_data.domainstatus||1!==t.host_data.allow_upgrade_config&&1!==t.host_data.allow_upgrade_product?t._e():a("el-tab-pane",{attrs:{label:t.$t("standaloneServer.upDown"),name:"6"}},[0===t.upgradeType?a("div",{staticClass:"standaloneserver_control_box"},[1===t.host_data.allow_upgrade_product?a("div",{staticClass:"standaloneserver_control_item"},[a("div",{staticClass:"standaloneserver_control_item_title"},[t._v(t._s(t.$t("standaloneServer.upDown")))]),a("div",{staticClass:"standaloneserver_control_item_msg"},[a("div",{staticClass:"msg"},[t._v(t._s(t.$t("standaloneServer.upDownMsg")))])]),a("div",{staticClass:"standaloneserver_control_item_btn"},[a("el-button",{attrs:{plain:""},on:{click:function(e){t.upgradeType=1}}},[t._v(t._s(t.$t("standaloneServer.upDown")))])],1)]):t._e(),1===t.host_data.allow_upgrade_config?a("div",{staticClass:"standaloneserver_control_item"},[a("div",{staticClass:"standaloneserver_control_item_title"},[t._v(t._s(t.$t("standaloneServer.upDownOptions")))]),a("div",{staticClass:"standaloneserver_control_item_msg"},[a("div",{staticClass:"msg"},[t._v(t._s(t.$t("standaloneServer.upDownOptionsMsg")))])]),a("div",{staticClass:"standaloneserver_control_item_btn"},[a("el-button",{attrs:{plain:""},on:{click:function(e){t.upgradeType=2}}},[t._v(t._s(t.$t("standaloneServer.upDownOptions")))])],1)]):t._e()]):t._e(),1===t.upgradeType?a("upgradeProduct",{on:{nextClick:function(e){return t.upgradeNext(1)}}}):t._e(),2===t.upgradeType?a("upgradeConfig",{on:{nextClick:function(e){return t.upgradeNext(2)}}}):t._e(),3===t.upgradeType?a("upgradePay",{attrs:{upgradeTypeChild:t.upgradeTypeChild}}):t._e()],1),t.module_chart.length>0&&"Active"===t.host_data.domainstatus?a("el-tab-pane",{attrs:{label:t.$t("cloudServer.charts"),name:"7"}},[a("div",{staticClass:"info_box_chart info_box_list"},[a("el-row",{attrs:{gutter:40}},[t._l(t.module_chart,(function(e){return[a("el-col",{key:e.type,attrs:{xs:24,md:24,lg:12}},[a("div",{staticClass:"box_chart_flow"},[a("div",{staticClass:"chart_flow_title"},[a("div",{staticClass:"flow_title_text"},[t._v(t._s(e.title))])]),a("flowEcharts",{ref:"flowEcharts"+e.type,refInFor:!0,attrs:{moduleChart:e,hostId:parseInt(t.id),toDayDate:parseInt(1e3*t.host_data.regdate)}})],1)])]}))],2)],1)]):t._e(),this.download_data.length?a("el-tab-pane",{attrs:{name:"8",label:"文件下载"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{height:t.$height-470,data:t.download_data,border:"","header-row-class-name":"innerTableHeader","row-class-name":"innerTableRowClass","cell-class-name":"innerTableCellClass"}},[a("el-table-column",{attrs:{prop:"title",label:"文件名"}}),a("el-table-column",{attrs:{prop:"description",label:"文件描述"}}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.goDownload(n)}}},[t._v("立即下载")])]}}],null,!1,1668826208)})],1)],1):t._e(),t._l(t.module_client_area,(function(e,n){return a("el-tab-pane",{key:n,attrs:{label:e.name,name:e.key}},[isNaN(parseInt(t.activeName))?a("embed",{staticStyle:{width:"100%"},attrs:{height:"800",src:t.htmlContent,type:""}}):t._e()])}))],2)],1),a("second",{attrs:{secondVerifyVis:t.secondVerifyVis,secondAction:t.secondAction,btnLoading:t.btnLoading},on:{secondClose:function(e){t.secondVerifyVis=!1},secondeVerifySuccess:t.secondeVerifySuccess}})],1)},s=[],i=(a("99af"),a("4160"),a("caad"),a("b0c0"),a("a9e3"),a("2532"),a("159b"),a("96cf"),a("1da1")),r=a("a78e"),o=a.n(r),c=a("318a"),l=a("27fd"),d=a("2a69"),u=a("32d2"),p=a("372e"),h=a("31d7"),f=a("126a"),m=a("4c8e"),g=a("163e"),_=a("3adc"),v=a("b489"),b=a("bbcf"),y=a("6bb6"),w={metaInfo:function(){return{title:this.host_data.group.groupname,titleTemplate:"%s - "+this.host_data.domain+(this.companyname?" - "+this.companyname:""),htmlAttrs:{lang:this.$t("htmlAttrs.lang"),amp:!0}}},data:function(){return{pageData:{module_button:{console:[],control:[]}},download_data:[],groupid:Number(this.$route.query.groupid),companyname:"",id:Number(this.$route.query.id),host_data:{domain:"",productname:"",auth:{bmc:"off",crack_pass:"off",ikvm:"off",kvm:"off",novnc:"off",off:"off",on:"off",reboot:"off",reinstall:"off",rescue:"off",traffic:"off"},domainstatus_desc:"",config_options:[],custom_field_data:[],assignedips:[],hasSelect:!1,svg:"",group:{fa_icon:"",groupname:"",id:0}},powerStatus:"",bwlimit:0,suspendreason_type:"",isSpeenAnimation:!1,powerStatusMsg:"",powerStatusLoading:!1,activeName:"3",htmlContent:"",module_chart:[],module_client_area:[],upgradeType:0,upgradeTypeChild:"product",userInfo:{},allow_second_verify:0,second_verify_action_home:[],secondVerifyVis:!1,btnLoading:!1,secondAction:""}},components:{ServerHeader:c["default"],control:d["default"],chart:u["default"],finance:p["default"],log:h["default"],traffic:f["default"],flowEcharts:m["a"],upgradeProduct:g["default"],upgradeConfig:_["default"],upgradePay:v["default"],second:b["default"]},computed:{updateHostData:function(){return this.$store.state.currentProHostData}},watch:{updateHostData:function(t){this.getData()}},methods:{goDownload:function(t){t.url?open(t.url+"&jwt="+o.a.get("OrfLcI2IqQItv0vS")):this.$message.error("该文件没有下载链接")},getData:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(l["x"])(t.id);case 2:if(a=e.sent,n=a.data,200===n.status){e.next=6;break}return e.abrupt("return",!1);case 6:t.companyname=n.data.system_config.company_name,t.download_data=n.data.download_data,t.$eventBus.$emit("showOs",n.data.module_power_status),t.host_data=n.data.host_data,t.host_data.config_options=n.data.config_options,t.host_data.custom_field_data=n.data.custom_field_data,t.host_data.svg=n.data.dcim.svg,t.host_data.group=n.data.host_data.group,n.data.dcim&&(t.host_data.auth=n.data.dcim.auth?n.data.dcim.auth:void 0),t.host_data.id=t.id,t.bwlimit=n.data.host_data.bwlimit,t.suspendreason_type=n.data.host_data.suspendreason_type,t.host_data.domainstatus_desc=n.data.host_data.domainstatus_desc,"已激活"===n.data.host_data.domainstatus_desc&&n.data.dcim.auth&&(t.host_data.hasSelect=!0),n.data.module_power_status&&t.refreshStatus(),"dcim"!==n.data.host_data.type&&(t.module_chart=n.data.module_chart,t.module_client_area=n.data.module_client_area,setTimeout((function(){t.module_chart&&t.module_chart.forEach((function(e){void 0!==t.$refs["flowEcharts"+e.type]&&"undefined"!==t.$refs["flowEcharts"+e.type]&&(t.$refs["flowEcharts"+e.type][0].type=e.type,t.$refs["flowEcharts"+e.type][0].init())}))}),0)),0===t.host_data.dcimid&&"dcimcloud"===t.host_data.type||0===t.host_data.serverid&&0===t.host_data.zjmf_api_id||"Suspended"===t.host_data.domainstatus||"Pending"===t.host_data.domainstatus||"Cancelled"===t.host_data.domainstatus||"Fraud"===t.host_data.domainstatus?t.activeName="3":"Active"===t.host_data.domainstatus&&(t.host_data.auth||n.data.module_button.control.length)?t.activeName="1":"Deleted"===t.host_data.domainstatus?t.activeName="4":t.activeName="3",t.pageData=n.data;case 24:case"end":return e.stop()}}),e)})))()},handleClick:function(t){"kvm"===t?1===parseInt(this.allow_second_verify)&&1===parseInt(this.userInfo.second_verify)&&this.second_verify_action_home.includes("kvm")?(this.secondAction="kvm",this.secondVerifyVis=!0):this.kvmTransfer():"ikvm"===t?1===parseInt(this.allow_second_verify)&&1===parseInt(this.userInfo.second_verify)&&this.second_verify_action_home.includes("ikvm")?(this.secondAction="ikvm",this.secondVerifyVis=!0):this.ikvmTransfer():"vnc"===t&&(1===parseInt(this.allow_second_verify)&&1===parseInt(this.userInfo.second_verify)&&this.second_verify_action_home.includes("vnc")?(this.secondAction="vnc",this.secondVerifyVis=!0):this.vncTransfer())},getOperStatusFunc:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(l["r"])(t.id);case 2:a=e.sent,n=a.data,200===n.status&&n.data.length;case 5:case"end":return e.stop()}}),e)})))()},getShopCode:function(t){this.isSpeenAnimation=t},kvmTransfer:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var n,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e.btnLoading=!0,a.next=3,Object(l["A"])(e.id,t);case 3:n=a.sent,s=n.data,200===s.status?(e.downloadJavaFunc(s.name,s.token),e.secondVerifyVis=!1):e.$swal("",s.msg,"error"),e.btnLoading=!1;case 7:case"end":return a.stop()}}),a)})))()},ikvmTransfer:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var n,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e.btnLoading=!0,a.next=3,Object(l["z"])(e.id,t);case 3:n=a.sent,s=n.data,200===s.status?(e.downloadJavaFunc(s.name,s.token),e.secondVerifyVis=!1):e.$swal("",s.msg,"error"),e.btnLoading=!1;case 7:case"end":return a.stop()}}),a)})))()},vncTransfer:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a,n,s,i,r,o,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.btnLoading=!0,e.next=3,Object(l["B"])({id:t.id});case 3:a=e.sent,n=a.data,200===n.status?(t.secondVerifyVis=!1,s="".concat(t.$baseUrl,"/dcim/novnc?password=").concat(n.data.password,"&url=").concat(n.data.url),i=1100,r=550,o=(window.screen.availHeight-30-r)/2,c=(window.screen.availWidth-10-i)/2,window.open(s,"QRcodeWin"+t.id,"height="+r+", width="+i+", top="+o+", left="+c+",toolbar=no, menubar=no,  scrollbars=yes,resizable=yes,location=no, status=no")):t.$swal("",n.msg,"error"),t.btnLoading=!1;case 7:case"end":return e.stop()}}),e)})))()},downloadJavaFunc:function(t,e){var a=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:s=document.createElement("a"),s.download=t,s.style.display="none",s.href="".concat(a.$baseUrl,"/dcim/download?name=").concat(t,"&token=").concat(e),document.body.appendChild(s),s.click(),document.body.removeChild(s);case 7:case"end":return n.stop()}}),n)})))()},totalFunc:function(t){var e=this;setTimeout((function(){200===t.status?e.$notify({title:"成功",message:t.msg,type:"success",offset:80}):e.$notify({title:"失败",message:t.msg,type:"error",offset:80})}),2e3)},refreshStatus:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.powerStatus="",t.powerStatusLoading=!0,e.next=4,Object(l["G"])(t.id);case 4:if(a=e.sent,n=a.data,200===n.status){e.next=9;break}return t.powerStatusLoading=!0,e.abrupt("return",!1);case 9:t.powerStatus=n.data.length?n.data[0].status:"",t.powerStatusMsg=n.data.length?n.data[0].msg:"",t.powerStatusLoading=!1;case 12:case"end":return e.stop()}}),e)})))()},againRefresh:function(){this.refreshStatus()},getCustom:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:t&&(parseInt(t.name)<=7||(n=localStorage.getItem("OrfLcI2IqQItv0vS"),e.htmlContent=e.$baseUrl+"/provision/custom/content?id="+e.id+"&key="+t.name+"&jwt="+n),"6"===t.name&&(e.upgradeType=0));case 1:case"end":return a.stop()}}),a)})))()},resize:function(){var t=this;this.module_chart.forEach((function(e){t.$refs["flowEcharts"+e.type][0]&&t.$refs["flowEcharts"+e.type][0].resize(e.type)})),this.screenWidth=document.body.clientWidth,this.type=this.screenWidth>900?"left":"top",this.popWidth=this.screenWidth>900?400:320},upgradeNext:function(t){this.upgradeType=3,1===t?this.upgradeTypeChild="product":2===t&&(this.upgradeTypeChild="config")},getUserInfo:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(y["l"])();case 2:a=e.sent,n=a.data,200!==n.status?t.$message.error(n.msg):(t.allow_second_verify=n.allow_second_verify,t.second_verify_action_home=n.second_verify_action_home,t.userInfo=n.user);case 5:case"end":return e.stop()}}),e)})))()},secondeVerifySuccess:function(t){"kvm"===this.secondAction?this.kvmTransfer(t.code):"ikvm"===this.secondAction?this.ikvmTransfer(t.code):"vnc"===this.secondAction&&this.vncTransfer(t.code)}},created:function(){this.getData(),this.getUserInfo()},mounted:function(){var t,e=this;this.getOperStatusFunc(),window.addEventListener("resize",(function(){t&&clearTimeout(t),t=setTimeout((function(){t=null,e.resize()}),300)})),this.$once("hook:beforeDestroy",(function(){window.removeEventListener("resize",e.resize)}))}},x=w,C=(a("f27d"),a("2877")),D=Object(C["a"])(x,n,s,!1,null,"c462dafe",null);e["default"]=D.exports},"126a":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"standaloneserver_traffic"},[a("div",{staticClass:"standaloneserver_traffic_chart"},[a("div",{staticClass:"chart_title"},[a("div",{staticClass:"chart_titlel"},[t._v(t._s(t.$t("standaloneServer.usageStatistics")))]),a("div",{staticClass:"chart_titler"},[a("el-select",{model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},t._l(t.options,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)]),a("div",{staticClass:"chart_box",attrs:{id:"trafficCanvas"}})]),a("div",{staticClass:"standaloneserver_traffic_list"},[a("div",{staticClass:"list_title"},[a("div",{staticClass:"list_titlel"},[a("div",{staticClass:"list_titlel_top"},[a("div",{staticClass:"list_titlel_topl"},[a("span",{staticStyle:{fontSize:"16px"}},[t._v(t._s(t.$t("standaloneServer.remainingFlow")))]),t._v(" / "),a("span",{staticStyle:{fontSize:"12px"}},[t._v(t._s(t.$t("standaloneServer.totalFlow")))])]),a("div",{staticClass:"list_titlel_topr"},[t.less>=0?a("div",[a("span",{staticStyle:{fontWeight:"700",fontSize:"16px",color:"#007bfc"}},[t._v(t._s(t.less)+"GB")]),t._v(" / "),a("span",{staticStyle:{fontSize:"12px"}},[t._v(t._s(t.bwlimit)+"GB")])]):a("div",[a("span",{staticStyle:{fontWeight:"700",fontSize:"16px",color:"red"}},[t._v(t._s(t.less)+"GB")]),t._v(" / "),a("span",{staticStyle:{fontSize:"12px"}},[t._v(t._s(t.bwlimit)+"GB")])])])]),a("div",{staticClass:"list_titlel_foot"},[a("div",{staticClass:"progress"},[a("el-progress",{staticStyle:{width:"100%"},attrs:{percentage:t.percentage,"show-text":!1}})],1)])]),a("div",{staticClass:"list_titler"},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.dialogTableVisible=!0}}},[t._v(t._s(t.$t("standaloneServer.order")))])],1)]),a("div",{staticClass:"list_box"},[a("div",{staticClass:"list_table"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.frontEndPageChange,"header-cell-style":{"font-size":"14px",color:"#7c7c7c","font-weight":"normal"}}},[a("el-table-column",{attrs:{prop:"name",label:t.$t("standaloneServer.name"),align:"center",sortable:""}}),a("el-table-column",{attrs:{prop:"capacity",label:t.$t("standaloneServer.total"),align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[a("span",[t._v(t._s(n.capacity)+" GB")])]}}])}),a("el-table-column",{attrs:{prop:"leave",label:t.$t("standaloneServer.Remain"),align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[a("span",[t._v(t._s(n.leave)+" GB")])]}}])}),a("el-table-column",{attrs:{prop:"pay_time",label:t.$t("standaloneServer.orderTime"),align:"center",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[a("span",[t._v(t._s(t.$moment(1e3*n.pay_time).format("YYYY-MM-DD")))])]}}])})],1)],1),a("div",{staticClass:"list_page"},[a("el-pagination",{attrs:{background:"",layout:" prev, pager, next","prev-text":t.$t("Previous"),"next-text":t.$t("Nextpage"),"page-size":t.limit,total:t.total,"pager-count":5},on:{"current-change":t.handlePageChange}})],1)])]),a("el-dialog",{attrs:{title:t.$t("standaloneServer.orderFlowPack"),visible:t.dialogTableVisible},on:{"update:visible":function(e){t.dialogTableVisible=e}}},[a("div",{staticClass:"dialog_table"},[a("el-table",{attrs:{data:t.gridData,"header-cell-style":{"font-size":"14px",color:"#7c7c7c","font-weight":"normal"}}},[a("el-table-column",{attrs:{property:"name",label:t.$t("standaloneServer.flowname")},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[a("span",[t._v(t._s(n.name))]),t._v(" "),0===n.leave?a("span",[t._v("("+t._s(t.$t("standaloneServer.outOfStock"))+")")]):t._e()]}}])}),a("el-table-column",{attrs:{property:"capacity",label:t.$t("standaloneServer.flow")},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[a("span",[t._v(t._s(n.capacity)+" GB")])]}}])}),a("el-table-column",{attrs:{property:"price",label:t.$t("standaloneServer.price")},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[a("span",[t._v(t._s(t.currency.prefix)+" "+t._s(n.price)+" "+t._s(t.currency.suffix))])]}}])}),a("el-table-column",{attrs:{label:t.$t("standaloneServer.order"),align:"center",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[a("el-button",{attrs:{type:"primary",size:"mini",disabled:!n.leave},on:{click:function(e){return t.buy(n)}}},[t._v(" "+t._s(t.$t("standaloneServer.buyNow")))])]}}])})],1)],1)]),a("payNew",{ref:"control",on:{"pay-success":t.reloadList,"balance-success":t.reList}})],1)},s=[],i=(a("fb6a"),a("b0c0"),a("a9e3"),a("b680"),a("96cf"),a("1da1")),r=a("27fd"),o=a("99afe"),c=a("2ef0"),l={data:function(){return{chartData:[],value:7,start:"",options:[{value:7,label:this.$t("standaloneServer.selectTime7")},{value:15,label:this.$t("standaloneServer.selectTime15")},{value:30,label:this.$t("standaloneServer.selectTime30")}],bwlimit:0,bwusage:0,less:0,percentage:0,dialogTableVisible:!1,gridData:[],currency:{},page:1,limit:6,total:0,tableData:[]}},props:{id:{type:Number,default:0}},methods:{getData:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(r["w"])(t.id);case 2:if(a=e.sent,n=a.data,200===n.status){e.next=7;break}return t.$message.error(n.msg),e.abrupt("return",!1);case 7:t.currency=n.data.currency,t.gridData=n.data.dcim.flowpacket,t.bwlimit=n.data.host_data.bwlimit,t.bwusage=n.data.host_data.bwusage,t.less=parseFloat((n.data.host_data.bwlimit-n.data.host_data.bwusage).toFixed(2)),t.percentage=(t.less<=0?0:t.less)/(n.data.host_data.bwlimit?n.data.host_data.bwlimit:1)*100,t.tableData=n.data.dcim.flow_packet_use_list,t.total=n.data.dcim.flow_packet_use_list.length;case 15:case"end":return e.stop()}}),e)})))()},getChartData:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.chartData=[],0!==t.id){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,Object(r["v"])(t.id,t.start);case 5:if(a=e.sent,n=a.data,200===n.status){e.next=9;break}return e.abrupt("return",!1);case 9:t.chartData=n.data,t.initCharts();case 11:case"end":return e.stop()}}),e)})))()},initCharts:function(){var t=this.$t("standaloneServer.traffic");this.columnPlot&&this.columnPlot.destroy(),this.columnPlot=new o["a"]("trafficCanvas",{data:this.chartData,xField:"time",yField:"value",meta:{value:{alias:t}},color:"#007bfc",yAxis:{label:{suffix:"GB"},title:{visible:!1},grid:{visible:!1}},xAxis:{title:{visible:!1}}}),this.columnPlot.render()},buy:c.throttle(function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(r["d"])(this.id,e.id);case 2:if(a=t.sent,n=a.data,200===n.status){t.next=7;break}return this.$message.error(n.msg),t.abrupt("return",!1);case 7:this.dialogTableVisible=!1,this.$refs.control.main({id:n.data.invoiceid,name:e.name});case 9:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),200),reloadList:function(t){t&&this.getData()},reList:function(t){t&&this.getData()},handlePageChange:function(t){this.page=t}},created:function(){this.getData(),this.getChartData()},computed:{frontEndPageChange:function(){var t=(this.page-1)*this.limit,e=this.page*this.limit;return this.tableData.slice(t,e)}},watch:{value:{handler:function(t){7===t?(this.start=this.$moment(Date.now()-5184e5).format("YYYY-MM-DD"),this.getChartData()):15===t?(this.start=this.$moment(Date.now()-12096e5).format("YYYY-MM-DD"),this.getChartData()):30===t&&(this.start=this.$moment(Date.now()-25056e5).format("YYYY-MM-DD"),this.getChartData())},immediate:!0}}},d=l,u=(a("ad9a"),a("2877")),p=Object(u["a"])(d,n,s,!1,null,"bf22e18e",null);e["default"]=p.exports},1276:function(t,e,a){"use strict";var n=a("d784"),s=a("44e7"),i=a("825a"),r=a("1d80"),o=a("4840"),c=a("8aa5"),l=a("50c4"),d=a("14c3"),u=a("9263"),p=a("d039"),h=[].push,f=Math.min,m=4294967295,g=!p((function(){return!RegExp(m,"y")}));n("split",2,(function(t,e,a){var n;return n="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,a){var n=String(r(this)),i=void 0===a?m:a>>>0;if(0===i)return[];if(void 0===t)return[n];if(!s(t))return e.call(n,t,i);var o,c,l,d=[],p=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),f=0,g=new RegExp(t.source,p+"g");while(o=u.call(g,n)){if(c=g.lastIndex,c>f&&(d.push(n.slice(f,o.index)),o.length>1&&o.index<n.length&&h.apply(d,o.slice(1)),l=o[0].length,f=c,d.length>=i))break;g.lastIndex===o.index&&g.lastIndex++}return f===n.length?!l&&g.test("")||d.push(""):d.push(n.slice(f)),d.length>i?d.slice(0,i):d}:"0".split(void 0,0).length?function(t,a){return void 0===t&&0===a?[]:e.call(this,t,a)}:e,[function(e,a){var s=r(this),i=void 0==e?void 0:e[t];return void 0!==i?i.call(e,s,a):n.call(String(s),e,a)},function(t,s){var r=a(n,t,this,s,n!==e);if(r.done)return r.value;var u=i(t),p=String(this),h=o(u,RegExp),_=u.unicode,v=(u.ignoreCase?"i":"")+(u.multiline?"m":"")+(u.unicode?"u":"")+(g?"y":"g"),b=new h(g?u:"^(?:"+u.source+")",v),y=void 0===s?m:s>>>0;if(0===y)return[];if(0===p.length)return null===d(b,p)?[p]:[];var w=0,x=0,C=[];while(x<p.length){b.lastIndex=g?x:0;var D,S=d(b,g?p:p.slice(x));if(null===S||(D=f(l(b.lastIndex+(g?0:x)),p.length))===w)x=c(p,x,_);else{if(C.push(p.slice(w,x)),C.length===y)return C;for(var k=1;k<=S.length-1;k++)if(C.push(S[k]),C.length===y)return C;x=w=D}}return C.push(p.slice(w)),C}]}),!g)},"163e":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"box"},[t.productList.length?t._e():a("div",{staticClass:"tac"},[t._v(t._s(t.$t("standaloneServer.noUpDownProduct")))]),t._l(t.productList,(function(e,n){return a("div",{key:"pro"+n,class:{upgrade_proitem_box:e.host,upgrade_proitem_box_active:t.upgradeSubmitData.pid===e.pid},on:{click:function(a){return t.proChange(e.pid)}}},[e.host?a("el-row",[a("el-col",{attrs:{lg:18,xs:16}},[t._v(t._s(e.host))]),a("el-col",{staticClass:"tar",attrs:{lg:6,xs:8}},[a("el-select",{on:{change:t.cycleChange},model:{value:e.billingcycle,callback:function(a){t.$set(e,"billingcycle",a)},expression:"proItem.billingcycle"}},t._l(e.cycle,(function(e,n){return a("el-option",{key:"cycle"+n,attrs:{label:t.currency.prefix+e.price+t.currency.suffix+" / "+e.billingcycle_zh+(Number(e.saleproducts)?"(客户折扣："+t.currency.prefix+Number(e.saleproducts).toFixed(2)+t.currency.suffix+")":""),value:e.billingcycle}})})),1)],1)],1):t._e()],1)})),t.productList.length?a("div",{staticClass:"tar"},[a("el-button",{attrs:{type:"primary",disabled:!t.upgradeSubmitData.pid},on:{click:t.nextHandleClick}},[t._v(" "+t._s(t.$t("standaloneServer.next")))])],1):t._e()],2)},s=[],i=(a("4160"),a("159b"),a("96cf"),a("1da1")),r=a("27fd"),o={data:function(){return{groupid:this.$route.query.groupid,id:this.$route.query.id,productList:[1],upgradeSubmitData:{hid:this.$route.query.id,pid:0,billingcycle:void 0,currencyid:void 0,promo_code:void 0},currency:void 0,toPayParams:{}}},computed:{},watch:{},methods:{getData:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(r["P"])({hid:t.id,currencyid:void 0});case 2:a=e.sent,n=a.data,200!==n.status||((n.data.host||[]).forEach((function(t){t.billingcycle=t.cycle.length?t.cycle[0].billingcycle:void 0})),t.upgradeSubmitData.pid=n.data.host[0].pid,t.productList=n.data.host,t.currency=n.data.currency);case 5:case"end":return e.stop()}}),e)})))()},proChange:function(t){var e=this;this.upgradeSubmitData.pid=t,(this.productList||[]).forEach((function(a){a.pid===t&&a.cycle.length&&e.cycleChange(a.billingcycle)}))},cycleChange:function(t){var e=this;(this.productList||[]).forEach((function(a){(a.cycle||[]).forEach((function(a){t===a.billingcycle&&(e.upgradeSubmitData.billingcycle_zh=a.billingcycle_zh)}))}))},nextHandleClick:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.upgradeSubmitData.currencyid=t.currency.id,(t.productList||[]).forEach((function(e){e.pid===t.upgradeSubmitData.pid&&(t.upgradeSubmitData.billingcycle=e.billingcycle,t.toPayParams.newHost=e)})),e.next=4,Object(r["R"])(t.upgradeSubmitData);case 4:a=e.sent,n=a.data,200!==n.status?t.$message.error(n.msg):t.$emit("nextClick");case 7:case"end":return e.stop()}}),e)})))()}},created:function(){this.getData()},mounted:function(){}},c=o,l=(a("2223"),a("2877")),d=Object(l["a"])(c,n,s,!1,null,"81f3f03c",null);e["default"]=d.exports},2223:function(t,e,a){"use strict";var n=a("9744"),s=a.n(n);s.a},"31d7":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"standaloneserver_log"},[a("div",{staticClass:"standaloneserver_log_search"},[a("el-input",{attrs:{placeholder:t.$t("standaloneServer.placeholderSearch")},model:{value:t.search.input,callback:function(e){t.$set(t.search,"input",e)},expression:"search.input"}})],1),a("div",{staticClass:"standaloneserver_log_table"},[a("el-table",{staticStyle:{width:"100%"},attrs:{height:t.$height-550,data:t.tableData,"header-row-class-name":"innerTableHeader","row-class-name":"innerTableRowClass","cell-class-name":"innerTableCellClass"},on:{"sort-change":t.changeSort}},[a("el-table-column",{attrs:{prop:"create_time",label:t.$t("standaloneServer.operatingTime"),align:"center",width:"180",sortable:"custom"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[a("div",[t._v(t._s(t.$moment(1e3*n.create_time).format("YYYY-MM-DD HH:mm:ss")))])]}}])}),a("el-table-column",{attrs:{prop:"description",label:t.$t("standaloneServer.operatingDetail")},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[a("div",{domProps:{innerHTML:t._s(n.description)}})]}}])}),a("el-table-column",{attrs:{prop:"user",label:t.$t("standaloneServer.operator"),align:"center",width:"150",sortable:"custom"}}),a("el-table-column",{attrs:{prop:"ipaddr",label:t.$t("standaloneServer.ipAddress"),align:"center",width:"150",sortable:"custom"}})],1)],1),a("div",{staticClass:"standaloneserver_log_pagination"},[a("el-pagination",{attrs:{background:"",layout:"total, sizes, prev, pager, next","prev-text":t.$t("Previous"),"next-text":t.$t("Nextpage"),"current-page":t.page,"page-size":t.limit,total:t.total,"pager-count":5},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)])},s=[],i=(a("a9e3"),a("ac1f"),a("841c"),a("96cf"),a("1da1")),r=a("27fd"),o={data:function(){return{page:1,limit:20,total:0,orderby:"id",sort:"desc",search:{input:"",timer:null},tableData:[]}},props:{id:{type:Number,default:0}},methods:{getData:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(r["q"])(t.id,t.page,t.limit,t.orderby,t.sort,t.search.input);case 2:if(a=e.sent,n=a.data,200===n.status){e.next=7;break}return t.$message.error(n.msg),e.abrupt("return",!1);case 7:t.total=n.data.count,t.tableData=n.data.log_list;case 9:case"end":return e.stop()}}),e)})))()},handleSizeChange:function(t){this.limit=t,this.getData()},handleCurrentChange:function(t){this.page=t,this.getData()},changeSort:function(t){"descending"===t.order?(this.orderby=t.prop,this.sort="desc"):(this.orderby=t.prop,this.sort="asc"),this.getData()}},created:function(){this.getData()},watch:{"search.input":{handler:function(){var t=this;this.search.timer&&clearTimeout(this.search.timer),this.search.timer=setTimeout((function(){t.getData()}),200)},deep:!0}}},c=o,l=(a("a793"),a("2877")),d=Object(l["a"])(c,n,s,!1,null,"ccfeac58",null);e["default"]=d.exports},"32d2":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"standaloneserver_chart"},[t.noData?a("div",{staticClass:"charts_item_empty"},[a("div",[t._v(t._s(t.$t("standaloneServer.noData")))])]):t._l(t.chartsData,(function(e,n){return a("div",{key:n,staticClass:"charts_item"},[a("div",{staticClass:"standaloneserver_chart_title"},[a("div",{staticClass:"standaloneserver_chart_titlel"},[t._v(t._s(t.$t("standaloneServer.flowChart")+" "+(n+1)))]),a("div",{staticClass:"standaloneserver_chart_titler"},[a("el-select",{attrs:{placeholder:t.$t("standaloneServer.placeholderSelectTime")},on:{change:function(e){return t.getChartDataFn(n)}},model:{value:t.typeArray[n].type,callback:function(e){t.$set(t.typeArray[n],"type",e)},expression:"typeArray[index].type"}},t._l(t.options,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)]),t._m(0,!0),a("div",{staticClass:"chart",attrs:{id:"myCanvas"+n}})])}))],2)},s=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"standaloneserver_chart_btn"},[a("div",{staticClass:"standaloneserver_chart_btnl"}),a("div",{staticClass:"standaloneserver_chart_btnr"})])}],i=(a("b0c0"),a("a9e3"),a("b85c")),r=(a("96cf"),a("1da1")),o=a("27fd"),c={data:function(){return{chartsData:[],timeArray:[],typeArray:[],options:[{value:"24",label:this.$t("standaloneServer.selectTime24")},{value:"3",label:this.$t("standaloneServer.selectTime3")},{value:"7",label:this.$t("standaloneServer.selectTime7")},{value:"30",label:this.$t("standaloneServer.selectTime30")},{value:"999",label:this.$t("standaloneServer.selectTimeAll")}],switch_id:[],name:[],noData:!1}},props:{id:{type:Number,default:0}},methods:{getId:function(){},getComponentData:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var a,n,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(o["n"])(t.id);case 2:if(a=e.sent,n=a.data,200===n.status){e.next=7;break}return t.noData=!0,e.abrupt("return",!1);case 7:for(t.chartsData=n.data.switch?n.data.switch:[],s=0;s<t.chartsData.length;s++)t.timeArray.push({startTime:"",endTime:""}),t.typeArray.push({type:"7"}),t.switch_id.push(t.chartsData[s].switch_id),t.name.push(t.chartsData[s].name),t.getChartDataFn(s);case 9:case"end":return e.stop()}}),e)})))()},chartFunc:function(t,e,n,s,i){var r=this.$t("standaloneServer.inflow"),o=this.$t("standaloneServer.outflow"),c=a("313e"),l=c.init(document.getElementById("myCanvas"+t)),d={tooltip:{show:!0,backgroundColor:"#fff",borderColor:"#eee",showContent:!0,extraCssText:"box-shadow: 0 1px 9px rgba(0, 0, 0, 0.1);",textStyle:{color:"#1e1e2d",textBorderWidth:1},trigger:"axis",axisPointer:{color:"#D9DAEA"}},grid:{left:"5%",right:"5%",bottom:"10%",top:"8%",containLabel:!0},color:["#007bfc","#3fbf70"],xAxis:{splitLine:{show:!1},axisLine:{lineStyle:{color:"#1e1e2d"}},axisTick:{show:!1},type:"category",boundaryGap:!1,data:e},yAxis:{axisLabel:{formatter:function(t){return t+i}},axisLine:{show:!1},minorTick:{show:!1},axisTick:{show:!1},splitLine:{lineStyle:{color:"#f5f4f8"}},type:"value"},series:[{name:r,type:"line",smooth:!0,data:n},{name:o,type:"line",smooth:!0,data:s}]};l.setOption(d,!0),window.addEventListener("resize",(function(){l.resize()})),this.$once("hook:beforeDestroy",(function(){window.removeEventListener("resize",(function(){l.resize()}))}))},selectTimeTypeFunc:function(t){"7"===this.typeArray[t].type?this.timeArray[t].startTime=this.$moment(Date.now()-6048e5).format("YYYY-MM-DD"):"3"===this.typeArray[t].type?this.timeArray[t].startTime=this.$moment(Date.now()-2592e5).format("YYYY-MM-DD"):"30"===this.typeArray[t].type?this.timeArray[t].startTime=this.$moment(Date.now()-2592e6).format("YYYY-MM-DD"):"24"===this.typeArray[t].type?this.timeArray[t].startTime=this.$moment(Date.now()-864e5).format("YYYY-MM-DD"):"999"===this.typeArray[t].type&&(this.timeArray[t].startTime="")},getChartDataFn:function(t){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function a(){var n,s,r,c,l,d,u,p,h,f,m;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e.selectTimeTypeFunc(t),a.next=3,Object(o["o"])(e.id,e.switch_id[t],e.name[t],e.$moment(e.timeArray[t].startTime).valueOf());case 3:if(n=a.sent,s=n.data,200===s.status){0===s.data.traffic.length&&(e.noData=!0),r=s.data.traffic,c=[],l=[],d=[],u=[],p=[],h=Object(i["a"])(r);try{for(h.s();!(f=h.n()).done;)m=f.value,"in"===m.type?(c.push(m),d.push(e.$moment(m.time).format("MM-DD HH:mm:ss")),u.push(m.value)):"out"===m.type&&(l.push(m),p.push(m.value))}catch(g){h.e(g)}finally{h.f()}e.chartFunc(t,d,u,p,s.data.unit)}case 6:case"end":return a.stop()}}),a)})))()}},created:function(){this.getId(),this.getComponentData()}},l=c,d=(a("9793"),a("2877")),u=Object(d["a"])(l,n,s,!1,null,"6014c27e",null);e["default"]=u.exports},3605:function(t,e,a){},"3adc":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"box"},[t.configs.length?t._e():a("div",{staticClass:"tac"},[t._v(t._s(t.$t("standaloneServer.noUpDownProduct")))]),t._l(t.configs,(function(e,n){return a("div",{key:"config"+n,staticClass:"upgrade_configitem_box mb-20"},[e.option_name?a("el-row",[a("el-col",{attrs:{span:8}},[a("div",[t._v(" "+t._s(e.option_name)+" : "),[4,7,9,11,14,15,16,17,18,19].includes(e.option_type)?a("span",[t._v(t._s(e.qty_zh)+" "),4===e.option_type||15===e.option_type?a("span",{staticClass:"quantity_unit"},[t._v("个")]):t._e(),7===e.option_type||16===e.option_type?a("span",{staticClass:"quantity_unit"},[t._v("核心")]):t._e(),9===e.option_type||17===e.option_type?a("span",{staticClass:"quantity_unit"},[t._v("GB")]):t._e(),11===e.option_type||18===e.option_type?a("span",{staticClass:"quantity_unit"},[t._v("Mbps")]):t._e(),14===e.option_type||19===e.option_type?a("span",{staticClass:"quantity_unit"},[t._v("GB")]):t._e()]):a("span",[t._v(t._s(e.suboption_name))]),a("span",{staticClass:"fr"},[t._v(">>>")])])]),a("el-col",{attrs:{span:16}},[1===e.option_type?a("div",{staticClass:"pl-20"},[a("el-select",{attrs:{placeholder:t.$t("standaloneServer.pleaseSelect")},on:{change:t.changeConfigsData},model:{value:e.subid,callback:function(a){t.$set(e,"subid",a)},expression:"configItem.subid"}},t._l(e.sub,(function(t){return a("el-option",{key:t.id,attrs:{disabled:t.disabled,label:t.show_pricing,value:t.id}})})),1)],1):t._e(),2===e.option_type?a("div",{staticClass:"pl-20"},t._l(e.sub,(function(n,s){return a("el-radio",{key:"Radio"+s,attrs:{disabled:n.disabled,label:n.id},on:{change:t.changeConfigsData},model:{value:e.subid,callback:function(a){t.$set(e,"subid",a)},expression:"configItem.subid"}},[t._v(t._s(n.show_pricing))])})),1):t._e(),3===e.option_type?a("div",{staticClass:"pl-20"},t._l(e.sub,(function(n,s){return a("el-checkbox",{key:"yes/no"+s,attrs:{disabled:n.disabled,"true-label":n.id,"false-label":void 0},on:{change:t.changeConfigsData},model:{value:e.subid,callback:function(a){t.$set(e,"subid",a)},expression:"configItem.subid"}},[t._v(t._s(n.show_pricing)+" ")])})),1):t._e(),[4,7,9,11,14,15,16,17,18,19].includes(e.option_type)?a("div",{staticClass:"quantity_box"},[a("el-slider",{staticClass:"fl quantity_box_slider",attrs:{"format-tooltip":t.formatTooltip,min:e.qty_minimum,max:e.qty_maximum,disabled:e.qty_minimum===e.qty_maximum},on:{change:t.changeConfigsData},model:{value:e.qty,callback:function(a){t.$set(e,"qty",a)},expression:"configItem.qty"}}),a("div",{staticClass:"fr quantity_box_input"},[a("el-input-number",{staticClass:"quantity_input",attrs:{controls:!1,precision:0,min:e.qty_minimum,max:e.qty_maximum},on:{change:t.changeConfigsData},model:{value:e.qty,callback:function(a){t.$set(e,"qty",a)},expression:"configItem.qty"}}),4===e.option_type||15===e.option_type?a("span",{staticClass:"quantity_unit"},[t._v("个")]):t._e(),7===e.option_type||16===e.option_type?a("span",{staticClass:"quantity_unit"},[t._v("核心")]):t._e(),9===e.option_type||17===e.option_type?a("span",{staticClass:"quantity_unit"},[t._v("GB")]):t._e(),11===e.option_type||18===e.option_type?a("span",{staticClass:"quantity_unit"},[t._v("Mbps")]):t._e(),14===e.option_type||19===e.option_type?a("span",{staticClass:"quantity_unit"},[t._v("GB")]):t._e()],1)],1):t._e(),5===e.option_type?a("div",{staticClass:"pl-20"},[a("el-select",{staticStyle:{"margin-right":"10px","margin-bottom":"10px"},attrs:{placeholder:t.$t("standaloneServer.pleaseSelect")},on:{change:function(a){return t.osSelectChange(e.osName)}},model:{value:e.osName,callback:function(a){t.$set(e,"osName",a)},expression:"configItem.osName"}},t._l(e.sub,(function(t,e){return a("el-option",{key:e,attrs:{label:e,value:e}})})),1),a("el-select",{staticStyle:{"margin-bottom":"10px",width:"300px"},attrs:{placeholder:t.$t("standaloneServer.pleaseSelect")},on:{change:t.changeConfigsData},model:{value:e.subid,callback:function(a){t.$set(e,"subid",a)},expression:"configItem.subid"}},t._l(e.osVersionOptions,(function(t){return a("el-option",{key:t.id,attrs:{disabled:e.disabled,label:t.version,value:t.id}})})),1)],1):t._e(),6===e.option_type||8===e.option_type||10===e.option_type||13===e.option_type?a("div",{staticClass:"pl-20",staticStyle:{"padding-top":"5px"},attrs:{span:24}},t._l(e.sub,(function(n,s){return a("div",{key:s,staticClass:"select_block_item",class:{block_item_active:n.id===e.subid},on:{click:function(a){return t.selectBlockChange(e,n)}}},[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:n.show_pricing,placement:"top"}},[a("span",{staticClass:"flexc w-100 h-100"},[t._v(t._s(n.option_name))])])],1)})),0):t._e(),12===e.option_type?a("div",{staticClass:"pl-20",attrs:{span:24}},[a("div",{staticClass:"country_box"},t._l(e.sub,(function(n,s){return a("div",{key:s,staticClass:"country_item fl",class:{country_item_active:n.active,country_item_noarea:n.noarea},on:{click:function(a){return t.cityChange(e,n,t.configs)}}},[a("div",{staticClass:"country_item_innerbox"},[a("img",{staticClass:"country_item_flag",attrs:{src:"/upload/common/country/"+n.country_code+".png",alt:""}}),a("div",{staticClass:"country_item_name"},[t._v(t._s(n.city))])]),n.noarea?t._e():a("div",[a("el-select",{attrs:{size:"mini",disabled:!n.active||1===n.area.length&&""===n.area[0].area},model:{value:n.areaId,callback:function(e){t.$set(n,"areaId",e)},expression:"cityItem.areaId"}},t._l(n.area,(function(t,e){return a("el-option",{key:e,attrs:{disabled:n.disabled,label:t.area_zh,value:t.id}})})),1)],1)])})),0)]):t._e()])],1):t._e()],1)})),t.configs.length?a("div",{staticClass:"tar"},[a("el-button",{attrs:{type:"primary",disabled:t.nextDisable},on:{click:t.nextHandleClick}},[t._v(t._s(t.$t("standaloneServer.next"))+" ")])],1):t._e()],2)},s=[],i=(a("4160"),a("caad"),a("d81d"),a("d3b7"),a("ac1f"),a("25f0"),a("2532"),a("5319"),a("4c53"),a("159b"),a("96cf"),a("1da1")),r=a("27fd"),o=a("ecca"),c={mixins:[o["a"]],data:function(){return{groupid:this.$route.query.groupid,id:this.$route.query.id,configs:[1],upgradeSubmitData:{hid:this.$route.query.id,currencyid:void 0,promo_code:void 0,configoption:[]},nextDisable:!0}},methods:{getData:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(r["M"])({hid:t.id,currencyid:void 0});case 2:a=e.sent,n=a.data,200!==n.status||((n.data.host||[]).forEach((function(e){if(e.id=e.oid,e.disabled=!1,(e.sub||[]).forEach((function(t){t.disabled=!1})),5===e.option_type)for(var a in e.sub)e.sub[a].osName=a;else 12===e.option_type?(e.sub=t.objToArr(e.sub,"dataCenter"),(e.sub||[]).forEach((function(t){var a=t.area.map((function(t){return t.id}));a.includes(e.subid)?(t.active=!0,t.areaId=e.subid):t.active=!1,t.noarea=!0,(t.area||[]).forEach((function(e){""===e.area?e.area_zh="无配置区域":t.noarea=!1}))}))):[4,7,9,11,14,15,16,17,18,19].includes(e.option_type)&&(e.qty_zh=e.qty)})),t.originalData={option:n.data.host,link:n.data.links.map((function(t){for(var e in t.sub_id){var a=t.sub_id[e];a.qty_minimum=parseInt(a.qty_minimum),a.qty_maximum=parseInt(a.qty_maximum)}return t}))},t.configs=n.data.host,t.osSelectChange(void 0,!0));case 5:case"end":return e.stop()}}),e)})))()},changeConfigsData:function(){this.nextDisable=!1,this.clearOption()},objToArr:function(t,e){var a=[];for(var n in t)"dataCenter"===e?(t[n].id=this.guid(),t[n].active=!1,t[n].city=n,t[n].areaId=void 0):t[n].osName=n,a.push(t[n]);return a},guid:function(){return"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0,a="x"===t?e:3&e|8;return a.toString(16)}))},osSelectChange:function(t,e){var a=this;(this.configs||[]).forEach((function(n){if(5!==n.option_type)return!1;var s=function(s){t===s&&(n.subid=n.sub[s].child[0].id,n.osVersionOptions=n.sub[s].child),e?(n.sub[s].child||[]).forEach((function(t){n.subid===t.id&&(n.osName=s,n.osVersionOptions=n.sub[s].child)})):a.nextDisable=!1};for(var i in n.sub)s(i)}))},selectBlockChange:function(t,e){t.subid=e.id,this.$forceUpdate(),this.nextDisable=!1},cityChange:function(t,e,a){var n=this;this.nextDisable=!1,(a||[]).forEach((function(a){12===a.option_type&&t.oid===a.oid&&(a.sub||[]).forEach((function(t){e.id!==t.id?(t.areaId=void 0,t.active=!1):(t.areaId=t.area.length?t.area[0].id:void 0,n.areaChange(a,t),t.active=!0),n.$forceUpdate()}))}))},areaChange:function(t,e){t.subid=e.areaId},nextHandleClick:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.upgradeSubmitData.configoption=[],(t.configs||[]).forEach((function(e){[4,7,9,11,14,15,16,17,18,19].includes(e.option_type)?t.upgradeSubmitData.configoption[e.oid]=e.qty:t.upgradeSubmitData.configoption[e.oid]=e.subid})),e.next=4,Object(r["O"])(t.$qs.stringify(t.upgradeSubmitData));case 4:a=e.sent,n=a.data,200!==n.status?t.$message.error(n.msg):t.$emit("nextClick");case 7:case"end":return e.stop()}}),e)})))()},formatTooltip:function(t){var e=String(t);return(this.configs||[]).forEach((function(a){[4,7,9,11,14,15,16,17,18,19].includes(a.option_type)&&(a.sub||[]).forEach((function(a){a.qty_minimum<=t&&a.qty_maximum>=t&&(e=a.show_pricing)}))})),t+e}},created:function(){this.getData()}},l=c,d=(a("9a9c"),a("2877")),u=Object(d["a"])(l,n,s,!1,null,"36ce3681",null);e["default"]=u.exports},"4c53":function(t,e,a){"use strict";var n=a("23e7"),s=a("857a"),i=a("af03");n({target:"String",proto:!0,forced:i("sub")},{sub:function(){return s(this,"sub","","")}})},"4c8e":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"flow-echarts"},[a("div",{staticClass:"head"},[a("el-row",{staticClass:"limit-data-pick"},[a("el-col",{attrs:{xs:24,lg:12}},[t.moduleChart.select&&t.moduleChart.select.length>0?a("el-select",{attrs:{placeholder:t.$t("cloudServer.pleaseSelect")},on:{change:t.changeSelect},model:{value:t.select,callback:function(e){t.select=e},expression:"select"}},t._l(t.moduleChart.select,(function(t,e){return a("el-option",{key:e,attrs:{label:t.name,value:t.value}})})),1):"serveNetwork"===t.type?a("el-select",{attrs:{placeholder:t.$t("cloudServer.pleaseSelect")},model:{value:t.timeType,callback:function(e){t.timeType=e},expression:"timeType"}},[a("el-option",{key:"1",attrs:{label:t.$t("cloudServer.recently24H"),value:"1"}}),a("el-option",{key:"2",attrs:{label:t.$t("cloudServer.d7"),value:"2"}}),a("el-option",{key:"3",attrs:{label:t.$t("cloudServer.duringMonth"),value:"3"}}),a("el-option",{key:"4",attrs:{label:t.$("cloudServer.inLast30Days"),value:"4"}})],1):t._e()],1),a("el-col",{staticClass:"mobile-mt10",attrs:{xs:24,lg:12}},[a("el-date-picker",{style:{width:"100%"},attrs:{type:"datetimerange","range-separator":t.$t("cloudServer.to"),"start-placeholder":t.$t("cloudServer.startTime"),"end-placeholder":t.$t("cloudServer.endTime"),"value-format":"timestamp","picker-options":t.pickerOptions,format:"MM-dd"},on:{change:t.changeDateTime},model:{value:t.dateTime,callback:function(e){t.dateTime=e},expression:"dateTime"}})],1)],1)],1),a("div",{staticClass:"flowEcharts",attrs:{id:t.type}}),"cloudNetwork"===t.type?a("div",{staticClass:"fix-cont"},[a("el-row",[a("el-col",{attrs:{span:3,offset:7}},[a("div",{staticStyle:{height:"20px"}}),a("div",[t._v(t._s(t.$t("cloudServer.intoTraffic")))]),a("div",[t._v(t._s(t.$t("cloudServer.flow")))])]),a("el-col",{attrs:{span:3}},[a("div",[t._v(t._s(t.$t("cloudServer.latestTraffic")))]),a("div",[t._v(t._s(t.netDetail.accept.new))]),a("div",[t._v(t._s(t.netDetail.send.new))])]),a("el-col",{attrs:{span:3}},[a("div",[t._v(t._s(t.$t("cloudServer.averageFlowRate")))]),a("div",[t._v(t._s(t.netDetail.accept.average))]),a("div",[t._v(t._s(t.netDetail.send.average))])]),a("el-col",{attrs:{span:3}},[a("div",[t._v(t._s(t.$t("cloudServer.maximumFlow")))]),a("div",[t._v(t._s(t.netDetail.accept.max))]),a("div",[t._v(t._s(t.netDetail.send.max))])])],1)],1):t._e()])},s=[],i=(a("4160"),a("a9e3"),a("ac1f"),a("1276"),a("159b"),a("96cf"),a("1da1")),r=a("b85c"),o=a("048a"),c=a("313e"),l=a.n(c),d=null,u={props:{moduleChart:{type:Object,default:null},hostId:{type:Number,default:0},toDayDate:{type:Number,value:0}},data:function(){return{chart_type:"",dateTime:[],xData:[],yData:[],yMax:100,dataGreen:[],labelGreen:"",type:"",dataBlue:[],labelBlue:"",dataYellow:[],labelYellow:"",unit:"%",diskDev:"",select:"",networkKey:0,nodeDisk:"",nodeNetwork:"",echartsId:"",dataGreen2:[],labelGreen2:"",dataBlue2:[],labelBlue2:"",timeType:0,subtext:"",netDetail:{accept:{total:0,max:0,new:0,average:0},send:{total:0,max:0,new:0,average:0}},pickerOptions:{disabledDate:function(t){var e=d.toDayDate;return t.getTime()-new Date(e).getTime()+864e5<0||t.getTime()-(new Date).getTime()>=0}},pending:{}}},computed:{option:function(){var t={title:{subtext:0===this.xData.length?"暂无数据":this.subtext,left:"center",textAlign:"left",subtextStyle:{lineHeight:350}},grid:{left:"20",right:"40",top:"10%",bottom:"1%",containLabel:!0},xAxis:{type:"category",data:this.xData,axisTick:!1,boundaryGap:this.dataBlue.length<=3,axisLabel:{textStyle:{color:"#666"},formatter:function(t){for(var e=t.split(""),a="",n=0,s="";n<e.length+1;s=e[n++])a+=s,n%10||(a+="\n");return a}},axisLine:{lineStyle:{color:"#EBEEF5"}},splitLine:{show:!1}},yAxis:{type:"value",axisTick:!1,max:this.yMax,boundaryGap:!1,axisLine:{lineStyle:{color:"#EBEEF5"}},axisLabel:{formatter:"{value} "+this.unit,textStyle:{color:"#666"}},splitLine:{show:!1}},dataZoom:[{type:"inside",throttle:50}],tooltip:{trigger:"axis",backgroundColor:"#fff",textStyle:{color:"#000"},extraCssText:"box-shadow:0 2px 12px 0 rgba(0, 0, 0, 0.1);"},series:[{name:this.labelGreen,data:this.dataGreen,z:10,itemStyle:{color:"#3fbf70"},symbol:1===this.dataGreen.length||"none",type:"line",sampling:!0},{name:this.labelBlue,data:this.dataBlue,itemStyle:{color:"#007bfc"},symbol:1===this.dataBlue.length||"none",type:"line",sampling:!0},{name:this.labelYellow,data:this.dataYellow,itemStyle:{color:"#E6A23C"},symbol:"none",type:"line",sampling:!0}]};return"area"===this.chart_type&&(t.series[0].areaStyle={color:"#78d29b",opacity:1},t.series[1].areaStyle={}),t}},watch:{timeType:function(t){if(""===t){var e=(new Date).getTime(),a=e-2592e6;this.dateTime=[new Date(a),new Date(e)]}else if(1===t){var n=(new Date).getTime(),s=new Date(new Date((new Date).toLocaleDateString()).getTime());this.dateTime=[new Date(s),new Date(n)]}else if(2===t){var i=(new Date).getTime(),r=i-6048e5;this.dateTime=[new Date(r),new Date(i)]}else if(3===t){var o=(new Date).getTime(),c=new Date;c.setDate(1);var l=new Date(new Date(c).toLocaleDateString()).getTime();this.dateTime=[new Date(l),new Date(o)]}else if(4===t){var d=(new Date).getTime(),u=d-2592e6;this.dateTime=[new Date(u),new Date(d)]}"serveNetwork"===this.type&&this.changeSelect()}},created:function(){d=this},mounted:function(){var t=document.getElementsByClassName("el-tabs__content")[0],e=t.clientWidth||t.offsetWight,a=document.getElementsByClassName("flowEcharts"),n=document.body.clientWidth;if(n<1400){var s,i=Object(r["a"])(a);try{for(i.s();!(s=i.n()).done;){var o=s.value;o.style.width=e/1-22+"px"}}catch(u){i.e(u)}finally{i.f()}}else{var c,l=Object(r["a"])(a);try{for(l.s();!(c=l.n()).done;){var d=c.value;d.style.width=e/2-22+"px"}}catch(u){l.e(u)}finally{l.f()}}},methods:{resize:function(t){var e,a=document.getElementsByClassName("flowEcharts"),n=Object(r["a"])(a);try{for(n.s();!(e=n.n()).done;){var s=e.value;s.style.width="100%"}}catch(i){n.e(i)}finally{n.f()}this.echartsId=l.a.init(document.getElementById(t)),this.echartsId.resize()},changeSelect:function(){this.getData()},init:function(){var t=this,e=(new Date).getTime(),a=0;a=d.toDayDate?new Date(d.toDayDate).getTime()>e-6048e5?new Date(d.toDayDate).getTime():6048e5:e-6048e5,this.dateTime=[new Date(a),new Date(e)],this.xData=[],this.yData=[],this.dataGreen=[],this.labelGreen="",this.dataBlue=[],this.labelBlue="",this.dataYellow=[],this.labelYellow="",this.dataGreen2=[],this.labelGreen2="",this.dataBlue2=[],this.labelBlue2="",this.yMax=null,this.timeType=0,this.subtext="",this.netDetail={accept:{total:0,max:0,new:0,average:0},send:{total:0,max:0,new:0,average:0}},this.select=this.moduleChart.select&&this.moduleChart.select.length>0?this.moduleChart.select[0].value:"",this.getData(),setTimeout((function(){t.echartsId=l.a.init(document.getElementById(t.type))}),0)},changeDateTime:function(){this.getData()},canvasChart:function(){var t=this.echartsId;t.setOption(this.option,!0)},getData:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a,n,s,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,a=[[],[],[]],t.xData=a[0],t.dataBlue=a[1],t.dataGreen=a[2],n={hostId:t.hostId,type:t.type,select:t.select,start:new Date(t.dateTime[0]).getTime(),end:new Date(t.dateTime[1]).getTime()},e.next=8,Object(o["h"])(n);case 8:if(s=e.sent,i=s.data,200===i.status){e.next=13;break}return t.$message.error(i.msg),e.abrupt("return",!1);case 13:t.chart_type=i.data.chart_type,"%"===i.data.unit&&(t.yMax="100"),t.unit=i.data.unit,t.labelBlue=i.data.label[0],i.data.list.length>0&&i.data.list[0].forEach((function(e){t.dataBlue.push(e.value),t.xData.push(e.time)})),i.data.list.length>1&&(t.labelGreen=i.data.label[1],i.data.list[1].forEach((function(e){t.dataGreen.push(e.value)})));case 19:return e.prev=19,t.canvasChart(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[0,,19,22]])})))()}}},p=u,h=(a("b71c"),a("2877")),f=Object(h["a"])(p,n,s,!1,null,"3b7beaf2",null);e["a"]=f.exports},56927:function(t,e,a){},7358:function(t,e,a){},"7db0":function(t,e,a){"use strict";var n=a("23e7"),s=a("b727").find,i=a("44d2"),r=a("ae40"),o="find",c=!0,l=r(o);o in[]&&Array(1)[o]((function(){c=!1})),n({target:"Array",proto:!0,forced:c||!l},{find:function(t){return s(this,t,arguments.length>1?arguments[1]:void 0)}}),i(o)},"7f05":function(t,e,a){},"857a":function(t,e,a){var n=a("1d80"),s=/"/g;t.exports=function(t,e,a,i){var r=String(n(t)),o="<"+e;return""!==a&&(o+=" "+a+'="'+String(i).replace(s,"&quot;")+'"'),o+">"+r+"</"+e+">"}},9744:function(t,e,a){},9793:function(t,e,a){"use strict";var n=a("b8c6"),s=a.n(n);s.a},9911:function(t,e,a){"use strict";var n=a("23e7"),s=a("857a"),i=a("af03");n({target:"String",proto:!0,forced:i("link")},{link:function(t){return s(this,"a","href",t)}})},"9a9c":function(t,e,a){"use strict";var n=a("56927"),s=a.n(n);s.a},a623:function(t,e,a){"use strict";var n=a("23e7"),s=a("b727").every,i=a("a640"),r=a("ae40"),o=i("every"),c=r("every");n({target:"Array",proto:!0,forced:!o||!c},{every:function(t){return s(this,t,arguments.length>1?arguments[1]:void 0)}})},a793:function(t,e,a){"use strict";var n=a("3605"),s=a.n(n);s.a},ad9a:function(t,e,a){"use strict";var n=a("eae1"),s=a.n(n);s.a},af03:function(t,e,a){var n=a("d039");t.exports=function(t){return n((function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3}))}},b489:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"order"},["product"===t.upgradeType?a("div",{staticClass:"order_box"},[a("el-row",{staticClass:"box_goodsitem_box"},[a("el-col",{attrs:{span:24}},[a("div",{staticClass:"goodsitem_box_header"},[a("div",[a("span",[t._v(t._s(t.proPageData.old_host.host))])])]),a("el-row",{staticClass:"goodsitem_box_body"},[a("el-col",{staticClass:"box_body_left",attrs:{lg:18,xs:24}},[t._v(" "+t._s(t.$t("standaloneServer.newProduct"))+": "+t._s(t.proPageData.des)+" ")]),a("el-col",{staticClass:"box_body_right",attrs:{lg:6,xs:24}},[a("div",[a("span",[t._v(" "+t._s(t.proPageData.currency.prefix)+" "+t._s(t.proPageData.amount)+" "+t._s(t.proPageData.suffix))]),a("span",{staticClass:"body_right_cycle"},[t._v("/ "+t._s(t.proPageData.billingcycle_zh))])])])],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:24}},[a("div",{staticClass:"fr"},[a("div",{staticClass:"order_box_total"},[a("div",[t._v(t._s(t.$t("standaloneServer.total")))]),a("div",{staticClass:"box_total_money"},[a("span",{staticClass:"total_money_price"},[t._v(t._s(t.proPageData.currency.prefix)+" "+t._s(t.proPageData.amount_total)+" "+t._s(t.proPageData.suffix))]),a("span",{staticStyle:{"font-size":"12px",color:"#999999"}},[t._v(" / "+t._s(t.proPageData.billingcycle_zh))])])]),a("div",{staticClass:"youhui",staticStyle:{display:"block"}},[t._v(" "+t._s(Number(t.proPageData.saleproducts)?"(客户折扣:"+t.proPageData.currency.prefix+Number(t.proPageData.saleproducts).toFixed(2)+")":"")+" ")]),a("div",{staticClass:"order_box_promo"},[a("el-input",{staticClass:"box_promo_inp",attrs:{placeholder:t.$t("standaloneServer.placeholderPromo")},on:{change:t.promoChange},model:{value:t.promoCode,callback:function(e){t.promoCode=e},expression:"promoCode"}}),a("el-button",{staticClass:"box_promo_btn",attrs:{type:"primary"},on:{click:t.addProductCode}},[t._v(" "+t._s(t.$t("standaloneServer.usePromo")))])],1),a("div",[a("el-button",{staticClass:"order_box_topay",attrs:{type:"primary",loading:t.btnLoading},on:{click:t.proUpgradePay}},[t._v(" "+t._s(t.$t("standaloneServer.settlement")))])],1),a("div",{staticClass:"tar"},[a("el-button",{staticClass:"order_box_continue",attrs:{type:"text"},on:{click:t.backHandleClick}},[t._v(" "+t._s(t.$t("standaloneServer.goBack")))])],1)])])],1)],1):t._e(),"config"===t.upgradeType?a("div",{staticClass:"order_box"},[a("el-row",{staticClass:"box_goodsitem_box"},[a("el-col",{attrs:{span:24}},[a("div",{staticClass:"goodsitem_box_header"},[a("div",[a("span",[t._v(t._s(t.configPageData.name))])])]),a("el-row",{staticClass:"goodsitem_box_body"},[a("el-col",{staticClass:"box_body_left",attrs:{lg:18,xs:24}},t._l(t.configPageData.alloption,(function(e,n){return a("div",{key:n,staticClass:"body_left_item"},[t._v(" "+t._s(e.option_name)+": "),[4,7,9,11,14,15,16,17,18,19].includes(e.option_type)?a("span",{staticClass:"body_item_value"},[t._v(t._s(e.qty))]):a("span",{staticClass:"body_item_value"},[t._v(t._s(e.suboption_name))])])})),0),a("el-col",{staticClass:"box_body_right",attrs:{lg:6,xs:24}},[a("div",[a("span",[t._v(t._s(t.configPageData.currency.prefix)+" "+t._s(t.configPageData.subtotal)+" "+t._s(t.configPageData.currency.suffix))]),a("span",{staticClass:"body_right_cycle"},[t._v("/"+t._s(t.configPageData.billingcycle_zh))])])])],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:24}},[a("div",{staticClass:"fr"},[a("div",{staticClass:"order_box_total"},[a("div",[t._v(t._s(t.$t("standaloneServer.total")))]),a("div",{staticClass:"box_total_money"},[a("span",{staticClass:"total_money_price"},[t._v(t._s(t.configPageData.currency.prefix)+t._s(t.configPageData.total)+t._s(t.configPageData.currency.suffix))]),a("span",{staticStyle:{"font-size":"12px",color:"#999999"}},[t._v(" / "+t._s(t.configPageData.billingcycle_zh))])])]),a("div",{staticClass:"youhui"},[t._v(" "+t._s(Number(t.configPageData.saleproducts)?"(客户折扣:"+t.configPageData.currency.prefix+Number(t.configPageData.saleproducts).toFixed(2)+t.configPageData.currency.suffix+")":"")+" ")]),a("div",{staticClass:"order_box_promo"},[a("el-input",{staticClass:"box_promo_inp",attrs:{placeholder:t.$t("standaloneServer.placeholderPromo")},on:{change:t.promoChange},model:{value:t.promoCode,callback:function(e){t.promoCode=e},expression:"promoCode"}}),a("el-button",{staticClass:"box_promo_btn",attrs:{type:"primary"},on:{click:t.addConfigCode}},[t._v(" "+t._s(t.$t("standaloneServer.usePromo"))+" ")])],1),a("div",[a("el-button",{staticClass:"order_box_topay",attrs:{type:"primary",loading:t.btnLoading},on:{click:t.configUpgradePay}},[t._v(" "+t._s(t.$t("standaloneServer.settlement")))])],1),a("div",{staticClass:"tar"},[a("el-button",{staticClass:"order_box_continue",attrs:{type:"text"},on:{click:t.backHandleClick}},[t._v(" "+t._s(t.$t("standaloneServer.goBack")))])],1)])])],1)],1):t._e(),a("payNew",{ref:"control",on:{"pay-success":t.successCallBack}})],1)},s=[],i=(a("96cf"),a("1da1")),r=a("27fd"),o=a("2ef0"),c={props:{upgradeTypeChild:{type:String,default:"product"}},data:function(){return{groupid:this.$route.query.groupid,id:this.$route.query.id,upgradeType:this.upgradeTypeChild,proPageData:{old_host:{id:0,host:"",domain:""},currency:{id:0,code:"",prefix:"",suffix:""}},configPageData:{alloption:[],currency:{id:1,code:"",prefix:"",suffix:""}},promoCode:"",payment:"",dialogVisible:!1,QRcodeUrl:"",payType:"",btnLoading:!1}},methods:{getProductData:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(r["Q"])({hid:t.id});case 2:a=e.sent,n=a.data,200!==n.status?t.$message.error(n.msg):(t.proPageData=n.data,t.promoCode=n.data.promo_code);case 5:case"end":return e.stop()}}),e)})))()},addProductCode:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(r["b"])({hid:t.id,pormo_code:t.promoCode});case 2:a=e.sent,n=a.data,200!==n.status?t.$message.error(n.msg):(t.$message.success(n.msg),t.getProductData());case 5:case"end":return e.stop()}}),e)})))()},proUpgradePay:o.throttle(Object(i["a"])(regeneratorRuntime.mark((function t(){var e,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.btnLoading=!0,t.next=3,Object(r["h"])({hid:this.proPageData.old_host.id});case 3:e=t.sent,a=e.data,200===a.status?this.$refs.control.main({id:a.data.invoiceid,name:this.$t("standaloneServer.upDown")}):1001===a.status?(this.$message.success(a.msg),this.$router.push({path:"/servers",query:{groupid:this.groupid}})):this.$message.error(a.msg),this.btnLoading=!1;case 7:case"end":return t.stop()}}),t,this)}))),2e3),getConfigData:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(r["N"])({hid:t.id});case 2:a=e.sent,n=a.data,200!==n.status?t.$message.error(n.msg):(t.configPageData=n.data,t.promoCode=n.data.promo_code);case 5:case"end":return e.stop()}}),e)})))()},promoChange:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a,n,s,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(""!==t.promoCode){e.next=14;break}if("product"!==t.upgradeType){e.next=9;break}return e.next=4,Object(r["H"])({hid:t.id});case 4:a=e.sent,n=a.data,200!==n.status?t.$message.error(n.msg):(t.$message.success(n.msg),t.getProductData()),e.next=14;break;case 9:return e.next=11,Object(r["I"])({hid:t.id});case 11:s=e.sent,i=s.data,200!==i.status?t.$message.error(i.msg):(t.$message.success(i.msg),t.getConfigData());case 14:case"end":return e.stop()}}),e)})))()},addConfigCode:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(r["a"])({hid:t.id,pormo_code:t.promoCode});case 2:a=e.sent,n=a.data,200!==n.status?t.$message.error(n.msg):(t.$message.success(n.msg),t.getConfigData());case 5:case"end":return e.stop()}}),e)})))()},configUpgradePay:o.throttle(Object(i["a"])(regeneratorRuntime.mark((function t(){var e,a,n,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:for(a in e={hid:this.id},e.configoption=[],this.configPageData.alloption)4===this.configPageData.alloption[a].option_type?e.configoption[this.configPageData.alloption[a].id]=this.configPageData.alloption[a].qty:e.configoption[this.configPageData.alloption[a].id]=this.configPageData.alloption[a].suboption_id;return this.btnLoading=!0,t.next=6,Object(r["g"])(this.$qs.stringify(e));case 6:n=t.sent,s=n.data,200===s.status?this.$refs.control.main({id:s.data.invoiceid,name:this.$t("standaloneServer.upDownOptions")}):1001===s.status?(this.$message.success(s.msg),this.$router.push({path:"/servers",query:{groupid:this.groupid}})):this.$message.error(s.msg),this.btnLoading=!1;case 10:case"end":return t.stop()}}),t,this)}))),2e3),successCallBack:function(t){t&&this.$router.push({path:"/servers",query:{groupid:this.groupid}})},backHandleClick:function(){this.$router.go(-1)}},created:function(){"config"===this.upgradeType?this.getConfigData():this.getProductData()},destroyed:function(){}},l=c,d=(a("f76b"),a("2877")),u=Object(d["a"])(l,n,s,!1,null,"563d6196",null);e["default"]=u.exports},b64b:function(t,e,a){var n=a("23e7"),s=a("7b0b"),i=a("df75"),r=a("d039"),o=r((function(){i(1)}));n({target:"Object",stat:!0,forced:o},{keys:function(t){return i(s(t))}})},b71c:function(t,e,a){"use strict";var n=a("c537"),s=a.n(n);s.a},b8c6:function(t,e,a){},c537:function(t,e,a){},c740:function(t,e,a){"use strict";var n=a("23e7"),s=a("b727").findIndex,i=a("44d2"),r=a("ae40"),o="findIndex",c=!0,l=r(o);o in[]&&Array(1)[o]((function(){c=!1})),n({target:"Array",proto:!0,forced:c||!l},{findIndex:function(t){return s(this,t,arguments.length>1?arguments[1]:void 0)}}),i(o)},d81d:function(t,e,a){"use strict";var n=a("23e7"),s=a("b727").map,i=a("1dde"),r=a("ae40"),o=i("map"),c=r("map");n({target:"Array",proto:!0,forced:!o||!c},{map:function(t){return s(this,t,arguments.length>1?arguments[1]:void 0)}})},eae1:function(t,e,a){},ecca:function(t,e,a){"use strict";a("a623"),a("7db0"),a("c740"),a("4160"),a("caad"),a("d81d"),a("b64b"),a("d3b7"),a("25f0"),a("2532"),a("9911"),a("4c53"),a("159b");var n=a("53ca"),s=[4,7,9,11,14,15,16,17,18,19];e["a"]={data:function(){return{originalData:{}}},watch:{configs:{handler:function(t){this.matchingCondition(),this.clearOptionValue()},deep:!0,immediate:!0}},methods:{clearOption:function(){(this.configs||[]).forEach((function(t){"object"===Object(n["a"])(t)&&(t.disabled=!1,(t.sub||[]).forEach((function(t){t.disabled=!1})))}))},clearOptionValue:function(){var t=this;this.$nextTick((function(){(t.configs||[]).forEach((function(e){if(s.includes(e.option_type)){if(!e.disabled){var a=(t.originalData.option||[]).find((function(t){return t.id===e.id}));e.sub=a.sub}e.qty_maximum=Math.max.apply(Math,e.sub.map((function(t){return t.qty_maximum}))),e.qty_minimum=Math.min.apply(Math,e.sub.map((function(t){return t.qty_minimum})))}else(e.sub||[]).forEach((function(t){if(t.disabled&&(e.subid===t.id||void 0===e.subid)){var a=e.sub.findIndex((function(t){return!1===t.disabled}));e.subid=-1!==a?e.sub[a].id:void 0}}))}))}))},matchingCondition:function(){var t=this;(this.configs||[]).forEach((function(e){"object"===Object(n["a"])(e)&&(t.originalData.link||[]).forEach((function(a){if(a.config_id===e.id){var n=!1;switch(a.relation){case"seq":if(s.includes(e.option_type))for(var i in a.sub_id){var r=a.sub_id[i];e.qty<=r.qty_maximum&&e.qty>=r.qty_minimum&&(n=!0)}else Object.keys(a.sub_id).includes((e.subid||"").toString())&&(n=!0);break;case"sneq":s.includes(e.option_type)?n=Object.keys(a.sub_id).every((function(t){var n=a.sub_id[t];if(e.qty>n.qty_maximum||e.qty<n.qty_minimum)return!0})):Object.keys(a.sub_id).includes((e.subid||"").toString())||(n=!0);break;default:break}n&&(a.result||[]).forEach((function(e){t.changeOptions(e)}))}}))}))},changeOptions:function(t){if(!t.sub_id)return!1;(this.configs||[]).forEach((function(e){if(e.id===t.config_id)switch(t.relation){case"seq":(e.sub||[]).forEach((function(a){s.includes(e.option_type)&&(a.qty_maximum=t.sub_id[a.id].qty_maximum,a.qty_minimum=t.sub_id[a.id].qty_minimum),Object.keys(t.sub_id).includes((a.id||"").toString())||(a.disabled=!0)}));break;case"sneq":(e.sub||[]).forEach((function(e){Object.keys(t.sub_id).includes((e.id||"").toString())&&(e.disabled=!0)}));break;default:break}}))}}}},f27d:function(t,e,a){"use strict";var n=a("7f05"),s=a.n(n);s.a},f76b:function(t,e,a){"use strict";var n=a("7358"),s=a.n(n);s.a}}]);