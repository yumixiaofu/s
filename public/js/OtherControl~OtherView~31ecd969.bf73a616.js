(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["OtherControl~OtherView~31ecd969"],{"048a":function(t,e,r){"use strict";r.d(e,"f",(function(){return s})),r.d(e,"h",(function(){return o})),r.d(e,"g",(function(){return n})),r.d(e,"i",(function(){return i})),r.d(e,"d",(function(){return l})),r.d(e,"c",(function(){return c})),r.d(e,"b",(function(){return u})),r.d(e,"e",(function(){return d})),r.d(e,"a",(function(){return p}));var a=r("a27e");function s(t,e,r,s,o,n,i,l){return Object(a["a"])({url:"/host/list",params:{type:"list",groupid:t,page:e,limit:r,orderby:s,sort:o,search:n,dcim_area:i,domain_status:l}})}function o(t){return Object(a["a"])({url:"/provision/chart/".concat(t.hostId),params:t})}function n(t,e){return Object(a["a"])({url:"/host/renewpage",params:{hostid:t,billingcycles:e}})}function i(t){return Object(a["a"])({url:"/host/renew",method:"post",data:t})}function l(t){return Object(a["a"])({url:"/provision/default",method:"post",data:t})}function c(t){return Object(a["a"])({url:"/provision/button",method:"post",data:t})}function u(t){return Object(a["a"])({url:"/host/cancel",method:"post",data:t})}function d(t){return Object(a["a"])({url:"/host/cancel",method:"delete",data:t})}function p(t){return Object(a["a"])({url:"/host/autorenew",method:"post",data:t})}},"1e4f":function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"box"},[t._l(t.module_button.control,(function(e,r){return a("div",{key:r,staticClass:"otherserver_control_item"},[a("div",{staticClass:"otherserver_title"},[t._v(t._s(e.name))]),"default"===e.type?a("div",{staticClass:"otherserver_msg"},["on"===e.func?a("span",[t._v("系统将会立即开机, 大约需要5分钟完成")]):t._e(),"off"===e.func?a("span",[t._v("系统将会立即关机, 大约需要5分钟完成")]):t._e(),"reboot"===e.func?a("span",[t._v("系统将会立即重启, 大约需要5分钟完成")]):t._e(),"hard_off"===e.func?a("span",[t._v("系统将会立即硬关机, 大约需要5分钟完成")]):t._e(),"hard_reboot"===e.func?a("span",[t._v("系统将会立即硬重启, 大约需要5分钟完成")]):t._e(),"bmc"===e.func?a("span",[t._v("系统将会立即重置BMC, 大约需要5分钟完成")]):t._e(),"reinstall"===e.func?a("span",[t._v("系统将会立即重装, 大约需要5分钟完成")]):t._e(),"crack_pass"===e.func?a("span",[t._v("系统将会立即破解密码, 大约需要5分钟完成")]):t._e(),"rescue"===e.func?a("span",[t._v("系统将会立即进入救援系统, 大约需要5分钟完成")]):t._e()]):t._e(),"custom"===e.type?a("div",{staticClass:"otherserver_msg"},[t._v(t._s(e.desc))]):t._e(),a("div",{staticClass:"otherserver_btn"},[a("el-button",{attrs:{plain:""},on:{click:function(r){return t.controlFunc(e)}}},[t._v(t._s(e.name))])],1)])})),a("el-dialog",{attrs:{title:t.$t("standaloneServer.controlReinstallSystem"),visible:t.reinstallDialog,width:"30%"},on:{"update:visible":function(e){t.reinstallDialog=e},closed:t.reinstallClosed}},[a("el-row",{attrs:{gutter:15}},[a("el-form",{ref:"reinstallForm",attrs:{model:t.reinstallFormData,rules:t.reinstallFormRules,"label-width":"80px"}},[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:t.$t("standaloneServer.os"),prop:"osVal"}},[a("el-row",[t.cloudOsGroupOptions&&t.cloudOsGroupOptions.length>0?a("el-col",{staticClass:"mb-10",staticStyle:{"padding-right":"10px"},attrs:{xs:24,lg:12}},[a("el-select",{attrs:{placeholder:t.$t("standaloneServer.pleaseSelect")},on:{change:t.osGroupChange},model:{value:t.reinstallFormData.groupVal,callback:function(e){t.$set(t.reinstallFormData,"groupVal",e)},expression:"reinstallFormData.groupVal"}},[a("template",{slot:"prefix"},[a("img",{staticStyle:{height:"20px","margin-right":"10px","margin-top":"10px"},attrs:{src:"/upload/common/system/"+t.osSvgSelected+".svg",alt:""}})]),t._l(t.cloudOsGroupOptions,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}},[a("img",{staticStyle:{height:"20px",marginRight:"10px"},attrs:{src:"/upload/common/system/"+e.osSvg+".svg",alt:""}}),t._v(t._s(e.name)+" ")])}))],2)],1):t._e(),a("el-col",{attrs:{xs:24,lg:12}},[a("el-select",{attrs:{placeholder:t.$t("standaloneServer.pleaseSelect")},model:{value:t.reinstallFormData.osVal,callback:function(e){t.$set(t.reinstallFormData,"osVal",e)},expression:"reinstallFormData.osVal"}},t._l(t.filterOsOptions,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}},[t._v(" "+t._s(e.name)+" ")])})),1)],1)],1)],1)],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.reinstallCancle}},[t._v(t._s(t.$t("btnCancle")))]),a("el-button",{attrs:{type:"primary"},on:{click:t.reinstall}},[t._v(t._s(t.$t("btnConfirmation")))])],1)],1),a("el-dialog",{attrs:{title:t.$t("cloudServer.crackPwd"),visible:t.crackDialog,width:"600px"},on:{"update:visible":function(e){t.crackDialog=e},close:t.creakonClose}},[a("el-form",{ref:"crackPassword",attrs:{model:t.crackFrom,"label-width":"80px"}},[a("el-form-item",{staticClass:"creakInput",staticStyle:{"margin-bottom":"10px"},attrs:{label:t.$t("cloudServer.pwd"),prop:"password",rules:[{required:!0,message:this.$t("cloudServer.pwdEmpty")}]}},[a("el-input",{model:{value:t.crackFrom.password,callback:function(e){t.$set(t.crackFrom,"password",e)},expression:"crackFrom.password"}}),a("img",{staticClass:"creakInputRandom",staticStyle:{width:"18px",cursor:"pointer","margin-left":"10px"},attrs:{src:r("8728"),alt:""},on:{click:function(e){return t.creatCode(12)}}}),a("i",{ref:t.crackFrom.password,staticClass:"el-icon-copy-document creakInputCopy",staticStyle:{cursor:"pointer"},attrs:{"data-clipboard-text":t.crackFrom.password},on:{click:function(e){return t.clickCopy(t.crackFrom.password)},mouseenter:function(e){return t.clickCopy(t.crackFrom.password)}}})],1),t.errorMsg?a("div",{staticClass:"el-form-item__content"},[a("div",{staticClass:"el-form-item__error",staticStyle:{left:"80px"}},[t._v(t._s(t.errorMsg))])]):t._e()],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.saveCrack}},[t._v(t._s(t.$t("cloudServer.determine")))])],1)],1),a("Reinstall",{ref:"reinstallDia",attrs:{visible:t.reinstallVis,title:"重装系统"},on:{"update:visible":function(e){t.reinstallVis=e},"reinstall-success":t.reinstallDcimSuc}}),a("Crackpass",{ref:"crackpassDia",attrs:{visible:t.crackPassVis,title:"破解密码"},on:{"update:visible":function(e){t.crackPassVis=e},"crackpass-success":t.crackpassDcimSuc}})],2)},s=[],o=(r("4de4"),r("4160"),r("c975"),r("b0c0"),r("a9e3"),r("4d63"),r("ac1f"),r("25f0"),r("159b"),r("96cf"),r("1da1")),n=r("b311"),i=r.n(n),l=r("4f73"),c=r("dc55"),u=r("4a8e"),d=r("048a"),p=r("2ef0"),f={components:{Reinstall:l["a"],Crackpass:c["a"]},data:function(){return{crackPassVis:!1,reinstallVis:!1,pageData:{},crackRePwd:"",module_button:{console:[],control:[]},reinstallDialog:!1,reinstallFormData:{groupVal:"",osVal:""},reinstallFormRules:{},cloudOsGroupOptions:[],cloudOsOptions:[],filterOsOptions:[],osSvgSelected:void 0,crackDialog:!1,crackFrom:{password:""},errorMsg:""}},props:{id:{type:Number,default:0}},methods:{clickCopy:function(t){var e=this,r=0,a=new i.a(this.$refs[t]);a.on("success",(function(t){e.$message.success("复制成功"),r++,r>1&&a.destroy()})),a.on("error",(function(t){e.$message.error("复制失败")}))},creatCode:function(t){this.crackRePwd="";for(var e=parseInt(t),r=[0,1,2,3,4,5,6,7,8,9,"a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],a=0;a<e;a++){var s=Math.floor(62*Math.random());this.crackRePwd+=r[s]}var o=/^(?=.*?[a-z])(?=.*?[A-Z])(?=.*?\d).*$/,n=new RegExp(o);n.test(this.crackRePwd)?this.crackFrom.password=this.crackRePwd:this.creatCode(12)},getData:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(u["e"])(t.id);case 2:if(r=e.sent,a=r.data,200===a.status){e.next=6;break}return e.abrupt("return",!1);case 6:t.pageData=a.data,t.module_button=a.data.module_button,t.cloudOsGroupOptions=a.data.cloud_os_group,t.reinstallFormData.groupVal=0!==t.cloudOsGroupOptions.length?t.cloudOsGroupOptions[0].id:"",t.cloudOsOptions=a.data.cloud_os,t.cloudOsGroupOptions&&t.cloudOsGroupOptions.length>0?(t.filterOsOptions=t.cloudOsOptions.filter((function(e){return e.group===t.reinstallFormData.groupVal})),t.reinstallFormData.osVal=0!==t.filterOsOptions.length?t.filterOsOptions[0].id:"",t.cloudOsGroupOptions.forEach((function(e){t.showOsSvg(e)})),t.osSvgSelected=t.cloudOsGroupOptions[0].osSvg):(t.filterOsOptions=t.cloudOsOptions,t.reinstallFormData.osVal=0!==t.cloudOsOptions.length?t.cloudOsOptions[0].id:"");case 12:case"end":return e.stop()}}),e)})))()},showOsSvg:function(t){-1!==t.name.toLowerCase().indexOf("windows")?t.osSvg=1:-1!==t.name.toLowerCase().indexOf("centos")?t.osSvg=2:-1!==t.name.toLowerCase().indexOf("ubuntu")?t.osSvg=3:-1!==t.name.toLowerCase().indexOf("debian")?t.osSvg=4:-1!==t.name.toLowerCase().indexOf("esxi")?t.osSvg=5:-1!==t.name.toLowerCase().indexOf("xenserver")?t.osSvg=6:-1!==t.name.toLowerCase().indexOf("freebsd")?t.osSvg=7:-1!==t.name.toLowerCase().indexOf("fedora")?t.osSvg=8:t.osSvg=9},distributionDcimFunc:function(t){"reinstall"===t.func?this.dcimReinstall():"crack_pass"===t.func&&this.dcimCrackPass()},dcimReinstall:function(){this.$eventBus.$emit("reinstall",this.pageData.host_data.upper_reaches_res),this.reinstallVis=!0},reinstallDcimSuc:function(t){t&&(this.reinstallVis=!1,this.getData())},dcimCrackPass:function(){this.$eventBus.$emit("crackPass",this.pageData.host_data.upper_reaches_res),this.crackPassVis=!0},crackpassDcimSuc:function(t){t&&(this.crackPassVis=!1,this.getData())},controlFunc:function(t){var e=this;!this.pageData.host_data.upper_reaches_control_mode||"reinstall"!==t.func&&"crack_pass"!==t.func?"reinstall"===t.func?this.reinstallDialog=!0:"crack_pass"===t.func?(this.creatCode(),this.crackDialog=!0):this.$swal.fire({title:t.name,icon:"warning",showCancelButton:!0,confirmButtonText:this.$t("btnConfirmation"),cancelButtonText:this.$t("btnCancle")}).then(function(){var r=Object(o["a"])(regeneratorRuntime.mark((function r(a){var s,o,n,i,l;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(!a.value){r.next=16;break}if(e.$swal.fire("","Loading......","success"),s={id:e.id,func:t.func},"default"!==t.type){r.next=9;break}return r.next=6,Object(d["d"])(s);case 6:o=r.sent,n=o.data,e.totalFunc(n);case 9:if("custom"!==t.type){r.next=16;break}return r.next=12,Object(d["c"])(s);case 12:i=r.sent,l=i.data,e.totalFunc(l),l.url&&window.open(l.url);case 16:case"end":return r.stop()}}),r)})));return function(t){return r.apply(this,arguments)}}()):this.distributionDcimFunc(t)},totalFunc:function(t){var e=this;setTimeout((function(){200===t.status?e.$notify({title:e.$t("standaloneServer.controlSuccess"),message:t.msg,type:"success",offset:80}):e.$notify({title:e.$t("standaloneServer.controlError"),message:t.msg,type:"error",offset:80})}),2e3)},osGroupChange:function(t){var e=this;this.reinstallFormData.groupVal=t,this.reinstallFormData.osVal="",this.filterOsOptions=[],this.filterOsOptions=this.cloudOsOptions.filter((function(e){return e.group===t})),this.reinstallFormData.osVal=0!==this.filterOsOptions.length?this.filterOsOptions[0].id:"",(this.cloudOsGroupOptions||[]).forEach((function(r){r.id===t&&(e.osSvgSelected=r.osSvg)}))},reinstallCancle:function(){var t=this;this.reinstallDialog=!1,this.cloudOsGroupOptions&&this.cloudOsGroupOptions.length>0?(this.filterOsOptions=this.cloudOsOptions.filter((function(e){return e.group===t.reinstallFormData.groupVal})),this.reinstallFormData.osVal=0!==this.filterOsOptions.length?this.filterOsOptions[0].id:""):(this.filterOsOptions=this.cloudOsOptions,this.reinstallFormData.osVal=0!==this.cloudOsOptions.length?this.cloudOsOptions[0].id:"")},reinstallClosed:function(){var t=this;this.cloudOsGroupOptions&&this.cloudOsGroupOptions.length>0?(this.filterOsOptions=this.cloudOsOptions.filter((function(e){return e.group===t.reinstallFormData.groupVal})),this.reinstallFormData.osVal=0!==this.filterOsOptions.length?this.filterOsOptions[0].id:""):(this.filterOsOptions=this.cloudOsOptions,this.reinstallFormData.osVal=0!==this.cloudOsOptions.length?this.cloudOsOptions[0].id:"")},reinstall:p.debounce(Object(o["a"])(regeneratorRuntime.mark((function t(){var e,r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.reinstallDialog=!1,e={id:this.id,func:"reinstall",os:this.reinstallFormData.osVal},t.next=4,Object(d["d"])(e);case 4:r=t.sent,a=r.data,this.totalFunc(a);case 7:case"end":return t.stop()}}),t,this)}))),200),creakonClose:function(){this.$refs.crackPassword.resetFields(),this.crackFrom.password=""},saveCrack:p.debounce(Object(o["a"])(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.$refs.crackPassword.validate(function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(r){var a,s,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r){t.next=4;break}return t.abrupt("return",!1);case 4:return a={id:e.id,func:"crack_pass",password:e.crackFrom.password},t.next=7,Object(d["d"])(a);case 7:s=t.sent,o=s.data,200!==o.status?e.errorMsg=o.msg:(e.crackDialog=!1,e.totalFunc(o));case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 1:case"end":return t.stop()}}),t,this)}))),200)},created:function(){this.getData()},mounted:function(){}},m=f,h=(r("a5d3"),r("2877")),g=Object(h["a"])(m,a,s,!1,null,"3718321a",null);e["default"]=g.exports},"34dc":function(t,e,r){},"44e7":function(t,e,r){var a=r("861d"),s=r("c6b6"),o=r("b622"),n=o("match");t.exports=function(t){var e;return a(t)&&(void 0!==(e=t[n])?!!e:"RegExp"==s(t))}},"4a8e":function(t,e,r){"use strict";r.d(e,"d",(function(){return s})),r.d(e,"b",(function(){return o})),r.d(e,"a",(function(){return n})),r.d(e,"e",(function(){return i})),r.d(e,"c",(function(){return l}));var a=r("a27e");function s(t,e,r,s,o,n,i){return Object(a["a"])({url:"/host/list",params:{type:"list",groupid:t,page:e,limit:r,orderby:s,sort:o,search:n,domain_status:i}})}function o(t,e,r,s,o,n){return Object(a["a"])({url:"/host/list",params:{type:"index",page:t,limit:e,orderby:r,sort:s,search:o,domain_status:n}})}function n(t){return Object(a["a"])({url:"/host/remark",method:"post",data:t})}function i(t){return Object(a["a"])({url:"/host/header",params:{host_id:t}})}function l(t,e,r,s,o,n){return Object(a["a"])({url:"/user_logdcims",params:{hostid:t,page:e,limit:r,orderby:s,sorting:o,keywords:n}})}},"4d63":function(t,e,r){var a=r("83ab"),s=r("da84"),o=r("94ca"),n=r("7156"),i=r("9bf2").f,l=r("241c").f,c=r("44e7"),u=r("ad6d"),d=r("9f7f"),p=r("6eeb"),f=r("d039"),m=r("69f3").set,h=r("2626"),g=r("b622"),v=g("match"),b=s.RegExp,O=b.prototype,w=/a/g,_=/a/g,k=new b(w)!==w,D=d.UNSUPPORTED_Y,x=a&&o("RegExp",!k||D||f((function(){return _[v]=!1,b(w)!=w||b(_)==_||"/a/i"!=b(w,"i")})));if(x){var y=function(t,e){var r,a=this instanceof y,s=c(t),o=void 0===e;if(!a&&s&&t.constructor===y&&o)return t;k?s&&!o&&(t=t.source):t instanceof y&&(o&&(e=u.call(t)),t=t.source),D&&(r=!!e&&e.indexOf("y")>-1,r&&(e=e.replace(/y/g,"")));var i=n(k?new b(t,e):b(t,e),a?this:O,y);return D&&r&&m(i,{sticky:r}),i},C=function(t){t in y||i(y,t,{configurable:!0,get:function(){return b[t]},set:function(e){b[t]=e}})},$=l(b),F=0;while($.length>F)C($[F++]);O.constructor=y,y.prototype=O,p(s,"RegExp",y)}h("RegExp")},"4de4":function(t,e,r){"use strict";var a=r("23e7"),s=r("b727").filter,o=r("1dde"),n=r("ae40"),i=o("filter"),l=n("filter");a({target:"Array",proto:!0,forced:!i||!l},{filter:function(t){return s(this,t,arguments.length>1?arguments[1]:void 0)}})},"4f73":function(t,e,r){"use strict";var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{},[r("el-dialog",t._g(t._b({on:{open:t.onOpen,close:t.onClose}},"el-dialog",t.$attrs,!1),t.$listeners),[r("el-row",{attrs:{gutter:15}},[r("el-form",{ref:"elForm",attrs:{model:t.formData,rules:t.rules,size:"medium","label-width":"107px"}},[r("el-col",{attrs:{span:22}},[r("el-row",[r("el-col",{attrs:{span:24}},[r("el-form-item",{attrs:{label:"系统选择",prop:"os"}},[r("el-cascader",{style:{width:"100%"},attrs:{filterable:"",options:t.pageData,props:t.osProps,placeholder:"请选择系统选择",clearable:""},on:{change:t.setPort},model:{value:t.formData.osArr,callback:function(e){t.$set(t.formData,"osArr",e)},expression:"formData.osArr"}})],1)],1),r("el-col",{attrs:{span:24}},[r("el-form-item",{attrs:{label:"密码",prop:"password"}},[r("el-input",{style:{width:"100%"},attrs:{placeholder:"请输入密码","show-password":"","auto-complete":"new-password"},model:{value:t.formData.password,callback:function(e){t.$set(t.formData,"password",e)},expression:"formData.password"}},[r("el-button",{attrs:{slot:"append"},on:{click:function(e){return t.creatCode(9)}},slot:"append"},[t._v("随机密码")])],1)],1)],1),r("el-col",{attrs:{span:24}},[r("el-form-item",{attrs:{label:"端口",prop:"port"}},[r("el-input",{style:{width:"100%"},attrs:{placeholder:"请输入端口"},model:{value:t.formData.port,callback:function(e){t.$set(t.formData,"port",e)},expression:"formData.port"}},[r("el-button",{attrs:{slot:"append"},on:{click:t.portRandom},slot:"append"},[t._v("随机端口")])],1)],1)],1),r("el-col",{attrs:{span:24}},["1"===t.ostype||"2"===t.ostype?r("el-form-item",{attrs:{label:"分区类型",prop:"part_type"}},[r("el-radio-group",{attrs:{size:"medium"},model:{value:t.formData.part_type,callback:function(e){t.$set(t.formData,"part_type",e)},expression:"formData.part_type"}},t._l(t.part_typeOptions,(function(e,a){return r("el-radio",{key:a,attrs:{label:e.value,disabled:e.disabled}},[t._v(t._s(e.label))])})),1)],1):t._e()],1)],1)],1)],1)],1),r("div",{attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:t.close}},[t._v("取消")]),r("el-button",{attrs:{type:"primary",loading:t.loading},on:{click:t.handelConfirm}},[t._v("确定")])],1)],1)],1)},s=[],o=(r("4d63"),r("ac1f"),r("25f0"),r("96cf"),r("1da1")),n=r("e87d"),i={inheritAttrs:!1,components:{},props:[],data:function(){return{loading:!1,id:"",ostype:"",pageData:[],osProps:{multiple:!1,label:"name",value:"id",children:"os"},formData:{id:"",os:"",osArr:void 0,password:void 0,port:void 0,part_type:0},rules:{os:[{required:!0,message:"请选择系统",trigger:"change"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}],port:[{required:!0,message:"请输入端口",trigger:"blur"}],part_type:[{required:!0,message:"单选框组不能为空",trigger:"change"}]},part_typeOptions:[{label:"全盘格式化",value:0},{label:"第一分区格式化",value:1}]}},computed:{},watch:{},created:function(){var t=this;this.$eventBus.$on("reinstall",(function(e){t.formData.id=e}))},mounted:function(){},methods:{portRandom:function(){var t=Math.floor(1e4*Math.random())+1e4;this.formData.port=t},creatCode:function(t){for(var e="",r=parseInt(t),a=[0,1,2,3,4,5,6,7,8,9,"a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],s=0;s<r;s++){var o=Math.floor(62*Math.random());e+=a[o]}var n=/^(?=.*?[a-z])(?=.*?[A-Z])(?=.*?\d).*$/,i=new RegExp(n);i.test(e)?this.formData.password=e:this.creatCode(9)},setPort:function(t){var e=t[t.length-1];this.formData.os=t[t.length-1];for(var r="",a=0;a<this.pageData.length;a++){var s=this.pageData[a];if(s.os.length)for(var o=0;o<s.os.length;o++){var n=s.os[o];n.id===e&&(r=n.port,this.ostype=n.ostype)}}this.formData.port=r},reinstallDcim:function(t){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r={id:e.formData.id},t.next=3,Object(n["b"])(r);case 3:if(a=t.sent,s=a.data,200===s.status){t.next=8;break}return e.$message.error(s.msg),t.abrupt("return");case 8:e.pageData=s.os;case 9:case"end":return t.stop()}}),t)})))()},onOpen:function(){this.reinstallDcim()},onClose:function(){this.$refs.elForm.resetFields()},close:function(){this.$emit("update:visible",!1)},handelConfirm:function(){var t=this;this.$refs.elForm.validate(function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(r){var a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r){e.next=2;break}return e.abrupt("return");case 2:return t.$message.success("正在发起重装，请稍候"),t.loading=!0,e.next=6,Object(n["c"])(t.formData);case 6:if(a=e.sent,s=a.data,200===s.status){e.next=12;break}return t.$message.error(s.msg),t.loading=!1,e.abrupt("return");case 12:t.loading=!1,t.$message.success(s.msg),t.onClose(),t.$emit("reinstall-success",!0);case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}},l=i,c=r("2877"),u=Object(c["a"])(l,a,s,!1,null,"055d1bed",null);e["a"]=u.exports},8728:function(t,e,r){t.exports=r.p+"img/random.7d25fffa.svg"},a5d3:function(t,e,r){"use strict";var a=r("34dc"),s=r.n(a);s.a},dc55:function(t,e,r){"use strict";var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{},[r("el-dialog",t._g(t._b({on:{open:t.onOpen,close:t.onClose}},"el-dialog",t.$attrs,!1),t.$listeners),[r("el-row",{attrs:{gutter:15}},[r("el-form",{ref:"formData",attrs:{model:t.formData,rules:t.rules,size:"medium","label-width":"auto"}},[r("el-col",{attrs:{span:22}},[r("el-row",[r("el-col",{attrs:{span:24}},[r("el-form-item",{attrs:{label:"密码",prop:"password"}},[r("el-input",{style:{width:"100%"},attrs:{placeholder:"请输入密码","show-password":"","auto-complete":"new-password"},model:{value:t.formData.password,callback:function(e){t.$set(t.formData,"password",e)},expression:"formData.password"}},[r("el-button",{attrs:{slot:"append"},on:{click:function(e){return t.creatCode(9)}},slot:"append"},[t._v("随机密码")])],1)],1)],1),r("el-col",{attrs:{span:24}},[r("el-form-item",{attrs:{label:"是否破解其他用户",prop:"other_user"}},[r("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:t.formData.other_user,callback:function(e){t.$set(t.formData,"other_user",e)},expression:"formData.other_user"}})],1)],1),r("el-col",{attrs:{span:24}},[1===t.formData.other_user?r("el-form-item",{attrs:{label:"其他用户名称",prop:"user"}},[r("el-input",{style:{width:"100%"},attrs:{placeholder:"请输入其他用户名称",clearable:""},model:{value:t.formData.user,callback:function(e){t.$set(t.formData,"user",e)},expression:"formData.user"}})],1):t._e()],1)],1)],1)],1)],1),r("div",{attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:t.close}},[t._v("取消")]),r("el-button",{attrs:{type:"primary",loading:t.loading},on:{click:t.handelConfirm}},[t._v("确定")])],1)],1)],1)},s=[],o=(r("4d63"),r("ac1f"),r("25f0"),r("96cf"),r("1da1")),n=r("e87d"),i={data:function(){return{loading:!1,formData:{id:"",password:void 0,other_user:!1,user:void 0},rules:{password:[{required:!0,message:"请输入密码",trigger:"blur"}],user:[{required:!0,message:"请输入其他用户名称",trigger:"blur"}]}}},created:function(){var t=this;this.$eventBus.$on("crackPass",(function(e){t.formData.id=e}))},mounted:function(){},methods:{creatCode:function(t){for(var e="",r=parseInt(t),a=[0,1,2,3,4,5,6,7,8,9,"a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],s=0;s<r;s++){var o=Math.floor(62*Math.random());e+=a[o]}var n=/^(?=.*?[a-z])(?=.*?[A-Z])(?=.*?\d).*$/,i=new RegExp(n);i.test(e)?this.formData.password=e:this.creatCode(9)},onOpen:function(){},onClose:function(){this.$refs.formData.resetFields()},close:function(){this.$emit("update:visible",!1)},handelConfirm:function(){var t=this;this.$refs.formData.validate(function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(r){var a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r){e.next=2;break}return e.abrupt("return");case 2:return t.$message.success("正在发起破解密码，请稍候"),t.loading=!0,e.next=6,Object(n["a"])(t.formData);case 6:if(a=e.sent,s=a.data,200===s.status){e.next=12;break}return t.$message.error(s.msg),t.loading=!1,e.abrupt("return");case 12:t.loading=!1,t.$message.success(s.msg),t.onClose(),t.$emit("crackpass-success",!0);case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}},computed:{},watch:{}},l=i,c=r("2877"),u=Object(c["a"])(l,a,s,!1,null,"53217ce3",null);e["a"]=u.exports},e87d:function(t,e,r){"use strict";r.d(e,"c",(function(){return s})),r.d(e,"b",(function(){return o})),r.d(e,"a",(function(){return n}));var a=r("a27e");function s(t){return Object(a["a"])({url:"/upper/dcim_client/reinstall",method:"post",data:t})}function o(t){return Object(a["a"])({url:"/upper/dcim_client/get_os",method:"post",data:t})}function n(t){return Object(a["a"])({url:"/upper/dcim_client/crack_pass",method:"post",data:t})}}}]);