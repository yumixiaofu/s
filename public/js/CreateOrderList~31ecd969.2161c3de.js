(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["CreateOrderList~31ecd969"],{"1dde":function(e,t,r){var n=r("d039"),a=r("b622"),o=r("2d00"),i=a("species");e.exports=function(e){return o>=51||!n((function(){var t=[],r=t.constructor={};return r[i]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},"51d5":function(e,t,r){},"776c":function(e,t,r){"use strict";r.d(t,"b",(function(){return a})),r.d(t,"e",(function(){return o})),r.d(t,"d",(function(){return i})),r.d(t,"c",(function(){return s})),r.d(t,"a",(function(){return c})),r.d(t,"h",(function(){return l})),r.d(t,"f",(function(){return u})),r.d(t,"g",(function(){return d})),r.d(t,"i",(function(){return f})),r.d(t,"j",(function(){return m}));var n=r("a27e");function a(){return Object(n["a"])({url:"/ticket/ticket_page"})}function o(e,t){return Object(n["a"])({url:"/ticket/list",params:{limit:e,page:t}})}function i(){return Object(n["a"])({url:"/ticket/department"})}function s(e){return Object(n["a"])({url:"/ticket/create",method:"post",data:e})}function c(e){return Object(n["a"])({url:"/ticket/close",method:"post",data:e})}function l(e){return Object(n["a"])({url:"/ticket/reply",method:"post",data:e})}function u(e){return Object(n["a"])({url:"/ticket/detail",params:{tid:e}})}function d(e){return Object(n["a"])({url:"/ticket/evaluate",method:"post",data:e})}function f(){return Object(n["a"])({url:"/news/notice",method:"get"})}function m(e){return Object(n["a"])({url:"/news/list",method:"get",params:e})}},8418:function(e,t,r){"use strict";var n=r("c04e"),a=r("9bf2"),o=r("5c6c");e.exports=function(e,t,r){var i=n(t);i in e?a.f(e,i,o(0,r)):e[i]=r}},"99af":function(e,t,r){"use strict";var n=r("23e7"),a=r("d039"),o=r("e8b5"),i=r("861d"),s=r("7b0b"),c=r("50c4"),l=r("8418"),u=r("65f0"),d=r("1dde"),f=r("b622"),m=r("2d00"),p=f("isConcatSpreadable"),h=9007199254740991,b="Maximum allowed index exceeded",g=m>=51||!a((function(){var e=[];return e[p]=!1,e.concat()[0]!==e})),v=d("concat"),k=function(e){if(!i(e))return!1;var t=e[p];return void 0!==t?!!t:o(e)},w=!g||!v;n({target:"Array",proto:!0,forced:w},{concat:function(e){var t,r,n,a,o,i=s(this),d=u(i,0),f=0;for(t=-1,n=arguments.length;t<n;t++)if(o=-1===t?i:arguments[t],k(o)){if(a=c(o.length),f+a>h)throw TypeError(b);for(r=0;r<a;r++,f++)r in o&&l(d,f,o[r])}else{if(f>=h)throw TypeError(b);l(d,f++,o)}return d.length=f,d}})},a434:function(e,t,r){"use strict";var n=r("23e7"),a=r("23cb"),o=r("a691"),i=r("50c4"),s=r("7b0b"),c=r("65f0"),l=r("8418"),u=r("1dde"),d=r("ae40"),f=u("splice"),m=d("splice",{ACCESSORS:!0,0:0,1:2}),p=Math.max,h=Math.min,b=9007199254740991,g="Maximum allowed length exceeded";n({target:"Array",proto:!0,forced:!f||!m},{splice:function(e,t){var r,n,u,d,f,m,v=s(this),k=i(v.length),w=a(e,k),O=arguments.length;if(0===O?r=n=0:1===O?(r=0,n=k-w):(r=O-2,n=h(p(o(t),0),k-w)),k+r-n>b)throw TypeError(g);for(u=c(v,n),d=0;d<n;d++)f=w+d,f in v&&l(u,d,v[f]);if(u.length=n,r<n){for(d=w;d<k-n;d++)f=d+n,m=d+r,f in v?v[m]=v[f]:delete v[m];for(d=k;d>k-n+r;d--)delete v[d-1]}else if(r>n)for(d=k-n;d>w;d--)f=d+n-1,m=d+r-1,f in v?v[m]=v[f]:delete v[m];for(d=0;d<r;d++)v[d+w]=arguments[d+2];return v.length=k-n+r,u}})},bb1e:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"create"}},[r("div",{staticClass:"breadcrumb"},[r("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/tickets/help"}}},[r("i",{staticClass:"iconfont icon-wodegongdan"}),e._v(" 工单 ")]),r("el-breadcrumb-item",[e._v(" 创建工单 ")])],1)],1),r("el-form",{ref:"numberValidateForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"125px"}},[r("el-form-item",{attrs:{label:e.$t("workOrder.department"),prop:"dptid"}},[r("el-select",{attrs:{placeholder:e.$t("workOrder.pleaseChoose")},model:{value:e.ruleForm.dptid,callback:function(t){e.$set(e.ruleForm,"dptid",t)},expression:"ruleForm.dptid"}},e._l(e.department,(function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),1!==e.productDis?r("el-form-item",{staticClass:"create_category",attrs:{label:e.$t("workOrder.product")}},[r("el-select",{attrs:{placeholder:e.$t("workOrder.pleaseChoose")},model:{value:e.ruleForm.hostid,callback:function(t){e.$set(e.ruleForm,"hostid",t)},expression:"ruleForm.hostid"}},e._l(e.pageInfo.host_list,(function(e,t){return r("el-option",{key:t,attrs:{label:e,value:t}})})),1)],1):e._e(),r("el-form-item",{staticClass:"create_category",attrs:{label:e.$t("workOrder.priority")}},[r("el-select",{attrs:{placeholder:e.$t("workOrder.pleaseChoose")},model:{value:e.ruleForm.select,callback:function(t){e.$set(e.ruleForm,"select",t)},expression:"ruleForm.select"}},e._l(e.pageInfo.priority,(function(e){return r("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1),r("el-form-item",{staticClass:"create_title",attrs:{label:e.$t("workOrder.problemTitle"),prop:"title"}},[r("el-input",{model:{value:e.ruleForm.title,callback:function(t){e.$set(e.ruleForm,"title",t)},expression:"ruleForm.title"}})],1),r("el-form-item",{staticClass:"create_description",attrs:{label:e.$t("workOrder.problemDescription"),prop:"content"}},[r("el-input",{staticClass:"content-textarea",attrs:{type:"textarea",rows:2,placeholder:e.$t("workOrder.pleaseEnter")},model:{value:e.ruleForm.content,callback:function(t){e.$set(e.ruleForm,"content",t)},expression:"ruleForm.content"}})],1),r("el-form-item",{staticClass:"create_upload"},[r("el-upload",{ref:"annexRef",staticClass:"upload-demo",attrs:{"with-credentials":"",action:e.uploadurl,"on-success":e.handelSuccess,"on-remove":e.handleRemove,multiple:"",limit:1e4,"on-exceed":e.handleExceed,"file-list":e.fileList,accept:".png, .jpg, .jpeg .gif"}},[r("div",{staticClass:"create_upload_button",attrs:{slot:"trigger"},slot:"trigger"},[e._v(e._s(e.$t("workOrder.addAttachment")))]),r("i",[e._v(e._s(e.$t("workOrder.tips")))])])],1),r("div",{staticClass:"create_set"},[r("el-button",{staticClass:"border_radius",on:{click:function(t){return e.resetForm(e.ruleForm)}}},[e._v(e._s(e.$t("workOrder.cancel")))]),r("el-button",{staticClass:"border_radius",attrs:{type:"primary",loading:e.loading},on:{click:function(t){return e.submitForm()}}},[e._v(" "+e._s(e.$t("workOrder.createBtn")))])],1)],1)],1)},a=[],o=(r("99af"),r("c740"),r("a434"),r("96cf"),r("1da1")),i=r("776c"),s={metaInfo:function(){return{title:this.$t("workOrder.createBtn"),htmlAttrs:{lang:this.$t("htmlAttrs.lang"),amp:!0}}},data:function(){return{loading:!1,editorOption:{modules:{toolbar:[["bold","italic","underline","strike"],["blockquote","code-block"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{direction:"rtl"}],[{size:["small",!1,"large","huge"]}],[{header:[1,2,3,4,5,6,!1]}],[{color:[]},{background:[]}],[{font:[]}],[{align:[]}],["clean"]]},theme:"snow"},input:"",ruleForm:{dptid:"",priority:"",title:"",content:"",attachment:[],hostid:[],select:this.$t("workOrder.in")},rules:{dptid:[{required:!0,message:this.$t("workOrder.departmentPrompt"),trigger:"change"}],title:[{required:!0,message:this.$t("workOrder.questionPrompt"),trigger:"blur"}],content:[{required:!0,message:"请输入问题描述",trigger:"blur"}]},department:[],pageInfo:{},fileList:[],uploadurl:this.$baseUrl+"/upload_image",productDis:""}},computed:{getName:function(){return this.ruleForm.content.length}},watch:{getName:{handler:function(e){1e4===e&&this.$message.error("您输入的字数超过限制了")}}},created:function(){this.getOrderData(),this.GetInformation()},methods:{onEditorChange:function(e){e.quill.deleteText(1e4,4)},onEditorBlur:function(e){},getOrderData:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(i["b"])();case 2:if(r=t.sent,n=r.data,200===n.status){t.next=6;break}return t.abrupt("return",!1);case 6:e.pageInfo=n.data,e.productDis=e.pageInfo.host_list.length;case 8:case"end":return t.stop()}}),t)})))()},GetInformation:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(i["d"])();case 2:if(r=t.sent,n=r.data,200===n.status){t.next=6;break}return t.abrupt("return",!1);case 6:e.department=n.data;case 7:case"end":return t.stop()}}),t)})))()},submitForm:function(){var e=this;this.$refs.numberValidateForm.validate(function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(r){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r){t.next=4;break}return t.abrupt("return",!1);case 4:return e.loading=!0,t.next=7,Object(i["c"])(e.ruleForm);case 7:n=t.sent,200!==n.data.status?(e.$message.error(n.data.msg),e.loading=!1):(e.$message.success(n.data.msg),e.loading=!1,e.$router.push("ticketlist"));case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},resetForm:function(e){this.$router.push("help")},handleExceed:function(e,t){this.$message.warning("当前限制选择10个文件，本次选择了 ".concat(e.length," 个文件，共选择了 ").concat(e.length+t.length," 个文件"))},handleRemove:function(e){var t=this.ruleForm.attachment.findIndex((function(t){return t===e.response.savename}));this.ruleForm.attachment.splice(t,1)},handelSuccess:function(e,t){if(200!==e.status)return this.$message.error(e.msg),this.$refs.annexRef.clearFiles(),!1;this.ruleForm.attachment.push(e.savename)}}},c=s,l=(r("e54c"),r("2877")),u=Object(l["a"])(c,n,a,!1,null,"62b265e5",null);t["default"]=u.exports},c740:function(e,t,r){"use strict";var n=r("23e7"),a=r("b727").findIndex,o=r("44d2"),i=r("ae40"),s="findIndex",c=!0,l=i(s);s in[]&&Array(1)[s]((function(){c=!1})),n({target:"Array",proto:!0,forced:c||!l},{findIndex:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}}),o(s)},e54c:function(e,t,r){"use strict";var n=r("51d5"),a=r.n(n);a.a}}]);