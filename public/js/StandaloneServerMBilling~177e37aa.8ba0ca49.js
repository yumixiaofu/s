(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["StandaloneServerMBilling~177e37aa"],{bafa:function(t,e,r){},c4a5:function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"layout_card"},[r("div",{staticClass:"page-title"},[t._v(t._s(t.$t("standaloneServer.batchRenewPageTitle")))]),r("div",{staticClass:"list-box"},[r("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,border:"","header-cell-style":{"font-size":"14px",color:"#7c7c7c","font-weight":"normal"}}},[r("el-table-column",{attrs:{prop:"name",label:t.$t("standaloneServer.productname")}}),r("el-table-column",{attrs:{prop:"dedicatedip",label:"IP"}}),r("el-table-column",{attrs:{prop:"nextduedate",label:t.$t("standaloneServer.currentExpirationTime")},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[r("div",[t._v(" "+t._s(a.nextduedate?t.$moment(1e3*a.nextduedate).format("YYYY-MM-DD"):"-")+" ")])]}}])}),r("el-table-column",{attrs:{prop:"nextduedate_renew",label:t.$t("standaloneServer.expiryTimeAfterRenewal")},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[r("div",[t._v(" "+t._s(a.nextduedate_renew?t.$moment(1e3*a.nextduedate_renew).format("YYYY-MM-DD"):"-")+" ")])]}}])}),r("el-table-column",{attrs:{prop:"billingcycle",label:t.$t("standaloneServer.renewalCycle"),width:"250"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[r("div",[r("el-select",{on:{change:t.selectChange},model:{value:a.billingcycle,callback:function(e){t.$set(a,"billingcycle",e)},expression:"row.billingcycle"}},t._l(a.allow_billingcycle,(function(e){return r("el-option",{key:e.billingcycle,attrs:{label:t.currency.prefix+" "+e.amount+" "+t.currency.suffix+" / "+e.billingcycle_zh,value:e.billingcycle}})})),1)],1)]}}])}),r("el-table-column",{attrs:{prop:"saleproducts",label:t.$t("standaloneServer.discount")},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[r("div",[r("span",{staticStyle:{color:"#a5a5a5"}},[t._v(t._s(a.flags?"(客户折扣优惠)":"-"))])])]}}])})],1),r("div",{staticClass:"total-price"},[r("span",[t._v(t._s(t.$t("standaloneServer.total"))+"："),r("span",[t._v(t._s(t.currency.prefix)+t._s(t.total)+t._s(t.currency.suffix))])])]),r("div",{staticClass:"discount hiddenFunc"},[t._v(" "+t._s(Number(t.totalSale)?"(客户折扣优惠)":"")+" ")]),r("div",{staticClass:"btn-box"},[r("el-button",{attrs:{type:"primary"},on:{click:t.payNow}},[t._v(t._s(t.$t("standaloneServer.renewNow")))])],1)],1),r("payNew",{ref:"control",on:{"pay-success":t.goToList,"balance-success":t.toList}})],1)},s=[],i=(r("4160"),r("159b"),r("96cf"),r("1da1")),o=r("27fd"),n=r("2ef0"),c={metaInfo:function(){return{title:this.$t("standaloneServer.batchRenewPageTitle"),htmlAttrs:{lang:this.$t("htmlAttrs.lang"),amp:!0}}},data:function(){return{totalSale:"",host_ids:[],tableData:[],currency:{},total:0,formData:{host_ids:[],cycles:[]},product_type:{fa_icon:"",groupname:"",id:0}}},methods:{getIds:function(){var t=this.$route.query.ids;this.host_ids=[],this.formData.host_ids=[],Array.isArray(t)?(this.host_ids=this.$route.query.ids,this.formData.host_ids=this.$route.query.ids):(this.host_ids.push(t),this.formData.host_ids.push(t))},getListData:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(o["m"])(t.formData);case 2:if(r=e.sent,a=r.data,200===a.status){e.next=7;break}return t.$message.error(a.msg),e.abrupt("return",!1);case 7:t.totalSale=a.data.totalsale,t.tableData=a.data.hosts,t.currency=a.data.currency,t.total=a.data.total,t.formData.host_ids=[],a.data.hosts.forEach((function(e){t.formData.host_ids.push(e.id)})),a.data.hosts.forEach((function(e){t.formData.cycles[e.id]=e.billingcycle,"ontrial"===e.billingcycle&&(e.billingcycle=e.allow_billingcycle.length?e.allow_billingcycle[0].billingcycle:"ontrial")})),a.data.hosts.length&&a.data.hosts[0].groupn&&(t.product_type=a.data.hosts[0].groupn);case 15:case"end":return e.stop()}}),e)})))()},selectChange:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var r,a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.formData.cycles=[],t.tableData.forEach((function(e){t.formData.cycles[e.id]=e.billingcycle})),r=t.$qs.stringify(t.formData),e.next=5,Object(o["m"])(r);case 5:if(a=e.sent,s=a.data,200===s.status){e.next=10;break}return t.$message.error(s.msg),e.abrupt("return",!1);case 10:t.totalSale=s.data.totalsale,t.tableData=s.data.hosts,t.currency=s.data.currency,t.total=s.data.total;case 14:case"end":return e.stop()}}),e)})))()},payNow:n.throttle(Object(i["a"])(regeneratorRuntime.mark((function t(){var e,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(o["D"])(this.$qs.stringify(this.formData));case 2:e=t.sent,r=e.data,1001===r.status?(this.$message.success(r.msg),1===this.product_type.id?this.$router.push({path:"/cloud-server",query:{groupid:this.product_type.id}}):2===this.product_type.id?this.$router.push({path:"/servers",query:{groupid:this.product_type.id}}):this.$router.push({path:"/other-servers",query:{groupid:this.product_type.id}})):200===r.status?r.data?this.$refs.control.main({id:r.data.invoice_id,name:this.$t("standaloneServer.batchRenewPageTitle")}):(this.$message.success(r.msg),1===this.product_type.id?this.$router.push({path:"/cloud-server",query:{groupid:this.product_type.id}}):2===this.product_type.id?this.$router.push({path:"/servers",query:{groupid:this.product_type.id}}):this.$router.push({path:"/other-servers",query:{groupid:this.product_type.id}})):this.$message.error(r.msg);case 5:case"end":return t.stop()}}),t,this)}))),1e3),goToList:function(t){t&&(1===this.product_type.id?this.$router.push({path:"/cloud-server",query:{groupid:this.product_type.id}}):2===this.product_type.id?this.$router.push({path:"/servers",query:{groupid:this.product_type.id}}):this.$router.push({path:"/other-servers",query:{groupid:this.product_type.id}}))},toList:function(t){t&&(1===this.product_type.id?this.$router.push({path:"/cloud-server",query:{groupid:this.product_type.id}}):2===this.product_type.id?this.$router.push({path:"/servers",query:{groupid:this.product_type.id}}):this.$router.push({path:"/other-servers",query:{groupid:this.product_type.id}}))}},created:function(){this.getIds(),this.getListData()},beforeDestroy:function(){sessionStorage.removeItem("mulRenewArr"),sessionStorage.removeItem("multipleType")}},u=c,l=(r("c869b"),r("2877")),d=Object(l["a"])(u,a,s,!1,null,"3d7874b2",null);e["default"]=d.exports},c869b:function(t,e,r){"use strict";var a=r("bafa"),s=r.n(a);s.a}}]);