(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["StandaloneServerTraffic~31ecd969"],{"126a":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"standaloneserver_traffic"},[a("div",{staticClass:"standaloneserver_traffic_chart"},[a("div",{staticClass:"chart_title"},[a("div",{staticClass:"chart_titlel"},[t._v(t._s(t.$t("standaloneServer.usageStatistics")))]),a("div",{staticClass:"chart_titler"},[a("el-select",{model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},t._l(t.options,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)]),a("div",{staticClass:"chart_box",attrs:{id:"trafficCanvas"}})]),a("div",{staticClass:"standaloneserver_traffic_list"},[a("div",{staticClass:"list_title"},[a("div",{staticClass:"list_titlel"},[a("div",{staticClass:"list_titlel_top"},[a("div",{staticClass:"list_titlel_topl"},[a("span",{staticStyle:{fontSize:"16px"}},[t._v(t._s(t.$t("standaloneServer.remainingFlow")))]),t._v(" / "),a("span",{staticStyle:{fontSize:"12px"}},[t._v(t._s(t.$t("standaloneServer.totalFlow")))])]),a("div",{staticClass:"list_titlel_topr"},[t.less>=0?a("div",[a("span",{staticStyle:{fontWeight:"700",fontSize:"16px",color:"#007bfc"}},[t._v(t._s(t.less)+"GB")]),t._v(" / "),a("span",{staticStyle:{fontSize:"12px"}},[t._v(t._s(t.bwlimit)+"GB")])]):a("div",[a("span",{staticStyle:{fontWeight:"700",fontSize:"16px",color:"red"}},[t._v(t._s(t.less)+"GB")]),t._v(" / "),a("span",{staticStyle:{fontSize:"12px"}},[t._v(t._s(t.bwlimit)+"GB")])])])]),a("div",{staticClass:"list_titlel_foot"},[a("div",{staticClass:"progress"},[a("el-progress",{staticStyle:{width:"100%"},attrs:{percentage:t.percentage,"show-text":!1}})],1)])]),a("div",{staticClass:"list_titler"},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.dialogTableVisible=!0}}},[t._v(t._s(t.$t("standaloneServer.order")))])],1)]),a("div",{staticClass:"list_box"},[a("div",{staticClass:"list_table"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.frontEndPageChange,"header-cell-style":{"font-size":"14px",color:"#7c7c7c","font-weight":"normal"}}},[a("el-table-column",{attrs:{prop:"name",label:t.$t("standaloneServer.name"),align:"center",sortable:""}}),a("el-table-column",{attrs:{prop:"capacity",label:t.$t("standaloneServer.total"),align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.row;return[a("span",[t._v(t._s(r.capacity)+" GB")])]}}])}),a("el-table-column",{attrs:{prop:"leave",label:t.$t("standaloneServer.Remain"),align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.row;return[a("span",[t._v(t._s(r.leave)+" GB")])]}}])}),a("el-table-column",{attrs:{prop:"pay_time",label:t.$t("standaloneServer.orderTime"),align:"center",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.row;return[a("span",[t._v(t._s(t.$moment(1e3*r.pay_time).format("YYYY-MM-DD")))])]}}])})],1)],1),a("div",{staticClass:"list_page"},[a("el-pagination",{attrs:{background:"",layout:" prev, pager, next","prev-text":t.$t("Previous"),"next-text":t.$t("Nextpage"),"page-size":t.limit,total:t.total,"pager-count":5},on:{"current-change":t.handlePageChange}})],1)])]),a("el-dialog",{attrs:{title:t.$t("standaloneServer.orderFlowPack"),visible:t.dialogTableVisible},on:{"update:visible":function(e){t.dialogTableVisible=e}}},[a("div",{staticClass:"dialog_table"},[a("el-table",{attrs:{data:t.gridData,"header-cell-style":{"font-size":"14px",color:"#7c7c7c","font-weight":"normal"}}},[a("el-table-column",{attrs:{property:"name",label:t.$t("standaloneServer.flowname")},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.row;return[a("span",[t._v(t._s(r.name))]),t._v(" "),0===r.leave?a("span",[t._v("("+t._s(t.$t("standaloneServer.outOfStock"))+")")]):t._e()]}}])}),a("el-table-column",{attrs:{property:"capacity",label:t.$t("standaloneServer.flow")},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.row;return[a("span",[t._v(t._s(r.capacity)+" GB")])]}}])}),a("el-table-column",{attrs:{property:"price",label:t.$t("standaloneServer.price")},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.row;return[a("span",[t._v(t._s(t.currency.prefix)+" "+t._s(r.price)+" "+t._s(t.currency.suffix))])]}}])}),a("el-table-column",{attrs:{label:t.$t("standaloneServer.order"),align:"center",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.row;return[a("el-button",{attrs:{type:"primary",size:"mini",disabled:!r.leave},on:{click:function(e){return t.buy(r)}}},[t._v(" "+t._s(t.$t("standaloneServer.buyNow")))])]}}])})],1)],1)]),a("payNew",{ref:"control",on:{"pay-success":t.reloadList,"balance-success":t.reList}})],1)},s=[],i=(a("fb6a"),a("b0c0"),a("a9e3"),a("b680"),a("96cf"),a("1da1")),n=a("27fd"),l=a("99afe"),o=a("2ef0"),c={data:function(){return{chartData:[],value:7,start:"",options:[{value:7,label:this.$t("standaloneServer.selectTime7")},{value:15,label:this.$t("standaloneServer.selectTime15")},{value:30,label:this.$t("standaloneServer.selectTime30")}],bwlimit:0,bwusage:0,less:0,percentage:0,dialogTableVisible:!1,gridData:[],currency:{},page:1,limit:6,total:0,tableData:[]}},props:{id:{type:Number,default:0}},methods:{getData:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(n["w"])(t.id);case 2:if(a=e.sent,r=a.data,200===r.status){e.next=7;break}return t.$message.error(r.msg),e.abrupt("return",!1);case 7:t.currency=r.data.currency,t.gridData=r.data.dcim.flowpacket,t.bwlimit=r.data.host_data.bwlimit,t.bwusage=r.data.host_data.bwusage,t.less=parseFloat((r.data.host_data.bwlimit-r.data.host_data.bwusage).toFixed(2)),t.percentage=(t.less<=0?0:t.less)/(r.data.host_data.bwlimit?r.data.host_data.bwlimit:1)*100,t.tableData=r.data.dcim.flow_packet_use_list,t.total=r.data.dcim.flow_packet_use_list.length;case 15:case"end":return e.stop()}}),e)})))()},getChartData:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.chartData=[],0!==t.id){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,Object(n["v"])(t.id,t.start);case 5:if(a=e.sent,r=a.data,200===r.status){e.next=9;break}return e.abrupt("return",!1);case 9:t.chartData=r.data,t.initCharts();case 11:case"end":return e.stop()}}),e)})))()},initCharts:function(){var t=this.$t("standaloneServer.traffic");this.columnPlot&&this.columnPlot.destroy(),this.columnPlot=new l["a"]("trafficCanvas",{data:this.chartData,xField:"time",yField:"value",meta:{value:{alias:t}},color:"#007bfc",yAxis:{label:{suffix:"GB"},title:{visible:!1},grid:{visible:!1}},xAxis:{title:{visible:!1}}}),this.columnPlot.render()},buy:o.throttle(function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(n["d"])(this.id,e.id);case 2:if(a=t.sent,r=a.data,200===r.status){t.next=7;break}return this.$message.error(r.msg),t.abrupt("return",!1);case 7:this.dialogTableVisible=!1,this.$refs.control.main({id:r.data.invoiceid,name:e.name});case 9:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),200),reloadList:function(t){t&&this.getData()},reList:function(t){t&&this.getData()},handlePageChange:function(t){this.page=t}},created:function(){this.getData(),this.getChartData()},computed:{frontEndPageChange:function(){var t=(this.page-1)*this.limit,e=this.page*this.limit;return this.tableData.slice(t,e)}},watch:{value:{handler:function(t){7===t?(this.start=this.$moment(Date.now()-5184e5).format("YYYY-MM-DD"),this.getChartData()):15===t?(this.start=this.$moment(Date.now()-12096e5).format("YYYY-MM-DD"),this.getChartData()):30===t&&(this.start=this.$moment(Date.now()-25056e5).format("YYYY-MM-DD"),this.getChartData())},immediate:!0}}},u=c,d=(a("ad9a"),a("2877")),f=Object(d["a"])(u,r,s,!1,null,"bf22e18e",null);e["default"]=f.exports},"1dde":function(t,e,a){var r=a("d039"),s=a("b622"),i=a("2d00"),n=s("species");t.exports=function(t){return i>=51||!r((function(){var e=[],a=e.constructor={};return a[n]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},8418:function(t,e,a){"use strict";var r=a("c04e"),s=a("9bf2"),i=a("5c6c");t.exports=function(t,e,a){var n=r(e);n in t?s.f(t,n,i(0,a)):t[n]=a}},ad9a:function(t,e,a){"use strict";var r=a("eae1"),s=a.n(r);s.a},eae1:function(t,e,a){},fb6a:function(t,e,a){"use strict";var r=a("23e7"),s=a("861d"),i=a("e8b5"),n=a("23cb"),l=a("50c4"),o=a("fc6a"),c=a("8418"),u=a("b622"),d=a("1dde"),f=a("ae40"),v=d("slice"),p=f("slice",{ACCESSORS:!0,0:0,1:2}),b=u("species"),h=[].slice,_=Math.max;r({target:"Array",proto:!0,forced:!v||!p},{slice:function(t,e){var a,r,u,d=o(this),f=l(d.length),v=n(t,f),p=n(void 0===e?f:e,f);if(i(d)&&(a=d.constructor,"function"!=typeof a||a!==Array&&!i(a.prototype)?s(a)&&(a=a[b],null===a&&(a=void 0)):a=void 0,a===Array||void 0===a))return h.call(d,v,p);for(r=new(void 0===a?Array:a)(_(p-v,0)),u=0;v<p;v++,u++)v in d&&c(r,u,d[v]);return r.length=u,r}})}}]);