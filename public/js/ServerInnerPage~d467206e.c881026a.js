(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["ServerInnerPage~d467206e"],{"17b9":function(t,e,a){},"3df8":function(t,e,a){},"4f73":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{},[a("el-dialog",t._g(t._b({on:{open:t.onOpen,close:t.onClose}},"el-dialog",t.$attrs,!1),t.$listeners),[a("el-row",{attrs:{gutter:15}},[a("el-form",{ref:"elForm",attrs:{model:t.formData,rules:t.rules,size:"medium","label-width":"107px"}},[a("el-col",{attrs:{span:22}},[a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"系统选择",prop:"os"}},[a("el-cascader",{style:{width:"100%"},attrs:{filterable:"",options:t.pageData,props:t.osProps,placeholder:"请选择系统选择",clearable:""},on:{change:t.setPort},model:{value:t.formData.osArr,callback:function(e){t.$set(t.formData,"osArr",e)},expression:"formData.osArr"}})],1)],1),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"密码",prop:"password"}},[a("el-input",{style:{width:"100%"},attrs:{placeholder:"请输入密码","show-password":"","auto-complete":"new-password"},model:{value:t.formData.password,callback:function(e){t.$set(t.formData,"password",e)},expression:"formData.password"}},[a("el-button",{attrs:{slot:"append"},on:{click:function(e){return t.creatCode(9)}},slot:"append"},[t._v("随机密码")])],1)],1)],1),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"端口",prop:"port"}},[a("el-input",{style:{width:"100%"},attrs:{placeholder:"请输入端口"},model:{value:t.formData.port,callback:function(e){t.$set(t.formData,"port",e)},expression:"formData.port"}},[a("el-button",{attrs:{slot:"append"},on:{click:t.portRandom},slot:"append"},[t._v("随机端口")])],1)],1)],1),a("el-col",{attrs:{span:24}},["1"===t.ostype||"2"===t.ostype?a("el-form-item",{attrs:{label:"分区类型",prop:"part_type"}},[a("el-radio-group",{attrs:{size:"medium"},model:{value:t.formData.part_type,callback:function(e){t.$set(t.formData,"part_type",e)},expression:"formData.part_type"}},t._l(t.part_typeOptions,(function(e,s){return a("el-radio",{key:s,attrs:{label:e.value,disabled:e.disabled}},[t._v(t._s(e.label))])})),1)],1):t._e()],1)],1)],1)],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.close}},[t._v("取消")]),a("el-button",{attrs:{type:"primary",loading:t.loading},on:{click:t.handelConfirm}},[t._v("确定")])],1)],1)],1)},n=[],o=(a("4d63"),a("ac1f"),a("25f0"),a("96cf"),a("1da1")),r=a("e87d"),i={inheritAttrs:!1,components:{},props:[],data:function(){return{loading:!1,id:"",ostype:"",pageData:[],osProps:{multiple:!1,label:"name",value:"id",children:"os"},formData:{id:"",os:"",osArr:void 0,password:void 0,port:void 0,part_type:0},rules:{os:[{required:!0,message:"请选择系统",trigger:"change"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}],port:[{required:!0,message:"请输入端口",trigger:"blur"}],part_type:[{required:!0,message:"单选框组不能为空",trigger:"change"}]},part_typeOptions:[{label:"全盘格式化",value:0},{label:"第一分区格式化",value:1}]}},computed:{},watch:{},created:function(){var t=this;this.$eventBus.$on("reinstall",(function(e){t.formData.id=e}))},mounted:function(){},methods:{portRandom:function(){var t=Math.floor(1e4*Math.random())+1e4;this.formData.port=t},creatCode:function(t){for(var e="",a=parseInt(t),s=[0,1,2,3,4,5,6,7,8,9,"a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],n=0;n<a;n++){var o=Math.floor(62*Math.random());e+=s[o]}var r=/^(?=.*?[a-z])(?=.*?[A-Z])(?=.*?\d).*$/,i=new RegExp(r);i.test(e)?this.formData.password=e:this.creatCode(9)},setPort:function(t){var e=t[t.length-1];this.formData.os=t[t.length-1];for(var a="",s=0;s<this.pageData.length;s++){var n=this.pageData[s];if(n.os.length)for(var o=0;o<n.os.length;o++){var r=n.os[o];r.id===e&&(a=r.port,this.ostype=r.ostype)}}this.formData.port=a},reinstallDcim:function(t){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var a,s,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={id:e.formData.id},t.next=3,Object(r["b"])(a);case 3:if(s=t.sent,n=s.data,200===n.status){t.next=8;break}return e.$message.error(n.msg),t.abrupt("return");case 8:e.pageData=n.os;case 9:case"end":return t.stop()}}),t)})))()},onOpen:function(){this.reinstallDcim()},onClose:function(){this.$refs.elForm.resetFields()},close:function(){this.$emit("update:visible",!1)},handelConfirm:function(){var t=this;this.$refs.elForm.validate(function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(a){var s,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a){e.next=2;break}return e.abrupt("return");case 2:return t.$message.success("正在发起重装，请稍候"),t.loading=!0,e.next=6,Object(r["c"])(t.formData);case 6:if(s=e.sent,n=s.data,200===n.status){e.next=12;break}return t.$message.error(n.msg),t.loading=!1,e.abrupt("return");case 12:t.loading=!1,t.$message.success(n.msg),t.onClose(),t.$emit("reinstall-success",!0);case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}},c=i,l=a("2877"),u=Object(l["a"])(c,s,n,!1,null,"055d1bed",null);e["a"]=u.exports},"538c":function(t,e,a){},"5da0":function(t,e,a){"use strict";var s=a("7802"),n=a.n(s);n.a},"6f41":function(t,e,a){},7109:function(t,e,a){"use strict";var s=a("17b9"),n=a.n(s);n.a},7802:function(t,e,a){},"91c6":function(t,e,a){"use strict";var s=a("538c"),n=a.n(s);n.a},b694:function(t,e,a){"use strict";var s=a("3df8"),n=a.n(s);n.a},d170:function(t,e,a){"use strict";var s=a("6f41"),n=a.n(s);n.a},dc55:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{},[a("el-dialog",t._g(t._b({on:{open:t.onOpen,close:t.onClose}},"el-dialog",t.$attrs,!1),t.$listeners),[a("el-row",{attrs:{gutter:15}},[a("el-form",{ref:"formData",attrs:{model:t.formData,rules:t.rules,size:"medium","label-width":"auto"}},[a("el-col",{attrs:{span:22}},[a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"密码",prop:"password"}},[a("el-input",{style:{width:"100%"},attrs:{placeholder:"请输入密码","show-password":"","auto-complete":"new-password"},model:{value:t.formData.password,callback:function(e){t.$set(t.formData,"password",e)},expression:"formData.password"}},[a("el-button",{attrs:{slot:"append"},on:{click:function(e){return t.creatCode(9)}},slot:"append"},[t._v("随机密码")])],1)],1)],1),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"是否破解其他用户",prop:"other_user"}},[a("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:t.formData.other_user,callback:function(e){t.$set(t.formData,"other_user",e)},expression:"formData.other_user"}})],1)],1),a("el-col",{attrs:{span:24}},[1===t.formData.other_user?a("el-form-item",{attrs:{label:"其他用户名称",prop:"user"}},[a("el-input",{style:{width:"100%"},attrs:{placeholder:"请输入其他用户名称",clearable:""},model:{value:t.formData.user,callback:function(e){t.$set(t.formData,"user",e)},expression:"formData.user"}})],1):t._e()],1)],1)],1)],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.close}},[t._v("取消")]),a("el-button",{attrs:{type:"primary",loading:t.loading},on:{click:t.handelConfirm}},[t._v("确定")])],1)],1)],1)},n=[],o=(a("4d63"),a("ac1f"),a("25f0"),a("96cf"),a("1da1")),r=a("e87d"),i={data:function(){return{loading:!1,formData:{id:"",password:void 0,other_user:!1,user:void 0},rules:{password:[{required:!0,message:"请输入密码",trigger:"blur"}],user:[{required:!0,message:"请输入其他用户名称",trigger:"blur"}]}}},created:function(){var t=this;this.$eventBus.$on("crackPass",(function(e){t.formData.id=e}))},mounted:function(){},methods:{creatCode:function(t){for(var e="",a=parseInt(t),s=[0,1,2,3,4,5,6,7,8,9,"a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],n=0;n<a;n++){var o=Math.floor(62*Math.random());e+=s[o]}var r=/^(?=.*?[a-z])(?=.*?[A-Z])(?=.*?\d).*$/,i=new RegExp(r);i.test(e)?this.formData.password=e:this.creatCode(9)},onOpen:function(){},onClose:function(){this.$refs.formData.resetFields()},close:function(){this.$emit("update:visible",!1)},handelConfirm:function(){var t=this;this.$refs.formData.validate(function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(a){var s,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a){e.next=2;break}return e.abrupt("return");case 2:return t.$message.success("正在发起破解密码，请稍候"),t.loading=!0,e.next=6,Object(r["a"])(t.formData);case 6:if(s=e.sent,n=s.data,200===n.status){e.next=12;break}return t.$message.error(n.msg),t.loading=!1,e.abrupt("return");case 12:t.loading=!1,t.$message.success(n.msg),t.onClose(),t.$emit("crackpass-success",!0);case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}},computed:{},watch:{}},c=i,l=a("2877"),u=Object(l["a"])(c,s,n,!1,null,"53217ce3",null);e["a"]=u.exports},ee64:function(t,e,a){},f30d:function(t,e,a){"use strict";var s=a("ee64"),n=a.n(s);n.a},fe28:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"box"},[s("div",{staticClass:"breadcrumb"},[s("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[1===t.baseData.host_data.group.id?s("el-breadcrumb-item",{attrs:{to:{path:"/cloud-server",query:{groupid:t.baseData.host_data.group.id}}}},[s("i",{class:t.setClass}),t._v(" "+t._s(t.baseData.host_data.group.groupname)+" ")]):2===t.baseData.host_data.group.id?s("el-breadcrumb-item",{attrs:{to:{path:"/servers",query:{groupid:t.baseData.host_data.group.id}}}},[s("i",{class:t.setClass}),t._v(" "+t._s(t.baseData.host_data.group.groupname)+" ")]):t.baseData.host_data.group.id>=3?s("el-breadcrumb-item",{attrs:{to:{path:"/other-servers",query:{groupid:t.baseData.host_data.group.id}}}},[s("i",{class:t.setClass}),t._v(" "+t._s(t.baseData.host_data.group.groupname)+" ")]):t._e(),s("el-breadcrumb-item",[t._v("详情")])],1)],1),s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{span:24}},[s("el-row",{staticClass:"server_header_box mb-20"},[s("div",{staticClass:"h-100 flexc-v fl header_box_left"},[s("div",{staticClass:"h-100 flexc-v domain"},[t.moduleData.control_view.module_power_status?s("el-tooltip",{attrs:{effect:"light",placement:"top",content:t.powerStatus.des}},[s("div",{staticClass:"box_left_img flexc cursor-pointer",on:{click:t.handlePowerStatus}},["process"===t.powerStatus.status||t.powerLoading?s("span",{staticClass:"el-icon-loading",staticStyle:{"font-size":"20px",color:"#4a7ffc"}}):"on"===t.powerStatus.status?s("span",{staticClass:"sprite start"}):"off"===t.powerStatus.status?s("span",{staticClass:"sprite close"}):"waiting"===t.powerStatus.status?s("span",{staticClass:"sprite waitOn"}):"suspend"===t.powerStatus.status?s("span",{staticClass:"sprite pause"}):"wait_reboot"===t.powerStatus.status||"wait"===t.powerStatus.status?s("span",{staticClass:"sprite waiting"}):"unknown"===t.powerStatus.status?s("span",{staticClass:"sprite unknown"}):"cold_migrate"===t.powerStatus.status?s("i",{staticClass:"iconfont icon-shujuqianyi",staticStyle:{color:"#009944","font-size":"30px"}}):"hot_migrate"===t.powerStatus.status?s("i",{staticClass:"iconfont icon-shujuqianyi",staticStyle:{color:"#ff6a00","font-size":"30px"}}):t._e()])]):s("el-tooltip",{attrs:{effect:"light",placement:"top",content:t.baseData.host_data.domainstatus_desc}},[s("div",{staticClass:"box_left_img flexc"},["Fraud"===t.baseData.host_data.domainstatus?s("span",{staticClass:"sprite2 Fraud"}):"Pending"===t.baseData.host_data.domainstatus?s("span",{staticClass:"sprite2 Pending"}):"Deleted"===t.baseData.host_data.domainstatus?s("span",{staticClass:"sprite2 Deleted"}):"Cancelled"===t.baseData.host_data.domainstatus?s("span",{staticClass:"sprite2 Cancelled"}):"Active"===t.baseData.host_data.domainstatus?s("span",{staticClass:"sprite2 Active"}):"Suspended"===t.baseData.host_data.domainstatus?s("span",{staticClass:"sprite2 Suspended"}):t._e()])]),s("div",{staticClass:"box_left_host ml-20"},[s("div",{staticClass:"left_host_name mb-10 flexc-v"},[s("label",[t._v(t._s(t.baseData.host_data.productname))]),t.baseData.host_data.suspendreason?s("el-tooltip",{attrs:{effect:"light",placement:"top",content:t.baseData.host_data.suspendreason}},[s("span",{staticClass:"ml-10 baseStyle",class:t.baseData.host_data.domainstatus},[t._v(t._s(t.baseData.host_data.domainstatus_desc))])]):s("span",{staticClass:"ml-10 baseStyle",class:t.baseData.host_data.domainstatus},[t._v(t._s(t.baseData.host_data.domainstatus_desc))])],1),s("div",{staticClass:"left_host_domain"},[t._v(t._s(t.baseData.host_data.domain))])])],1),t._l(t.baseData.config_options,(function(e,a){return s("div",{directives:[{name:"show",rawName:"v-show",value:[5,6,8].includes(e.option_type),expression:"[5, 6, 8].includes(item.option_type)"}],key:"headerconfig"+a,staticClass:"box_left_wrap"},[s("div",{staticClass:"mb-10 main_name"},[t._v(t._s(e.sub_name))]),s("div",{staticClass:"sub_name"},[5===e.option_type?s("i",{staticClass:"el-icon-s-tools"}):t._e(),6===e.option_type?s("i",{staticClass:"el-icon-cpu"}):t._e(),8===e.option_type?s("i",{staticClass:"iconfont icon-Rectanglex fz-12"}):t._e(),s("span",[t._v(t._s(e.name))]),5===e.option_type&&t.moduleData.module_button.control.map((function(t){return t.func})).includes("reinstall")?s("span",{staticClass:"left_wrap_btn",on:{click:function(e){t.controlHandleCommand(t.moduleData.module_button.control.filter((function(t){return"reinstall"===t.func}))[0].name+"-"+t.moduleData.module_button.control.filter((function(t){return"reinstall"===t.func}))[0].func+"-"+t.moduleData.module_button.control.filter((function(t){return"reinstall"===t.func}))[0].type)}}},[t._v(t._s(t.moduleData.module_button.control.filter((function(t){return"reinstall"===t.func}))[0].name))]):t._e()])])})),s("div",{staticClass:"box_left_wrap"},[s("el-popover",{staticClass:"mb-10",attrs:{placement:"right",trigger:"hover",disabled:0===t.baseData.host_data.assignedips.length||!t.baseData.host_data.dedicatedip}},[s("ul",{staticStyle:{"list-style":"none",padding:"0",color:"#333333"}},t._l(t.baseData.host_data.assignedips,(function(e,a){return s("li",{key:"ip"+a,style:{color:e.color},on:{mouseover:function(t){e.color="#2f54ea"}}},[s("span",{staticStyle:{"margin-right":"5px"}},[t._v(t._s(e.ip))]),s("i",{ref:e.guid,refInFor:!0,staticClass:"iconfont icon-fuzhiyemian cursor-pointer",attrs:{"data-clipboard-text":e.ip},on:{click:function(a){return t.clickCopy(e.guid)},mouseenter:function(a){return t.clickCopy(e.guid)}}})])})),0),s("span",{staticClass:"main_name",staticStyle:{cursor:"pointer",marginRight:"5px"},attrs:{slot:"reference"},slot:"reference"},[t._v(" "+t._s(t.baseData.host_data.dedicatedip?t.baseData.host_data.dedicatedip+(t.baseData.host_data.assignedips.length?"("+t.baseData.host_data.assignedips.length+")":""):"-")+" "),s("i",{ref:t.baseData.host_data.dedicatedip,staticClass:"iconfont icon-fuzhiyemian cursor-pointer",staticStyle:{"font-weight":"normal"},attrs:{"data-clipboard-text":t.baseData.host_data.dedicatedip},on:{click:function(e){return t.clickCopy(t.baseData.host_data.dedicatedip)},mouseenter:function(e){return t.clickCopy(t.baseData.host_data.dedicatedip)}}})])]),s("div",{staticClass:"sub_name mt-10"},[s("i",{staticClass:"iconfont icon-ip fz-12"}),t._v(" IP地址(个) ")])],1),s("div",{staticClass:"box_left_wrap"},[s("el-popover",{attrs:{placement:"bottom-end",width:"auto",trigger:"hover"}},[s("div",[s("label",{staticClass:"box_row1_label",staticStyle:{"font-size":"12px",color:"#999",display:"inline-block",width:"40px","text-align-last":"justify"}},[t._v("用户名:")]),s("span",{staticClass:"ml-10",staticStyle:{"font-size":"12px",color:"#333"}},[t._v(t._s(t.baseData.host_data.username))])]),s("div",[s("label",{staticStyle:{"font-size":"12px",color:"#999",display:"inline-block",width:"40px","text-align-last":"justify"}},[t._v("密码:")]),s("span",{staticClass:"ml-10",staticStyle:{"font-size":"12px",color:"#333"}},[t._v(t._s(t.baseData.host_data.password))]),s("i",{ref:t.baseData.host_data.password+"header1",staticClass:"iconfont icon-fuzhiyemian ml-10 cursor-pointer",staticStyle:{color:"#506cfe"},attrs:{"data-clipboard-text":t.baseData.host_data.password},on:{click:function(e){return t.clickCopy(t.baseData.host_data.password+"header1")},mouseenter:function(e){return t.clickCopy(t.baseData.host_data.password+"header1")}}})]),s("div",[s("label",{staticStyle:{"font-size":"12px",color:"#999",display:"inline-block",width:"40px","text-align-last":"justify"}},[t._v("端口:")]),s("span",{staticClass:"ml-10",staticStyle:{"font-size":"12px",color:"#333"}},[t._v(t._s(t.baseData.host_data.port||"默认"))])]),s("span",{staticClass:"main_name",staticStyle:{outline:"none"},attrs:{slot:"reference"},slot:"reference"},[t.showPwd?s("span",[t._v(t._s(t.baseData.host_data.password))]):s("span",{staticStyle:{display:"inline-block",width:"100px"}},[t._v("********")]),s("i",{staticClass:"el-icon-view ml-10 cursor-pointer",on:{click:function(e){t.showPwd=!t.showPwd}}}),s("i",{ref:t.baseData.host_data.password+"header",staticClass:"iconfont icon-fuzhiyemian cursor-pointer ml-10",staticStyle:{"font-weight":"normal"},attrs:{"data-clipboard-text":t.baseData.host_data.password},on:{click:function(e){return t.clickCopy(t.baseData.host_data.password+"header")},mouseenter:function(e){return t.clickCopy(t.baseData.host_data.password+"header")}}})])]),s("div",{staticClass:"sub_name mt-10"},[s("i",{staticClass:"iconfont icon-suo fz-12"}),s("span",[t._v("密码")]),t.moduleData.module_button.control.map((function(t){return t.func})).includes("crack_pass")?s("span",{staticClass:"left_wrap_btn",on:{click:function(e){t.controlHandleCommand(t.moduleData.module_button.control.filter((function(t){return"crack_pass"===t.func}))[0].name+"-"+t.moduleData.module_button.control.filter((function(t){return"crack_pass"===t.func}))[0].func+"-"+t.moduleData.module_button.control.filter((function(t){return"crack_pass"===t.func}))[0].type)}}},[t._v(t._s(t.moduleData.module_button.control.filter((function(t){return"crack_pass"===t.func}))[0].name))]):t._e()])],1)],2),s("div",{staticClass:"h-100 flexc-v fr tar header_box_right"},[1===t.moduleData.module_button.console.length?s("el-button",{staticClass:"mr-10 custom-button",staticStyle:{"margin-right":"10px"},on:{click:function(e){return t.consoleHandleCommand(t.moduleData.module_button.console[0].name+"-"+t.moduleData.module_button.console[0].func+"-"+t.moduleData.module_button.console[0].type)}}},[t._v(t._s(t.moduleData.module_button.console[0].name))]):t._e(),t.moduleData.module_button.console.length>1?s("el-dropdown",{staticClass:"mr-10",on:{command:t.consoleHandleCommand}},[s("el-button",{staticClass:"custom-button"},[t._v(" 控制台"),s("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),s("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},t._l(t.moduleData.module_button.console,(function(e,a){return s("el-dropdown-item",{key:"consolebtn"+a,attrs:{command:e.name+"-"+e.func+"-"+e.type}},[t._v(t._s(e.name))])})),1)],1):t._e(),t.host_cancel.init||"Active"!==t.baseData.host_data.domainstatus&&"Suspended"!==t.baseData.host_data.domainstatus?t._e():s("div",{staticClass:"mr-10"},[0===t.host_cancel.length?s("el-button",{staticClass:"custom-button",on:{click:function(e){t.cancelDialog=!0}}},[t._v("停用 ")]):s("el-button",{staticStyle:{height:"37px",border:"none","border-radius":"4px"},attrs:{type:"danger"},on:{click:t.deleteCancel}},[t._v(" "+t._s("Immediate"!==t.host_cancel.type?"到期时停用":"立即停用"))])],1),s("el-dropdown",{directives:[{name:"show",rawName:"v-show",value:t.moduleData.module_button.control.length,expression:"moduleData.module_button.control.length"}],on:{command:t.controlHandleCommand}},[s("el-button",{staticClass:"custom-button"},[t._v(" 控制"),s("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),s("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},t._l(t.moduleData.module_button.control,(function(e,a){return s("el-dropdown-item",{directives:[{name:"show",rawName:"v-show",value:"crack_pass"!==e.func&&("reinstall"!==e.func||t.showReinstallBtn),expression:"item.func !== 'crack_pass' && (item.func !== 'reinstall' || showReinstallBtn)"}],key:"controlbtn"+a,attrs:{command:e.name+"-"+e.func+"-"+e.type}},[t._v(" "+t._s(e.name))])})),1)],1)],1)])],1),s("el-col",{attrs:{xs:24,sm:24,md:24,lg:7,xl:7}},[s("div",{staticClass:"server_left_box"},[s("div",{staticClass:"left_box_row1 mb-10"},[s("el-popover",{attrs:{placement:"bottom-end",width:"auto",trigger:"hover"}},[s("div",[s("label",{staticClass:"box_row1_label",staticStyle:{"font-size":"12px",color:"#999",display:"inline-block",width:"40px","text-align-last":"justify"}},[t._v("用户名:")]),s("span",{staticClass:"ml-10",staticStyle:{"font-size":"12px",color:"#333"}},[t._v(t._s(t.baseData.host_data.username))])]),s("div",[s("label",{staticStyle:{"font-size":"12px",color:"#999",display:"inline-block",width:"40px","text-align-last":"justify"}},[t._v("密码:")]),s("span",{staticClass:"ml-10",staticStyle:{"font-size":"12px",color:"#333"}},[t._v(t._s(t.baseData.host_data.password))]),s("i",{ref:t.baseData.host_data.password,staticClass:"iconfont icon-fuzhiyemian ml-10 cursor-pointer",staticStyle:{color:"#506cfe"},attrs:{"data-clipboard-text":t.baseData.host_data.password},on:{click:function(e){return t.clickCopy(t.baseData.host_data.password)},mouseenter:function(e){return t.clickCopy(t.baseData.host_data.password)}}})]),s("div",[s("label",{staticStyle:{"font-size":"12px",color:"#999",display:"inline-block",width:"40px","text-align-last":"justify"}},[t._v("端口:")]),s("span",{staticClass:"ml-10",staticStyle:{"font-size":"12px",color:"#333"}},[t._v(t._s(t.baseData.host_data.port||"默认"))])]),s("div",{staticClass:"tac mt-10"},[t.moduleData.module_button.control.map((function(t){return t.func})).includes("crack_pass")?s("span",{staticStyle:{display:"inline-block",width:"121px",height:"27px","line-height":"27px",color:"#fff","background-color":"#2f54ea","border-radius":"4px",cursor:"pointer"},on:{click:function(e){t.controlHandleCommand(t.moduleData.module_button.control.filter((function(t){return"crack_pass"===t.func}))[0].name+"-"+t.moduleData.module_button.control.filter((function(t){return"crack_pass"===t.func}))[0].func+"-"+t.moduleData.module_button.control.filter((function(t){return"crack_pass"===t.func}))[0].type)}}},[t._v(t._s(t.moduleData.module_button.control.filter((function(t){return"crack_pass"===t.func}))[0].name))]):t._e()]),s("div",{staticClass:"box_row1_login flexc",attrs:{slot:"reference"},slot:"reference"},[t._v("登录信息"),s("i",{staticClass:"el-icon-arrow-down el-icon--right"})])]),t.baseData.host_data.bwlimit>0&&"Active"===t.baseData.host_data.domainstatus||"Suspended"===t.baseData.host_data.domainstatus&&("用量超额"===t.baseData.host_data.suspendreason_type||"flow"===t.baseData.host_data.suspendreason_type)?s("div",{staticClass:"box_row1_flow flexc",on:{click:function(e){t.flowDialogVisible=!0}}},[t._v(" 订购流量")]):t._e()],1),s("div",{directives:[{name:"show",rawName:"v-show",value:t.baseData.host_data.bwlimit>0&&"Active"===t.baseData.host_data.domainstatus||"Suspended"===t.baseData.host_data.domainstatus&&("用量超额"===t.baseData.host_data.suspendreason_type||"flow"===t.baseData.host_data.suspendreason_type),expression:"(baseData.host_data.bwlimit>0 && baseData.host_data.domainstatus==='Active') || (baseData.host_data.domainstatus === 'Suspended' && (baseData.host_data.suspendreason_type === '用量超额' || baseData.host_data.suspendreason_type === 'flow'))"}],staticClass:"left_box_row2"},[s("div",{ref:"chartBox",staticClass:"w-100 box_row2_chart",attrs:{id:"chartBox"}})]),t.moduleData.dcimcloud&&(t.moduleData.dcimcloud.nat_acl||t.moduleData.dcimcloud.nat_web)?s("div",{staticClass:"dcimcloud"},[t.moduleData.dcimcloud.nat_acl?s("div",{staticClass:"flex-between"},[s("span",[s("label",[t._v("远程地址：")]),s("span",[t._v(t._s(t.moduleData.dcimcloud.nat_acl))])]),s("span",[s("i",{ref:t.moduleData.dcimcloud.nat_acl,staticClass:"iconfont icon-fuzhiyemian cursor-pointer",staticStyle:{"font-weight":"normal"},attrs:{"data-clipboard-text":t.moduleData.dcimcloud.nat_acl},on:{click:function(e){return t.clickCopy(t.moduleData.dcimcloud.nat_acl)},mouseenter:function(e){return t.clickCopy(t.moduleData.dcimcloud.nat_acl)}}})])]):t._e(),t.moduleData.dcimcloud.nat_web?s("div",{staticClass:"flex-between"},[s("span",[s("label",[t._v("建站解析：")]),s("span",[t._v(t._s(t.moduleData.dcimcloud.nat_web))])]),s("span",[s("i",{ref:t.moduleData.dcimcloud.nat_web,staticClass:"iconfont icon-fuzhiyemian cursor-pointer",staticStyle:{"font-weight":"normal"},attrs:{"data-clipboard-text":t.moduleData.dcimcloud.nat_web},on:{click:function(e){return t.clickCopy(t.moduleData.dcimcloud.nat_web)},mouseenter:function(e){return t.clickCopy(t.moduleData.dcimcloud.nat_web)}}})])]):t._e()]):t._e(),s("div",{staticClass:"left_box_row3"},[s("el-row",{attrs:{gutter:10}},[t._l(t.baseData.config_options,(function(e,a){return s("el-col",{directives:[{name:"show",rawName:"v-show",value:![5,6,8].includes(e.option_type),expression:"![5, 6, 8].includes(item.option_type)"}],key:"leftconfig"+a,staticClass:"mb-10",attrs:{span:12}},[s("div",{staticClass:"row3_config_item"},[s("label",[t._v(t._s(e.name))]),s("span",[12===e.option_type?s("img",{attrs:{src:"/upload/common/country/"+e.code+".png",alt:"",width:"20px"}}):t._e(),t._v(" "+t._s(e.sub_name)+" ")])])])})),t._l(t.baseData.custom_field_data,(function(e,a){return s("el-col",{key:"customfiled"+a,staticClass:"mb-10",attrs:{span:24}},[s("div",{staticClass:"row3_config_remark"},[s("label",[t._v(t._s(e.fieldname))]),s("span",[t._v(t._s(e.value))])])])})),s("el-col",{staticClass:"mb-10 mt-10",attrs:{span:24}},[s("div",{staticClass:"row3_config_remark"},[s("label",[t._v("备注信息")]),s("span",[t._v(t._s(t.baseData.host_data.remark||"-"))]),s("i",{staticClass:"el-icon-edit cursor-pointer mt-10",on:{click:function(e){t.remarkVis=!0}}})])])],2)],1),s("div",{staticClass:"left_box_row4 mt-20"},[s("div",{staticClass:"box_row4_title mb-20"},[s("span",{staticClass:"row4_title_first"},[t._v("首次订购价格")]),"Paid"===t.renewData.host.status?s("span",{staticClass:"row4_title_renew",on:{click:function(e){t.renewDialogVisible=!0}}},[t._v("立即续费")]):t._e(),"Unpaid"===t.renewData.host.status?s("span",{staticClass:"row4_title_renew",on:{click:t.payNow}},[t._v("立即支付")]):t._e()]),s("div",{staticClass:"box_row4_content"},[s("div",{staticClass:"auto_renew_box"},[s("div",{staticClass:"mb-20"},[s("span",{staticClass:"row4_content_price mr-10"},[t._v(t._s(t.renewData.currency.prefix)+t._s(t.renewData.host.firstpaymentamount))]),t.renewData.host.status?s("span",{staticClass:"row4_content_expire"},["Paid"===t.renewData.host.status?s("span",[t.$moment(1e3*t.renewData.host.nextduedate).diff(t.$moment(new Date),"days")>=7?s("span",{staticClass:"content_expire_label",style:{background:"#3fbf70"}},[t._v(t._s("还剩"+t.overdue))]):t._e(),t.$moment(1e3*t.renewData.host.nextduedate).diff(t.$moment(new Date),"days")<7&&t.$moment(1e3*t.renewData.host.nextduedate).diff(t.$moment(new Date),"seconds")>0?s("span",{staticClass:"content_expire_label",style:{background:"#f7a200"}},[t._v("即将到期")]):t._e(),t.$moment(1e3*t.renewData.host.nextduedate).diff(t.$moment(new Date),"seconds")<=0?s("span",{staticClass:"content_expire_label",style:{background:"#ee5186"}},[t._v("已逾期")]):t._e()]):t._e(),"Unpaid"===t.renewData.host.status?s("span",{staticClass:"content_expire_label",style:{background:"#ee5186"}},[t._v("未支付")]):t._e()]):t._e()]),s("div",{staticClass:"mb-20"},[s("span",{staticClass:"mr-10"},[t._v("自动余额续费")]),s("el-switch",{staticClass:"mr-20",attrs:{"active-value":1,"inactive-value":0},on:{change:t.autoRenew},model:{value:t.baseData.host_data.initiative_renew,callback:function(e){t.$set(t.baseData.host_data,"initiative_renew",e)},expression:"baseData.host_data.initiative_renew"}})],1)]),s("div",{staticClass:"bottom_first_row ml-10"},[s("span",{staticClass:"mb-10"},[s("span",{staticClass:"black-point mr-10"}),t._v(" 订购日期："+t._s(t.renewData.host.regdate?t.$moment(1e3*t.renewData.host.regdate).format("YYYY-MM-DD"):"-")+" ")]),s("span",{},[s("span",{staticClass:"black-point mr-10"}),t._v(" 付款周期："+t._s(t.renewData.host.billingcycle_zh)+" ")])]),s("div",{staticClass:"mt-10 ml-10"},[s("span",{staticClass:"mr-20"},[s("span",{staticClass:"black-point mr-10"}),t._v(" 到期时间："+t._s(t.baseData.host_data.nextduedate&&"free"!==t.baseData.host_data.billingcycle&&"onetime"!==t.baseData.host_data.billingcycle?t.$moment(1e3*t.baseData.host_data.nextduedate).format("YYYY-MM-DD"):"不到期")+" ")])])])])])]),s("el-col",{attrs:{xs:24,sm:24,md:24,lg:17,xl:17}},[s("div",{staticClass:"server_right_box custom-tabs"},[s("el-tabs",{on:{"tab-click":t.getCustom},model:{value:t.tabActiveName,callback:function(e){t.tabActiveName=e},expression:"tabActiveName"}},[t.moduleData.module_chart.length?s("el-tab-pane",{attrs:{label:"图表",name:"1"}},["1"===t.tabActiveName?s("chart",{ref:"chart",attrs:{baseData:t.baseData}}):t._e()],1):t._e(),t.moduleData.control_view.show_traffic_usage?s("el-tab-pane",{attrs:{label:"用量",name:"2"}},["2"===t.tabActiveName?s("used"):t._e()],1):t._e(),"Active"===t.baseData.host_data.domainstatus&&(t.moduleData.control_view.allow_upgrade_config||t.moduleData.control_view.allow_upgrade_product)?s("el-tab-pane",{attrs:{label:"升降级",name:"3"}},["3"===t.tabActiveName?s("upgrade",{attrs:{moduleData:t.moduleData}}):t._e()],1):t._e(),t.moduleData.download_data?s("el-tab-pane",{attrs:{label:"文件下载",name:"4"}},["4"===t.tabActiveName?s("download",{attrs:{baseData:t.baseData}}):t._e()],1):t._e(),t._l(t.moduleData.module_client_area,(function(e){return s("el-tab-pane",{key:"tabpage"+e.key,attrs:{label:e.name,name:e.key}},[s("div",[s("embed",{directives:[{name:"show",rawName:"v-show",value:isNaN(parseInt(t.tabActiveName)),expression:"isNaN(parseInt(tabActiveName))"}],staticStyle:{width:"100%"},attrs:{height:"800",src:t.htmlContent,type:""}})])])})),s("el-tab-pane",{attrs:{label:"日志",name:"5"}},["5"===t.tabActiveName?s("log"):t._e()],1)],2),s("router-view")],1)])],1),s("el-dialog",{attrs:{title:t.$t("standaloneServer.controlReinstallSystem"),visible:t.reinstallDialog,width:"600px"},on:{"update:visible":function(e){t.reinstallDialog=e},open:t.getOsData,closed:t.reinstallClosed}},[s("el-row",{staticClass:"custom_body",attrs:{gutter:15}},[s("el-form",{ref:"reinstallForm",staticClass:"mt-20",attrs:{model:t.reinstallFormData,rules:t.reinstallRules,"label-width":"50px"}},[s("el-col",{attrs:{span:24}},[s("el-form-item",{attrs:{label:t.$t("standaloneServer.os"),prop:"osVal"}},[s("el-row",[t.cloudOsGroupOptions&&t.cloudOsGroupOptions.length>0?s("el-col",{staticClass:"mb-10",staticStyle:{"padding-right":"10px"},attrs:{xs:24,lg:12}},[s("el-select",{attrs:{size:"small",placeholder:t.$t("standaloneServer.pleaseSelect")},on:{change:t.osGroupChange},model:{value:t.reinstallFormData.groupVal,callback:function(e){t.$set(t.reinstallFormData,"groupVal",e)},expression:"reinstallFormData.groupVal"}},[s("template",{slot:"prefix"},[s("img",{staticStyle:{height:"20px","margin-right":"10px","margin-top":"5px"},attrs:{src:"/upload/common/system/"+t.osSvgSelected+".svg",alt:""}})]),t._l(t.cloudOsGroupOptions,(function(e){return s("el-option",{key:"reinstallosgroup"+e.id,attrs:{label:e.name,value:e.id}},[s("div",{staticClass:"flexc-v"},[s("img",{staticStyle:{height:"20px",marginRight:"10px"},attrs:{src:"/upload/common/system/"+e.osSvg+".svg",alt:""}}),s("span",[t._v(t._s(e.name))])])])}))],2)],1):t._e(),s("el-col",{attrs:{xs:24,lg:12}},[s("el-select",{attrs:{size:"small",placeholder:t.$t("standaloneServer.pleaseSelect")},model:{value:t.reinstallFormData.osVal,callback:function(e){t.$set(t.reinstallFormData,"osVal",e)},expression:"reinstallFormData.osVal"}},t._l(t.filterOsOptions,(function(e){return s("el-option",{key:"reinstallos"+e.id,attrs:{label:e.name,value:e.id}},[t._v(" "+t._s(e.name)+" ")])})),1)],1)],1)],1),t.moduleData.control_view.reinstall_random_port?s("el-form-item",{staticClass:"creakInput",staticStyle:{width:"60%"},attrs:{label:"端口",prop:"port"}},[s("el-input-number",{attrs:{size:"small",controls:!1,precision:0},model:{value:t.reinstallFormData.port,callback:function(e){t.$set(t.reinstallFormData,"port",e)},expression:"reinstallFormData.port"}}),s("img",{staticClass:"creakInputRandom",staticStyle:{width:"18px",cursor:"pointer","margin-left":"10px"},attrs:{src:a("8728"),alt:""},on:{click:t.randomPort}})],1):t._e(),s("el-form-item",{staticStyle:{width:"60%"},attrs:{label:" ",prop:""}},[s("el-checkbox",{model:{value:t.reInstallChecked,callback:function(e){t.reInstallChecked=e},expression:"reInstallChecked"}},[t._v("我已完成备份")])],1)],1),s("el-col",{class:{"flex-between":t.reinstallCheck.max_times,tar:!t.reinstallCheck.max_times},attrs:{span:24}},[t.reinstallCheck.max_times?s("div",{staticClass:"fz-12 color-333"},[t._v("您本周免费重装次数 "),s("span",{staticStyle:{color:"#2f54ea"}},[t._v(t._s(t.reinstallCheck.max_times))]),t._v(" 次，已重装次数 "),s("span",{staticStyle:{color:"#2f54ea"}},[t._v(t._s(t.reinstallCheck.num))]),t._v(" 次，剩余 "),s("span",{staticStyle:{color:"#2f54ea"}},[t._v(t._s(t.reinstallCheck.max_times-t.reinstallCheck.num))]),t._v(" 次")]):t._e(),s("div",[s("el-button",{attrs:{size:"small"},on:{click:function(e){t.reinstallDialog=!1}}},[t._v(t._s(t.$t("btnCancle")))]),s("el-button",{attrs:{size:"small",type:"primary",disabled:!t.reInstallChecked},on:{click:t.saveReinstall}},[t._v(" "+t._s(t.$t("btnConfirmation")))])],1)])],1)],1)],1),s("el-dialog",{attrs:{title:"重置密码",visible:t.crackDialog,width:"600px"},on:{"update:visible":function(e){t.crackDialog=e},close:t.creakonClose}},[s("div",{staticClass:"custom_body"},[s("el-form",{ref:"crackPassword",staticClass:"mt-20",attrs:{model:t.crackFrom,"label-width":"80px"}},[s("el-form-item",{staticClass:"creakInput",staticStyle:{width:"80%"},attrs:{label:t.$t("cloudServer.pwd"),prop:"password",rules:[{required:!0,message:this.$t("cloudServer.pwdEmpty")}]}},[s("el-input",{model:{value:t.crackFrom.password,callback:function(e){t.$set(t.crackFrom,"password",e)},expression:"crackFrom.password"}}),s("img",{staticClass:"creakInputRandom",staticStyle:{width:"18px",cursor:"pointer","margin-left":"10px"},attrs:{src:a("8728"),alt:""},on:{click:function(e){return t.creatCode(12)}}}),s("i",{ref:t.crackFrom.password,staticClass:"el-icon-copy-document creakInputCopy",staticStyle:{cursor:"pointer"},attrs:{"data-clipboard-text":t.crackFrom.password},on:{click:function(e){return t.clickCopy(t.crackFrom.password)},mouseenter:function(e){return t.clickCopy(t.crackFrom.password)}}})],1)],1),"on"===t.powerStatus.status&&"dcimcloud"===t.baseData.host_data.type?s("div",{staticClass:"force_off_tips mb-20"},[s("div",{staticClass:"mb-20"},[t._v("当前操作需要实例在关机状态下进行：")]),s("div",{staticClass:"mb-10"},[s("span",{staticClass:"red-point"}),t._v(" 为了避免数据丢失，实例将关机中断您的业务，请仔细确认。 ")]),s("div",[s("span",{staticClass:"red-point"}),t._v(" 强制关机可能会导致数据丢失或文件系统损坏，您也可以主动关机后再进行操作。 ")])]):t._e(),"on"===t.powerStatus.status&&"dcimcloud"===t.baseData.host_data.type?s("div",{staticClass:"force_off_item"},[s("label",{staticClass:"tar"},[s("span",{staticStyle:{color:"#f66e6e","margin-right":"5px"}},[t._v("*")]),t._v("强制关机")]),s("el-checkbox",{model:{value:t.agreeOff,callback:function(e){t.agreeOff=e},expression:"agreeOff"}},[t._v("同意强制关机")])],1):t._e(),s("div",{staticClass:"tar"},[s("el-button",{attrs:{size:"small",type:"primary",loading:t.btnLoading,disabled:!t.agreeOff&&"on"===t.powerStatus.status&&"dcimcloud"===t.baseData.host_data.type},on:{click:t.saveCrack}},[t._v(" "+t._s(t.$t("cloudServer.determine")))])],1)],1)]),s("el-dialog",{attrs:{visible:t.cancelDialog,title:t.$t("cloudServer.chooseDeleteTime"),width:"25%","before-close":t.beforeClose},on:{"update:visible":function(e){t.cancelDialog=e},open:t.cancelOpen,opened:t.cancelOpened}},[s("div",{staticClass:"custom_body"},[s("el-form",{ref:"cancelForm",attrs:{model:t.cancelFormData,rules:t.cancelRules,"label-width":"100px"}},[s("el-form-item",{attrs:{label:t.$t("cloudServer.cancelTime"),prop:"type"}},[s("el-select",{staticClass:"w-100",model:{value:t.cancelFormData.type,callback:function(e){t.$set(t.cancelFormData,"type",e)},expression:"cancelFormData.type"}},[s("el-option",{attrs:{value:"Immediate",label:t.$t("cloudServer.immediate")}}),"free"!==t.baseData.host_data.billingcycle&&"onetime"!==t.baseData.host_data.billingcycle?s("el-option",{attrs:{value:"Endofbilling",label:t.$t("cloudServer.waitingForEnd")}}):t._e()],1)],1),s("el-form-item",{staticClass:"limit_sel",attrs:{label:t.$t("cloudServer.cancelReason"),prop:"tempReason"}},[s("el-select",{staticClass:"w-100",on:{change:function(e){t.cancelFormData.reason=""}},model:{value:t.cancelFormData.tempReason,callback:function(e){t.$set(t.cancelFormData,"tempReason",e)},expression:"cancelFormData.tempReason"}},[t._l(t.cancelistOptions,(function(t,e){return s("el-option",{key:"cancel"+e,style:{maxWidth:"600px"},attrs:{value:t.reason,label:t.reason}})})),s("el-option",{attrs:{value:"other",label:t.$t("cloudServer.other")}})],2)],1),"other"===t.cancelFormData.tempReason?s("el-form-item",{attrs:{label:"",prop:"reason"}},[s("el-input",{staticClass:"w-100",attrs:{type:"textarea",placeholder:t.$t("cloudServer.pleaseEnterReason")},model:{value:t.cancelFormData.reason,callback:function(e){t.$set(t.cancelFormData,"reason",e)},expression:"cancelFormData.reason"}})],1):t._e()],1),s("div",{staticClass:"tar"},[s("el-button",{attrs:{size:"small"},on:{click:t.beforeClose}},[t._v(t._s(t.$t("cloudServer.cancel")))]),s("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.cancelSubmit}},[t._v(t._s(t.$t("cloudServer.determine")))])],1)],1)]),s("el-dialog",{attrs:{title:"",visible:t.flowDialogVisible,width:"600px"},on:{"update:visible":function(e){t.flowDialogVisible=e},open:t.flowDialogOpen}},[s("div",{attrs:{slot:"title"},slot:"title"},[s("div",{staticClass:"traffic-dialog-title"},[s("span",{staticClass:"cursor-pointer",class:{"dialog-title-active":1===t.tabIndex},on:{click:function(e){t.tabIndex=1}}},[t._v("订购流量")]),s("span",[t._v("丨")]),s("span",{staticClass:"cursor-pointer",class:{"dialog-title-active":2===t.tabIndex},on:{click:function(e){t.tabIndex=2}}},[t._v("交易记录")])])]),1===t.tabIndex?s("div",{staticClass:"traffic-dialog-body"},[s("el-table",{staticClass:"ml-20 mr-20 list_item",staticStyle:{width:"calc(100% - 40px)"},attrs:{data:t.flowTableDataPage,"header-cell-style":{"font-size":"14px",color:"#7c7c7c","font-weight":"normal"}}},[s("el-table-column",{attrs:{prop:"name",label:"流量包名称"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[s("span",[t._v(t._s(a.name))]),0===a.leave?s("span",[t._v("(缺货)")]):t._e()]}}],null,!1,153683085)}),s("el-table-column",{attrs:{prop:"capacity",label:"流量"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[s("span",[t._v(t._s(a.capacity)+" GB")])]}}],null,!1,532867518)}),s("el-table-column",{attrs:{prop:"price",label:"支付金额"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[s("span",[t._v(t._s(t.renewData.currency.prefix)+" "+t._s(a.price)+" "+t._s(t.renewData.currency.suffix))])]}}],null,!1,2229061390)}),s("el-table-column",{attrs:{label:"操作",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[s("el-button",{attrs:{type:"text",size:"mini",disabled:!a.leave},on:{click:function(e){return t.buy(a)}}},[t._v("订购")])]}}],null,!1,1082432634)})],1),s("div",{staticClass:"finance_record_paging"},[s("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next","prev-text":t.$t("Previous"),"next-text":t.$t("Nextpage"),"current-page":t.flowPage,"page-size":t.flowLimit,total:t.flowTableData.length},on:{"update:currentPage":function(e){t.flowPage=e},"update:current-page":function(e){t.flowPage=e}}})],1)],1):t._e(),2===t.tabIndex?s("div",{staticClass:"traffic-dialog-body"},[s("el-table",{staticClass:"ml-20 mr-20 list_item",staticStyle:{width:"calc(100% - 40px)"},attrs:{data:t.recordeTableDataPage,"header-cell-style":{"font-size":"14px",color:"#7c7c7c","font-weight":"normal"}}},[s("el-table-column",{attrs:{prop:"name",label:"名称"}}),s("el-table-column",{attrs:{prop:"capacity",label:"总计"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[s("span",[t._v(t._s(a.capacity)+" GB")])]}}],null,!1,532867518)}),s("el-table-column",{attrs:{prop:"leave",label:"剩余"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[s("span",[t._v(t._s(a.leave)+" GB")])]}}],null,!1,2382970897)}),s("el-table-column",{attrs:{prop:"pay_time",label:"订购时间"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[s("span",[t._v(t._s(t.$moment(1e3*a.pay_time).format("YYYY-MM-DD")))])]}}],null,!1,3255626772)})],1),s("div",{staticClass:"finance_record_paging"},[s("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next","prev-text":t.$t("Previous"),"next-text":t.$t("Nextpage"),"current-page":t.recordPage,"page-size":t.recordLimit,total:t.recordeTableData.length},on:{"update:currentPage":function(e){t.recordPage=e},"update:current-page":function(e){t.recordPage=e}}})],1)],1):t._e()]),s("el-dialog",{attrs:{title:"",visible:t.renewDialogVisible,width:"600px"},on:{"update:visible":function(e){t.renewDialogVisible=e},open:t.renewDialogOpen}},[s("div",{attrs:{slot:"title"},slot:"title"},[s("div",{staticClass:"renew-dialog-title"},[s("span",{staticClass:"cursor-pointer",class:{"dialog-title-active":1===t.tabIndex},on:{click:function(e){t.tabIndex=1}}},[t._v("立即续费")]),s("span",[t._v("丨")]),s("span",{staticClass:"cursor-pointer",class:{"dialog-title-active":2===t.tabIndex},on:{click:function(e){t.tabIndex=2}}},[t._v("交易记录")])])]),1===t.tabIndex?s("div",{staticClass:"renew-dialog-body"},[s("div",{staticStyle:{display:"flex","align-items":"baseline"}},[s("div",{staticClass:"mr-10 tar",staticStyle:{width:"60px"}},[t._v("付款周期")]),s("div",[s("el-radio-group",{attrs:{size:"mini"},on:{change:t.renewCycleChange},model:{value:t.renewCycle,callback:function(e){t.renewCycle=e},expression:"renewCycle"}},t._l(t.renewData.cycle,(function(e,a){return s("el-radio-button",{key:"renew"+a,attrs:{label:e.billingcycle}},[t._v(t._s(e.billingcycle_zh))])})),1)],1)]),s("div",{staticClass:"mt-20 mb-40",staticStyle:{display:"flex","align-items":"baseline"}},[s("div",{staticClass:"mr-10 tar",staticStyle:{width:"60px"}},[t._v("续费价格")]),t.pricingLoading?s("span",{staticClass:"mr-10",staticStyle:{"font-size":"24px",color:"#007bfc"}},[t._v("价格计算中...")]):s("span",{staticClass:"mr-10",staticStyle:{"font-size":"24px",color:"#007bfc"}},[s("span",[t._v(t._s(t.renewData.currency.prefix))]),"ontrial"!==t.renewData.host.billingcycle?s("span",[t._v(t._s(t.renewData.host.amount))]):t._e(),"ontrial"===t.renewData.host.billingcycle?s("span",[t._v(t._s(Number(t.renewData.cycle[0].amount).toFixed(2)))]):t._e()]),t.pricingLoading?t._e():[s("span",[t._v(t._s(t.renewData.currency.suffix?t.renewData.currency.suffix+"/":""))]),"ontrial"!==t.renewData.host.billingcycle?s("span",["day"===t.renewData.host.billingcycle?s("span",[t._v(t._s(t.renewData.pay_type.pay_day_cycle))]):t._e(),"hour"===t.renewData.host.billingcycle?s("span",[t._v(t._s(t.renewData.pay_type.pay_hour_cycle))]):t._e(),t._v(" "+t._s(t.renewData.host.billingcycle_zh)+" ")]):t._e(),"ontrial"===t.renewData.host.billingcycle?s("span",[t._v(t._s(t.renewData.cycle[0].billingcycle_zh))]):t._e()],this.customerDiscounts?s("span",{staticStyle:{color:"#a5a5a5"}},[t._v(" (客户折扣优惠)")]):t._e()],2),s("div",[s("el-button",{attrs:{type:"primary"},on:{click:t.renewPay}},[t._v("立即续费")])],1)]):t._e(),2===t.tabIndex?s("div",{staticClass:"renew-dialog-body"},[s("el-table",{staticClass:"ml-20 mr-20 list_item",staticStyle:{width:"calc(100% - 40px)"},attrs:{data:t.renewRecordTableData,"header-cell-style":{"font-size":"14px",color:"#7c7c7c","font-weight":"normal"}}},[s("el-table-column",{attrs:{prop:"pay_time",label:"支付时间",sortable:"",width:"160"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[s("span",[t._v(t._s(t.$moment(1e3*a.pay_time).format("YYYY-MM-DD")))])]}}],null,!1,3255626772)}),s("el-table-column",{attrs:{prop:"type",label:"来源",sortable:""}}),s("el-table-column",{attrs:{prop:"amount_in",label:"支付金额",sortable:"",width:"130"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[s("span",[t._v(t._s(t.renewData.currency.prefix)+t._s(Number(a.refund)>0?-Number(a.amount_out):a.amount_in)+t._s(t.renewData.currency.suffix))])]}}],null,!1,3503417955)}),s("el-table-column",{attrs:{prop:"trans_id",label:"流水单号",sortable:""}}),s("el-table-column",{attrs:{prop:"gateway",label:"支付方式",sortable:""}})],1),s("div",{staticClass:"finance_record_paging"},[s("el-pagination",{attrs:{background:"",layout:"total, sizes, prev, pager, next","page-sizes":[10,15,20,25],"prev-text":t.$t("Previous"),"next-text":t.$t("Nextpage"),"current-page":t.renewRecordSearch.page,"page-size":t.renewRecordSearch.limit,total:t.renewTotal,"pager-count":5},on:{"update:currentPage":function(e){return t.$set(t.renewRecordSearch,"page",e)},"update:current-page":function(e){return t.$set(t.renewRecordSearch,"page",e)},"size-change":t.handleReSizeChange,"current-change":t.getRenewRecord}})],1)],1):t._e()]),s("el-dialog",t._g(t._b({attrs:{visible:t.remarkVis,width:"25%",title:t.$t("cloudServer.editNotes")},on:{"update:visible":function(e){t.remarkVis=e}}},"el-dialog",t.$attrs,!1),t.$listeners),[s("el-row",{staticClass:"custom_body",attrs:{gutter:15}},[s("el-form",{ref:"remarkForm",attrs:{model:t.remarkFormData,rules:t.remarkRules,size:"medium","label-width":"80px"}},[s("el-col",{attrs:{span:23}},[s("el-row",{attrs:{gutter:15}},[s("el-col",{attrs:{span:24}},[s("el-form-item",{attrs:{label:t.$t("cloudServer.note"),prop:"remark"}},[s("el-input",{style:{width:"100%"},attrs:{placeholder:t.$t("cloudServer.pleaseEnterNote"),clearable:""},model:{value:t.remarkFormData.remark,callback:function(e){t.$set(t.remarkFormData,"remark",e)},expression:"remarkFormData.remark"}})],1)],1)],1)],1)],1),s("div",{staticClass:"tar"},[s("el-button",{attrs:{size:"small"},on:{click:function(e){t.remarkVis=!1}}},[t._v(t._s(t.$t("cloudServer.cancel")))]),s("el-button",{attrs:{size:"small",type:"primary",loading:t.btnLoading},on:{click:t.handelConfirm}},[t._v(" "+t._s(t.$t("cloudServer.determine")))])],1)],1)],1),s("second",{attrs:{secondVerifyVis:t.secondVerifyVis,secondAction:t.secondAction,btnLoading:t.btnLoading},on:{secondClose:function(e){t.secondVerifyVis=!1},secondeVerifySuccess:t.secondeVerifySuccess}}),s("payNew",{ref:"control",on:{"pay-success":t.getBaseData,"balance-success":t.getBaseData}}),s("Reinstall",{ref:"reinstallDia",attrs:{visible:t.reinstallVis,title:"重装系统"},on:{"update:visible":function(e){t.reinstallVis=e},"reinstall-success":t.reinstallDcimSuc}}),s("Crackpass",{ref:"crackpassDia",attrs:{visible:t.crackPassVis,title:"破解密码"},on:{"update:visible":function(e){t.crackPassVis=e},"crackpass-success":t.crackpassDcimSuc}})],1)},n=[],o=(a("99af"),a("4de4"),a("4160"),a("caad"),a("c975"),a("d81d"),a("fb6a"),a("b0c0"),a("b680"),a("d3b7"),a("4d63"),a("ac1f"),a("5377"),a("25f0"),a("2532"),a("5319"),a("1276"),a("159b"),a("96cf"),a("1da1")),r=a("313e"),i=a.n(r),c=a("b311"),l=a.n(c),u=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"box"},[a("el-row",{staticClass:"mt-10",staticStyle:{height:"600px"},attrs:{gutter:40}},t._l(t.module_chart,(function(e,s){return a("el-col",{key:"chart"+s,attrs:{xs:24,sm:24,md:24,lg:12}},[a("div",{staticClass:"chart_title_box"},[a("div",{staticClass:"title"},[t._v(t._s(e.title)+" "),e.select&&e.select.length>0?a("el-select",{staticStyle:{width:"90px"},attrs:{size:"mini",placeholder:"请选择"},on:{change:function(a){return t.getChartData(e)}},model:{value:e.selectedVal,callback:function(a){t.$set(e,"selectedVal",a)},expression:"chartItem.selectedVal"}},t._l(e.select,(function(t,e){return a("el-option",{key:"chartsearch"+e,attrs:{label:t.name,value:t.value}})})),1):t._e()],1),a("div",{staticClass:"dateRow"},[a("el-date-picker",{style:{width:"160px"},attrs:{size:"mini",type:"datetime","value-format":"timestamp",placeholder:"选择日期时间"},on:{change:function(a){return t.dateChange(e)}},model:{value:e.start,callback:function(a){t.$set(e,"start",a)},expression:"chartItem.start"}}),t._v(" ~ "),a("el-date-picker",{style:{width:"160px"},attrs:{size:"mini",type:"datetime","value-format":"timestamp",placeholder:"选择日期时间"},on:{change:function(a){return t.dateChange(e)}},model:{value:e.end,callback:function(a){t.$set(e,"end",a)},expression:"chartItem.end"}})],1)]),a("div",{staticClass:"chart_content_box flexc",attrs:{id:e.type+"ChartBox"}},[e.loading?a("span",[a("i",{staticClass:"el-icon-loading"}),t._v("正在加载... ")]):t._e()])])})),1)],1)},d=[],p=a("4f32"),m={data:function(){return{module_chart:[]}},props:{baseData:{host_data:{}}},methods:{lineChartOption:function(t,e,a,s,n,o){var r=i.a.init(document.getElementById(t+"ChartBox"));r.setOption({backgroundColor:"#fff",title:{subtext:e.length?"":"暂无数据",left:"center",textAlign:"left",subtextStyle:{lineHeight:250}},tooltip:{trigger:"axis",axisPointer:{type:"line",lineStyle:{color:"#7dcb8f"}},backgroundColor:"#fff",textStyle:{color:"#333",fontSize:12},padding:[10,10],extraCssText:"box-shadow: 0px 4px 13px 1px rgba(1, 24, 167, 0.1);",formatter:function(t,e,a){var s="<div>\n                          <div>".concat(t[0].marker," ").concat(t[0].seriesName,"：").concat(t[0].value).concat(n,"</div>\n                          <div>").concat(t[1]?t[1].marker:""," ").concat(t[1]?t[1].seriesName:"").concat(t[1]?"：":"").concat(t[1]?t[1].value:"").concat(t[1]?n:"",'</div>\n                          <div style="color: #999999;">').concat(t[0].axisValue,"</div>\n                        </div>");return s}},grid:{left:"80",top:30,x:50,x2:50,y2:80},dataZoom:[{type:"inside",throttle:50}],xAxis:[{offset:15,type:"category",boundaryGap:!1,axisLine:{lineStyle:{type:"dashed",color:"#ddd",width:1}},data:e,axisTick:{show:!1},splitLine:{show:!1},axisLabel:{show:!0,textStyle:{color:"#999999"}}}],yAxis:[{type:"value",axisTick:{show:!1},axisLine:{show:!1},axisLabel:{formatter:"{value}"+n,textStyle:{color:"#556677"}},splitLine:{lineStyle:{type:"dashed"}}}],series:[{name:o[0],type:"line",data:a,symbolSize:1,symbol:"circle",smooth:!0,showSymbol:!1,lineStyle:{width:2},itemStyle:{normal:{color:"#75db16",borderColor:"#75db16"}}},{name:o[1],type:"line",data:s,symbolSize:1,symbol:"circle",smooth:!0,showSymbol:!1,lineStyle:{width:3,shadowColor:"rgba(92, 102, 255, 0.3)",shadowBlur:10,shadowOffsetY:20},itemStyle:{normal:{color:"#5c66ff",borderColor:"#5c66ff"}}}]})},areaChartOption:function(t,e,a,s,n){var o=i.a.init(document.getElementById(t+"ChartBox"));o.setOption({grid:{left:"80",top:30,x:50,x2:50,y2:80},backgroundColor:"#fff",title:{subtext:e.length?"":"暂无数据",left:"center",textAlign:"left",subtextStyle:{lineHeight:250}},tooltip:{backgroundColor:"#fff",padding:[10,20,10,8],textStyle:{color:"#333",fontSize:12},trigger:"axis",axisPointer:{type:"line",lineStyle:{color:"#7dcb8f"}},formatter:function(t,e,a){var n="<div>\n                          <div>".concat(t[0].seriesName,"：").concat(t[0].value).concat(s,' </div>\n                          <div style="color: #999999;">').concat(t[0].axisValue,"</div>\n                        </div>");return n},extraCssText:"box-shadow: 0px 4px 13px 1px rgba(1, 24, 167, 0.1);"},dataZoom:[{type:"inside",throttle:50}],xAxis:{offset:15,type:"category",boundaryGap:!1,axisLine:{lineStyle:{color:"#999999",width:1}},data:e,axisTick:{show:!1},splitLine:{show:!1},axisLabel:{show:!0,textStyle:{color:"#999999"}}},yAxis:{axisTick:{show:!1},max:100,min:0,axisLine:{show:!1},splitLine:{show:!0,lineStyle:{color:"#ddd",type:"dashed"}},axisLabel:{show:!0,formatter:"{value}"+s,textStyle:{color:"#999999"}}},series:[{name:n,type:"line",areaStyle:{opacity:1,color:"#737dff"},symbol:"none",lineStyle:{normal:{width:0}},smooth:!0,data:a}]})},barChartOption:function(t,e,a,s,n,o){var r=i.a.init(document.getElementById(t+"ChartBox"));r.setOption({backgroundColor:"#fff",title:{subtext:e.length?"":"暂无数据",left:"center",textAlign:"left",subtextStyle:{lineHeight:250}},tooltip:{backgroundColor:"#fff",padding:[10,20,10,8],textStyle:{color:"#000",fontSize:12},trigger:"axis",axisPointer:{type:"line",lineStyle:{color:"#7dcb8f"}},formatter:function(t,e,a){var s="\n            <div>\n                <div>".concat(t[0].marker).concat(t[0].seriesName,"：").concat(t[0].value).concat(n," </div>                \n                <div>").concat(t[1]?t[1].marker:""," ").concat(t[1]?t[1].seriesName:"").concat(t[1]?"：":"").concat(t[1]?t[1].value:"").concat(t[1]?n:"","</div>\n                <div>").concat(t[0].axisValue,"</div>\n            </div>");return s},extraCssText:"box-shadow: 0px 4px 13px 1px rgba(1, 24, 167, 0.1);"},grid:{left:"80",top:30,x:70,x2:50,y2:80},dataZoom:[{type:"inside",throttle:50}],xAxis:{offset:15,axisLabel:{show:!0,textStyle:{color:"#999"}},type:"category",axisLine:{lineStyle:{type:"dashed",color:"#ddd",width:1}},data:e},yAxis:{axisTick:{show:!1},axisLine:{show:!1},axisLabel:{show:!0,textStyle:{color:"#999"},formatter:"{value}"+n},splitLine:{show:!0,lineStyle:{color:"#ddd",type:"dashed"}}},series:[{name:o[1],type:"bar",stack:"总量",barGap:"-100%",data:s,itemStyle:{barBorderRadius:[5,5,0,0],color:"#737dff"}},{name:o[0],type:"bar",stack:"可用",data:a,itemStyle:{barBorderRadius:[5,5,0,0],color:"#ccc",opacity:.3}}]})},resize:function(){(this.module_chart||[]).forEach((function(t){i.a.init(document.getElementById(t.type+"ChartBox")).resize()}))},getChartModule:function(t){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var s,n,o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return s={host_id:t.host_data.host_id,api_type:t.host_data.api_type,domainstatus:t.host_data.domainstatus,type:t.host_data.type,zjmf_api_id:t.host_data.zjmf_api_id,dcimid:t.host_data.dcimid},a.next=3,Object(p["p"])(s);case 3:if(n=a.sent,o=n.data,200===o.status){a.next=7;break}return a.abrupt("return",!1);case 7:(o.data.module_chart||[]).forEach((function(t){t.start=void 0,t.end=void 0,t.loading=!1,t.selectedVal=t.select&&t.select.length?t.select[0].value:void 0,e.getChartData(t)})),e.module_chart=o.data.module_chart;case 9:case"end":return a.stop()}}),a)})))()},getChartData:function(t){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var s,n,o,r,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.loading=!0,a.next=3,Object(p["o"])({hostId:e.$route.query.id,type:t.type,select:t.selectedVal||void 0,start:t.start||void 0,end:t.end||void 0});case 3:if(s=a.sent,n=s.data,t.loading=!1,200===n.status){a.next=8;break}return a.abrupt("return",!1);case 8:o=[],r=[],i=[],(n.data.list||[]).forEach((function(t,e){(t||[]).forEach((function(t){0===e?(o.push(t.time),r.push(t.value)):1===e&&i.push(t.value)}))})),"area"===n.data.chart_type?e.areaChartOption(t.type,o,r,n.data.unit,n.data.label):"line"===n.data.chart_type?e.lineChartOption(t.type,o,r,i,n.data.unit,n.data.label):"bar"===n.data.chart_type&&e.barChartOption(t.type,o,r,i,n.data.unit,n.data.label),t.start&&t.end||n.data.list[0].length&&(t.start=new Date(n.data.list[0][0].time).getTime(),t.end=new Date(n.data.list[0][n.data.list[0].length-1].time).getTime());case 14:case"end":return a.stop()}}),a)})))()},dateChange:function(t){t.start&&t.end&&t.start<t.end&&this.getChartData(t)}},created:function(){},mounted:function(){var t=this;this.$nextTick((function(){this.getChartModule(this.baseData)})),window.addEventListener("resize",this.resize),this.$once("hook:beforeDestroy",(function(){window.removeEventListener("resize",t.resize)}))}},f=m,h=(a("5da0"),a("2877")),_=Object(h["a"])(f,u,d,!1,null,"623280dc",null),g=_.exports,b=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"box"},[a("el-table",{staticClass:"ml-20 mr-20 list_item",staticStyle:{width:"calc(100% - 40px)"},attrs:{height:t.$height-365,data:t.tableData,"header-row-class-name":"innerTableHeader","row-class-name":"innerTableRowClass","cell-class-name":"innerTableCellClass"},on:{"sort-change":t.sortChange}},[a("el-table-column",{attrs:{prop:"create_time",label:"操作时间",sortable:"",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.row;return[a("span",[t._v(" "+t._s(t.$moment(1e3*s.create_time).format("YYYY-MM-DD HH:mm:ss"))+" ")])]}}])}),a("el-table-column",{attrs:{prop:"description",label:"操作详情"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.row;return[a("div",{domProps:{innerHTML:t._s(s.description)}})]}}])}),a("el-table-column",{attrs:{prop:"user",label:"操作人",width:"150",sortable:"custom"}}),a("el-table-column",{attrs:{prop:"ipaddr",label:"IP",width:"150",sortable:"custom"}})],1),a("div",{staticClass:"mt-20"},[a("el-pagination",{attrs:{background:"","current-page":t.search.page,"page-size":t.search.limit,"page-sizes":[10,15,20,25],total:t.total,layout:"total, sizes, prev, pager, next","prev-text":t.$t("Previous"),"next-text":t.$t("Nextpage")},on:{"size-change":t.handleSizeChange,"current-change":t.getData,"update:currentPage":function(e){return t.$set(t.search,"page",e)},"update:current-page":function(e){return t.$set(t.search,"page",e)},"update:pageSize":function(e){return t.$set(t.search,"limit",e)},"update:page-size":function(e){return t.$set(t.search,"limit",e)}}})],1)],1)},v=[],w=(a("841c"),{data:function(){return{tableData:[],search:{hostid:this.$route.query.id,page:1,limit:10,orderby:"",sorting:"desc",keywords:""},total:0}},methods:{getData:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(p["s"])(t.search);case 2:if(a=e.sent,s=a.data,200===s.status){e.next=6;break}return e.abrupt("return",!1);case 6:t.tableData=s.data.log_list,t.total=s.data.count;case 8:case"end":return e.stop()}}),e)})))()},handleSizeChange:function(t){this.search.page=1,this.getData()},sortChange:function(t,e,a){this.search.orderby=t.prop,"ascending"===t.order?this.search.sort="asc":this.search.sort="desc",this.getData()}},created:function(){this.getData()}}),x=w,y=(a("91c6"),Object(h["a"])(x,b,v,!1,null,"4b9695e6",null)),D=y.exports,C=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"box mt-20"},[a("el-row",{attrs:{gutter:30}},[t.moduleData.control_view.allow_upgrade_product&&"1"===t.configStep?a("el-col",{staticClass:"upgrade_pro_mb20",attrs:{span:24}},[a("div",{staticClass:"upgrade_pro_box",class:{upgrade_pro_active:t.proMouseOver},on:{mouseover:t.prodMouseOver,mouseleave:t.prodMouseLeave}},["1"===t.proStep?a("el-row",{staticClass:"flexc pro_box_step1"},[a("el-col",{staticClass:"pro_box_label",attrs:{span:4}},[t._v("升降级")]),a("el-col",{staticClass:"pro_box_desc overflow-ellipsis",attrs:{span:16}},[t._v(" 操作系统版本可以升级亦可以降级, 从当前的版本升级到最新版本或恢复之前的旧版本 ")]),a("el-col",{staticClass:"flex-xend",staticStyle:{width:"100px"},attrs:{span:4}},[a("el-button",{staticClass:"pro_box_btn",attrs:{disabled:"1"!==t.configStep},on:{click:t.upgradeProClick}},[t._v("升降级")])],1)],1):t._e(),"2"===t.proStep||"3"===t.proStep?a("div",[a("div",{staticClass:"pro_box_titlebox"},[a("div",{staticStyle:{width:"150px"}},[t._v("升降级")]),a("div",{staticClass:"box_titlebox_desc overflow-ellipsis"}),a("span",{staticClass:"el-icon-circle-close fz-16 cursor-pointer",on:{click:function(e){t.proStep="1"}}})]),"2"===t.proStep?a("div",{staticClass:"pro_box_content mt-20"},[a("div",{staticStyle:{height:"500px",overflow:"auto"}},t._l(t.productList,(function(e,s){return a("el-row",{key:"pro"+s,staticClass:"pro_box_item cursor-pointer",class:{pro_box_item_active:t.upgradeSubmitData.pid===e.pid},style:{opacity:t.upgradeSubmitData.pid===e.pid?1:.5},nativeOn:{click:function(a){return t.proChange(e.pid)}}},[a("el-col",{staticClass:"pro_box_label overflow-ellipsis",attrs:{md:12}},[t.upgradeSubmitData.pid===e.pid?a("span",{staticClass:"iconfont icon-danxuanxuanzhong-copy mr-20",staticStyle:{color:"#2f54ea"}}):a("span",{staticClass:"iconfont icon-danxuanweixuanzhong mr-20"}),a("span",{staticClass:"overflow-ellipsis"},[t._v(t._s(e.host))])]),a("el-col",{staticClass:"pro_box_cycle ml-10",attrs:{md:12}},[a("el-select",{staticStyle:{width:"60%"},attrs:{size:"small",disabled:t.upgradeSubmitData.pid!==e.pid},on:{change:t.cycleChange},model:{value:e.billingcycle,callback:function(a){t.$set(e,"billingcycle",a)},expression:"proItem.billingcycle"}},t._l(e.cycle,(function(e,s){return a("el-option",{key:"cycle"+s,attrs:{label:t.currency.prefix+e.price+t.currency.suffix+" / "+e.billingcycle_zh+(Number(e.saleproducts)?"(客户折扣："+t.currency.prefix+Number(e.saleproducts).toFixed(2)+t.currency.suffix+")":""),value:e.billingcycle}})})),1)],1)],1)})),1),a("div",{staticClass:"box_content_btn flexc-v"},[a("el-button",{staticClass:"pro_box_pre flexc",on:{click:function(e){t.proStep="1"}}},[t._v("返回")]),a("el-button",{staticClass:"pro_box_next flexc",on:{click:t.proNextHandleClick}},[t._v("下一步")])],1)]):t._e(),"3"===t.proStep?a("div",{staticClass:"pro_box_content mt-20"},[a("div",{staticClass:"pro_box_label",staticStyle:{opacity:"0.5"}},[t._v(t._s(t.proPageData.old_host.host))]),a("div",{staticClass:"pro_box_label"},[t._v("新的产品: "+t._s(t.proPageData.des))]),a("div",{staticClass:"mb-40 fz-14"},[t._v(t._s(t.proPageData.currency.prefix)+" "+t._s(t.proPageData.amount)+" "+t._s(t.proPageData.suffix)+" "+t._s(t.proPageData.amount?"/":"")+" "+t._s(t.proPageData.billingcycle_zh))]),a("div",{staticClass:"pro_box_line"}),a("div",{staticClass:"pro_box_total"},[a("label",{staticClass:"mr-20"},[t._v("总计：")]),a("span",{staticStyle:{color:"#2f54ea"}},[t._v(t._s(t.proPageData.currency.prefix)+" "+t._s(t.proPageData.amount_total)+t._s(t.proPageData.suffix)+" "+t._s(t.proPageData.amount_total?"/":"")+" "+t._s(t.proPageData.billingcycle_zh))]),a("span",{staticClass:"fz-12 ml-10 color-999"},[t._v(t._s(t.proPageData.flag?"(客户折扣优惠)":""))])]),a("div",{staticClass:"pro_box_promo"},[a("el-input",{staticStyle:{width:"280px"},attrs:{placeholder:"如有优惠券或者优惠码请输入"},on:{change:t.promoChange},model:{value:t.promoCode,callback:function(e){t.promoCode=e},expression:"promoCode"}},[a("el-button",{attrs:{slot:"append"},on:{click:t.addProductCode},slot:"append"},[t._v("应用")])],1)],1),a("div",{staticClass:"box_content_btn flexc-v"},[a("el-button",{staticClass:"pro_box_back flexc",on:{click:t.proBack}},[t._v("返回")]),a("el-button",{staticClass:"pro_box_pay flexc",attrs:{loading:t.btnLoading},on:{click:function(e){return t.settle("pro")}}},[t._v("结算")])],1)]):t._e()]):t._e()],1)]):t._e(),t.moduleData.control_view.allow_upgrade_config&&"1"===t.proStep?a("el-col",{class:{"mt-20":"1"===t.configStep},attrs:{span:24}},[a("div",{staticClass:"upgrade_config_box",class:{upgrade_config_active:t.configMouseOver},on:{mouseover:t.conMouseOver,mouseleave:t.conMouseLeave}},["1"===t.configStep?a("el-row",{staticClass:"flexc config_box_step1"},[a("el-col",{staticClass:"config_box_label",attrs:{span:4}},[t._v("升降级选项")]),a("el-col",{staticClass:"config_box_desc overflow-ellipsis",attrs:{span:16}},[t._v(" 对IP数量、操作系统位数、CPU核心数、内存大小等, 都可以选择升级或降级 ")]),a("el-col",{staticClass:"flex-xend",staticStyle:{width:"100px"},attrs:{span:4}},[a("el-button",{staticClass:"config_box_btn flexc",attrs:{disabled:"1"!==t.proStep},on:{click:t.upgradeConfigHandleClick}},[t._v("升降级选项")])],1)],1):t._e(),"2"===t.configStep||"3"===t.configStep?a("div",[a("div",{staticClass:"config_box_titlebox"},[a("div",{staticStyle:{width:"200px"}},[t._v("升降级选项")]),a("div",{staticClass:"box_titlebox_desc overflow-ellipsis"}),a("span",{staticClass:"el-icon-circle-close fz-16 cursor-pointer",on:{click:function(e){t.configStep="1"}}})]),"2"===t.configStep?a("div",{staticClass:"config_box_content mt-20"},[a("div",{staticClass:"box_content_item"},[a("div",{},t._l(t.configs,(function(e,s){return a("div",{key:"confignew"+s,staticClass:"mb-20 content_item_label"},[a("div",{staticClass:"flexc-v fl lh-20 mr-10"},[a("label",{staticStyle:{display:"inline-block",width:"60px"}},[t._v(t._s(e.option_name)+"：")]),[4,7,9,11,14,15,16,17,18,19].includes(e.option_type)?a("myInput",{attrs:{min:e.qty_minimum,max:e.qty_maximum},on:{change:t.changeConfigsData},model:{value:e.qty,callback:function(a){t.$set(e,"qty",a)},expression:"configItem.qty"}}):t._e(),4===e.option_type||15===e.option_type?a("span",[t._v("个")]):t._e(),7===e.option_type||16===e.option_type?a("span",[t._v(t._s(t.$t("cloudServer.core")))]):t._e(),9===e.option_type||17===e.option_type?a("span",[t._v("GB")]):t._e(),11===e.option_type||18===e.option_type?a("span",[t._v("Mbps")]):t._e(),14===e.option_type||19===e.option_type?a("span",[t._v("GB")]):t._e()],1),1===e.option_type?a("el-select",{attrs:{size:"mini",placeholder:t.$t("standaloneServer.pleaseSelect")},on:{change:t.changeConfigsData},model:{value:e.subid,callback:function(a){t.$set(e,"subid",a)},expression:"configItem.subid"}},t._l(e.sub,(function(t){return a("el-option",{key:t.id,attrs:{disabled:t.disabled,label:t.show_pricing,value:t.id}})})),1):t._e(),2===e.option_type?a("div",t._l(e.sub,(function(s,n){return a("el-radio",{key:"Radio"+n,attrs:{disabled:s.disabled,label:s.id},on:{change:t.changeConfigsData},model:{value:e.subid,callback:function(a){t.$set(e,"subid",a)},expression:"configItem.subid"}},[t._v(t._s(s.option_name))])})),1):t._e(),[6,8,10,13].includes(e.option_type)?a("myRadio",{staticClass:"mt-10",attrs:{radioData:e.sub},on:{change:t.changeConfigsData},model:{value:e.subid,callback:function(a){t.$set(e,"subid",a)},expression:"configItem.subid"}}):t._e(),[4,7,9,11,14,15,16,17,18,19].includes(e.option_type)?a("mySlider",{staticClass:"ml-5 mr-5 clearboth",attrs:{value:2,sliderData:e.sub,min:e.qty_minimum,max:e.qty_maximum},on:{change:t.changeConfigsData},model:{value:e.qty,callback:function(a){t.$set(e,"qty",a)},expression:"configItem.qty"}}):t._e()],1)})),0)]),a("div",{staticClass:"box_content_btn flexc-v"},[a("el-button",{staticClass:"config_box_pre flexc",on:{click:function(e){t.configStep="1"}}},[t._v("返回")]),a("el-button",{staticClass:"config_box_next flexc",attrs:{disabled:t.nextDisable},on:{click:t.configNextHandleClick}},[t._v("下一步")])],1)]):t._e(),"3"===t.configStep?a("div",{staticClass:"config_box_content mt-20"},[a("div",{staticClass:"config_box_step3 overflow-ellipsis"},[t._v(t._s(t.configPageData.name))]),a("div",{staticClass:"clearfix mb-20 config_box_oldconfig"},[a("ul",{staticClass:"pl-20"},t._l(t.configs,(function(e,s){return a("li",{key:"configold"+s,staticClass:"fl mr-50 mb-20"},[t._v(" "+t._s(e.option_name)+": "),[4,7,9,11,14,15,16,17,18,19].includes(e.option_type)?a("span",[t._v(" "+t._s(e.qty_zh)+" "),4===e.option_type||15===e.option_type?a("span",[t._v("个")]):t._e(),7===e.option_type||16===e.option_type?a("span",[t._v(t._s(t.$t("cloudServer.core")))]):t._e(),9===e.option_type||17===e.option_type?a("span",[t._v("GB")]):t._e(),11===e.option_type||18===e.option_type?a("span",[t._v("Mbps")]):t._e(),14===e.option_type||19===e.option_type?a("span",[t._v("GB")]):t._e()]):a("span",[t._v(t._s(e.suboption_name))])])})),0)]),a("div",{staticClass:"clearfix mb-20"},[a("ul",{staticClass:"pl-20"},t._l(t.configPageData.alloption,(function(e,s){return a("li",{key:s,staticClass:"fl mr-50 mb-20"},[t._v(" "+t._s(e.option_name)+": "),[4,7,9,11,14,15,16,17,18,19].includes(e.option_type)?a("span",{staticClass:"body_item_value"},[t._v(t._s(e.qty))]):a("span",{staticClass:"body_item_value"},[t._v(t._s(e.suboption_name))])])})),0)]),a("div",{staticClass:"mb-40 fz-14"},[t._v(t._s(t.configPageData.currency.prefix)+" "+t._s(t.configPageData.subtotal)+" "+t._s(t.configPageData.currency.suffix)+" "+t._s(t.configPageData.subtotal?"/":"")+" "+t._s(t.configPageData.billingcycle_zh))]),a("div",{staticClass:"config_box_line"}),a("div",{staticClass:"config_box_total"},[a("label",{staticClass:"mr-20 fz-14"},[t._v("总计")]),a("span",[t._v(t._s(t.configPageData.currency.prefix)+t._s(t.configPageData.total)+t._s(t.configPageData.currency.suffix)+" "+t._s(t.configPageData.total?"/":"")+" "+t._s(t.configPageData.billingcycle_zh))]),a("span",{staticClass:"fz-12 ml-10 color-999"},[t._v(t._s(t.configPageData.flag?"(客户折扣优惠)":""))])]),a("div",{staticClass:"config_box_promo"},[a("el-input",{staticStyle:{width:"280px"},attrs:{placeholder:"如有优惠券或者优惠码请输入"},on:{change:t.promoChange},model:{value:t.promoCode,callback:function(e){t.promoCode=e},expression:"promoCode"}},[a("el-button",{attrs:{slot:"append"},on:{click:t.addConfigCode},slot:"append"},[t._v("应用")])],1)],1),a("div",{staticClass:"box_content_btn flexc-v"},[a("el-button",{staticClass:"config_box_back flexc",on:{click:t.configBack}},[t._v("返回")]),a("el-button",{staticClass:"config_box_pay flexc",attrs:{loading:t.btnLoading},on:{click:function(e){return t.settle("config")}}},[t._v("结算")])],1)]):t._e()]):t._e()],1)]):t._e()],1),a("el-dialog",{attrs:{title:"提示",visible:t.settleDialogVis,width:"600px"},on:{"update:visible":function(e){t.settleDialogVis=e}}},[a("div",{staticClass:"force_off_tips mb-20"},[a("div",{staticClass:"mb-20"},[t._v("升降级需要服务器在关机状态下进行：")]),a("div",{staticClass:"mb-10"},[a("span",{staticClass:"red-point"}),t._v(" 为了避免数据丢失，实例将关机中断您的业务，请仔细确认。 ")]),a("div",[a("span",{staticClass:"red-point"}),t._v(" 强制关机可能会导致数据丢失或文件系统损坏，您也可以主动关机后再进行操作。 ")])]),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.settleSure}},[t._v(t._s(t.$t("cloudServer.determine")))])],1)]),a("payNew",{ref:"control",on:{"pay-success":t.successCallBack}})],1)},k=[],S=(a("a623"),a("4c53"),a("a748")),$=a("42bc"),O=a("eb02"),R=a("ecca"),P=a("2ef0"),z={mixins:[R["a"]],data:function(){return{proStep:"1",promo:"",cycle:"",proMouseOver:!1,configStep:"1",configMouseOver:!1,value1:"1",productList:[1],upgradeSubmitData:{hid:this.$route.query.id,pid:0,billingcycle:void 0,currencyid:void 0,promo_code:void 0},currency:void 0,toPayParams:{},proPageData:{old_host:{id:0,host:"",domain:""},currency:{id:0,code:"",prefix:"",suffix:""}},id:this.$route.query.id,configs:[1],configsInit:[],upgradeConfigSubmitData:{hid:this.$route.query.id,currencyid:void 0,promo_code:void 0,configoption:[]},nextDisable:!0,groupid:this.$route.query.groupid,configPageData:{alloption:[],currency:{id:1,code:"",prefix:"",suffix:""}},promoCode:"",btnLoading:!1,settleDialogVis:!1,settleType:"pro"}},props:{moduleData:{}},components:{myRadio:S["default"],myInput:$["default"],mySlider:O["default"]},methods:{upgradeProClick:function(){this.proStep="2",this.proMouseOver=!1},prodMouseOver:function(){"1"===this.configStep&&"1"===this.proStep&&(this.proMouseOver=!0)},prodMouseLeave:function(){"1"===this.configStep&&"1"===this.proStep&&(this.proMouseOver=!1)},conMouseOver:function(){"1"===this.configStep&&"1"===this.proStep&&(this.configMouseOver=!0)},conMouseLeave:function(){"1"===this.configStep&&"1"===this.proStep&&(this.configMouseOver=!1)},upgradeConfigHandleClick:function(){this.configStep="2",this.configMouseOver=!1},getProStep2Data:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(p["C"])({hid:t.id,currencyid:void 0});case 2:a=e.sent,s=a.data,200!==s.status||((s.data.host||[]).forEach((function(t){t.billingcycle=t.cycle.length?t.cycle[0].billingcycle:void 0})),t.upgradeSubmitData.pid=s.data.host[0].pid,t.productList=s.data.host,t.currency=s.data.currency);case 5:case"end":return e.stop()}}),e)})))()},proChange:function(t){var e=this;this.upgradeSubmitData.pid=t,(this.productList||[]).forEach((function(a){a.pid===t&&a.cycle.length&&e.cycleChange(a.billingcycle)}))},cycleChange:function(t){var e=this;(this.productList||[]).forEach((function(a){(a.cycle||[]).forEach((function(a){t===a.billingcycle&&(e.upgradeSubmitData.billingcycle_zh=a.billingcycle_zh)}))}))},proNextHandleClick:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.upgradeSubmitData.currencyid=t.currency.id,(t.productList||[]).forEach((function(e){e.pid===t.upgradeSubmitData.pid&&(t.upgradeSubmitData.billingcycle=e.billingcycle,t.toPayParams.newHost=e)})),e.next=4,Object(p["E"])(t.upgradeSubmitData);case 4:a=e.sent,s=a.data,200!==s.status?t.$message.error(s.msg):(t.$emit("nextClick"),t.getProStep3Data(),t.proStep="3");case 7:case"end":return e.stop()}}),e)})))()},getProStep3Data:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(p["D"])({hid:t.id});case 2:a=e.sent,s=a.data,200!==s.status?t.$message.error(s.msg):(t.proPageData=s.data,t.promoCode=s.data.promo_code);case 5:case"end":return e.stop()}}),e)})))()},addProductCode:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(p["b"])({hid:t.id,pormo_code:t.promoCode});case 2:a=e.sent,s=a.data,200!==s.status?t.$message.error(s.msg):(t.$message.success(s.msg),t.getProStep3Data());case 5:case"end":return e.stop()}}),e)})))()},proUpgradePay:P.throttle(Object(o["a"])(regeneratorRuntime.mark((function t(){var e,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.btnLoading=!0,t.next=3,Object(p["i"])({hid:this.proPageData.old_host.id});case 3:e=t.sent,a=e.data,200===a.status?this.$refs.control.main({id:a.data.invoiceid,name:this.$t("standaloneServer.upDown")}):1001===a.status?(this.$message.success(a.msg),this.$router.push({path:"/cloud-server",query:{groupid:this.groupid}})):this.$message.error(a.msg),this.btnLoading=!1;case 7:case"end":return t.stop()}}),t,this)}))),2e3),proBack:function(){this.proStep="2",this.getProStep2Data()},getConfigStep2Data:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(p["z"])({hid:t.id,currencyid:void 0});case 2:a=e.sent,s=a.data,200!==s.status||((s.data.host||[]).forEach((function(e){if(e.id=e.oid,e.disabled=!1,(e.sub||[]).forEach((function(t){t.disabled=!1})),5===e.option_type)for(var a in e.sub)e.sub[a].osName=a;else 12===e.option_type?(e.sub=t.objToArr(e.sub,"dataCenter"),(e.sub||[]).forEach((function(t){var a=t.area.map((function(t){return t.id}));a.includes(e.subid)?(t.active=!0,t.areaId=e.subid):t.active=!1,t.noarea=!0,(t.area||[]).forEach((function(e){""===e.area?e.area_zh="无配置区域":t.noarea=!1}))}))):[4,7,9,11,14,15,16,17,18,19].includes(e.option_type)&&(e.qty_zh=e.qty)})),t.originalData={option:s.data.host,link:s.data.links.map((function(t){for(var e in t.sub_id){var a=t.sub_id[e];a.qty_minimum=parseInt(a.qty_minimum),a.qty_maximum=parseInt(a.qty_maximum)}return t}))},t.configs=s.data.host,t.configsInit=JSON.parse(JSON.stringify(s.data.host)),t.osSelectChange(void 0,!0));case 5:case"end":return e.stop()}}),e)})))()},changeConfigsData:function(){var t=this;this.configsInit.forEach((function(e){t.configs.forEach((function(t){e.id===t.id&&([4,7,9,11,14,15,16,17,18,19].includes(t.option_type)?t.nextDisable=e.qty===t.qty:t.nextDisable=e.subid===t.subid)}))})),this.nextDisable=this.configs.every((function(t){return t.nextDisable})),this.clearOption()},objToArr:function(t,e){var a=[];for(var s in t)"dataCenter"===e?(t[s].id=this.guid(),t[s].active=!1,t[s].city=s,t[s].areaId=void 0):t[s].osName=s,a.push(t[s]);return a},guid:function(){return"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0,a="x"===t?e:3&e|8;return a.toString(16)}))},osSelectChange:function(t,e){var a=this;(this.configs||[]).forEach((function(s){if(5!==s.option_type)return!1;var n=function(n){t===n&&(s.subid=s.sub[n].child[0].id,s.osVersionOptions=s.sub[n].child),e?(s.sub[n].child||[]).forEach((function(t){s.subid===t.id&&(s.osName=n,s.osVersionOptions=s.sub[n].child)})):a.nextDisable=!1};for(var o in s.sub)n(o)}))},configNextHandleClick:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.upgradeConfigSubmitData.configoption=[],(t.configs||[]).forEach((function(e){[4,7,9,11,14,15,16,17,18,19].includes(e.option_type)?t.upgradeConfigSubmitData.configoption[e.oid]=e.qty:t.upgradeConfigSubmitData.configoption[e.oid]=e.subid})),e.next=4,Object(p["B"])(t.$qs.stringify(t.upgradeConfigSubmitData));case 4:a=e.sent,s=a.data,200!==s.status?t.$message.error(s.msg):(t.$emit("nextClick"),t.getConfigStep3Data(),t.configStep="3");case 7:case"end":return e.stop()}}),e)})))()},getConfigStep3Data:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(p["A"])({hid:t.id});case 2:a=e.sent,s=a.data,200!==s.status?t.$message.error(s.msg):(t.configPageData=s.data,t.promoCode=s.data.promo_code);case 5:case"end":return e.stop()}}),e)})))()},promoChange:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(""!==t.promoCode){e.next=6;break}return e.next=3,Object(p["x"])({hid:t.id});case 3:a=e.sent,s=a.data,200!==s.status?t.$message.error(s.msg):(t.$message.success(s.msg),t.getConfigStep3Data());case 6:case"end":return e.stop()}}),e)})))()},addConfigCode:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(p["a"])({hid:t.id,pormo_code:t.promoCode});case 2:a=e.sent,s=a.data,200!==s.status?t.$message.error(s.msg):(t.$message.success(s.msg),t.getConfigStep3Data());case 5:case"end":return e.stop()}}),e)})))()},configUpgradePay:P.throttle(Object(o["a"])(regeneratorRuntime.mark((function t(){var e,a,s,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:for(a in e={hid:this.id},e.configoption=[],this.configPageData.alloption)4===this.configPageData.alloption[a].option_type?e.configoption[this.configPageData.alloption[a].id]=this.configPageData.alloption[a].qty:e.configoption[this.configPageData.alloption[a].id]=this.configPageData.alloption[a].suboption_id;return this.btnLoading=!0,t.next=6,Object(p["h"])(this.$qs.stringify(e));case 6:s=t.sent,n=s.data,200===n.status?this.$refs.control.main({id:n.data.invoiceid,name:this.$t("standaloneServer.upDownOptions")}):1001===n.status?(this.$message.success(n.msg),this.$router.push({path:"/cloud-server",query:{groupid:this.groupid}})):this.$message.error(n.msg),this.btnLoading=!1;case 10:case"end":return t.stop()}}),t,this)}))),2e3),successCallBack:function(t){t&&this.$router.push({path:"/cloud-server",query:{groupid:this.groupid}})},configBack:function(){this.configStep="2",this.getConfigStep2Data()},settle:function(t){this.settleType=t,this.settleDialogVis=!0},settleSure:function(){this.settleDialogVis=!1,"pro"===this.settleType?this.proUpgradePay():this.configUpgradePay()}},created:function(){this.getProStep2Data(),this.getConfigStep2Data()}},j=z,I=(a("f30d"),Object(h["a"])(j,C,k,!1,null,"6f37c50c",null)),L=I.exports,F=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"box"},[a("el-row",[a("el-col",{attrs:{span:24}},[a("div",{staticClass:"chart_title_box"},[a("div",{staticClass:"title mr-20"},[t._v("用量统计图")]),a("div",[a("el-date-picker",{attrs:{size:"mini",type:"date","value-format":"yyyy-MM-dd",placeholder:"选择日期时间"},on:{change:t.dateChange},model:{value:t.usedStartTime,callback:function(e){t.usedStartTime=e},expression:"usedStartTime"}}),t._v(" ~ "),a("el-date-picker",{attrs:{size:"mini",type:"date","value-format":"yyyy-MM-dd",placeholder:"选择日期时间"},on:{change:t.dateChange},model:{value:t.usedEndTime,callback:function(e){t.usedEndTime=e},expression:"usedEndTime"}})],1)]),a("div",{staticClass:"chart_content_box",attrs:{id:"usedChartBox"}})])],1)],1)},V=[],T={data:function(){return{usedStartTime:void 0,usedEndTime:void 0,usedChart:null}},methods:{chartOption:function(){this.usedChart=i.a.init(document.getElementById("usedChartBox")),this.usedChart.setOption({backgroundColor:"#fff",title:{subtext:"",left:"center",textAlign:"left",subtextStyle:{lineHeight:400}},tooltip:{backgroundColor:"#fff",padding:[10,20,10,8],textStyle:{color:"#000",fontSize:12},trigger:"axis",axisPointer:{type:"line",lineStyle:{color:"#7dcb8f"}},formatter:function(t,e,a){var s="\n            <div>\n                <div>流量使用：".concat(t[0].value,"MB </div>\n                <div>").concat(t[0].axisValue,"</div>\n            </div>");return s},extraCssText:"box-shadow: 0px 4px 13px 1px rgba(1, 24, 167, 0.1);"},grid:{left:"80",top:20,x:70,x2:50,y2:80},xAxis:{offset:15,type:"category",data:[],boundaryGap:!1,axisTick:{show:!1},axisLine:{lineStyle:{type:"dashed",color:"#ddd",width:1}},axisLabel:{show:!0,textStyle:{color:"#999"}}},yAxis:{type:"value",splitLine:{show:!0,lineStyle:{color:"#ddd",type:"dashed"}},axisTick:{show:!1},axisLine:{show:!1},axisLabel:{show:!0,textStyle:{color:"#999"},formatter:"{value}MB"}},series:[{name:"用量",type:"line",smooth:!0,showSymbol:!0,symbol:"circle",symbolSize:3,data:[],areaStyle:{normal:{color:"#d4d1da",opacity:.2}},itemStyle:{normal:{color:"#0061ff"}},lineStyle:{normal:{width:4,shadowColor:"rgba(0,0,0,0.4)",shadowBlur:10,shadowOffsetY:10}}}]})},resize:function(){this.usedChart.resize()},getData:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var a,s,n,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.usedChart.showLoading({text:"数据正在加载...",color:"#999",textStyle:{fontSize:30,color:"#444"},effectOption:{backgroundColor:"rgba(0, 0, 0, 0)"}}),e.next=3,Object(p["q"])({id:t.$route.query.id,start:t.usedStartTime,end:t.usedEndTime});case 3:if(a=e.sent,s=a.data,t.usedChart.hideLoading(),200===s.status){e.next=8;break}return e.abrupt("return",!1);case 8:n=[],o=[],(s.data||[]).forEach((function(t){n.push(t.time),o.push(t.value)})),t.usedChart.setOption({title:{subtext:n.length?"":"暂无数据"},xAxis:{data:n},series:[{data:o}]}),t.usedStartTime&&t.usedEndTime||s.data.length&&(t.usedStartTime=s.data[0].time,t.usedEndTime=s.data[s.data.length-1].time);case 13:case"end":return e.stop()}}),e)})))()},dateChange:function(){var t=new Date(this.usedStartTime).getTime(),e=new Date(this.usedEndTime).getTime();this.usedStartTime&&this.usedEndTime&&t<e&&this.getData()}},created:function(){},mounted:function(){var t=this;this.chartOption(),this.getData(),window.addEventListener("resize",this.resize),this.$once("hook:beforeDestroy",(function(){window.removeEventListener("resize",t.resize)}))}},A=T,B=(a("7109"),Object(h["a"])(A,F,V,!1,null,"02428c2d",null)),E=B.exports,q=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"box"},[a("el-table",{staticClass:"ml-20 mr-20 list_item",staticStyle:{width:"calc(100% - 40px)"},attrs:{data:t.tableData,"header-cell-style":{"font-size":"14px",color:"#7c7c7c","font-weight":"normal"}},on:{"sort-change":t.sortChange}},[a("el-table-column",{attrs:{prop:"title",label:"文件名"}}),a("el-table-column",{attrs:{prop:"description",label:"文件描述"}}),a("el-table-column",{attrs:{label:"操作",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.row;return[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.goDownload(s)}}},[t._v("立即下载")])]}}])})],1)],1)},M=[],N=a("a78e"),H=a.n(N),Y={data:function(){return{tableData:[],search:{productid:this.baseData.host_data.productid,domainstatus:this.baseData.host_data.domainstatus}}},props:{baseData:{}},methods:{getData:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(p["r"])(t.search);case 2:if(a=e.sent,s=a.data,200===s.status){e.next=6;break}return e.abrupt("return",!1);case 6:t.tableData=s.data.download_data;case 7:case"end":return e.stop()}}),e)})))()},handleSizeChange:function(t){},sortChange:function(t,e,a){},goDownload:function(t){t.url?open(t.url+"&jwt="+H.a.get("OrfLcI2IqQItv0vS")):this.$message.error("该文件没有下载链接")}},created:function(){this.getData()}},G=Y,U=(a("b694"),Object(h["a"])(G,q,M,!1,null,"31c9f83c",null)),Z=U.exports,J=a("bbcf"),W=a("4f73"),Q=a("dc55"),K=a("27fd"),X=a("2ef0"),tt={metaInfo:function(){return{title:"云服务器"}},data:function(){var t=function(t,e,a){var s=parseFloat(e);22===s||s>=100&&s<=65535?a():a(new Error("端口允许范围22, 100-65535"))};return{customerDiscounts:0,reinstallVis:!1,crackPassVis:!1,pageData:{},hid:this.$route.query.id,baseData:{config_options:[],host_data:{assignedips:[],group:{}},second:{second_verify_action_home:[]}},moduleData:{module_button:{console:[],control:[]},module_chart:[],module_client_area:[],control_view:{},dcimcloud:{nat_acl:"",nat_web:""}},showPwd:!1,timeOut:null,timeInterval:null,powerStatus:{status:"",des:""},powerLoading:!1,consoleItem:null,controlItem:null,agreeOff:!1,crackDialog:!1,crackFrom:{password:""},reinstallDialog:!1,osSvgSelected:void 0,cloudOsGroupOptions:[],cloudOsOptions:[],filterOsOptions:[],reInstallChecked:!1,reinstallFormData:{groupVal:"",osVal:"",port:22},reinstallRules:{osVal:[{required:!0,message:"请选择",trigger:"change"}],port:[{required:!0,message:"请输入端口号"},{validator:t,trigger:"blur"}]},reinstallCheck:{},secondVerifyVis:!1,btnLoading:!1,secondAction:"",host_cancel:{init:!0},cancelistOptions:[],cancelDialog:!1,cancelFormData:{id:this.$route.query.id,type:void 0,reason:"",tempReason:void 0},cancelRules:{type:[{required:!0,message:"请选择时间",trigger:"change"}],reason:[{required:!0,message:"请输入原因",trigger:"blur"}],tempReason:[{required:!0,message:"请选择原因",trigger:"change"}]},flowChart:null,tabIndex:1,flowDialogVisible:!1,flowTableData:[],recordeTableData:[],flowPage:1,flowLimit:6,recordPage:1,recordLimit:6,renewData:{currency:{prefix:"¥",suffix:"元"},cycle:[],host:{}},overdue:"",renewDialogVisible:!1,renewCycle:"",renewPrice:"",pricingLoading:!1,renewRecordTableData:[],renewRecordSearch:{hostid:this.$route.query.id,page:1,limit:10,order:"trans_id",sort:"desc",keywords:""},renewTotal:0,remarkVis:!1,remarkFormData:{remark:void 0},remarkRules:{remark:[{required:!0,message:"请输入备注",trigger:"blur"}]},tabActiveName:"1",htmlContent:""}},components:{chart:g,log:D,upgrade:L,used:E,download:Z,second:J["default"],Crackpass:Q["a"],Reinstall:W["a"]},methods:{getBaseData:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var a,s,n,o,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(p["w"])({host_id:t.hid});case 2:if(a=e.sent,s=a.data,200===s.status){e.next=6;break}return e.abrupt("return",!1);case 6:s.data.host_data.assignedips=t.assignedipsChange(s.data.host_data.assignedips),t.baseData=s.data,n=s.data.host_data.bwlimit,o=s.data.host_data.bwusage,r=[{name:"剩余流量",value:n-o},{name:"已用流量",value:o}],t.chartOption(n,r.filter((function(t){return 0!==t.value}))),t.getPriceData(),t.getModuleData(s.data.host_data),t.pageData=s.data;case 15:case"end":return e.stop()}}),e)})))()},getModuleData:function(t){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var s,n,o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return s={host_id:t.host_id,productid:t.productid,api_type:t.api_type,domainstatus:t.domainstatus,type:t.type,zjmf_api_id:t.zjmf_api_id,dcimid:t.dcimid,bwlimit:t.bwlimit},a.next=3,Object(p["v"])(s);case 3:if(n=a.sent,o=n.data,200===o.status){a.next=7;break}return a.abrupt("return",!1);case 7:e.moduleData=o.data,o.data.control_view.module_power_status?e.getPowerStatus():(e.powerStatus.status="unknown",e.powerStatus.des="未知"),o.data.module_chart.length?e.tabActiveName="1":e.tabActiveName="2";case 10:case"end":return a.stop()}}),a)})))()},guid:function(){return"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0,a="x"===t?e:3&e|8;return a.toString(16)}))},assignedipsChange:function(t){var e=this,a=[];return(t||[]).forEach((function(t){a.push({ip:t,color:"#333333",guid:e.guid()})})),a},getPowerStatus:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var a,s,n,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.powerStatus.status,s={id:t.hid,func:"status"},t.powerLoading=!0,e.next=5,Object(p["l"])(s);case 5:n=e.sent,o=n.data,200!==o.status?(t.powerStatus.status="unknown",t.powerStatus.des=o.msg):(t.powerStatus.status=o.data?o.data.status:"unknown",t.powerStatus.des=o.data?o.data.des:"未知",a!==o.data.status&&"process"!==o.data.status&&clearInterval(t.timeInterval)),t.powerLoading=!1;case 9:case"end":return e.stop()}}),e)})))()},refreashPowerStatusCycle:function(){var t=this;clearTimeout(this.timeOut),clearInterval(this.timeInterval),this.timeInterval=setInterval(this.getPowerStatus,3e3),this.timeOut=setTimeout((function(){clearInterval(t.timeInterval)}),12e4)},handlePowerStatus:function(){this.moduleData.control_view.module_power_status&&this.getPowerStatus()},clickCopy:function(t){var e,a=this;e=this.$refs[t].length?this.$refs[t][0]:this.$refs[t];var s=0,n=new l.a(e);n.on("success",(function(t){a.$message.success("复制成功"),s++,s>1&&n.destroy()})),n.on("error",(function(t){a.$message.error("复制失败")}))},consoleHandleCommand:function(t){this.consoleItem=t,1===this.baseData.second.allow_second_verify&&1===this.baseData.second.second_verify&&this.baseData.second.second_verify_action_home.includes(t.split("-")[1])?(this.secondAction=t.split("-")[1],this.secondVerifyVis=!0):this.consoleHandleCommandApi()},consoleHandleCommandApi:function(t){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var s,n,o,r,i,c,l,u;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(s=e.consoleItem.split("-"),n=s[1],o=s[2],"default"!==o||"vnc"!==n){a.next=11;break}return a.next=6,Object(p["l"])({id:e.hid,func:n,code:t||void 0});case 6:r=a.sent,i=r.data,200===i.status?(c=window.open("url","_blank"),c.location=i.data.url):e.$message.error(i.msg),a.next=17;break;case 11:if("custom"!==o){a.next=17;break}return a.next=14,Object(p["k"])({id:e.hid,func:n,code:t||void 0});case 14:l=a.sent,u=l.data,200!==u.status?e.$message.error(u.msg):u.url?window.open(u.url):e.$message.success(u.msg);case 17:case"end":return a.stop()}}),a)})))()},distributionDcimFunc:function(){"reinstall"===this.controlItem.func?this.dcimReinstall():"crack_pass"===this.controlItem.func&&this.dcimCrackPass()},dcimReinstall:function(){this.$eventBus.$emit("reinstall",this.pageData.host_data.upper_reaches_res),this.reinstallVis=!0},dcimCrackPass:function(){this.$eventBus.$emit("crackPass",this.pageData.host_data.upper_reaches_res),this.crackPassVis=!0},reinstallDcimSuc:function(t){t&&(this.reinstallVis=!1,this.getData())},crackpassDcimSuc:function(t){t&&(this.crackPassVis=!1,this.getData())},controlHandleCommand:function(t){var e=this;this.controlItem={name:t.split("-")[0],func:t.split("-")[1],type:t.split("-")[2]},"dcim_client"!==this.pageData.host_data.upper_reaches_control_mode||"crack_pass"!==this.controlItem.func&&"reinstall"!==this.controlItem.func?"reinstall"===this.controlItem.func?"dcimcloud"===this.baseData.host_data.type?this.checkReinstall():this.reinstallDialog=!0:"crack_pass"===this.controlItem.func?(this.creatCode(12),this.crackDialog=!0):this.$swal.fire({title:this.controlItem.name,icon:"warning",showCancelButton:!0,confirmButtonText:this.$t("btnConfirmation"),cancelButtonText:this.$t("btnCancle")}).then(function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(a){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a.value&&(1===e.baseData.second.allow_second_verify&&1===e.baseData.second.second_verify&&e.baseData.second.second_verify_action_home.includes(e.controlItem.func)?(e.secondAction=e.controlItem.func,e.secondVerifyVis=!0):e.defaultControlApi());case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()):this.distributionDcimFunc()},defaultControlApi:function(t){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var s,n,o,r,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(s={id:e.hid,func:e.controlItem.func,code:t||void 0},"default"!==e.controlItem.type){a.next=9;break}return e.btnLoading=!0,a.next=5,Object(p["l"])(s);case 5:n=a.sent,o=n.data,200!==o.status?e.$message.error(o.msg):(e.$message.success(o.msg),e.refreashPowerStatusCycle(),e.secondVerifyVis=!1),e.btnLoading=!1;case 9:if("custom"!==e.controlItem.type){a.next=17;break}return e.btnLoading=!0,a.next=13,Object(p["k"])(s);case 13:r=a.sent,i=r.data,200!==i.status?e.$message.error(i.msg):(e.$message.success(i.msg),e.refreashPowerStatusCycle(),e.secondVerifyVis=!1,i.url&&window.open(i.url)),e.btnLoading=!1;case 17:case"end":return a.stop()}}),a)})))()},creatCode:function(t){for(var e="",a=parseInt(t),s=[0,1,2,3,4,5,6,7,8,9,"a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],n=0;n<a;n++){var o=Math.floor(62*Math.random());e+=s[o]}var r=/^(?=.*?[a-z])(?=.*?[A-Z])(?=.*?\d).*$/,i=new RegExp(r);i.test(e)?this.crackFrom.password=e:this.creatCode(12)},creakonClose:function(){this.$refs.crackPassword.resetFields()},saveCrack:X.debounce(Object(o["a"])(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.$refs.crackPassword.validate(function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(a){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a){t.next=4;break}return t.abrupt("return",!1);case 4:1===e.baseData.second.allow_second_verify&&1===e.baseData.second.second_verify&&e.baseData.second.second_verify_action_home.includes("crack_pass")?(e.secondAction="crack_pass",e.crackDialog=!1,e.secondVerifyVis=!0):e.saveCrackApi();case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 1:case"end":return t.stop()}}),t,this)}))),200),saveCrackApi:function(t){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var s,n,o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return s={id:e.hid,func:"crack_pass",password:e.crackFrom.password,code:t||void 0},e.btnLoading=!0,a.next=4,Object(p["l"])(s);case 4:n=a.sent,o=n.data,200!==o.status?e.$message.error(o.msg):(e.$message.success(o.msg),e.getBaseData(),e.refreashPowerStatusCycle(),e.secondVerifyVis=!1,e.crackDialog=!1),e.btnLoading=!1;case 8:case"end":return a.stop()}}),a)})))()},checkReinstall:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(K["f"])(t.hid);case 2:a=e.sent,s=a.data,200===s.status?s.price||(t.reinstallCheck=s,t.reinstallDialog=!0):s.price&&t.$swal.fire({title:t.$t("standaloneServer.errorReinstallSystem"),text:"".concat(t.$t("standaloneServer.weekReload"),"，").concat(t.renewData.currency.prefix," ").concat(s.price," ").concat(t.renewData.currency.suffix," / ").concat(t.$t("standaloneServer.frequency"),"，").concat(t.$t("standaloneServer.doYouNeed")),icon:"warning",showCancelButton:!0,confirmButtonText:t.$t("btnConfirmation"),cancelButtonText:t.$t("btnCancle")}).then(function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(a){var s,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!a.value){e.next=6;break}return e.next=3,Object(K["E"])(t.hid);case 3:s=e.sent,n=s.data,200===n.status?(t.$message.success(n.msg),t.$refs.control.main({id:n.data.invoiceid,name:t.$t("standaloneServer.purchaseReloads")})):t.$message.success(n.msg);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 5:case"end":return e.stop()}}),e)})))()},getOsData:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(p["j"])({productid:t.baseData.host_data.productid,os_config_option_id:t.baseData.host_data.os_config_option_id});case 2:if(a=e.sent,s=a.data,200===s.status){e.next=6;break}return e.abrupt("return",!1);case 6:s.data.cloud_os_group.length?(t.reinstallFormData.groupVal=s.data.cloud_os_group[0].id,t.filterOsOptions=s.data.cloud_os.filter((function(t){return t.group===s.data.cloud_os_group[0].id})),t.reinstallFormData.osVal=t.filterOsOptions.length?t.filterOsOptions[0].id:"",s.data.cloud_os_group.forEach((function(e){t.showOsSvg(e)})),t.osSvgSelected=s.data.cloud_os_group[0].osSvg):(t.filterOsOptions=s.data.cloud_os,t.reinstallFormData.osVal=s.data.cloud_os.length?s.data.cloud_os[0].id:""),t.cloudOsGroupOptions=s.data.cloud_os_group,t.cloudOsOptions=s.data.cloud_os;case 9:case"end":return e.stop()}}),e)})))()},showOsSvg:function(t){-1!==t.name.toLowerCase().indexOf("windows")?t.osSvg=1:-1!==t.name.toLowerCase().indexOf("centos")?t.osSvg=2:-1!==t.name.toLowerCase().indexOf("ubuntu")?t.osSvg=3:-1!==t.name.toLowerCase().indexOf("debian")?t.osSvg=4:-1!==t.name.toLowerCase().indexOf("esxi")?t.osSvg=5:-1!==t.name.toLowerCase().indexOf("xenserver")?t.osSvg=6:-1!==t.name.toLowerCase().indexOf("freebsd")?t.osSvg=7:-1!==t.name.toLowerCase().indexOf("fedora")?t.osSvg=8:t.osSvg=9},osGroupChange:function(t){var e=this;this.reinstallFormData.groupVal=t,this.reinstallFormData.osVal="",this.filterOsOptions=[],this.filterOsOptions=this.cloudOsOptions.filter((function(e){return e.group===t})),this.reinstallFormData.osVal=this.filterOsOptions.length?this.filterOsOptions[0].id:"",(this.cloudOsGroupOptions||[]).forEach((function(a){a.id===t&&(e.osSvgSelected=a.osSvg)})),-1!==this.reinstallFormData.groupVal.indexOf("Win")?this.reinstallFormData.port=3389:this.reinstallFormData.port=22},reinstallClosed:function(){this.reInstallChecked=!1},randomPort:function(){var t=parseInt(65535*Math.random()+100);t>=100&&t<=65535&&(this.reinstallFormData.port=t)},saveReinstall:X.debounce(Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.reinstallDialog=!1,1===this.baseData.second.allow_second_verify&&1===this.baseData.second.second_verify&&this.baseData.second.second_verify_action_home.includes("reinstall")?(this.secondAction="reinstall",this.reinstallDialog=!1,this.secondVerifyVis=!0):this.reinstallApi();case 2:case"end":return t.stop()}}),t,this)}))),200),reinstallApi:function(t){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var s,n,o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return s={id:e.hid,func:"reinstall",os:e.reinstallFormData.osVal,code:t||void 0,port:e.reinstallFormData.port},e.btnLoading=!0,a.next=4,Object(p["l"])(s);case 4:n=a.sent,o=n.data,200!==o.status?e.$message.error(o.msg):(e.$message.success(o.msg),e.getBaseData(),e.refreashPowerStatusCycle(),e.secondVerifyVis=!1,e.reinstallDialog=!1),e.btnLoading=!1;case 8:case"end":return a.stop()}}),a)})))()},secondeVerifySuccess:function(t){this.consoleItem?this.consoleHandleCommandApi(t.code):"reinstall"===this.secondAction?this.reinstallApi(t.code):"crack_pass"===this.secondAction?this.saveCrackApi(t.code):this.defaultControlApi(t.code)},getCancelPage:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(p["e"])({host_id:t.hid});case 2:if(a=e.sent,s=a.data,200===s.status){e.next=6;break}return e.abrupt("return",!1);case 6:t.host_cancel=s.data.host_cancel,t.cancelistOptions=s.data.cancelist;case 8:case"end":return e.stop()}}),e)})))()},cancelSubmit:function(){var t=this,e="";e="Immediate"===this.cancelFormData.type?"这将会立刻删除您的产品，操作不可逆，所有数据丢失":"产品将会在到期当天被立刻删除，操作不可逆，所有数据丢失","other"!==this.cancelFormData.tempReason&&(this.cancelFormData.reason=this.cancelFormData.tempReason),this.$refs.cancelForm.validate((function(a){if(!a)return!1;t.cancelDialog=!1,t.$confirm(e,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(o["a"])(regeneratorRuntime.mark((function e(){var a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(p["f"])(t.cancelFormData);case 2:a=e.sent,s=a.data,200!==s.status?t.$message.error(s.msg):(t.getBaseData(),t.getCancelPage(),t.$message.success(s.msg));case 5:case"end":return e.stop()}}),e)})))).catch((function(){}))}))},cancelOpen:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.cancelFormData.type=void 0,t.cancelFormData.tempReason=void 0,t.cancelFormData.reason="";case 3:case"end":return e.stop()}}),e)})))()},cancelOpened:function(){this.$refs.cancelForm.clearValidate()},beforeClose:function(){var t=this;this.$refs.cancelForm.resetFields(),setTimeout((function(){t.$refs.cancelForm.clearValidate(),t.cancelDialog=!1}),100)},deleteCancel:function(){var t=this,e="";e="Immediate"!==this.host_cancel.type?"您已选择到期时自动删除产品，当前可关闭停用设置，是否关闭？":"您已选择立刻删除产品，当前可关闭停用设置，是否关闭？",this.$confirm(e,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(o["a"])(regeneratorRuntime.mark((function e(){var a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(p["m"])({id:t.hid});case 2:a=e.sent,s=a.data,200!==s.status?t.$message.error(s.msg):(t.getBaseData(),t.getCancelPage(),t.$message.success(s.msg));case 5:case"end":return e.stop()}}),e)})))).catch((function(){}))},flowDialogOpen:function(){this.tabIndex=1,this.getFlowPacket()},getFlowPacket:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(p["n"])({uid:t.baseData.host_data.uid,host_id:t.baseData.host_data.host_id,productid:t.baseData.host_data.productid,serverid:t.baseData.host_data.serverid,api_type:t.baseData.host_data.api_type,upstream_price_type:t.baseData.host_data.upstream_price_type,zjmf_api_id:t.baseData.host_data.zjmf_api_id,dcimid:t.baseData.host_data.dcimid,upstream_price_value:t.baseData.host_data.upstream_price_value,type:t.baseData.host_data.type,bwlimit:t.baseData.host_data.bwlimit,bwusage:t.baseData.host_data.bwusage});case 2:if(a=e.sent,s=a.data,200===s.status){e.next=6;break}return e.abrupt("return",!1);case 6:t.flowTableData=s.data.dcim.flowpacket,t.recordeTableData=s.data.dcim.flow_packet_use_list;case 8:case"end":return e.stop()}}),e)})))()},buy:X.throttle(function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(e){var a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(p["d"])(this.hid,e.id);case 2:if(a=t.sent,s=a.data,200===s.status){t.next=7;break}return this.$message.error(s.msg),t.abrupt("return",!1);case 7:this.flowDialogVisible=!1,this.$refs.control.main({id:s.data.invoiceid,name:e.name});case 9:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),200),chartOption:function(t,e){var a=this;setTimeout((function(){a.flowChart=i.a.init(document.getElementById("chartBox")),a.flowChart.setOption({backgroundColor:"#fff",color:["#77db17","#4f40fd"],title:{text:t<1024?t+"GB":(t/1024).toFixed(2)+"TB",top:"center",left:"center",textStyle:{fontSize:12,color:"#333333",fontWeight:400}},series:[{type:"pie",radius:["45%","70%"],center:["50%","45%"],data:e,hoverAnimation:!1,labelLine:{normal:{length:20,length2:100,lineStyle:{color:"#e6e6e6",type:"dotted"}}},label:{normal:{formatter:function(t){return"{icon|●}{name|"+t.name+"}{value|"+(t.value<1024?t.value+"GB":(t.value/1024).toFixed(2)+"TB")+"}"},padding:[0,-100,25,-100],rich:{icon:{fontSize:12},name:{fontSize:12,padding:[0,10,0,4],color:"#999999"},value:{fontSize:14,fontWeight:"bold",color:"#333333"}}}}}]})}),500)},resize:function(){this.flowChart.resize()},getPriceData:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.pricingLoading=!0,e.next=3,Object(p["u"])({hostid:t.hid,billingcycles:t.renewCycle||t.baseData.host_data.billingcycle});case 3:if(a=e.sent,s=a.data,t.pricingLoading=!1,200===s.status){e.next=8;break}return e.abrupt("return",!1);case 8:t.renewData=s.data,s.data.host.nextduedate&&"free"!==s.data.host.billingcycle&&"onetime"!==s.data.host.billingcycle?(t.overdue=t.$moment(1e3*s.data.host.nextduedate).diff(t.$moment(new Date),"days")+"天",0===parseInt(t.overdue)&&(t.overdue=t.$moment(1e3*s.data.host.nextduedate).diff(t.$moment(new Date),"hours")+"小时")):t.overdue="","ontrial"===s.data.host.billingcycle?t.renewCycle=s.data.cycle[0].billingcycle:t.renewCycle=s.data.host.billingcycle,t.customerDiscounts=s.data.host.flags;case 12:case"end":return e.stop()}}),e)})))()},renewCycleChange:function(){var t=this;this.getPriceData(),(this.renewData.cycle||[]).forEach((function(e){t.renewCycle===e.billingcycle&&(t.renewPrice=e.amount)}))},payNow:X.debounce((function(){this.$refs.control.main({id:this.renewData.host.id,name:this.$t("standaloneServer.pay")})}),200),renewPay:X.debounce(Object(o["a"])(regeneratorRuntime.mark((function t(){var e,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.renewDialogVisible=!1,t.next=3,Object(p["y"])({hostid:this.hid,billingcycles:this.renewCycle});case 3:e=t.sent,a=e.data,1001===a.status?(this.$message.success(a.msg),this.getPriceData()):200===a.status?this.$refs.control.main({id:a.data.invoiceid,name:this.$t("standaloneServer.renew")}):this.$message.error(a.msg);case 6:case"end":return t.stop()}}),t,this)}))),200),renewDialogOpen:function(){this.tabIndex=1,this.getRenewRecord()},getRenewRecord:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(p["t"])(t.renewRecordSearch);case 2:if(a=e.sent,s=a.data,200===s.status){e.next=6;break}return e.abrupt("return",!1);case 6:t.renewRecordTableData=s.data.invoices,t.renewTotal=s.data.count;case 8:case"end":return e.stop()}}),e)})))()},handleReSizeChange:function(t){this.renewRecordSearch.limit=t,this.getRenewRecord()},handelConfirm:function(){var t=this;this.$refs.remarkForm.validate(function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(a){var s,n,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a){e.next=2;break}return e.abrupt("return",!1);case 2:return s={id:t.$route.query.id,remark:t.remarkFormData.remark},t.btnLoading=!0,e.next=6,Object(p["g"])(s);case 6:n=e.sent,o=n.data,t.btnLoading=!1,200!==o.status?t.$message.error(o.msg):(t.$message.success(o.msg),t.remarkVis=!1,t.getBaseData());case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},autoRenew:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var a,s,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a={hostid:t.$route.query.id,initiative_renew:t.baseData.host_data.initiative_renew},e.next=3,Object(p["c"])(a);case 3:s=e.sent,n=s.data,200!==n.status?t.$message.error(n.msg):t.$message.success(n.msg);case 6:case"end":return e.stop()}}),e)})))()},getCustom:function(t){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:t&&(1===parseInt(t.name)&&setTimeout((function(){e.$refs.chart.getChartModule(e.baseData)}),500),parseInt(t.name)<=5||(s=localStorage.getItem("OrfLcI2IqQItv0vS"),e.htmlContent=e.$baseUrl+"/provision/custom/content?id="+e.$route.query.id+"&key="+t.name+"&jwt="+s));case 1:case"end":return a.stop()}}),a)})))()}},created:function(){this.getBaseData(),this.getCancelPage()},computed:{flowTableDataPage:function(){var t=(this.flowPage-1)*this.flowLimit,e=this.flowPage*this.flowLimit;return this.flowTableData.slice(t,e)},recordeTableDataPage:function(){var t=(this.recordPage-1)*this.recordLimit,e=this.recordPage*this.recordLimit;return this.recordeTableData.slice(t,e)},showReinstallBtn:function(){return!this.baseData.config_options.map((function(t){return t.option_type})).includes(5)},setClass:function(){return this.baseData.host_data.group.fa_icon}},mounted:function(){var t=this;window.addEventListener("resize",this.resize),this.$once("hook:beforeDestroy",(function(){window.removeEventListener("resize",t.resize)}))}},et=tt,at=(a("d170"),Object(h["a"])(et,s,n,!1,null,"509824fd",null));e["default"]=at.exports}}]);