(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Authorize~31ecd969","OtherControl~987e6011","OtherServerUpgradeConfig~987e6011","StandaloneServerFinance~31ecd969"],{"020d":function(t,e,a){},"048a":function(t,e,a){"use strict";a.d(e,"f",(function(){return s})),a.d(e,"h",(function(){return r})),a.d(e,"g",(function(){return i})),a.d(e,"i",(function(){return o})),a.d(e,"d",(function(){return c})),a.d(e,"c",(function(){return l})),a.d(e,"b",(function(){return u})),a.d(e,"e",(function(){return d})),a.d(e,"a",(function(){return p}));var n=a("a27e");function s(t,e,a,s,r,i,o,c){return Object(n["a"])({url:"/host/list",params:{type:"list",groupid:t,page:e,limit:a,orderby:s,sort:r,search:i,dcim_area:o,domain_status:c}})}function r(t){return Object(n["a"])({url:"/provision/chart/".concat(t.hostId),params:t})}function i(t,e){return Object(n["a"])({url:"/host/renewpage",params:{hostid:t,billingcycles:e}})}function o(t){return Object(n["a"])({url:"/host/renew",method:"post",data:t})}function c(t){return Object(n["a"])({url:"/provision/default",method:"post",data:t})}function l(t){return Object(n["a"])({url:"/provision/button",method:"post",data:t})}function u(t){return Object(n["a"])({url:"/host/cancel",method:"post",data:t})}function d(t){return Object(n["a"])({url:"/host/cancel",method:"delete",data:t})}function p(t){return Object(n["a"])({url:"/host/autorenew",method:"post",data:t})}},"129f":function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t===1/e:t!=t&&e!=e}},"1daf":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"authorize"},[a("div",{staticClass:"breadcrumb"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[1===t.host_data.group.id?a("el-breadcrumb-item",{attrs:{to:{path:"/cloud-server",query:{groupid:t.host_data.group.id}}}},[a("i",{staticClass:"iconfont icon-mofangDCIM"}),t._v(" "+t._s(t.host_data.group.groupname)+" ")]):2===t.host_data.group.id?a("el-breadcrumb-item",{attrs:{to:{path:"/servers",query:{groupid:t.host_data.group.id}}}},[a("i",{staticClass:"iconfont icon-mofangDCIM"}),t._v(" "+t._s(t.host_data.group.groupname)+" ")]):t.host_data.group.id>=3?a("el-breadcrumb-item",{attrs:{to:{path:"/other-servers",query:{groupid:t.host_data.group.id}}}},[a("i",{staticClass:"iconfont icon-mofangDCIM"}),t._v(" "+t._s(t.host_data.group.groupname)+" ")]):t._e(),a("el-breadcrumb-item",[t._v("详情")])],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{sm:16}},[a("el-card",{staticClass:"product-box"},[a("div",{staticClass:"page-title"},[t._v("授权软件")]),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{sm:16}},[a("div",{staticClass:"authorize-product-box authorize-product-box1"},[a("div",{staticClass:"ellipsis"},[a("span",{staticClass:"square"}),a("span",{staticClass:"square"}),a("span",{staticClass:"square"})]),a("div",{staticClass:"authorize-product-label",style:{background:t.statusOptions[t.host_data.domainstatus]?t.statusOptions[t.host_data.domainstatus].color:"#2c67ee"}},[t._v(" "+t._s(t.host_data.domainstatus_desc))]),a("h4",{staticClass:"authorize-product-title"},[t._v(t._s(t.host_data.productname))]),a("p",{staticClass:"authorize-product-desc"},[t._v(t._s(t.host_data.domain))]),a("div",{staticClass:"config_options mb-10"},t._l(t.pageData.config_options,(function(e,n){return a("span",{key:"config"+n,staticClass:"mr-20"},[a("span",{staticClass:"square"}),t._v(t._s(e.name)+"："+t._s(e.sub_name)+" ")])})),0),a("div",{staticClass:"custom_field"},t._l(t.pageData.custom_field_data,(function(e,n){return a("span",{key:"customfield"+n,staticClass:"mr-20"},[a("span",{staticClass:"square"}),t._v(t._s(e.fieldname)+"："+t._s(e.value)+" ")])})),0),t.host_cancel.init||"Active"!==t.host_data.domainstatus&&"Suspended"!==t.host_data.domainstatus?t._e():a("div",[Array.isArray(t.host_cancel)&&!t.host_cancel.length?a("div",{staticClass:"button",staticStyle:{cursor:"pointer"},on:{click:function(e){t.cancelDialog=!0}}},[t._v("停用")]):a("el-button",{staticClass:"mt-30",attrs:{size:"mini",type:"danger"},on:{click:t.deleteCancel}},[t._v(" "+t._s("Immediate"!==t.host_cancel.type?"到期时停用":"立即停用")+" ")])],1)])]),a("el-col",{attrs:{sm:8}},[a("div",{staticClass:"authorize-product-box authorize-product-box2",staticStyle:{"min-height":"112px"}},[a("div",{staticClass:"ellipsis"},[a("span",{staticClass:"square"}),a("span",{staticClass:"square"})]),a("div",{staticClass:"icon"},[a("i",{staticClass:"iconfont icon-dunpai"})]),a("p",{staticClass:"font-gray"},[t._v("授权码")]),a("div",{staticClass:"copy-authorize"},[a("p",{staticStyle:{"word-break":"break-word"}},[t._v(t._s(t.host_data.domain||"-"))]),a("i",{ref:t.host_data.domain,staticClass:"iconfont icon-fuzhiyemian cursor-pointer",attrs:{"data-clipboard-text":t.host_data.domain},on:{click:function(e){return t.clickCopy(t.host_data.domain)},mouseenter:function(e){return t.clickCopy(t.host_data.domain)}}})])]),a("div",{staticClass:"authorize-product-box authorize-product-box3 mt-20"},[a("div",{staticClass:"ellipsis"},[a("span",{staticClass:"square"}),a("span",{staticClass:"square"})]),a("div",{staticClass:"icon"},[a("i",{staticClass:"iconfont icon-dunpai"})]),a("p",{staticClass:"font-gray"},[t._v("IP地址")]),a("div",{staticClass:"copy-authorize"},[a("p",[t._v(t._s(t.host_data.dedicatedip||"-"))])])])])],1),a("div",{staticClass:"dir"},[a("div",{staticClass:"box"},[a("div",{staticClass:"dir-left"},[a("div",{staticClass:"icon"},[a("i",{staticClass:"iconfont icon-wangluo"})]),a("span",{staticClass:"title"},[t._v(t._s(t.pageData.module_client_main_area[0]?t.pageData.module_client_main_area[0].name:"有效域名"))]),a("span",[t._v(t._s(t.pageData.module_client_main_area[0]?t.pageData.module_client_main_area[0].value:"-"))])]),t.pageData.module_client_main_area[0]?a("el-button",{staticClass:"button cursor-pointer",attrs:{disabled:""===t.pageData.module_client_main_area[0].value},on:{click:t.resetLicense}},[t.resetLoading?a("i",{staticClass:"el-icon-loading"}):t._e(),t._v(" 重置授权 ")]):t._e()],1),a("div",{staticClass:"box"},[a("div",{staticClass:"dir-left"},[a("div",{staticClass:"icon"},[a("i",{staticClass:"iconfont icon-shuju"})]),a("span",{staticClass:"title"},[t._v(t._s(t.pageData.module_client_main_area[1]?t.pageData.module_client_main_area[1].name:"有效目录"))]),a("span",[t._v(t._s(t.pageData.module_client_main_area[1]?t.pageData.module_client_main_area[1].value:"-"))])]),t.pageData.download_data.length?a("el-popover",{attrs:{placement:"bottom",width:"200",trigger:"hover"}},[a("div",{staticClass:"fz-12",staticStyle:{color:"#999999"}},[t._v("可下载文件：("+t._s(t.pageData.download_data.length)+")")]),a("div",{staticClass:"download_item_box"},t._l(t.pageData.download_data,(function(e,n){return a("div",{key:n,staticClass:"download_item"},[a("span",[t._v(t._s(e.locationname))]),a("span",{staticClass:"iconfont icon-xiazai",on:{click:function(a){return t.downloadFile(e.id)}}})])})),0),a("el-button",{staticClass:"button",attrs:{slot:"reference"},slot:"reference"},[t._v("下载文件")])],1):t._e()],1)])],1)],1),a("el-col",{attrs:{sm:8}},[a("el-card",{staticClass:"info-box"},[a("el-tabs",{on:{"tab-click":t.infoHandleClick},model:{value:t.rightTopTabName,callback:function(e){t.rightTopTabName=e},expression:"rightTopTabName"}},[a("el-tab-pane",{attrs:{label:"产品管理",name:"usermanage"}},[a("div",{staticClass:"financial"},[a("div",{staticClass:"authorize-product-box authorize-product-box4"},["free"!==t.renewData.host.billingcycle&&"onetime"!==t.renewData.host.billingcycle?a("div",["Paid"===t.renewData.host.status?a("div",[t.$moment(1e3*t.renewData.host.nextduedate).diff(t.$moment(new Date),"days")>=7?a("div",{staticClass:"authorize-product-label",style:{background:"#3fbf70"}},[t._v(t._s("还剩"+t.overdue))]):t._e(),t.$moment(1e3*t.renewData.host.nextduedate).diff(t.$moment(new Date),"days")<7&&t.$moment(1e3*t.renewData.host.nextduedate).diff(t.$moment(new Date),"seconds")>0?a("div",{staticClass:"authorize-product-label",style:{background:"#f7a200"}},[t._v("即将到期")]):t._e(),t.$moment(1e3*t.renewData.host.nextduedate).diff(t.$moment(new Date),"seconds")<=0?a("div",{staticClass:"authorize-product-label",style:{background:"#ee5186"}},[t._v("已逾期")]):t._e()]):t._e(),"Unpaid"===t.renewData.host.status?a("div",{staticClass:"authorize-product-label",style:{background:"#ee5186"}},[t._v("未支付")]):t._e()]):t._e(),a("div",{staticClass:"authorize-product-price"},[a("h4",{staticClass:"authorize-product-title"},[t._v(" "+t._s(t.renewData.currency.prefix)+t._s(t.renewData.host.firstpaymentamount))]),a("span",[t._v("首次订购价格")])]),a("div",{staticClass:"authorize-info"},[a("p",[a("span",{staticClass:"square"}),t._v("订购日期： "),a("span",[t._v(t._s(t.host_data.regdate?t.$moment(1e3*t.host_data.regdate).format("YYYY-MM-DD HH:mm"):"-"))])]),a("p",[a("span",{staticClass:"square"}),t._v("到期时间： "),"Paid"===t.renewData.host.status?a("span",[t._v(t._s(t.host_data.nextduedate&&"free"!==t.host_data.billingcycle&&"onetime"!==t.host_data.billingcycle?t.$moment(1e3*t.host_data.nextduedate).format("YYYY-MM-DD HH:mm"):"不到期"))]):t._e(),"Unpaid"===t.renewData.host.status?a("span",[t._v("-")]):t._e()])])]),a("div",{staticClass:"line"}),"free"!==t.renewData.host.billingcycle&&"Unpaid"===t.renewData.host.status?a("div",{staticClass:"pay"},[a("h4",[t._v("支付信息")]),a("div",{staticClass:"pay-item"},[a("span",{staticClass:"label"},[t._v("支付价格")]),a("span",{staticClass:"pay-price"},[t._v(t._s(t.renewData.currency.prefix)+t._s(t.renewData.host.firstpaymentamount))])]),a("div",{staticClass:"pay-item"},[a("span",{staticClass:"label"},[t._v("支付周期")]),a("span",[t._v(t._s(t.renewData.host.billingcycle_zh))])]),a("el-button",{staticClass:"mt-30 mr-10",attrs:{type:"primary",size:"small"},on:{click:t.payNow}},[t._v("立即支付")])],1):t._e(),"free"!==t.renewData.host.billingcycle&&"Paid"===t.renewData.host.status?a("div",{staticClass:"pay"},[a("h4",[t._v("续费信息")]),a("div",{staticClass:"pay-item"},[a("span",{staticClass:"label"},[t._v("支付价格")]),a("span",{staticClass:"pay-price"},[a("span",[t._v(t._s(t.renewData.currency.prefix))]),"ontrial"!==t.renewData.host.billingcycle?a("span",[t._v(t._s(t.renewData.host.amount))]):t._e(),"ontrial"===t.renewData.host.billingcycle?a("span",[t._v(t._s(Number(t.renewData.cycle[0].amount).toFixed(2)))]):t._e()])]),a("div",{staticClass:"pay-item"},[a("span",{staticClass:"label"},[t._v("支付周期")]),a("el-select",{attrs:{placeholder:"请选择",size:"mini"},on:{change:function(e){return t.getPrice(t.renewForm.billingcycles)}},model:{value:t.renewForm.billingcycles,callback:function(e){t.$set(t.renewForm,"billingcycles",e)},expression:"renewForm.billingcycles"}},t._l(t.renewData.cycle,(function(t){return a("el-option",{key:t.billingcycle,attrs:{label:t.billingcycle_zh,value:t.billingcycle}})})),1)],1),"onetime"!==t.renewData.host.billingcycle?a("div",{staticClass:"pay-item"},[a("span",{staticClass:"label"},[t._v("自动余额续费")]),a("el-switch",{attrs:{"active-value":1,"inactive-value":0},on:{change:t.changeRenew},model:{value:t.initiative_renewS,callback:function(e){t.initiative_renewS=e},expression:"initiative_renewS"}})],1):t._e(),"onetime"!==t.renewData.host.billingcycle?a("el-button",{staticClass:"mt-30 mr-10",attrs:{type:"primary",size:"small"},on:{click:t.renew}},[t._v("立即续费")]):t._e(),"Active"===t.host_data.domainstatus&&1===t.host_data.allow_upgrade_config?a("el-button",{staticClass:"mt-30",attrs:{type:"primary",size:"small"},on:{click:function(e){t.upgradeDialog=!0}}},[t._v("升降级选项")]):t._e()],1):t._e()])]),a("el-tab-pane",{attrs:{label:"交易记录",name:"transaction"}},[a("transactionRecord",{ref:"transactionRecord"})],1)],1)],1)],1),a("el-col",{staticClass:"mt-20",attrs:{span:24}},[a("el-card",[a("authorizeBottom",{attrs:{hid:Number(t.$route.query.id)}})],1)],1)],1),a("el-dialog",{attrs:{visible:t.cancelDialog,title:t.$t("cloudServer.chooseDeleteTime"),width:"25%","before-close":t.beforeClose},on:{"update:visible":function(e){t.cancelDialog=e},open:t.cancelOpen,opened:t.cancelOpened}},[a("el-form",{ref:"cancelForm",attrs:{model:t.cancelFormData,rules:t.cancelRules,"label-width":"auto"}},[a("el-form-item",{attrs:{label:t.$t("cloudServer.cancelTime"),prop:"type"}},[a("el-select",{staticClass:"w-100",model:{value:t.cancelFormData.type,callback:function(e){t.$set(t.cancelFormData,"type",e)},expression:"cancelFormData.type"}},[a("el-option",{attrs:{value:"Immediate",label:t.$t("cloudServer.immediate")}}),"free"!==t.host_data.billingcycle&&"onetime"!==t.host_data.billingcycle?a("el-option",{attrs:{value:"Endofbilling",label:t.$t("cloudServer.waitingForEnd")}}):t._e()],1)],1),a("el-form-item",{attrs:{label:t.$t("cloudServer.cancelReason"),prop:"tempReason"}},[a("el-select",{staticClass:"w-100",on:{change:function(e){t.cancelFormData.reason=""}},model:{value:t.cancelFormData.tempReason,callback:function(e){t.$set(t.cancelFormData,"tempReason",e)},expression:"cancelFormData.tempReason"}},[t._l(t.cancelistOptions,(function(t,e){return a("el-option",{key:e,attrs:{value:t.reason,label:t.reason}})})),a("el-option",{attrs:{value:"other",label:t.$t("cloudServer.other")}})],2)],1),"other"===t.cancelFormData.tempReason?a("el-form-item",{attrs:{label:"",prop:"reason"}},[a("el-input",{staticClass:"w-100",attrs:{type:"textarea",placeholder:t.$t("cloudServer.pleaseEnterReason")},model:{value:t.cancelFormData.reason,callback:function(e){t.$set(t.cancelFormData,"reason",e)},expression:"cancelFormData.reason"}})],1):t._e()],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.beforeClose}},[t._v(t._s(t.$t("cloudServer.cancel")))]),a("el-button",{attrs:{type:"primary"},on:{click:t.cancelSubmit}},[t._v(t._s(t.$t("cloudServer.determine")))])],1)],1),a("payNew",{ref:"controls",on:{"pay-success":t.paySuccess}}),a("el-dialog",{attrs:{visible:t.upgradeDialog,title:"升降级选项",width:"60%"},on:{"update:visible":function(e){t.upgradeDialog=e},open:function(e){t.upgradeType=2}}},[2===t.upgradeType?a("upgradeConfig",{on:{nextClick:function(e){return t.upgradeNext(2)}}}):t._e(),3===t.upgradeType?a("upgradePay",{attrs:{upgradeTypeChild:t.upgradeTypeChild,upgradeExtra:t.upgradeExtra},on:{extraBack:function(e){t.upgradeType=2},upgradePaySuccess:t.upgradePaySuccess}}):t._e()],1)],1)},s=[],r=(a("99af"),a("96cf"),a("1da1")),i=a("a78e"),o=a.n(i),c=a("a27e");function l(t){return Object(c["a"])({url:"host/header",params:{host_id:t}})}function u(t){return Object(c["a"])({url:"user_logdcims",params:t})}function d(t){return Object(c["a"])({url:"developer/buydeveloperapplist",params:t})}function p(t){return Object(c["a"])({url:"host/hostrecharge",params:t})}function g(t){return Object(c["a"])({url:"provision/default",method:"post",data:t})}function m(t){return Object(c["a"])({url:"provision/button",method:"post",data:t})}var h=a("048a"),_=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"authorize-bottom"},[a("div",{staticClass:"box_input"},[a("el-input",{attrs:{placeholder:t.$t("standaloneServer.placeholderSearch")},model:{value:t.search.input,callback:function(e){t.$set(t.search,"input",e)},expression:"search.input"}})],1),a("el-tabs",{model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"日志",name:"log"}},[a("div",{staticClass:"info_box_log info_box_list"},[a("el-table",{staticStyle:{width:"100%"},attrs:{border:"",data:t.logTableData,"header-cell-style":{"font-size":"14px",color:"#7c7c7c","font-weight":"normal"},height:"250"},on:{"sort-change":t.changeReSort}},[a("el-table-column",{attrs:{prop:"create_time",label:t.$t("standaloneServer.operatingTime"),align:"center",width:"180",sortable:"custom"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[a("div",[t._v(t._s(t.$moment(1e3*n.create_time).format("YYYY-MM-DD HH:mm:ss")))])]}}])}),a("el-table-column",{attrs:{prop:"description",label:t.$t("standaloneServer.operatingDetail"),"min-width":"200"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[a("div",{domProps:{innerHTML:t._s(n.description)}})]}}])}),a("el-table-column",{attrs:{prop:"user",label:t.$t("standaloneServer.operator"),align:"center",width:"150",sortable:"custom"}}),a("el-table-column",{attrs:{prop:"ipaddr",label:t.$t("standaloneServer.ipAddress"),align:"center",width:"150",sortable:"custom"}})],1)],1)])],1),a("div",{staticClass:"box_log_paging"},[a("el-pagination",{attrs:{background:"",layout:"total, sizes, prev, pager, next","prev-text":t.$t("Previous"),"next-text":t.$t("Nextpage"),"current-page":t.page.page,"page-size":t.page.pageSize,total:t.page.total},on:{"update:currentPage":function(e){return t.$set(t.page,"page",e)},"update:current-page":function(e){return t.$set(t.page,"page",e)},"update:pageSize":function(e){return t.$set(t.page,"pageSize",e)},"update:page-size":function(e){return t.$set(t.page,"pageSize",e)},"update:total":function(e){return t.$set(t.page,"total",e)},"size-change":t.getData,"current-change":t.getData}})],1),a("payNew",{ref:"controls",on:{"pay-success":t.paySuccess}})],1)},f=[],v=(a("a9e3"),a("ac1f"),a("841c"),a("2ef0")),b={data:function(){return{activeName:"apply",logTableData:[],appTableData:[],currency:{},page:{page:1,pageSize:20,total:0,orderby:"id",sorting:"desc"},search:{input:"",timer:null}}},props:{hid:{type:Number,default:0}},computed:{},watch:{"search.input":{handler:function(){var t=this;this.search.timer&&clearTimeout(this.search.timer),this.search.timer=setTimeout(Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.getData();case 1:case"end":return e.stop()}}),e)}))),200)}},activeName:{handler:function(){Object.assign(this.$data.page,this.$options.data().page),Object.assign(this.$data.search,this.$options.data().search),this.getData()},immediate:!0}},methods:{changeReSort:function(t){"descending"===t.order?(this.page.orderby=t.prop,this.page.sorting="desc"):(this.page.orderby=t.prop,this.page.sorting="asc"),this.getData()},getData:function(){switch(this.activeName){case"apply":break;case"log":this.getLogList();break;default:break}},getLogList:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var a,n,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a={hid:t.hid,page:t.page.page,limit:t.page.pageSize,orderby:t.page.orderby,sorting:t.page.sorting,keywords:t.search.input},e.next=3,u(a);case 3:if(n=e.sent,s=n.data,200===s.status){e.next=10;break}return t.$message.error(s.msg),e.abrupt("return",!1);case 10:t.logTableData=s.data.log_list,t.page.total=s.data.count;case 12:case"end":return e.stop()}}),e)})))()},getBuyDeveloperAppList:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var a,n,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a={hid:t.hid,page:t.page.page,limit:t.page.pageSize,orderby:t.page.orderby,sorting:t.page.sorting,keywords:t.search.input},e.next=3,d(a);case 3:if(n=e.sent,s=n.data,200===s.status){e.next=10;break}return t.$message.error(s.msg),e.abrupt("return",!1);case 10:t.appTableData=s.data.developer_apps,t.currency=s.data.currency,t.page.total=s.data.count;case 13:case"end":return e.stop()}}),e)})))()},renew:v.debounce(function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(h["i"])({hostid:e.id,billingcycles:e.billingcycle});case 2:a=t.sent,n=a.data,1001===n.status?this.$message.success(n.msg):200===n.status?this.$refs.controls.main({id:n.data.invoiceid,name:this.$t("standaloneServer.renew")}):this.$message.error(n.msg);case 5:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),200),payHandleClick:function(t){this.$refs.controls.main({id:t.invoice_id,name:this.$t("cart.settlement")})},paySuccess:function(t){}}},y=b,x=(a("8a1f"),a("2877")),C=Object(x["a"])(y,_,f,!1,null,"086b817c",null),w=C.exports,D=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"transaction-record"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,border:"","header-cell-style":{"font-size":"12px",color:"#7c7c7c","font-weight":"normal"},height:"460"}},[a("el-table-column",{attrs:{prop:"pay_time",label:t.$t("standaloneServer.transactiondate"),align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[t._v(" "+t._s(a.pay_time?t.$moment(1e3*a.pay_time).format("YYYY-MM-DD"):"-")+" ")]}}])}),a("el-table-column",{attrs:{prop:"type",label:t.$t("standaloneServer.source"),align:"center"}}),a("el-table-column",{attrs:{prop:"amount_in",label:t.$t("standaloneServer.price"),align:"center"}}),a("el-table-column",{attrs:{prop:"trans_id",label:t.$t("standaloneServer.serialNumber"),align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[t._v(" "+t._s(a.trans_id?a.trans_id:"-")+" ")]}}])}),a("el-table-column",{attrs:{prop:"gateway",label:t.$t("standaloneServer.payMent"),align:"center"}})],1),a("el-input",{staticClass:"mt-20 search-input",attrs:{size:"mini",type:"text",placeholder:"关键字搜索"},model:{value:t.search.input,callback:function(e){t.$set(t.search,"input",e)},expression:"search.input"}})],1)},$=[],k={components:{},data:function(){return{id:this.$route.query.id,hostrechargeKey:"",tableData:[],search:{input:"",timer:null}}},computed:{},watch:{"search.input":{handler:function(){var t=this;this.search.timer&&clearTimeout(this.search.timer),this.search.timer=setTimeout(Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.getRechargeList();case 1:case"end":return e.stop()}}),e)}))),200)}}},methods:{getRechargeList:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var a,n,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a={hostid:t.id,keywords:t.search.input},e.next=3,p(a);case 3:if(n=e.sent,s=n.data,200===s.status){e.next=10;break}return t.$message.error(s.msg),e.abrupt("return",!1);case 10:t.tableData=s.data.invoices;case 11:case"end":return e.stop()}}),e)})))()}}},S=k,O=(a("5c4b"),Object(x["a"])(S,D,$,!1,null,"43ba0610",null)),R=O.exports,P=a("b311"),j=a.n(P),q=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"box"},[t.configs.length?t._e():a("div",{staticClass:"tac"},[t._v(t._s(t.$t("standaloneServer.noUpDownProduct")))]),t._l(t.configs,(function(e,n){return a("div",{key:"config"+n,staticClass:"upgrade_configitem_box mb-20"},[a("el-row",[a("el-col",{attrs:{span:8}},[a("div",[t._v(" "+t._s(e.option_name)+" : "),[4,7,9,11,14,15,16,17,18,19].includes(e.option_type)?a("span",[t._v(t._s(e.qty_zh)+" "),4===e.option_type||15===e.option_type?a("span",{staticClass:"quantity_unit"},[t._v("个")]):t._e(),7===e.option_type||16===e.option_type?a("span",{staticClass:"quantity_unit"},[t._v(t._s(t.$t("cloudServer.core")))]):t._e(),9===e.option_type||17===e.option_type?a("span",{staticClass:"quantity_unit"},[t._v("GB")]):t._e(),11===e.option_type||18===e.option_type?a("span",{staticClass:"quantity_unit"},[t._v("Mbps")]):t._e(),14===e.option_type||19===e.option_type?a("span",{staticClass:"quantity_unit"},[t._v("GB")]):t._e()]):a("span",[t._v(t._s(e.suboption_name))]),e.option_name?a("span",{staticClass:"fr"},[t._v(">>>")]):t._e()])]),a("el-col",{attrs:{span:16}},[1===e.option_type?a("div",{staticClass:"pl-20"},[a("el-select",{attrs:{placeholder:t.$t("standaloneServer.pleaseSelect")},on:{change:function(e){t.nextDisable=!1}},model:{value:e.subid,callback:function(a){t.$set(e,"subid",a)},expression:"configItem.subid"}},t._l(e.sub,(function(t){return a("el-option",{key:t.id,attrs:{label:t.option_name,value:t.id}})})),1)],1):t._e(),2===e.option_type?a("div",{staticClass:"pl-20"},t._l(e.sub,(function(n,s){return a("el-radio",{key:"Radio"+s,attrs:{label:n.id},on:{change:function(e){t.nextDisable=!1}},model:{value:e.subid,callback:function(a){t.$set(e,"subid",a)},expression:"configItem.subid"}},[t._v(t._s(n.option_name))])})),1):t._e(),3===e.option_type?a("div",{staticClass:"pl-20"},t._l(e.sub,(function(n,s){return a("el-checkbox",{key:"yes/no"+s,attrs:{"true-label":n.id,"false-label":void 0},on:{change:function(e){t.nextDisable=!1}},model:{value:e.subid,callback:function(a){t.$set(e,"subid",a)},expression:"configItem.subid"}},[t._v(t._s(n.option_name)+" ")])})),1):t._e(),[4,7,9,11,14,15,16,17,18,19].includes(e.option_type)?a("div",{staticClass:"quantity_box"},[a("el-slider",{staticClass:"fl quantity_box_slider",attrs:{min:e.qty_minimum,max:e.qty_maximum},on:{change:function(e){t.nextDisable=!1}},model:{value:e.qty,callback:function(a){t.$set(e,"qty",a)},expression:"configItem.qty"}}),a("div",{staticClass:"fr quantity_box_input"},[a("el-input-number",{staticClass:"quantity_input",attrs:{controls:!1,precision:0,min:e.qty_minimum,max:e.qty_maximum},on:{change:function(e){t.nextDisable=!1}},model:{value:e.qty,callback:function(a){t.$set(e,"qty",a)},expression:"configItem.qty"}}),4===e.option_type||15===e.option_type?a("span",{staticClass:"quantity_unit"},[t._v("个")]):t._e(),7===e.option_type||16===e.option_type?a("span",{staticClass:"quantity_unit"},[t._v(t._s(t.$t("cloudServer.core")))]):t._e(),9===e.option_type||17===e.option_type?a("span",{staticClass:"quantity_unit"},[t._v("GB")]):t._e(),11===e.option_type||18===e.option_type?a("span",{staticClass:"quantity_unit"},[t._v("Mbps")]):t._e(),14===e.option_type||19===e.option_type?a("span",{staticClass:"quantity_unit"},[t._v("GB")]):t._e()],1)],1):t._e(),5===e.option_type?a("div",{staticClass:"pl-20"},[a("el-select",{staticStyle:{"margin-right":"10px","margin-bottom":"10px"},attrs:{placeholder:t.$t("standaloneServer.pleaseSelect")},on:{change:function(a){return t.osSelectChange(e.osName)}},model:{value:e.osName,callback:function(a){t.$set(e,"osName",a)},expression:"configItem.osName"}},t._l(e.sub,(function(t,e){return a("el-option",{key:e,attrs:{label:e,value:e}})})),1),a("el-select",{staticStyle:{"margin-bottom":"10px",width:"300px"},attrs:{placeholder:t.$t("standaloneServer.pleaseSelect")},on:{change:function(e){t.nextDisable=!1}},model:{value:e.subid,callback:function(a){t.$set(e,"subid",a)},expression:"configItem.subid"}},t._l(e.osVersionOptions,(function(t){return a("el-option",{key:t.id,attrs:{label:t.version,value:t.id}})})),1)],1):t._e(),6===e.option_type||8===e.option_type||10===e.option_type||13===e.option_type?a("div",{staticClass:"pl-20",staticStyle:{"padding-top":"5px"},attrs:{span:24}},t._l(e.sub,(function(n,s){return a("div",{key:s,staticClass:"select_block_item",class:{block_item_active:n.id===e.subid},on:{click:function(a){return t.selectBlockChange(e,n)}}},[t._v(" "+t._s(n.option_name)+" ")])})),0):t._e(),12===e.option_type?a("div",{staticClass:"pl-20",attrs:{span:24}},[a("div",{staticClass:"country_box"},t._l(e.sub,(function(n,s){return a("div",{key:s,staticClass:"country_item fl",class:{country_item_active:n.active,country_item_noarea:n.noarea},on:{click:function(a){return t.cityChange(e,n,t.configs)}}},[a("div",{staticClass:"country_item_innerbox"},[a("img",{staticClass:"country_item_flag",attrs:{src:"/upload/common/country/"+n.country_code+".png",alt:""}}),a("div",{staticClass:"country_item_name"},[t._v(t._s(n.city))])]),n.noarea?t._e():a("div",[a("el-select",{attrs:{size:"mini",disabled:!n.active||1===n.area.length&&""===n.area[0].area},model:{value:n.areaId,callback:function(e){t.$set(n,"areaId",e)},expression:"cityItem.areaId"}},t._l(n.area,(function(t,e){return a("el-option",{key:e,attrs:{label:t.area_zh,value:t.id}})})),1)],1)])})),0)]):t._e()])],1)],1)})),t.configs.length?a("div",{staticClass:"tar"},[a("el-button",{attrs:{type:"primary",disabled:t.nextDisable},on:{click:t.nextHandleClick}},[t._v(t._s(t.$t("standaloneServer.next"))+" ")])],1):t._e()],2)},z=[],T=(a("4160"),a("caad"),a("d81d"),a("d3b7"),a("25f0"),a("2532"),a("5319"),a("4c53"),a("159b"),a("27fd")),F={metaInfo:function(){return{title:this.$t("standaloneServer.upDownOptions"),htmlAttrs:{lang:this.$t("htmlAttrs.lang"),amp:!0}}},data:function(){return{id:this.$route.query.id,configs:[1],upgradeSubmitData:{hid:this.$route.query.id,currencyid:void 0,promo_code:void 0,configoption:[]},nextDisable:!0}},methods:{getData:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(T["M"])({hid:t.id,currencyid:void 0});case 2:a=e.sent,n=a.data,200!==n.status||((n.data.host||[]).forEach((function(e){if(5===e.option_type)for(var a in e.sub)e.sub[a].osName=a;else 12===e.option_type?(e.sub=t.objToArr(e.sub,"dataCenter"),(e.sub||[]).forEach((function(t){var a=t.area.map((function(t){return t.id}));a.includes(e.subid)?(t.active=!0,t.areaId=e.subid):t.active=!1,t.noarea=!0,(t.area||[]).forEach((function(e){""===e.area?e.area_zh="无配置区域":t.noarea=!1}))}))):[4,7,9,11,14,15,16,17,18,19].includes(e.option_type)&&(e.qty_zh=e.qty)})),t.configs=n.data.host,t.osSelectChange(void 0,!0));case 5:case"end":return e.stop()}}),e)})))()},objToArr:function(t,e){var a=[];for(var n in t)"dataCenter"===e?(t[n].id=this.guid(),t[n].active=!1,t[n].city=n,t[n].areaId=void 0):t[n].osName=n,a.push(t[n]);return a},guid:function(){return"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0,a="x"===t?e:3&e|8;return a.toString(16)}))},osSelectChange:function(t,e){var a=this;(this.configs||[]).forEach((function(n){if(5!==n.option_type)return!1;var s=function(s){t===s&&(n.subid=n.sub[s].child[0].id,n.osVersionOptions=n.sub[s].child),e?(n.sub[s].child||[]).forEach((function(t){n.subid===t.id&&(n.osName=s,n.osVersionOptions=n.sub[s].child)})):a.nextDisable=!1};for(var r in n.sub)s(r)}))},selectBlockChange:function(t,e){t.subid=e.id,this.$forceUpdate(),this.nextDisable=!1},cityChange:function(t,e,a){var n=this;this.nextDisable=!1,(a||[]).forEach((function(a){12===a.option_type&&t.oid===a.oid&&(a.sub||[]).forEach((function(t){e.id!==t.id?(t.areaId=void 0,t.active=!1):(t.areaId=t.area.length?t.area[0].id:void 0,n.areaChange(a,t),t.active=!0),n.$forceUpdate()}))}))},areaChange:function(t,e){t.subid=e.areaId},nextHandleClick:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.upgradeSubmitData.configoption=[],(t.configs||[]).forEach((function(e){[4,7,9,11,14,15,16,17,18,19].includes(e.option_type)?t.upgradeSubmitData.configoption[e.oid]=e.qty:t.upgradeSubmitData.configoption[e.oid]=e.subid})),e.next=4,Object(T["O"])(t.$qs.stringify(t.upgradeSubmitData));case 4:a=e.sent,n=a.data,200!==n.status?t.$message.error(n.msg):t.$emit("nextClick");case 7:case"end":return e.stop()}}),e)})))()}},created:function(){this.getData()}},I=F,N=(a("86ce"),Object(x["a"])(I,q,z,!1,null,"dede23ba",null)),E=N.exports,L=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"order"},["product"===t.upgradeType?a("div",{staticClass:"order_box"},[a("el-row",{staticClass:"box_goodsitem_box"},[a("el-col",{attrs:{span:24}},[a("div",{staticClass:"goodsitem_box_header"},[a("div",[a("span",[t._v(t._s(t.proPageData.old_host.host))])])]),a("el-row",{staticClass:"goodsitem_box_body"},[a("el-col",{staticClass:"box_body_left",attrs:{lg:18,xs:24}},[t._v(" "+t._s(t.$t("standaloneServer.newProduct"))+": "+t._s(t.proPageData.des)+" ")]),a("el-col",{staticClass:"box_body_right",attrs:{lg:6,xs:24}},[a("div",[a("span",[t._v(" "+t._s(t.proPageData.currency.prefix)+" "+t._s(t.proPageData.amount)+" "+t._s(t.proPageData.suffix))]),a("span",{staticClass:"body_right_cycle"},[t._v("/ "+t._s(t.proPageData.billingcycle_zh))])])])],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:24}},[a("div",{staticClass:"fr"},[a("div",{staticClass:"order_box_total"},[a("div",[t._v(t._s(t.$t("standaloneServer.total")))]),a("div",{staticClass:"box_total_money"},[a("span",{staticClass:"total_money_price"},[t._v(t._s(t.proPageData.currency.prefix)+" "+t._s(t.proPageData.amount_total)+" "+t._s(t.proPageData.suffix))]),a("span",{staticStyle:{"font-size":"12px",color:"#999999"}},[t._v(" / "+t._s(t.proPageData.billingcycle_zh))])])]),a("div",{staticClass:"youhui"},[t._v(" "+t._s(Number(t.proPageData.saleproducts)?"(客户折扣:"+t.proPageData.currency.prefix+Number(t.proPageData.saleproducts).toFixed(2)+")":"")+" ")]),a("div",{staticClass:"order_box_promo"},[a("el-input",{staticClass:"box_promo_inp",attrs:{placeholder:t.$t("standaloneServer.placeholderPromo")},on:{change:t.promoChange},model:{value:t.promoCode,callback:function(e){t.promoCode=e},expression:"promoCode"}}),a("el-button",{staticClass:"box_promo_btn",attrs:{type:"primary"},on:{click:t.addProductCode}},[t._v(" "+t._s(t.$t("standaloneServer.usePromo")))])],1),a("div",[a("el-button",{staticClass:"order_box_topay",attrs:{type:"primary",loading:t.btnLoading},on:{click:t.proUpgradePay}},[t._v(" "+t._s(t.$t("standaloneServer.settlement")))])],1),a("div",{staticClass:"tar"},[a("el-button",{staticClass:"order_box_continue",attrs:{type:"text"},on:{click:t.backHandleClick}},[t._v(" "+t._s(t.$t("standaloneServer.goBack")))])],1)])])],1)],1):t._e(),"config"===t.upgradeType?a("div",{staticClass:"order_box"},[a("el-row",{staticClass:"box_goodsitem_box"},[a("el-col",{attrs:{span:24}},[a("div",{staticClass:"goodsitem_box_header"},[a("div",[a("span",[t._v(t._s(t.configPageData.name))])])]),a("el-row",{staticClass:"goodsitem_box_body"},[a("el-col",{staticClass:"box_body_left",attrs:{lg:18,xs:24}},t._l(t.configPageData.alloption,(function(e,n){return a("div",{key:n,staticClass:"body_left_item"},[t._v(" "+t._s(e.option_name)+": "),[4,7,9,11,14,15,16,17,18,19].includes(e.option_type)?a("span",{staticClass:"body_item_value"},[t._v(t._s(e.qty))]):a("span",{staticClass:"body_item_value"},[t._v(t._s(e.suboption_name))])])})),0),a("el-col",{staticClass:"box_body_right",attrs:{lg:6,xs:24}},[a("div",[a("span",[t._v(t._s(t.configPageData.currency.prefix)+" "+t._s(t.configPageData.subtotal)+" "+t._s(t.configPageData.currency.suffix))]),a("span",{staticClass:"body_right_cycle"},[t._v("/"+t._s(t.configPageData.billingcycle_zh))])])])],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:24}},[a("div",{staticClass:"fr"},[a("div",{staticClass:"order_box_total"},[a("div",[t._v(t._s(t.$t("standaloneServer.total")))]),a("div",{staticClass:"box_total_money"},[a("span",{staticClass:"total_money_price"},[t._v(t._s(t.configPageData.currency.prefix)+t._s(t.configPageData.total)+t._s(t.configPageData.currency.suffix))]),a("span",{staticStyle:{"font-size":"12px",color:"#999999"}},[t._v(" / "+t._s(t.configPageData.billingcycle_zh))])])]),a("div",{staticClass:"youhui"},[t._v(" "+t._s(Number(t.configPageData.saleproducts)?"(客户折扣:"+t.configPageData.currency.prefix+Number(t.configPageData.saleproducts).toFixed(2)+")":"")+" ")]),a("div",{staticClass:"order_box_promo"},[a("el-input",{staticClass:"box_promo_inp",attrs:{placeholder:t.$t("standaloneServer.placeholderPromo")},on:{change:t.promoChange},model:{value:t.promoCode,callback:function(e){t.promoCode=e},expression:"promoCode"}}),a("el-button",{staticClass:"box_promo_btn",attrs:{type:"primary"},on:{click:t.addConfigCode}},[t._v(" "+t._s(t.$t("standaloneServer.usePromo"))+" ")])],1),a("div",[a("el-button",{staticClass:"order_box_topay",attrs:{type:"primary",loading:t.btnLoading},on:{click:t.configUpgradePay}},[t._v(" "+t._s(t.$t("standaloneServer.settlement")))])],1),a("div",{staticClass:"tar"},[a("el-button",{staticClass:"order_box_continue",attrs:{type:"text"},on:{click:t.backHandleClick}},[t._v(" "+t._s(t.$t("standaloneServer.goBack")))])],1)])])],1)],1):t._e(),a("payNew",{ref:"control",on:{"pay-success":t.successCallBack}})],1)},B=[],M=a("2ef0"),H={props:{upgradeTypeChild:{type:String,default:"product"},upgradeExtra:{type:String,default:""}},data:function(){return{groupid:this.$route.query.groupid,id:this.$route.query.id,upgradeType:this.upgradeTypeChild,proPageData:{old_host:{id:0,host:"",domain:""},currency:{id:0,code:"",prefix:"",suffix:""}},configPageData:{alloption:[],currency:{id:1,code:"",prefix:"",suffix:""}},promoCode:"",payment:"",dialogVisible:!1,QRcodeUrl:"",payType:"",btnLoading:!1}},methods:{getProductData:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(T["Q"])({hid:t.id});case 2:a=e.sent,n=a.data,200!==n.status?t.$message.error(n.msg):(t.proPageData=n.data,t.promoCode=n.data.promo_code);case 5:case"end":return e.stop()}}),e)})))()},addProductCode:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(T["b"])({hid:t.id,pormo_code:t.promoCode});case 2:a=e.sent,n=a.data,200!==n.status?t.$message.error(n.msg):(t.$message.success(n.msg),t.getProductData());case 5:case"end":return e.stop()}}),e)})))()},proUpgradePay:M.throttle(Object(r["a"])(regeneratorRuntime.mark((function t(){var e,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.btnLoading=!0,t.next=3,Object(T["h"])({hid:this.proPageData.old_host.id});case 3:e=t.sent,a=e.data,200===a.status?this.$refs.control.main({id:a.data.invoiceid,name:this.$t("standaloneServer.upDown")}):1001===a.status?(this.$message.success(a.msg),this.$router.push({path:"/cloud-server",query:{groupid:this.groupid}})):this.$message.error(a.msg),this.btnLoading=!1;case 7:case"end":return t.stop()}}),t,this)}))),2e3),getConfigData:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(T["N"])({hid:t.id});case 2:a=e.sent,n=a.data,200!==n.status?t.$message.error(n.msg):(t.configPageData=n.data,t.promoCode=n.data.promo_code);case 5:case"end":return e.stop()}}),e)})))()},promoChange:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var a,n,s,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(""!==t.promoCode){e.next=14;break}if("product"!==t.upgradeType){e.next=9;break}return e.next=4,Object(T["H"])({hid:t.id});case 4:a=e.sent,n=a.data,200!==n.status?t.$message.error(n.msg):(t.$message.success(n.msg),t.getProductData()),e.next=14;break;case 9:return e.next=11,Object(T["I"])({hid:t.id});case 11:s=e.sent,r=s.data,200!==r.status?t.$message.error(r.msg):(t.$message.success(r.msg),t.getConfigData());case 14:case"end":return e.stop()}}),e)})))()},addConfigCode:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(T["a"])({hid:t.id,pormo_code:t.promoCode});case 2:a=e.sent,n=a.data,200!==n.status?t.$message.error(n.msg):(t.$message.success(n.msg),t.getConfigData());case 5:case"end":return e.stop()}}),e)})))()},configUpgradePay:M.throttle(Object(r["a"])(regeneratorRuntime.mark((function t(){var e,a,n,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:for(a in e={hid:this.id},e.configoption=[],this.configPageData.alloption)4===this.configPageData.alloption[a].option_type?e.configoption[this.configPageData.alloption[a].id]=this.configPageData.alloption[a].qty:e.configoption[this.configPageData.alloption[a].id]=this.configPageData.alloption[a].suboption_id;return this.btnLoading=!0,t.next=6,Object(T["g"])(this.$qs.stringify(e));case 6:n=t.sent,s=n.data,200===s.status?this.$refs.control.main({id:s.data.invoiceid,name:this.$t("standaloneServer.upDownOptions")}):1001===s.status?(this.$message.success(s.msg),"extra"===this.upgradeExtra?this.$emit("upgradePaySuccess"):this.$router.push({path:"/cloud-server",query:{groupid:this.groupid}})):this.$message.error(s.msg),this.btnLoading=!1;case 10:case"end":return t.stop()}}),t,this)}))),2e3),successCallBack:function(t){t&&("extra"===this.upgradeExtra?this.$emit("upgradePaySuccess"):this.$router.push({path:"/cloud-server",query:{groupid:this.groupid}}))},backHandleClick:function(){"extra"===this.upgradeExtra?this.$emit("extraBack"):this.$router.go(-1)}},created:function(){"config"===this.upgradeType?this.getConfigData():this.getProductData()},destroyed:function(){}},Y=H,A=(a("db5b"),Object(x["a"])(Y,L,B,!1,null,"42367cd8",null)),V=A.exports,U=a("2ef0"),G={metaInfo:{title:"授权软件"},components:{transactionRecord:R,authorizeBottom:w,upgradeConfig:E,upgradePay:V},data:function(){return{cancelistOptions:[],id:this.$route.query.id,rightTopTabName:"usermanage",bottomTabName:"app",statusOptions:{Pending:{label:"待开通",color:"#f7a200"},Active:{label:"已激活",color:"#3fbf70"},Fraud:{label:"有欺诈",color:"#e8523f"},Deleted:{label:"被删除",color:"#2d2d2d"},Suspended:{label:"已暂停",color:"#ee5186"}},host_data:{group:{}},host_cancel:{init:!0},cancelDialog:!1,cancelFormData:{id:this.$route.query.id,type:void 0,reason:"",tempReason:void 0},cancelRules:{type:[{required:!0,message:"请选择时间",trigger:"change"}],reason:[{required:!0,message:"请输入原因",trigger:"blur"}],tempReason:[{required:!0,message:"请选择原因",trigger:"change"}]},payFormData:{},renewData:{currency:{},cycle:[],host:{}},renewForm:{hostid:this.$route.query.id,billingcycles:""},initiative_renewS:0,pageData:{download_data:[],module_button:{control:[]},module_client_main_area:[],config_options:[]},resetLoading:!1,overdue:0,dataLoading:!0,upgradeDialog:!1,upgradeType:2,upgradeTypeChild:"config",upgradeExtra:"extra"}},computed:{},watch:{},methods:{changeRenew:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var a,n,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a={hostid:t.$route.query.id,initiative_renew:t.initiative_renewS},e.next=3,Object(h["a"])(a);case 3:n=e.sent,s=n.data,200!==s.status?t.$message.error(s.msg):t.$message.success(s.msg);case 6:case"end":return e.stop()}}),e)})))()},infoHandleClick:function(){"transaction"===this.rightTopTabName&&this.$refs.transactionRecord.getRechargeList()},getViewData:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,l(t.id);case 2:a=e.sent,n=a.data,200!==n.status?t.$message.error(n.msg):(t.cancelistOptions=n.data.cancelist,t.host_data=n.data.host_data,t.initiative_renewS=n.data.host_data.initiative_renew,t.host_cancel=n.data.host_cancel,t.getPrice(n.data.host_data.billingcycle),t.pageData=n.data,n.data.module_power_status&&t.getDefault());case 5:case"end":return e.stop()}}),e)})))()},getDefault:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,g({id:t.$route.query.id,func:"status"});case 2:a=e.sent,n=a.data,200!==n.status||(t.pageData.module_client_main_area[0].value=n.data.domain,t.pageData.module_client_main_area[1].value=n.data.installation_path,t.host_data.dedicatedip=n.data.ip);case 5:case"end":return e.stop()}}),e)})))()},cancelSubmit:function(){var t=this,e="";e="Immediate"===this.cancelFormData.type?"这将会立刻删除您的产品，操作不可逆，所有数据丢失":"产品将会在到期当天被立刻删除，操作不可逆，所有数据丢失","other"!==this.cancelFormData.tempReason&&(this.cancelFormData.reason=this.cancelFormData.tempReason),this.$refs.cancelForm.validate((function(a){if(!a)return!1;t.cancelDialog=!1,t.$confirm(e,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(r["a"])(regeneratorRuntime.mark((function e(){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(h["b"])(t.cancelFormData);case 2:a=e.sent,n=a.data,200!==n.status?t.$message.error(n.msg):(t.getViewData(),t.$message.success(n.msg));case 5:case"end":return e.stop()}}),e)})))).catch((function(){}))}))},cancelOpen:function(){this.cancelFormData.type=void 0,this.cancelFormData.tempReason=void 0,this.cancelFormData.reason=""},cancelOpened:function(){this.$refs.cancelForm.clearValidate()},beforeClose:function(){var t=this;this.$refs.cancelForm.resetFields(),setTimeout((function(){t.$refs.cancelForm.clearValidate(),t.cancelDialog=!1}),100)},deleteCancel:function(){var t=this,e="";e="Immediate"!==this.host_cancel.type?"您已选择到期时自动删除产品，当前可关闭停用设置，是否关闭？":"您已选择立刻删除产品，当前可关闭停用设置，是否关闭？",this.$confirm(e,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(r["a"])(regeneratorRuntime.mark((function e(){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(h["e"])({id:t.id});case 2:a=e.sent,n=a.data,200!==n.status?t.$message.error(n.msg):(t.getViewData(),t.$message.success(n.msg));case 5:case"end":return e.stop()}}),e)})))).catch((function(){}))},clickCopy:function(t){var e=this,a=0,n=new j.a(this.$refs[t]);n.on("success",(function(t){e.$message.success("复制成功"),a++,a>1&&n.destroy()})),n.on("error",(function(t){e.$message.error("复制失败")}))},payNow:U.debounce((function(){this.$refs.controls.main({id:this.renewData.host.id,name:this.$t("standaloneServer.pay")})}),200),getPrice:function(t){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function a(){var n,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e.dataLoading=!0,a.next=3,Object(h["g"])(e.id,t);case 3:n=a.sent,s=n.data,200!==s.status?e.$message.error(s.msg):(e.renewData=s.data,s.data.host.nextduedate&&"free"!==s.data.host.billingcycle&&"onetime"!==s.data.host.billingcycle?(e.overdue=e.$moment(1e3*s.data.host.nextduedate).diff(e.$moment(new Date),"days")+e.$t("standaloneServer.day"),0===parseInt(e.overdue)&&(e.overdue=e.$moment(1e3*s.data.host.nextduedate).diff(e.$moment(new Date),"hours")+e.$t("standaloneServer.hour"))):e.overdue="","ontrial"===s.data.host.billingcycle?e.renewForm.billingcycles=s.data.cycle[0].billingcycle:e.renewForm.billingcycles=s.data.host.billingcycle),e.dataLoading=!1;case 7:case"end":return a.stop()}}),a)})))()},renew:U.debounce(Object(r["a"])(regeneratorRuntime.mark((function t(){var e,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(h["i"])(this.renewForm);case 2:e=t.sent,a=e.data,1001===a.status?(this.$message.success(a.msg),this.getViewData()):200===a.status?this.$refs.controls.main({id:a.data.invoiceid,name:this.$t("standaloneServer.renew")}):this.$message.error(a.msg);case 5:case"end":return t.stop()}}),t,this)}))),200),paySuccess:function(t){t&&this.getViewData()},resetLicense:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.resetLoading=!0,e.next=3,m({id:t.id,func:"resetLicense"});case 3:a=e.sent,n=a.data,200!==n.status?t.$message.error(n.msg):t.$message.success(n.msg),t.resetLoading=!1,t.getViewData();case 8:case"end":return e.stop()}}),e)})))()},downloadFile:function(t){return Object(r["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a=o.a.get("OrfLcI2IqQItv0vS"),open("/download/product_file?id=".concat(t,"&jwt=").concat(a));case 2:case"end":return e.stop()}}),e)})))()},upgradeNext:function(t){this.upgradeType=3,1===t?this.upgradeTypeChild="product":2===t&&(this.upgradeTypeChild="config")},upgradePaySuccess:function(){this.upgradeDialog=!1,this.getViewData()}},created:function(){this.getViewData()}},Q=G,J=(a("66c6"),Object(x["a"])(Q,n,s,!1,null,"3a4201e0",null));e["default"]=J.exports},"1dde":function(t,e,a){var n=a("d039"),s=a("b622"),r=a("2d00"),i=s("species");t.exports=function(t){return r>=51||!n((function(){var e=[],a=e.constructor={};return a[i]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},2532:function(t,e,a){"use strict";var n=a("23e7"),s=a("5a34"),r=a("1d80"),i=a("ab13");n({target:"String",proto:!0,forced:!i("includes")},{includes:function(t){return!!~String(r(this)).indexOf(s(t),arguments.length>1?arguments[1]:void 0)}})},"25f0":function(t,e,a){"use strict";var n=a("6eeb"),s=a("825a"),r=a("d039"),i=a("ad6d"),o="toString",c=RegExp.prototype,l=c[o],u=r((function(){return"/a/b"!=l.call({source:"a",flags:"b"})})),d=l.name!=o;(u||d)&&n(RegExp.prototype,o,(function(){var t=s(this),e=String(t.source),a=t.flags,n=String(void 0===a&&t instanceof RegExp&&!("flags"in c)?i.call(t):a);return"/"+e+"/"+n}),{unsafe:!0})},"44e7":function(t,e,a){var n=a("861d"),s=a("c6b6"),r=a("b622"),i=r("match");t.exports=function(t){var e;return n(t)&&(void 0!==(e=t[i])?!!e:"RegExp"==s(t))}},"4c53":function(t,e,a){"use strict";var n=a("23e7"),s=a("857a"),r=a("af03");n({target:"String",proto:!0,forced:r("sub")},{sub:function(){return s(this,"sub","","")}})},"57a3":function(t,e,a){},"5a34":function(t,e,a){var n=a("44e7");t.exports=function(t){if(n(t))throw TypeError("The method doesn't accept regular expressions");return t}},"5c4b":function(t,e,a){"use strict";var n=a("c062"),s=a.n(n);s.a},"66c6":function(t,e,a){"use strict";var n=a("bb65"),s=a.n(n);s.a},8418:function(t,e,a){"use strict";var n=a("c04e"),s=a("9bf2"),r=a("5c6c");t.exports=function(t,e,a){var i=n(e);i in t?s.f(t,i,r(0,a)):t[i]=a}},"841c":function(t,e,a){"use strict";var n=a("d784"),s=a("825a"),r=a("1d80"),i=a("129f"),o=a("14c3");n("search",1,(function(t,e,a){return[function(e){var a=r(this),n=void 0==e?void 0:e[t];return void 0!==n?n.call(e,a):new RegExp(e)[t](String(a))},function(t){var n=a(e,t,this);if(n.done)return n.value;var r=s(t),c=String(this),l=r.lastIndex;i(l,0)||(r.lastIndex=0);var u=o(r,c);return i(r.lastIndex,l)||(r.lastIndex=l),null===u?-1:u.index}]}))},"857a":function(t,e,a){var n=a("1d80"),s=/"/g;t.exports=function(t,e,a,r){var i=String(n(t)),o="<"+e;return""!==a&&(o+=" "+a+'="'+String(r).replace(s,"&quot;")+'"'),o+">"+i+"</"+e+">"}},"86ce":function(t,e,a){"use strict";var n=a("57a3"),s=a.n(n);s.a},"8a1f":function(t,e,a){"use strict";var n=a("f458"),s=a.n(n);s.a},"99af":function(t,e,a){"use strict";var n=a("23e7"),s=a("d039"),r=a("e8b5"),i=a("861d"),o=a("7b0b"),c=a("50c4"),l=a("8418"),u=a("65f0"),d=a("1dde"),p=a("b622"),g=a("2d00"),m=p("isConcatSpreadable"),h=9007199254740991,_="Maximum allowed index exceeded",f=g>=51||!s((function(){var t=[];return t[m]=!1,t.concat()[0]!==t})),v=d("concat"),b=function(t){if(!i(t))return!1;var e=t[m];return void 0!==e?!!e:r(t)},y=!f||!v;n({target:"Array",proto:!0,forced:y},{concat:function(t){var e,a,n,s,r,i=o(this),d=u(i,0),p=0;for(e=-1,n=arguments.length;e<n;e++)if(r=-1===e?i:arguments[e],b(r)){if(s=c(r.length),p+s>h)throw TypeError(_);for(a=0;a<s;a++,p++)a in r&&l(d,p,r[a])}else{if(p>=h)throw TypeError(_);l(d,p++,r)}return d.length=p,d}})},ab13:function(t,e,a){var n=a("b622"),s=n("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(a){try{return e[s]=!1,"/./"[t](e)}catch(n){}}return!1}},af03:function(t,e,a){var n=a("d039");t.exports=function(t){return n((function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3}))}},bb65:function(t,e,a){},c062:function(t,e,a){},d81d:function(t,e,a){"use strict";var n=a("23e7"),s=a("b727").map,r=a("1dde"),i=a("ae40"),o=r("map"),c=i("map");n({target:"Array",proto:!0,forced:!o||!c},{map:function(t){return s(this,t,arguments.length>1?arguments[1]:void 0)}})},db5b:function(t,e,a){"use strict";var n=a("020d"),s=a.n(n);s.a},f458:function(t,e,a){}}]);